<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Structures in R | Economic Data Analysis</title>
  <meta name="description" content="Chapter 4 Data Structures in R | Economic Data Analysis" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Structures in R | Economic Data Analysis" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://www.julianfludwig.com/eda/files/bookcover.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Structures in R | Economic Data Analysis" />
  
  
  <meta name="twitter:image" content="https://www.julianfludwig.com/eda/files/bookcover.png" />



<meta name="date" content="2024-05-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-basics.html"/>
<link rel="next" href="process-data-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
<script src="libs/tabwid-1.1.3/tabwid.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">Economic Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><em>Preface</em></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#author"><i class="fa fa-check"></i>Author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-navigation"><i class="fa fa-check"></i>Book Navigation</a></li>
</ul></li>
<li class="part"><span><b>Part I</b></span></li>
<li class="chapter" data-level="" data-path="part-i.html"><a href="part-i.html"><i class="fa fa-check"></i><em>Part I: Introduction to R</em></a></li>
<li class="chapter" data-level="1" data-path="software-overview.html"><a href="software-overview.html"><i class="fa fa-check"></i><b>1</b> Software Overview</a></li>
<li class="chapter" data-level="2" data-path="software-installation.html"><a href="software-installation.html"><i class="fa fa-check"></i><b>2</b> Software Installation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="software-installation.html"><a href="software-installation.html#install-r"><i class="fa fa-check"></i><b>2.1</b> Install R</a></li>
<li class="chapter" data-level="2.2" data-path="software-installation.html"><a href="software-installation.html#install-rstudio"><i class="fa fa-check"></i><b>2.2</b> Install RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="software-installation.html"><a href="software-installation.html#install-r-markdown"><i class="fa fa-check"></i><b>2.3</b> Install R Markdown</a></li>
<li class="chapter" data-level="2.4" data-path="software-installation.html"><a href="software-installation.html#install-latex"><i class="fa fa-check"></i><b>2.4</b> Install LaTeX</a></li>
<li class="chapter" data-level="2.5" data-path="software-installation.html"><a href="software-installation.html#install-r-packages"><i class="fa fa-check"></i><b>2.5</b> Install R Packages</a></li>
<li class="chapter" data-level="2.6" data-path="software-installation.html"><a href="software-installation.html#step-test"><i class="fa fa-check"></i><b>2.6</b> 18-Step Test</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>3</b> R Basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#rstudio-interface"><i class="fa fa-check"></i><b>3.1</b> RStudio Interface</a></li>
<li class="chapter" data-level="3.2" data-path="r-basics.html"><a href="r-basics.html#basic-operations"><i class="fa fa-check"></i><b>3.2</b> Basic Operations</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="r-basics.html"><a href="r-basics.html#arithmetic-operations"><i class="fa fa-check"></i><b>3.2.1</b> Arithmetic Operations</a></li>
<li class="chapter" data-level="3.2.2" data-path="r-basics.html"><a href="r-basics.html#logical-operations"><i class="fa fa-check"></i><b>3.2.2</b> Logical Operations</a></li>
<li class="chapter" data-level="3.2.3" data-path="r-basics.html"><a href="r-basics.html#string-operations"><i class="fa fa-check"></i><b>3.2.3</b> String Operations</a></li>
<li class="chapter" data-level="3.2.4" data-path="r-basics.html"><a href="r-basics.html#variables"><i class="fa fa-check"></i><b>3.2.4</b> Variables</a></li>
<li class="chapter" data-level="3.2.5" data-path="r-basics.html"><a href="r-basics.html#data-types"><i class="fa fa-check"></i><b>3.2.5</b> Data Types</a></li>
<li class="chapter" data-level="3.2.6" data-path="r-basics.html"><a href="r-basics.html#data-structures"><i class="fa fa-check"></i><b>3.2.6</b> Data Structures</a></li>
<li class="chapter" data-level="3.2.7" data-path="r-basics.html"><a href="r-basics.html#vector-operations"><i class="fa fa-check"></i><b>3.2.7</b> Vector Operations</a></li>
<li class="chapter" data-level="3.2.8" data-path="r-basics.html"><a href="r-basics.html#missing-values"><i class="fa fa-check"></i><b>3.2.8</b> Missing Values</a></li>
<li class="chapter" data-level="3.2.9" data-path="r-basics.html"><a href="r-basics.html#attributes"><i class="fa fa-check"></i><b>3.2.9</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-basics.html"><a href="r-basics.html#dates-and-times"><i class="fa fa-check"></i><b>3.3</b> Dates and Times</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-basics.html"><a href="r-basics.html#posixct"><i class="fa fa-check"></i><b>3.3.1</b> Time Class (<code>POSIXct</code>)</a></li>
<li class="chapter" data-level="3.3.2" data-path="r-basics.html"><a href="r-basics.html#date"><i class="fa fa-check"></i><b>3.3.2</b> Date Class (<code>Date</code>)</a></li>
<li class="chapter" data-level="3.3.3" data-path="r-basics.html"><a href="r-basics.html#custom-date-and-time-formats"><i class="fa fa-check"></i><b>3.3.3</b> Custom Date and Time Formats</a></li>
<li class="chapter" data-level="3.3.4" data-path="r-basics.html"><a href="r-basics.html#operations-with-dates-and-times"><i class="fa fa-check"></i><b>3.3.4</b> Operations with Dates and Times</a></li>
<li class="chapter" data-level="3.3.5" data-path="r-basics.html"><a href="r-basics.html#current-date-and-time"><i class="fa fa-check"></i><b>3.3.5</b> Current Date and Time</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-basics.html"><a href="r-basics.html#graphs"><i class="fa fa-check"></i><b>3.4</b> Graphs</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="r-basics.html"><a href="r-basics.html#scatter-plot"><i class="fa fa-check"></i><b>3.4.1</b> Scatter Plot</a></li>
<li class="chapter" data-level="3.4.2" data-path="r-basics.html"><a href="r-basics.html#line-graph"><i class="fa fa-check"></i><b>3.4.2</b> Line Graph</a></li>
<li class="chapter" data-level="3.4.3" data-path="r-basics.html"><a href="r-basics.html#bar-chart"><i class="fa fa-check"></i><b>3.4.3</b> Bar Chart</a></li>
<li class="chapter" data-level="3.4.4" data-path="r-basics.html"><a href="r-basics.html#frequency-bar-chart"><i class="fa fa-check"></i><b>3.4.4</b> Frequency Bar Chart</a></li>
<li class="chapter" data-level="3.4.5" data-path="r-basics.html"><a href="r-basics.html#histogram"><i class="fa fa-check"></i><b>3.4.5</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="r-basics.html"><a href="r-basics.html#functions"><i class="fa fa-check"></i><b>3.5</b> Functions</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="r-basics.html"><a href="r-basics.html#how-functions-operate"><i class="fa fa-check"></i><b>3.5.1</b> How Functions Operate</a></li>
<li class="chapter" data-level="3.5.2" data-path="r-basics.html"><a href="r-basics.html#infix-operators"><i class="fa fa-check"></i><b>3.5.2</b> Infix Operators</a></li>
<li class="chapter" data-level="3.5.3" data-path="r-basics.html"><a href="r-basics.html#control-flow-operators"><i class="fa fa-check"></i><b>3.5.3</b> Control-Flow Operators</a></li>
<li class="chapter" data-level="3.5.4" data-path="r-basics.html"><a href="r-basics.html#help-and-documentation"><i class="fa fa-check"></i><b>3.5.4</b> Help and Documentation</a></li>
<li class="chapter" data-level="3.5.5" data-path="r-basics.html"><a href="r-basics.html#default-inputs"><i class="fa fa-check"></i><b>3.5.5</b> Default Inputs</a></li>
<li class="chapter" data-level="3.5.6" data-path="r-basics.html"><a href="r-basics.html#custom-functions"><i class="fa fa-check"></i><b>3.5.6</b> Custom Functions</a></li>
<li class="chapter" data-level="3.5.7" data-path="r-basics.html"><a href="r-basics.html#functions-from-r-packages"><i class="fa fa-check"></i><b>3.5.7</b> Functions from R Packages</a></li>
<li class="chapter" data-level="3.5.8" data-path="r-basics.html"><a href="r-basics.html#indirect-functions"><i class="fa fa-check"></i><b>3.5.8</b> Indirect Functions</a></li>
<li class="chapter" data-level="3.5.9" data-path="r-basics.html"><a href="r-basics.html#apply-functions"><i class="fa fa-check"></i><b>3.5.9</b> Apply Functions</a></li>
<li class="chapter" data-level="3.5.10" data-path="r-basics.html"><a href="r-basics.html#advanced-higher-order-functions"><i class="fa fa-check"></i><b>3.5.10</b> Advanced Higher-Order Functions</a></li>
<li class="chapter" data-level="3.5.11" data-path="r-basics.html"><a href="r-basics.html#wrapper-functions"><i class="fa fa-check"></i><b>3.5.11</b> Wrapper Functions</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="r-basics.html"><a href="r-basics.html#r-packages"><i class="fa fa-check"></i><b>3.6</b> R Packages</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="r-basics.html"><a href="r-basics.html#cran"><i class="fa fa-check"></i><b>3.6.1</b> CRAN</a></li>
<li class="chapter" data-level="3.6.2" data-path="r-basics.html"><a href="r-basics.html#load-and-update-packages"><i class="fa fa-check"></i><b>3.6.2</b> Load and Update Packages</a></li>
<li class="chapter" data-level="3.6.3" data-path="r-basics.html"><a href="r-basics.html#noteworthy-packages"><i class="fa fa-check"></i><b>3.6.3</b> Noteworthy Packages</a></li>
<li class="chapter" data-level="3.6.4" data-path="r-basics.html"><a href="r-basics.html#package-documentation"><i class="fa fa-check"></i><b>3.6.4</b> Package Documentation</a></li>
<li class="chapter" data-level="3.6.5" data-path="r-basics.html"><a href="r-basics.html#function-name-conflicts"><i class="fa fa-check"></i><b>3.6.5</b> Function Name Conflicts</a></li>
<li class="chapter" data-level="3.6.6" data-path="r-basics.html"><a href="r-basics.html#non-exported-functions"><i class="fa fa-check"></i><b>3.6.6</b> Non-Exported Functions</a></li>
<li class="chapter" data-level="3.6.7" data-path="r-basics.html"><a href="r-basics.html#the-tidyverse"><i class="fa fa-check"></i><b>3.6.7</b> The Tidyverse</a></li>
<li class="chapter" data-level="3.6.8" data-path="r-basics.html"><a href="r-basics.html#citing-r-packages"><i class="fa fa-check"></i><b>3.6.8</b> Citing R Packages</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="r-basics.html"><a href="r-basics.html#file-management"><i class="fa fa-check"></i><b>3.7</b> File Management</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="r-basics.html"><a href="r-basics.html#find-folder-path"><i class="fa fa-check"></i><b>3.7.1</b> Find Folder Path</a></li>
<li class="chapter" data-level="3.7.2" data-path="r-basics.html"><a href="r-basics.html#set-working-directory"><i class="fa fa-check"></i><b>3.7.2</b> Set Working Directory</a></li>
<li class="chapter" data-level="3.7.3" data-path="r-basics.html"><a href="r-basics.html#download-files"><i class="fa fa-check"></i><b>3.7.3</b> Download Files</a></li>
<li class="chapter" data-level="3.7.4" data-path="r-basics.html"><a href="r-basics.html#import-files"><i class="fa fa-check"></i><b>3.7.4</b> Import Files</a></li>
<li class="chapter" data-level="3.7.5" data-path="r-basics.html"><a href="r-basics.html#export-files"><i class="fa fa-check"></i><b>3.7.5</b> Export Files</a></li>
<li class="chapter" data-level="3.7.6" data-path="r-basics.html"><a href="r-basics.html#delete-files"><i class="fa fa-check"></i><b>3.7.6</b> Delete Files</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="r-basics.html"><a href="r-basics.html#optimal-workflow"><i class="fa fa-check"></i><b>3.8</b> Optimal Workflow</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="r-basics.html"><a href="r-basics.html#execute-as-you-write"><i class="fa fa-check"></i><b>3.8.1</b> Execute as You Write</a></li>
<li class="chapter" data-level="3.8.2" data-path="r-basics.html"><a href="r-basics.html#key-shortcuts"><i class="fa fa-check"></i><b>3.8.2</b> Key Shortcuts</a></li>
<li class="chapter" data-level="3.8.3" data-path="r-basics.html"><a href="r-basics.html#separate-window-for-r-script"><i class="fa fa-check"></i><b>3.8.3</b> Separate Window for R Script</a></li>
<li class="chapter" data-level="3.8.4" data-path="r-basics.html"><a href="r-basics.html#conclusion"><i class="fa fa-check"></i><b>3.8.4</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html"><i class="fa fa-check"></i><b>4</b> Data Structures in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#scalar"><i class="fa fa-check"></i><b>4.1</b> Scalar</a></li>
<li class="chapter" data-level="4.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#vector"><i class="fa fa-check"></i><b>4.2</b> Vector</a></li>
<li class="chapter" data-level="4.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#matrix"><i class="fa fa-check"></i><b>4.3</b> Matrix (<code>matrix</code>)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-matrix"><i class="fa fa-check"></i><b>4.3.1</b> Create a Matrix</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-matrix"><i class="fa fa-check"></i><b>4.3.2</b> Inspect a Matrix</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-matrix"><i class="fa fa-check"></i><b>4.3.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.3.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-matrix"><i class="fa fa-check"></i><b>4.3.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.3.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-matrix"><i class="fa fa-check"></i><b>4.3.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.3.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#element-wise-operations"><i class="fa fa-check"></i><b>4.3.6</b> Element-Wise Operations</a></li>
<li class="chapter" data-level="4.3.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#linear-algebra-operations"><i class="fa fa-check"></i><b>4.3.7</b> Linear Algebra Operations</a></li>
<li class="chapter" data-level="4.3.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-matrices"><i class="fa fa-check"></i><b>4.3.8</b> Combine Matrices</a></li>
<li class="chapter" data-level="4.3.9" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-matrix"><i class="fa fa-check"></i><b>4.3.9</b> Apply Family</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#list"><i class="fa fa-check"></i><b>4.4</b> List (<code>list</code>)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-list"><i class="fa fa-check"></i><b>4.4.1</b> Create a List</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-list"><i class="fa fa-check"></i><b>4.4.2</b> Inspect a List</a></li>
<li class="chapter" data-level="4.4.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-list"><i class="fa fa-check"></i><b>4.4.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.4.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-list"><i class="fa fa-check"></i><b>4.4.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.4.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-lists"><i class="fa fa-check"></i><b>4.4.5</b> Combine Lists</a></li>
<li class="chapter" data-level="4.4.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-list"><i class="fa fa-check"></i><b>4.4.6</b> Apply Family</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#data.frame"><i class="fa fa-check"></i><b>4.5</b> Data Frame (<code>data.frame</code>)</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-data-frame"><i class="fa fa-check"></i><b>4.5.1</b> Create a Data Frame</a></li>
<li class="chapter" data-level="4.5.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-data-frame"><i class="fa fa-check"></i><b>4.5.2</b> Inspect a Data Frame</a></li>
<li class="chapter" data-level="4.5.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-data.frame"><i class="fa fa-check"></i><b>4.5.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.5.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-data.frame"><i class="fa fa-check"></i><b>4.5.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.5.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-data.frame"><i class="fa fa-check"></i><b>4.5.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.5.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-data-frames"><i class="fa fa-check"></i><b>4.5.6</b> Combine Data Frames</a></li>
<li class="chapter" data-level="4.5.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-data.frame"><i class="fa fa-check"></i><b>4.5.7</b> Apply Family</a></li>
<li class="chapter" data-level="4.5.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#reshape-data-frames"><i class="fa fa-check"></i><b>4.5.8</b> Reshape Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#tibble"><i class="fa fa-check"></i><b>4.6</b> Tibble (<code>tbl_df</code>)</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-tibble"><i class="fa fa-check"></i><b>4.6.1</b> Create a Tibble</a></li>
<li class="chapter" data-level="4.6.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-tibble"><i class="fa fa-check"></i><b>4.6.2</b> Inspect a Tibble</a></li>
<li class="chapter" data-level="4.6.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-tibble"><i class="fa fa-check"></i><b>4.6.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.6.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-tibble"><i class="fa fa-check"></i><b>4.6.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.6.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-tibble"><i class="fa fa-check"></i><b>4.6.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.6.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-tibbles"><i class="fa fa-check"></i><b>4.6.6</b> Combine Tibbles</a></li>
<li class="chapter" data-level="4.6.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-tibble"><i class="fa fa-check"></i><b>4.6.7</b> Apply Family</a></li>
<li class="chapter" data-level="4.6.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#reshape-tibbles"><i class="fa fa-check"></i><b>4.6.8</b> Reshape Tibbles</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#data.table"><i class="fa fa-check"></i><b>4.7</b> Data Table (<code>data.table</code>)</a></li>
<li class="chapter" data-level="4.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#xts"><i class="fa fa-check"></i><b>4.8</b> Extensible Time Series (<code>xts</code>)</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-an-xts-object"><i class="fa fa-check"></i><b>4.8.1</b> Create an <code>xts</code> Object</a></li>
<li class="chapter" data-level="4.8.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-an-xts-object"><i class="fa fa-check"></i><b>4.8.2</b> Inspect an <code>xts</code> Object</a></li>
<li class="chapter" data-level="4.8.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-xts"><i class="fa fa-check"></i><b>4.8.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.8.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-xts"><i class="fa fa-check"></i><b>4.8.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.8.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-xts"><i class="fa fa-check"></i><b>4.8.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.8.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-xts-objects"><i class="fa fa-check"></i><b>4.8.6</b> Combine xts Objects</a></li>
<li class="chapter" data-level="4.8.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#time-series-transformations"><i class="fa fa-check"></i><b>4.8.7</b> Time Series Transformations</a></li>
<li class="chapter" data-level="4.8.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-xts"><i class="fa fa-check"></i><b>4.8.8</b> Apply Family</a></li>
<li class="chapter" data-level="4.8.9" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#resources-xts"><i class="fa fa-check"></i><b>4.8.9</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="process-data-in-r.html"><a href="process-data-in-r.html"><i class="fa fa-check"></i><b>5</b> Process Data in R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-bitcoin-price-data"><i class="fa fa-check"></i><b>5.1</b> Process Bitcoin Price Data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-dsv-file"><i class="fa fa-check"></i><b>5.1.1</b> Download DSV File</a></li>
<li class="chapter" data-level="5.1.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#import-dsv-file"><i class="fa fa-check"></i><b>5.1.2</b> Import DSV File</a></li>
<li class="chapter" data-level="5.1.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#inspect-data"><i class="fa fa-check"></i><b>5.1.3</b> Inspect Data</a></li>
<li class="chapter" data-level="5.1.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-bitcoin-price-data-clean-data"><i class="fa fa-check"></i><b>5.1.4</b> Clean Data</a></li>
<li class="chapter" data-level="5.1.5" data-path="process-data-in-r.html"><a href="process-data-in-r.html#visualize-data"><i class="fa fa-check"></i><b>5.1.5</b> Visualize Data</a></li>
<li class="chapter" data-level="5.1.6" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-bitcoin-price-data-export-data"><i class="fa fa-check"></i><b>5.1.6</b> Export Data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-stock-and-oil-prices"><i class="fa fa-check"></i><b>5.2</b> Process Stock and Oil Prices</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#web-api"><i class="fa fa-check"></i><b>5.2.1</b> Web API</a></li>
<li class="chapter" data-level="5.2.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-via-quantmod"><i class="fa fa-check"></i><b>5.2.2</b> Download via <code>quantmod</code></a></li>
<li class="chapter" data-level="5.2.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-via-quandl"><i class="fa fa-check"></i><b>5.2.3</b> Download via <code>Quandl</code></a></li>
<li class="chapter" data-level="5.2.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#clean-data"><i class="fa fa-check"></i><b>5.2.4</b> Clean Data</a></li>
<li class="chapter" data-level="5.2.5" data-path="process-data-in-r.html"><a href="process-data-in-r.html#plot-apple-stock-prices"><i class="fa fa-check"></i><b>5.2.5</b> Plot Apple Stock Prices</a></li>
<li class="chapter" data-level="5.2.6" data-path="process-data-in-r.html"><a href="process-data-in-r.html#plot-crude-oil-prices"><i class="fa fa-check"></i><b>5.2.6</b> Plot Crude Oil Prices</a></li>
<li class="chapter" data-level="5.2.7" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-stock-and-oil-prices-merge-data"><i class="fa fa-check"></i><b>5.2.7</b> Merge Data</a></li>
<li class="chapter" data-level="5.2.8" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-stock-and-oil-prices-transform-data"><i class="fa fa-check"></i><b>5.2.8</b> Transform Data</a></li>
<li class="chapter" data-level="5.2.9" data-path="process-data-in-r.html"><a href="process-data-in-r.html#tabulate-key-statistics"><i class="fa fa-check"></i><b>5.2.9</b> Tabulate Key Statistics</a></li>
<li class="chapter" data-level="5.2.10" data-path="process-data-in-r.html"><a href="process-data-in-r.html#visualize-correlations"><i class="fa fa-check"></i><b>5.2.10</b> Visualize Correlations</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data"><i class="fa fa-check"></i><b>5.3</b> Process House Price Data</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-excel-workbook"><i class="fa fa-check"></i><b>5.3.1</b> Download Excel Workbook</a></li>
<li class="chapter" data-level="5.3.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#import-excel-workbook"><i class="fa fa-check"></i><b>5.3.2</b> Import Excel Workbook</a></li>
<li class="chapter" data-level="5.3.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-inspect-and-clean-data"><i class="fa fa-check"></i><b>5.3.3</b> Inspect and Clean Data</a></li>
<li class="chapter" data-level="5.3.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-reshape-data"><i class="fa fa-check"></i><b>5.3.4</b> Reshape Data</a></li>
<li class="chapter" data-level="5.3.5" data-path="process-data-in-r.html"><a href="process-data-in-r.html#layered-line-graphs"><i class="fa fa-check"></i><b>5.3.5</b> Layered Line Graphs</a></li>
<li class="chapter" data-level="5.3.6" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-merge-data"><i class="fa fa-check"></i><b>5.3.6</b> Merge Data</a></li>
<li class="chapter" data-level="5.3.7" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-transform-data"><i class="fa fa-check"></i><b>5.3.7</b> Transform Data</a></li>
<li class="chapter" data-level="5.3.8" data-path="process-data-in-r.html"><a href="process-data-in-r.html#stationary-data"><i class="fa fa-check"></i><b>5.3.8</b> Stationary Data</a></li>
<li class="chapter" data-level="5.3.9" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-export-data"><i class="fa fa-check"></i><b>5.3.9</b> Export Data</a></li>
<li class="chapter" data-level="5.3.10" data-path="process-data-in-r.html"><a href="process-data-in-r.html#organize-data"><i class="fa fa-check"></i><b>5.3.10</b> Organize Data</a></li>
<li class="chapter" data-level="5.3.11" data-path="process-data-in-r.html"><a href="process-data-in-r.html#univariate-statistics"><i class="fa fa-check"></i><b>5.3.11</b> Univariate Statistics</a></li>
<li class="chapter" data-level="5.3.12" data-path="process-data-in-r.html"><a href="process-data-in-r.html#associative-statistics"><i class="fa fa-check"></i><b>5.3.12</b> Associative Statistics</a></li>
<li class="chapter" data-level="5.3.13" data-path="process-data-in-r.html"><a href="process-data-in-r.html#layered-scatter-plots"><i class="fa fa-check"></i><b>5.3.13</b> Layered Scatter Plots</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-data-resources"><i class="fa fa-check"></i><b>5.4</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html"><i class="fa fa-check"></i><b>6</b> Write Reports with R Markdown</a>
<ul>
<li class="chapter" data-level="6.1" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#create-an-r-markdown-document"><i class="fa fa-check"></i><b>6.1</b> Create an R Markdown Document</a></li>
<li class="chapter" data-level="6.2" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#yaml-header"><i class="fa fa-check"></i><b>6.2</b> YAML Header</a></li>
<li class="chapter" data-level="6.3" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#markdown-syntax"><i class="fa fa-check"></i><b>6.3</b> Markdown Syntax</a></li>
<li class="chapter" data-level="6.4" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#r-chunks"><i class="fa fa-check"></i><b>6.4</b> R Chunks</a></li>
<li class="chapter" data-level="6.5" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#embed-r-variables-into-text"><i class="fa fa-check"></i><b>6.5</b> Embed R Variables into Text</a></li>
<li class="chapter" data-level="6.6" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#latex-syntax-for-math"><i class="fa fa-check"></i><b>6.6</b> LaTeX Syntax for Math</a></li>
<li class="chapter" data-level="6.7" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#print-tables"><i class="fa fa-check"></i><b>6.7</b> Print Tables</a></li>
<li class="chapter" data-level="6.8" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing"><i class="fa fa-check"></i><b>6.8</b> Referencing</a>
<ul>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#setting-up-bookdown"><i class="fa fa-check"></i>Setting Up <code>bookdown</code></a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-equations"><i class="fa fa-check"></i>Referencing Equations</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-tables"><i class="fa fa-check"></i>Referencing Tables</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-figures"><i class="fa fa-check"></i>Referencing Figures</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-sections"><i class="fa fa-check"></i>Referencing Sections</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escape-characters"><i class="fa fa-check"></i><b>6.9</b> Escape Characters</a>
<ul>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escape-in-markdown-text"><i class="fa fa-check"></i>Escape in Markdown Text</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escape-in-code-chunks"><i class="fa fa-check"></i>Escape in Code Chunks</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escaped-characters"><i class="fa fa-check"></i>Escaped Characters</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#summary-and-resources"><i class="fa fa-check"></i><b>6.10</b> Summary and Resources</a></li>
</ul></li>
<li class="part"><span><b>Part II</b></span></li>
<li class="chapter" data-level="" data-path="part-ii.html"><a href="part-ii.html"><i class="fa fa-check"></i><em>Part II: Measurement in Economics</em></a></li>
<li class="chapter" data-level="7" data-path="economic-data-sources.html"><a href="economic-data-sources.html"><i class="fa fa-check"></i><b>7</b> Economic Data Sources</a>
<ul>
<li class="chapter" data-level="7.1" data-path="economic-data-sources.html"><a href="economic-data-sources.html#types-of-indicators"><i class="fa fa-check"></i><b>7.1</b> Types of Indicators</a></li>
<li class="chapter" data-level="7.2" data-path="economic-data-sources.html"><a href="economic-data-sources.html#data-source"><i class="fa fa-check"></i><b>7.2</b> Data Source</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="economic-data-sources.html"><a href="economic-data-sources.html#data-supplier-vs.-distributor"><i class="fa fa-check"></i><b>7.2.1</b> Data Supplier vs. Distributor</a></li>
<li class="chapter" data-level="7.2.2" data-path="economic-data-sources.html"><a href="economic-data-sources.html#bureau-of-economic-analysis-bea"><i class="fa fa-check"></i><b>7.2.2</b> Bureau of Economic Analysis (BEA)</a></li>
<li class="chapter" data-level="7.2.3" data-path="economic-data-sources.html"><a href="economic-data-sources.html#u.s.-census-bureau"><i class="fa fa-check"></i><b>7.2.3</b> U.S. Census Bureau</a></li>
<li class="chapter" data-level="7.2.4" data-path="economic-data-sources.html"><a href="economic-data-sources.html#bureau-of-labor-statistics-bls"><i class="fa fa-check"></i><b>7.2.4</b> Bureau of Labor Statistics (BLS)</a></li>
<li class="chapter" data-level="7.2.5" data-path="economic-data-sources.html"><a href="economic-data-sources.html#federal-reserve-board-of-governors"><i class="fa fa-check"></i><b>7.2.5</b> Federal Reserve Board of Governors</a></li>
<li class="chapter" data-level="7.2.6" data-path="economic-data-sources.html"><a href="economic-data-sources.html#u.s.-department-of-the-treasury"><i class="fa fa-check"></i><b>7.2.6</b> U.S. Department of the Treasury</a></li>
<li class="chapter" data-level="7.2.7" data-path="economic-data-sources.html"><a href="economic-data-sources.html#financial-market-exchanges"><i class="fa fa-check"></i><b>7.2.7</b> Financial Market Exchanges</a></li>
<li class="chapter" data-level="7.2.8" data-path="economic-data-sources.html"><a href="economic-data-sources.html#federal-reserve-economic-data-fred"><i class="fa fa-check"></i><b>7.2.8</b> Federal Reserve Economic Data (FRED)</a></li>
<li class="chapter" data-level="7.2.9" data-path="economic-data-sources.html"><a href="economic-data-sources.html#u.s.-department-of-agriculture-economic-research-service-ers"><i class="fa fa-check"></i><b>7.2.9</b> U.S. Department of Agriculture Economic Research Service (ERS)</a></li>
<li class="chapter" data-level="7.2.10" data-path="economic-data-sources.html"><a href="economic-data-sources.html#bloomberg"><i class="fa fa-check"></i><b>7.2.10</b> Bloomberg</a></li>
<li class="chapter" data-level="7.2.11" data-path="economic-data-sources.html"><a href="economic-data-sources.html#yahoo-finance"><i class="fa fa-check"></i><b>7.2.11</b> Yahoo Finance</a></li>
<li class="chapter" data-level="7.2.12" data-path="economic-data-sources.html"><a href="economic-data-sources.html#conclusion-1"><i class="fa fa-check"></i><b>7.2.12</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="business-accounting.html"><a href="business-accounting.html"><i class="fa fa-check"></i><b>8</b> Business Accounting</a>
<ul>
<li class="chapter" data-level="8.1" data-path="business-accounting.html"><a href="business-accounting.html#accounting-standards"><i class="fa fa-check"></i><b>8.1</b> Accounting Standards</a></li>
<li class="chapter" data-level="8.2" data-path="business-accounting.html"><a href="business-accounting.html#accounting-equation"><i class="fa fa-check"></i><b>8.2</b> Accounting Equation</a></li>
<li class="chapter" data-level="8.3" data-path="business-accounting.html"><a href="business-accounting.html#balance-sheet"><i class="fa fa-check"></i><b>8.3</b> Balance Sheet</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="business-accounting.html"><a href="business-accounting.html#assets"><i class="fa fa-check"></i><b>8.3.1</b> Assets</a></li>
<li class="chapter" data-level="8.3.2" data-path="business-accounting.html"><a href="business-accounting.html#liabilities"><i class="fa fa-check"></i><b>8.3.2</b> Liabilities</a></li>
<li class="chapter" data-level="8.3.3" data-path="business-accounting.html"><a href="business-accounting.html#equity"><i class="fa fa-check"></i><b>8.3.3</b> Equity</a></li>
<li class="chapter" data-level="8.3.4" data-path="business-accounting.html"><a href="business-accounting.html#transactions"><i class="fa fa-check"></i><b>8.3.4</b> Transactions</a></li>
<li class="chapter" data-level="8.3.5" data-path="business-accounting.html"><a href="business-accounting.html#book-vs.-market-value"><i class="fa fa-check"></i><b>8.3.5</b> Book vs. Market Value</a></li>
<li class="chapter" data-level="8.3.6" data-path="business-accounting.html"><a href="business-accounting.html#public-company"><i class="fa fa-check"></i><b>8.3.6</b> Public Company</a></li>
<li class="chapter" data-level="8.3.7" data-path="business-accounting.html"><a href="business-accounting.html#financial-firm"><i class="fa fa-check"></i><b>8.3.7</b> Financial Firm</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="business-accounting.html"><a href="business-accounting.html#ledger"><i class="fa fa-check"></i><b>8.4</b> Ledger</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="business-accounting.html"><a href="business-accounting.html#ledger-accounts"><i class="fa fa-check"></i><b>8.4.1</b> Ledger Accounts</a></li>
<li class="chapter" data-level="8.4.2" data-path="business-accounting.html"><a href="business-accounting.html#t-accounts"><i class="fa fa-check"></i><b>8.4.2</b> T-Accounts</a></li>
<li class="chapter" data-level="8.4.3" data-path="business-accounting.html"><a href="business-accounting.html#basis-for-financial-statements"><i class="fa fa-check"></i><b>8.4.3</b> Basis for Financial Statements</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="business-accounting.html"><a href="business-accounting.html#income-statement"><i class="fa fa-check"></i><b>8.5</b> Income Statement</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="business-accounting.html"><a href="business-accounting.html#stock-vs.-flow-variables"><i class="fa fa-check"></i><b>8.5.1</b> Stock vs. Flow Variables</a></li>
<li class="chapter" data-level="8.5.2" data-path="business-accounting.html"><a href="business-accounting.html#profit-equation"><i class="fa fa-check"></i><b>8.5.2</b> Profit Equation</a></li>
<li class="chapter" data-level="8.5.3" data-path="business-accounting.html"><a href="business-accounting.html#gross-profit"><i class="fa fa-check"></i><b>8.5.3</b> Gross Profit</a></li>
<li class="chapter" data-level="8.5.4" data-path="business-accounting.html"><a href="business-accounting.html#operating-income-ebit"><i class="fa fa-check"></i><b>8.5.4</b> Operating Income (EBIT)</a></li>
<li class="chapter" data-level="8.5.5" data-path="business-accounting.html"><a href="business-accounting.html#net-income-before-taxes-ebt"><i class="fa fa-check"></i><b>8.5.5</b> Net Income Before Taxes (EBT)</a></li>
<li class="chapter" data-level="8.5.6" data-path="business-accounting.html"><a href="business-accounting.html#net-income-eat"><i class="fa fa-check"></i><b>8.5.6</b> Net Income (EAT)</a></li>
<li class="chapter" data-level="8.5.7" data-path="business-accounting.html"><a href="business-accounting.html#transactions-1"><i class="fa fa-check"></i><b>8.5.7</b> Transactions</a></li>
<li class="chapter" data-level="8.5.8" data-path="business-accounting.html"><a href="business-accounting.html#corporate-income-tax"><i class="fa fa-check"></i><b>8.5.8</b> Corporate Income Tax</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="business-accounting.html"><a href="business-accounting.html#cash-flow-statement"><i class="fa fa-check"></i><b>8.6</b> Cash Flow Statement</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="business-accounting.html"><a href="business-accounting.html#operating-activities"><i class="fa fa-check"></i><b>8.6.1</b> Operating Activities</a></li>
<li class="chapter" data-level="8.6.2" data-path="business-accounting.html"><a href="business-accounting.html#investing-activities"><i class="fa fa-check"></i><b>8.6.2</b> Investing Activities</a></li>
<li class="chapter" data-level="8.6.3" data-path="business-accounting.html"><a href="business-accounting.html#financing-activities"><i class="fa fa-check"></i><b>8.6.3</b> Financing Activities</a></li>
<li class="chapter" data-level="8.6.4" data-path="business-accounting.html"><a href="business-accounting.html#net-change-in-cash"><i class="fa fa-check"></i><b>8.6.4</b> Net Change in Cash</a></li>
<li class="chapter" data-level="8.6.5" data-path="business-accounting.html"><a href="business-accounting.html#supplemental-information"><i class="fa fa-check"></i><b>8.6.5</b> Supplemental Information</a></li>
<li class="chapter" data-level="8.6.6" data-path="business-accounting.html"><a href="business-accounting.html#free-cash-flows"><i class="fa fa-check"></i><b>8.6.6</b> Free Cash Flows</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="business-accounting.html"><a href="business-accounting.html#conclusion-2"><i class="fa fa-check"></i><b>8.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html"><i class="fa fa-check"></i><b>9</b> Financial Performance Indicators</a>
<ul>
<li class="chapter" data-level="9.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#profitability-indicators"><i class="fa fa-check"></i><b>9.1</b> Profitability Indicators</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#net-profit-margin"><i class="fa fa-check"></i><b>9.1.1</b> Net Profit Margin</a></li>
<li class="chapter" data-level="9.1.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-assets-roa"><i class="fa fa-check"></i><b>9.1.2</b> Return on Assets (ROA)</a></li>
<li class="chapter" data-level="9.1.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-investment-roi"><i class="fa fa-check"></i><b>9.1.3</b> Return on Investment (ROI)</a></li>
<li class="chapter" data-level="9.1.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-equity-roe"><i class="fa fa-check"></i><b>9.1.4</b> Return on Equity (ROE)</a></li>
<li class="chapter" data-level="9.1.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#earnings-per-share-eps"><i class="fa fa-check"></i><b>9.1.5</b> Earnings Per Share (EPS)</a></li>
<li class="chapter" data-level="9.1.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#operating-margin"><i class="fa fa-check"></i><b>9.1.6</b> Operating Margin</a></li>
<li class="chapter" data-level="9.1.7" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#dividend-yield"><i class="fa fa-check"></i><b>9.1.7</b> Dividend Yield</a></li>
<li class="chapter" data-level="9.1.8" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#gross-profit-margin"><i class="fa fa-check"></i><b>9.1.8</b> Gross Profit Margin</a></li>
<li class="chapter" data-level="9.1.9" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-capital-employed-roce"><i class="fa fa-check"></i><b>9.1.9</b> Return on Capital Employed (ROCE)</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#liquidity-indicators"><i class="fa fa-check"></i><b>9.2</b> Liquidity Indicators</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#current-ratio"><i class="fa fa-check"></i><b>9.2.1</b> Current Ratio</a></li>
<li class="chapter" data-level="9.2.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#quick-ratio"><i class="fa fa-check"></i><b>9.2.2</b> Quick Ratio</a></li>
<li class="chapter" data-level="9.2.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#cash-ratio"><i class="fa fa-check"></i><b>9.2.3</b> Cash Ratio</a></li>
<li class="chapter" data-level="9.2.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#operating-cash-flow-ratio"><i class="fa fa-check"></i><b>9.2.4</b> Operating Cash Flow Ratio</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#leverage-indicators"><i class="fa fa-check"></i><b>9.3</b> Leverage Indicators</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#debt-to-equity-de-ratio"><i class="fa fa-check"></i><b>9.3.1</b> Debt-to-Equity (D/E) Ratio</a></li>
<li class="chapter" data-level="9.3.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#interest-coverage-ratio"><i class="fa fa-check"></i><b>9.3.2</b> Interest Coverage Ratio</a></li>
<li class="chapter" data-level="9.3.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#debt-ratio"><i class="fa fa-check"></i><b>9.3.3</b> Debt Ratio</a></li>
<li class="chapter" data-level="9.3.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#debt-to-capital-ratio"><i class="fa fa-check"></i><b>9.3.4</b> Debt-to-Capital Ratio</a></li>
<li class="chapter" data-level="9.3.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#equity-multiplier"><i class="fa fa-check"></i><b>9.3.5</b> Equity Multiplier</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#efficiency-indicators"><i class="fa fa-check"></i><b>9.4</b> Efficiency Indicators</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#asset-turnover-ratio"><i class="fa fa-check"></i><b>9.4.1</b> Asset Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#inventory-turnover-ratio"><i class="fa fa-check"></i><b>9.4.2</b> Inventory Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#receivables-turnover-ratio"><i class="fa fa-check"></i><b>9.4.3</b> Receivables Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#payables-turnover-ratio"><i class="fa fa-check"></i><b>9.4.4</b> Payables Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#days-sales-outstanding-dso"><i class="fa fa-check"></i><b>9.4.5</b> Days Sales Outstanding (DSO)</a></li>
<li class="chapter" data-level="9.4.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#fixed-asset-turnover-ratio"><i class="fa fa-check"></i><b>9.4.6</b> Fixed Asset Turnover Ratio</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#valuation-indicators"><i class="fa fa-check"></i><b>9.5</b> Valuation Indicators</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-book-pb-ratio"><i class="fa fa-check"></i><b>9.5.1</b> Price-to-Book (P/B) Ratio</a></li>
<li class="chapter" data-level="9.5.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-earnings-pe-ratio"><i class="fa fa-check"></i><b>9.5.2</b> Price-to-Earnings (P/E) Ratio</a></li>
<li class="chapter" data-level="9.5.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-sales-ps-ratio"><i class="fa fa-check"></i><b>9.5.3</b> Price-to-Sales (P/S) Ratio</a></li>
<li class="chapter" data-level="9.5.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#enterprise-value-to-ebitda-evebitda"><i class="fa fa-check"></i><b>9.5.4</b> Enterprise Value-to-EBITDA (EV/EBITDA)</a></li>
<li class="chapter" data-level="9.5.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#dividend-yield-1"><i class="fa fa-check"></i><b>9.5.5</b> Dividend Yield</a></li>
<li class="chapter" data-level="9.5.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-cash-flow-pcf-ratio"><i class="fa fa-check"></i><b>9.5.6</b> Price-to-Cash Flow (P/CF) Ratio</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#cash-flow-indicators"><i class="fa fa-check"></i><b>9.6</b> Cash Flow Indicators</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#free-cash-flow-to-equity-fcfe-1"><i class="fa fa-check"></i><b>9.6.1</b> Free Cash Flow to Equity (FCFE)</a></li>
<li class="chapter" data-level="9.6.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#free-cash-flow-to-the-firm-fcff-1"><i class="fa fa-check"></i><b>9.6.2</b> Free Cash Flow to the Firm (FCFF)</a></li>
<li class="chapter" data-level="9.6.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#operating-cash-flow-ocf"><i class="fa fa-check"></i><b>9.6.3</b> Operating Cash Flow (OCF)</a></li>
<li class="chapter" data-level="9.6.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#fcf-margin"><i class="fa fa-check"></i><b>9.6.4</b> FCF Margin</a></li>
<li class="chapter" data-level="9.6.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#cash-conversion-cycle-ccc"><i class="fa fa-check"></i><b>9.6.5</b> Cash Conversion Cycle (CCC)</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#temporal-dimensions"><i class="fa fa-check"></i><b>9.7</b> Temporal Dimensions</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#trailing-twelve-months-ttm"><i class="fa fa-check"></i><b>9.7.1</b> Trailing Twelve Months (TTM)</a></li>
<li class="chapter" data-level="9.7.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#annual-reporting"><i class="fa fa-check"></i><b>9.7.2</b> Annual Reporting</a></li>
<li class="chapter" data-level="9.7.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#quarterly-and-monthly-reporting"><i class="fa fa-check"></i><b>9.7.3</b> Quarterly and Monthly Reporting</a></li>
<li class="chapter" data-level="9.7.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#example-and-explanation"><i class="fa fa-check"></i><b>9.7.4</b> Example and Explanation</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#conclusion-3"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html"><i class="fa fa-check"></i><b>10</b> Macroeconomic Accounting</a>
<ul>
<li class="chapter" data-level="10.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#important-terms-and-definitions"><i class="fa fa-check"></i><b>10.1</b> Important Terms and Definitions</a></li>
<li class="chapter" data-level="10.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#national-accounts"><i class="fa fa-check"></i><b>10.2</b> National Accounts</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#production-approach"><i class="fa fa-check"></i><b>10.2.1</b> Production Approach</a></li>
<li class="chapter" data-level="10.2.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#expenditure-approach"><i class="fa fa-check"></i><b>10.2.2</b> Expenditure Approach</a></li>
<li class="chapter" data-level="10.2.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#income-approach"><i class="fa fa-check"></i><b>10.2.3</b> Income Approach</a></li>
<li class="chapter" data-level="10.2.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#other-flow-measures"><i class="fa fa-check"></i><b>10.2.4</b> Other Flow Measures</a></li>
<li class="chapter" data-level="10.2.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#stock-measures"><i class="fa fa-check"></i><b>10.2.5</b> Stock Measures</a></li>
<li class="chapter" data-level="10.2.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#implicit-price-deflators"><i class="fa fa-check"></i><b>10.2.6</b> Implicit Price Deflators</a></li>
<li class="chapter" data-level="10.2.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection"><i class="fa fa-check"></i><b>10.2.7</b> Data Collection</a></li>
<li class="chapter" data-level="10.2.8" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources"><i class="fa fa-check"></i><b>10.2.8</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#balance-of-payments"><i class="fa fa-check"></i><b>10.3</b> Balance of Payments</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#current-account"><i class="fa fa-check"></i><b>10.3.1</b> Current Account</a></li>
<li class="chapter" data-level="10.3.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#capital-account"><i class="fa fa-check"></i><b>10.3.2</b> Capital Account</a></li>
<li class="chapter" data-level="10.3.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#financial-account"><i class="fa fa-check"></i><b>10.3.3</b> Financial Account</a></li>
<li class="chapter" data-level="10.3.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#stock-measures-1"><i class="fa fa-check"></i><b>10.3.4</b> Stock Measures</a></li>
<li class="chapter" data-level="10.3.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-1"><i class="fa fa-check"></i><b>10.3.5</b> Data Collection</a></li>
<li class="chapter" data-level="10.3.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-1"><i class="fa fa-check"></i><b>10.3.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#labor-market-accounts"><i class="fa fa-check"></i><b>10.4</b> Labor Market Accounts</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#labor-force"><i class="fa fa-check"></i><b>10.4.1</b> Labor Force</a></li>
<li class="chapter" data-level="10.4.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#employment-unemployment-and-hours-worked"><i class="fa fa-check"></i><b>10.4.2</b> Employment, Unemployment, and Hours Worked</a></li>
<li class="chapter" data-level="10.4.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#productivity-measures"><i class="fa fa-check"></i><b>10.4.3</b> Productivity Measures</a></li>
<li class="chapter" data-level="10.4.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#wage-and-labor-earnings"><i class="fa fa-check"></i><b>10.4.4</b> Wage and Labor Earnings</a></li>
<li class="chapter" data-level="10.4.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#job-vacancy-and-turnover-rate"><i class="fa fa-check"></i><b>10.4.5</b> Job Vacancy and Turnover Rate</a></li>
<li class="chapter" data-level="10.4.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#job-creation-and-destruction"><i class="fa fa-check"></i><b>10.4.6</b> Job Creation and Destruction</a></li>
<li class="chapter" data-level="10.4.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-2"><i class="fa fa-check"></i><b>10.4.7</b> Data Collection</a></li>
<li class="chapter" data-level="10.4.8" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-2"><i class="fa fa-check"></i><b>10.4.8</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#fiscal-accounts"><i class="fa fa-check"></i><b>10.5</b> Fiscal Accounts</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#government-budget"><i class="fa fa-check"></i><b>10.5.1</b> Government Budget</a></li>
<li class="chapter" data-level="10.5.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#types-of-taxes"><i class="fa fa-check"></i><b>10.5.2</b> Types of Taxes</a></li>
<li class="chapter" data-level="10.5.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#types-of-subsidies"><i class="fa fa-check"></i><b>10.5.3</b> Types of Subsidies</a></li>
<li class="chapter" data-level="10.5.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#non-tax-revenue"><i class="fa fa-check"></i><b>10.5.4</b> Non-Tax Revenue</a></li>
<li class="chapter" data-level="10.5.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-3"><i class="fa fa-check"></i><b>10.5.5</b> Data Collection</a></li>
<li class="chapter" data-level="10.5.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-3"><i class="fa fa-check"></i><b>10.5.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#monetary-and-financial-accounts"><i class="fa fa-check"></i><b>10.6</b> Monetary and Financial Accounts</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#monetary-aggregates"><i class="fa fa-check"></i><b>10.6.1</b> Monetary Aggregates</a></li>
<li class="chapter" data-level="10.6.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#interest-rates"><i class="fa fa-check"></i><b>10.6.2</b> Interest Rates</a></li>
<li class="chapter" data-level="10.6.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#banking-reserves"><i class="fa fa-check"></i><b>10.6.3</b> Banking Reserves</a></li>
<li class="chapter" data-level="10.6.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#credit-aggregates"><i class="fa fa-check"></i><b>10.6.4</b> Credit Aggregates</a></li>
<li class="chapter" data-level="10.6.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#exchange-rates"><i class="fa fa-check"></i><b>10.6.5</b> Exchange Rates</a></li>
<li class="chapter" data-level="10.6.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#parity-conditions"><i class="fa fa-check"></i><b>10.6.6</b> Parity Conditions</a></li>
<li class="chapter" data-level="10.6.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#industrial-production-and-capacity-utilization"><i class="fa fa-check"></i><b>10.6.7</b> Industrial Production and Capacity Utilization</a></li>
<li class="chapter" data-level="10.6.8" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-4"><i class="fa fa-check"></i><b>10.6.8</b> Data Collection</a></li>
<li class="chapter" data-level="10.6.9" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-4"><i class="fa fa-check"></i><b>10.6.9</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#price-level-and-inflation"><i class="fa fa-check"></i><b>10.7</b> Price Level and Inflation</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#implicit-measurement"><i class="fa fa-check"></i><b>10.7.1</b> Implicit Measurement</a></li>
<li class="chapter" data-level="10.7.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#direct-measurement"><i class="fa fa-check"></i><b>10.7.2</b> Direct Measurement</a></li>
<li class="chapter" data-level="10.7.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#inflation"><i class="fa fa-check"></i><b>10.7.3</b> Inflation</a></li>
<li class="chapter" data-level="10.7.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-5"><i class="fa fa-check"></i><b>10.7.4</b> Data Collection</a></li>
<li class="chapter" data-level="10.7.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-5"><i class="fa fa-check"></i><b>10.7.5</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html"><i class="fa fa-check"></i><b>11</b> Financial Market Indicators</a>
<ul>
<li class="chapter" data-level="11.1" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#interest-rates-1"><i class="fa fa-check"></i><b>11.1</b> Interest Rates</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#import-csv-file"><i class="fa fa-check"></i><b>11.1.1</b> Import CSV File</a></li>
<li class="chapter" data-level="11.1.2" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#plotting-historical-yields"><i class="fa fa-check"></i><b>11.1.2</b> Plotting Historical Yields</a></li>
<li class="chapter" data-level="11.1.3" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#plotting-yield-curve"><i class="fa fa-check"></i><b>11.1.3</b> Plotting Yield Curve</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part III</b></span></li>
<li class="chapter" data-level="" data-path="part-iii.html"><a href="part-iii.html"><i class="fa fa-check"></i><em>Part III: Economic Data Processing</em></a></li>
<li class="chapter" data-level="12" data-path="data-categorization.html"><a href="data-categorization.html"><i class="fa fa-check"></i><b>12</b> Data Categorization</a>
<ul>
<li class="chapter" data-level="12.1" data-path="data-categorization.html"><a href="data-categorization.html#qualitative-vs.-quantitative"><i class="fa fa-check"></i><b>12.1</b> Qualitative vs. Quantitative</a></li>
<li class="chapter" data-level="12.2" data-path="data-categorization.html"><a href="data-categorization.html#discrete-vs.-continuous"><i class="fa fa-check"></i><b>12.2</b> Discrete vs. Continuous</a></li>
<li class="chapter" data-level="12.3" data-path="data-categorization.html"><a href="data-categorization.html#levels-of-measurement"><i class="fa fa-check"></i><b>12.3</b> Levels of Measurement</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="data-categorization.html"><a href="data-categorization.html#nominal-scale-variables"><i class="fa fa-check"></i><b>12.3.1</b> Nominal Scale Variables</a></li>
<li class="chapter" data-level="12.3.2" data-path="data-categorization.html"><a href="data-categorization.html#ordinal-scale-variables"><i class="fa fa-check"></i><b>12.3.2</b> Ordinal Scale Variables</a></li>
<li class="chapter" data-level="12.3.3" data-path="data-categorization.html"><a href="data-categorization.html#interval-scale-variables"><i class="fa fa-check"></i><b>12.3.3</b> Interval Scale Variables</a></li>
<li class="chapter" data-level="12.3.4" data-path="data-categorization.html"><a href="data-categorization.html#ratio-scale-variables"><i class="fa fa-check"></i><b>12.3.4</b> Ratio Scale Variables</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="data-categorization.html"><a href="data-categorization.html#index-vs.-absolute-data"><i class="fa fa-check"></i><b>12.4</b> Index vs. Absolute Data</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="data-categorization.html"><a href="data-categorization.html#index-data"><i class="fa fa-check"></i><b>12.4.1</b> Index Data</a></li>
<li class="chapter" data-level="12.4.2" data-path="data-categorization.html"><a href="data-categorization.html#absolute-data"><i class="fa fa-check"></i><b>12.4.2</b> Absolute Data</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="data-categorization.html"><a href="data-categorization.html#stock-vs.-flow"><i class="fa fa-check"></i><b>12.5</b> Stock vs. Flow</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="data-categorization.html"><a href="data-categorization.html#stock-variables"><i class="fa fa-check"></i><b>12.5.1</b> Stock Variables</a></li>
<li class="chapter" data-level="12.5.2" data-path="data-categorization.html"><a href="data-categorization.html#flow-variables"><i class="fa fa-check"></i><b>12.5.2</b> Flow Variables</a></li>
<li class="chapter" data-level="12.5.3" data-path="data-categorization.html"><a href="data-categorization.html#accounting"><i class="fa fa-check"></i><b>12.5.3</b> Accounting</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="data-categorization.html"><a href="data-categorization.html#data-dimensions"><i class="fa fa-check"></i><b>12.6</b> Data Dimensions</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="data-categorization.html"><a href="data-categorization.html#cross-sectional-data"><i class="fa fa-check"></i><b>12.6.1</b> Cross-Sectional Data</a></li>
<li class="chapter" data-level="12.6.2" data-path="data-categorization.html"><a href="data-categorization.html#time-series-data"><i class="fa fa-check"></i><b>12.6.2</b> Time Series Data</a></li>
<li class="chapter" data-level="12.6.3" data-path="data-categorization.html"><a href="data-categorization.html#panel-data"><i class="fa fa-check"></i><b>12.6.3</b> Panel Data</a></li>
<li class="chapter" data-level="12.6.4" data-path="data-categorization.html"><a href="data-categorization.html#spatial-data"><i class="fa fa-check"></i><b>12.6.4</b> Spatial Data</a></li>
<li class="chapter" data-level="12.6.5" data-path="data-categorization.html"><a href="data-categorization.html#clustered-data"><i class="fa fa-check"></i><b>12.6.5</b> Clustered Data</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="data-categorization.html"><a href="data-categorization.html#conclusion-data-categorization"><i class="fa fa-check"></i><b>12.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>13</b> Data Transformation</a>
<ul>
<li class="chapter" data-level="13.1" data-path="data-transformation.html"><a href="data-transformation.html#example-data"><i class="fa fa-check"></i><b>13.1</b> Example Data</a></li>
<li class="chapter" data-level="13.2" data-path="data-transformation.html"><a href="data-transformation.html#growth"><i class="fa fa-check"></i><b>13.2</b> Growth</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-growth-rates"><i class="fa fa-check"></i><b>13.2.1</b> Definition</a></li>
<li class="chapter" data-level="13.2.2" data-path="data-transformation.html"><a href="data-transformation.html#log-approximation"><i class="fa fa-check"></i><b>13.2.2</b> Log Approximation</a></li>
<li class="chapter" data-level="13.2.3" data-path="data-transformation.html"><a href="data-transformation.html#relativity"><i class="fa fa-check"></i><b>13.2.3</b> Relativity</a></li>
<li class="chapter" data-level="13.2.4" data-path="data-transformation.html"><a href="data-transformation.html#return-and-inflation"><i class="fa fa-check"></i><b>13.2.4</b> Return and Inflation</a></li>
<li class="chapter" data-level="13.2.5" data-path="data-transformation.html"><a href="data-transformation.html#applicability-growth"><i class="fa fa-check"></i><b>13.2.5</b> Applicability</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="data-transformation.html"><a href="data-transformation.html#differentiation"><i class="fa fa-check"></i><b>13.3</b> Differentiation</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-differentiation"><i class="fa fa-check"></i><b>13.3.1</b> Definition</a></li>
<li class="chapter" data-level="13.3.2" data-path="data-transformation.html"><a href="data-transformation.html#pp"><i class="fa fa-check"></i><b>13.3.2</b> Percentage Points (pp)</a></li>
<li class="chapter" data-level="13.3.3" data-path="data-transformation.html"><a href="data-transformation.html#bp"><i class="fa fa-check"></i><b>13.3.3</b> Basis Points (bp)</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="data-transformation.html"><a href="data-transformation.html#log"><i class="fa fa-check"></i><b>13.4</b> Natural Logarithm</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-natural-logarithm"><i class="fa fa-check"></i><b>13.4.1</b> Definition</a></li>
<li class="chapter" data-level="13.4.2" data-path="data-transformation.html"><a href="data-transformation.html#motivation-natural-logarithm"><i class="fa fa-check"></i><b>13.4.2</b> Motivation</a></li>
<li class="chapter" data-level="13.4.3" data-path="data-transformation.html"><a href="data-transformation.html#applicability-natural-logarithm"><i class="fa fa-check"></i><b>13.4.3</b> Applicability</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="data-transformation.html"><a href="data-transformation.html#ratio"><i class="fa fa-check"></i><b>13.5</b> Ratio</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-ratio"><i class="fa fa-check"></i><b>13.5.1</b> Definition</a></li>
<li class="chapter" data-level="13.5.2" data-path="data-transformation.html"><a href="data-transformation.html#per-capita"><i class="fa fa-check"></i><b>13.5.2</b> Per Capita</a></li>
<li class="chapter" data-level="13.5.3" data-path="data-transformation.html"><a href="data-transformation.html#real-vs.-nominal"><i class="fa fa-check"></i><b>13.5.3</b> Real vs. Nominal</a></li>
<li class="chapter" data-level="13.5.4" data-path="data-transformation.html"><a href="data-transformation.html#growth-of-ratios"><i class="fa fa-check"></i><b>13.5.4</b> Growth of Ratios</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="data-transformation.html"><a href="data-transformation.html#gap"><i class="fa fa-check"></i><b>13.6</b> Gap</a></li>
<li class="chapter" data-level="13.7" data-path="data-transformation.html"><a href="data-transformation.html#filtering"><i class="fa fa-check"></i><b>13.7</b> Filtering</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="data-transformation.html"><a href="data-transformation.html#frequency-filtering"><i class="fa fa-check"></i><b>13.7.1</b> Frequency Filtering</a></li>
<li class="chapter" data-level="13.7.2" data-path="data-transformation.html"><a href="data-transformation.html#detrending"><i class="fa fa-check"></i><b>13.7.2</b> Detrending</a></li>
<li class="chapter" data-level="13.7.3" data-path="data-transformation.html"><a href="data-transformation.html#seasonal-adjustment"><i class="fa fa-check"></i><b>13.7.3</b> Seasonal Adjustment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="statistical-measures.html"><a href="statistical-measures.html"><i class="fa fa-check"></i><b>14</b> Statistical Measures</a></li>
<li class="chapter" data-level="15" data-path="data-aggregation.html"><a href="data-aggregation.html"><i class="fa fa-check"></i><b>15</b> Data Aggregation</a>
<ul>
<li class="chapter" data-level="15.1" data-path="data-aggregation.html"><a href="data-aggregation.html#annualization"><i class="fa fa-check"></i><b>15.1</b> Annualization</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="data-aggregation.html"><a href="data-aggregation.html#motivation"><i class="fa fa-check"></i><b>15.1.1</b> Motivation</a></li>
<li class="chapter" data-level="15.1.2" data-path="data-aggregation.html"><a href="data-aggregation.html#annualized-flow-variables"><i class="fa fa-check"></i><b>15.1.2</b> Annualized Flow Variables</a></li>
<li class="chapter" data-level="15.1.3" data-path="data-aggregation.html"><a href="data-aggregation.html#annualized-growth-rates"><i class="fa fa-check"></i><b>15.1.3</b> Annualized Growth Rates</a></li>
<li class="chapter" data-level="15.1.4" data-path="data-aggregation.html"><a href="data-aggregation.html#annualized-log-difference"><i class="fa fa-check"></i><b>15.1.4</b> Annualized Log-Difference</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="data-aggregation.html"><a href="data-aggregation.html#yoy"><i class="fa fa-check"></i><b>15.2</b> Year over Year (YoY)</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="data-aggregation.html"><a href="data-aggregation.html#year-over-year-yoy-growth-rates"><i class="fa fa-check"></i><b>15.2.1</b> Year over Year (YoY) Growth Rates</a></li>
<li class="chapter" data-level="15.2.2" data-path="data-aggregation.html"><a href="data-aggregation.html#comparing-yoy-measures-with-moving-averages"><i class="fa fa-check"></i><b>15.2.2</b> Comparing YoY Measures with Moving Averages</a></li>
<li class="chapter" data-level="15.2.3" data-path="data-aggregation.html"><a href="data-aggregation.html#sliding-window-vs.-fixed-window-aggregation"><i class="fa fa-check"></i><b>15.2.3</b> Sliding Window vs. Fixed Window Aggregation</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part IV</b></span></li>
<li class="chapter" data-level="" data-path="part-iv.html"><a href="part-iv.html"><i class="fa fa-check"></i><em>Part IV: Patterns in Economics</em></a></li>
<li class="chapter" data-level="16" data-path="temporal-patterns.html"><a href="temporal-patterns.html"><i class="fa fa-check"></i><b>16</b> Temporal Patterns</a>
<ul>
<li class="chapter" data-level="16.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#time-series-data-1"><i class="fa fa-check"></i><b>16.1</b> Time Series Data</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#definition"><i class="fa fa-check"></i><b>16.1.1</b> Definition</a></li>
<li class="chapter" data-level="16.1.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#features"><i class="fa fa-check"></i><b>16.1.2</b> Features</a></li>
<li class="chapter" data-level="16.1.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#visualization"><i class="fa fa-check"></i><b>16.1.3</b> Visualization</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#trend"><i class="fa fa-check"></i><b>16.2</b> Trend</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#sustained-growth"><i class="fa fa-check"></i><b>16.2.1</b> Sustained Growth</a></li>
<li class="chapter" data-level="16.2.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#decrease-in-poverty"><i class="fa fa-check"></i><b>16.2.2</b> Decrease in Poverty</a></li>
<li class="chapter" data-level="16.2.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#aging-population"><i class="fa fa-check"></i><b>16.2.3</b> Aging Population</a></li>
<li class="chapter" data-level="16.2.4" data-path="temporal-patterns.html"><a href="temporal-patterns.html#productivity-labor-trade-off"><i class="fa fa-check"></i><b>16.2.4</b> Productivity-Labor Trade-Off</a></li>
<li class="chapter" data-level="16.2.5" data-path="temporal-patterns.html"><a href="temporal-patterns.html#trend-inflation"><i class="fa fa-check"></i><b>16.2.5</b> Trend Inflation</a></li>
<li class="chapter" data-level="16.2.6" data-path="temporal-patterns.html"><a href="temporal-patterns.html#decline-in-labor-share"><i class="fa fa-check"></i><b>16.2.6</b> Decline in Labor Share</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#seasonality"><i class="fa fa-check"></i><b>16.3</b> Seasonality</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#holiday-season"><i class="fa fa-check"></i><b>16.3.1</b> Holiday Season</a></li>
<li class="chapter" data-level="16.3.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#seasonal-weather"><i class="fa fa-check"></i><b>16.3.2</b> Seasonal Weather</a></li>
<li class="chapter" data-level="16.3.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#seasonal-employment"><i class="fa fa-check"></i><b>16.3.3</b> Seasonal Employment</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="temporal-patterns.html"><a href="temporal-patterns.html#business-cycle"><i class="fa fa-check"></i><b>16.4</b> Business Cycle</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#costs-of-business-cycles"><i class="fa fa-check"></i><b>16.4.1</b> Costs of Business Cycles</a></li>
<li class="chapter" data-level="16.4.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#cyclicality-and-timing"><i class="fa fa-check"></i><b>16.4.2</b> Cyclicality and Timing</a></li>
<li class="chapter" data-level="16.4.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#consumption-smoothing"><i class="fa fa-check"></i><b>16.4.3</b> Consumption Smoothing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="regional-patterns.html"><a href="regional-patterns.html"><i class="fa fa-check"></i><b>17</b> Regional Patterns</a>
<ul>
<li class="chapter" data-level="17.1" data-path="regional-patterns.html"><a href="regional-patterns.html#regional-data"><i class="fa fa-check"></i><b>17.1</b> Regional Data</a></li>
<li class="chapter" data-level="17.2" data-path="regional-patterns.html"><a href="regional-patterns.html#county-level-patterns"><i class="fa fa-check"></i><b>17.2</b> County-Level Patterns</a></li>
<li class="chapter" data-level="17.3" data-path="regional-patterns.html"><a href="regional-patterns.html#state-level-patterns"><i class="fa fa-check"></i><b>17.3</b> State-Level Patterns</a></li>
<li class="chapter" data-level="17.4" data-path="regional-patterns.html"><a href="regional-patterns.html#country-level-patterns"><i class="fa fa-check"></i><b>17.4</b> Country-Level Patterns</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html"><i class="fa fa-check"></i><b>18</b> Microeconomic Patterns</a>
<ul>
<li class="chapter" data-level="18.1" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html#microeconomic-data"><i class="fa fa-check"></i><b>18.1</b> Microeconomic Data</a></li>
<li class="chapter" data-level="18.2" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html#firm-patterns"><i class="fa fa-check"></i><b>18.2</b> Firm Patterns</a></li>
<li class="chapter" data-level="18.3" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html#household-patterns"><i class="fa fa-check"></i><b>18.3</b> Household Patterns</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="causal-relationships.html"><a href="causal-relationships.html"><i class="fa fa-check"></i><b>19</b> Causal Relationships</a>
<ul>
<li class="chapter" data-level="19.1" data-path="causal-relationships.html"><a href="causal-relationships.html#elasticities"><i class="fa fa-check"></i><b>19.1</b> Elasticities</a></li>
<li class="chapter" data-level="19.2" data-path="causal-relationships.html"><a href="causal-relationships.html#multipliers"><i class="fa fa-check"></i><b>19.2</b> Multipliers</a></li>
<li class="chapter" data-level="19.3" data-path="causal-relationships.html"><a href="causal-relationships.html#causality"><i class="fa fa-check"></i><b>19.3</b> Causality</a></li>
</ul></li>
<li class="part"><span><b>Part V</b></span></li>
<li class="chapter" data-level="" data-path="part-v.html"><a href="part-v.html"><i class="fa fa-check"></i><em>Part V: Insights From Real-Time Data and Surveys</em></a></li>
<li class="chapter" data-level="20" data-path="why-subjective-information-matters.html"><a href="why-subjective-information-matters.html"><i class="fa fa-check"></i><b>20</b> Why Subjective Information Matters</a></li>
<li class="chapter" data-level="21" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html"><i class="fa fa-check"></i><b>21</b> Insights From Consumer Surveys</a>
<ul>
<li class="chapter" data-level="21.1" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#introduction-1"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#conducting-the-survey"><i class="fa fa-check"></i><b>21.2</b> Conducting the Survey</a></li>
<li class="chapter" data-level="21.3" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#michigan-consumer-indices"><i class="fa fa-check"></i><b>21.3</b> Michigan Consumer Indices</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#index-of-consumer-sentiment-ics"><i class="fa fa-check"></i><b>21.3.1</b> Index of Consumer Sentiment (ICS)</a></li>
<li class="chapter" data-level="21.3.2" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#index-of-current-economic-conditions-icc"><i class="fa fa-check"></i><b>21.3.2</b> Index of Current Economic Conditions (ICC)</a></li>
<li class="chapter" data-level="21.3.3" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#index-of-consumer-expectations-ice"><i class="fa fa-check"></i><b>21.3.3</b> Index of Consumer Expectations (ICE)</a></li>
<li class="chapter" data-level="21.3.4" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#importing-in-r"><i class="fa fa-check"></i><b>21.3.4</b> Importing in R</a></li>
<li class="chapter" data-level="21.3.5" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#import-tsv-file"><i class="fa fa-check"></i><b>21.3.5</b> Import TSV File</a></li>
<li class="chapter" data-level="21.3.6" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#plotting-consumer-indices"><i class="fa fa-check"></i><b>21.3.6</b> Plotting Consumer Indices</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#creating-custom-consumer-indices"><i class="fa fa-check"></i><b>21.4</b> Creating Custom Consumer Indices</a></li>
<li class="chapter" data-level="21.5" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#importing-and-cleaning-individual-level-surveys"><i class="fa fa-check"></i><b>21.5</b> Importing and Cleaning Individual-Level Surveys</a>
<ul>
<li class="chapter" data-level="21.5.1" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#data-source-1"><i class="fa fa-check"></i><b>21.5.1</b> Data Source</a></li>
<li class="chapter" data-level="21.5.2" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#data-labels"><i class="fa fa-check"></i><b>21.5.2</b> Data Labels</a></li>
<li class="chapter" data-level="21.5.3" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#importing-the-data-set"><i class="fa fa-check"></i><b>21.5.3</b> Importing the Data Set</a></li>
<li class="chapter" data-level="21.5.4" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#long-format"><i class="fa fa-check"></i><b>21.5.4</b> Long Format</a></li>
<li class="chapter" data-level="21.5.5" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#saving-the-data"><i class="fa fa-check"></i><b>21.5.5</b> Saving the Data</a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#exploring-individual-level-data"><i class="fa fa-check"></i><b>21.6</b> Exploring Individual-Level Data</a></li>
<li class="chapter" data-level="21.7" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#replicate-ics"><i class="fa fa-check"></i><b>21.7</b> Replicate ICS</a></li>
<li class="chapter" data-level="21.8" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#conclusion-4"><i class="fa fa-check"></i><b>21.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="insights-from-real-time-data.html"><a href="insights-from-real-time-data.html"><i class="fa fa-check"></i><b>22</b> Insights From Real-Time Data</a></li>
<li class="chapter" data-level="23" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html"><i class="fa fa-check"></i><b>23</b> Insights From Forecaster Data</a>
<ul>
<li class="chapter" data-level="23.1" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#tealbook"><i class="fa fa-check"></i><b>23.1</b> Tealbook</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#import-excel-workbook-1"><i class="fa fa-check"></i><b>23.1.1</b> Import Excel Workbook</a></li>
<li class="chapter" data-level="23.1.2" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#nowcast-and-backcast"><i class="fa fa-check"></i><b>23.1.2</b> Nowcast and Backcast</a></li>
<li class="chapter" data-level="23.1.3" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#information-date-and-realization-date"><i class="fa fa-check"></i><b>23.1.3</b> Information Date and Realization Date</a></li>
<li class="chapter" data-level="23.1.4" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#plotting-forecasts"><i class="fa fa-check"></i><b>23.1.4</b> Plotting Forecasts</a></li>
<li class="chapter" data-level="23.1.5" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#plotting-forecast-errors"><i class="fa fa-check"></i><b>23.1.5</b> Plotting Forecast Errors</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part VI</b></span></li>
<li class="chapter" data-level="" data-path="part-vi.html"><a href="part-vi.html"><i class="fa fa-check"></i><em>Part VI: Insights From Textual Data</em></a></li>
<li class="chapter" data-level="24" data-path="text-analysis-and-mining.html"><a href="text-analysis-and-mining.html"><i class="fa fa-check"></i><b>24</b> Text Analysis and Mining</a></li>
<li class="chapter" data-level="25" data-path="insights-from-google-trends.html"><a href="insights-from-google-trends.html"><i class="fa fa-check"></i><b>25</b> Insights From Google Trends</a></li>
<li class="chapter" data-level="26" data-path="insights-from-newspapers.html"><a href="insights-from-newspapers.html"><i class="fa fa-check"></i><b>26</b> Insights From Newspapers</a></li>
<li class="chapter" data-level="27" data-path="insights-from-social-media.html"><a href="insights-from-social-media.html"><i class="fa fa-check"></i><b>27</b> Insights From Social Media</a></li>
<li class="appendix"><span><b>Modules</b></span></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i>Modules Overview</a></li>
<li class="chapter" data-level="" data-path="textbook.html"><a href="textbook.html"><i class="fa fa-check"></i>Textbook Engagement</a></li>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html"><i class="fa fa-check"></i>Learn R with DataCamp</a>
<ul>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html#prepare-for-the-course"><i class="fa fa-check"></i>Prepare for the Course</a></li>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html#xp-system-and-course-completion"><i class="fa fa-check"></i>XP System and Course Completion</a></li>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html#develop-your-skills"><i class="fa fa-check"></i>Develop Your Skills</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html"><i class="fa fa-check"></i>Data Report Instructions</a>
<ul>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-versions"><i class="fa fa-check"></i>Versions of the Data Report</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-standards"><i class="fa fa-check"></i>Standards for the Two PDFs</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-collaboration"><i class="fa fa-check"></i>Collaboration Guidelines</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-example"><i class="fa fa-check"></i>Example of a Data Report</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-final-remarks"><i class="fa fa-check"></i>Final Remarks</a></li>
</ul></li>
<li class="chapter" data-level="A" data-path="module-a.html"><a href="module-a.html"><i class="fa fa-check"></i><b>A</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="A.1" data-path="module-a.html"><a href="module-a.html#overview-a"><i class="fa fa-check"></i><b>A.1</b> Overview</a></li>
<li class="chapter" data-level="A.2" data-path="module-a.html"><a href="module-a.html#objectives-a"><i class="fa fa-check"></i><b>A.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="A.3" data-path="module-a.html"><a href="module-a.html#activities-a"><i class="fa fa-check"></i><b>A.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="A.4" data-path="module-a.html"><a href="module-a.html#report-a"><i class="fa fa-check"></i><b>A.4</b> Data Report on Stock Returns</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="module-b.html"><a href="module-b.html"><i class="fa fa-check"></i><b>B</b> Financial Performance Indicators</a>
<ul>
<li class="chapter" data-level="B.1" data-path="module-b.html"><a href="module-b.html#overview-b"><i class="fa fa-check"></i><b>B.1</b> Overview</a></li>
<li class="chapter" data-level="B.2" data-path="module-b.html"><a href="module-b.html#objectives-b"><i class="fa fa-check"></i><b>B.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="B.3" data-path="module-b.html"><a href="module-b.html#activities-b"><i class="fa fa-check"></i><b>B.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="B.4" data-path="module-b.html"><a href="module-b.html#report-b"><i class="fa fa-check"></i><b>B.4</b> Data Report on Financial Performance Indicators</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="module-c.html"><a href="module-c.html"><i class="fa fa-check"></i><b>C</b> Macroeconomic Accounting</a>
<ul>
<li class="chapter" data-level="C.1" data-path="module-c.html"><a href="module-c.html#overview-c"><i class="fa fa-check"></i><b>C.1</b> Overview</a></li>
<li class="chapter" data-level="C.2" data-path="module-c.html"><a href="module-c.html#objectives-c"><i class="fa fa-check"></i><b>C.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="C.3" data-path="module-c.html"><a href="module-c.html#activities-c"><i class="fa fa-check"></i><b>C.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="C.4" data-path="module-c.html"><a href="module-c.html#report-c"><i class="fa fa-check"></i><b>C.4</b> Data Report on Macroeconomic Indicators</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="module-d.html"><a href="module-d.html"><i class="fa fa-check"></i><b>D</b> Financial Market Indicators</a>
<ul>
<li class="chapter" data-level="D.1" data-path="module-d.html"><a href="module-d.html#overview-d"><i class="fa fa-check"></i><b>D.1</b> Overview</a></li>
<li class="chapter" data-level="D.2" data-path="module-d.html"><a href="module-d.html#objectives-d"><i class="fa fa-check"></i><b>D.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="D.3" data-path="module-d.html"><a href="module-d.html#activities-d"><i class="fa fa-check"></i><b>D.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="D.4" data-path="module-d.html"><a href="module-d.html#report-d"><i class="fa fa-check"></i><b>D.4</b> Data Report on Yield Curves</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><em>References</em></a></li>
<li class="divider"></li>
<li><a href="https://www.julianfludwig.com/" target="blank">Julian F. Ludwig</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Economic Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures-in-r" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Structures in R<a href="data-structures-in-r.html#data-structures-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter delves into the following data structures and their associated R functions:</p>
<ol style="list-style-type: decimal">
<li><a href="data-structures-in-r.html#scalar"><strong>Scalar</strong></a>: A singular data point, such as a string or a number.</li>
<li><a href="data-structures-in-r.html#vector"><strong>Vector</strong></a>: A one-dimensional array that contains elements of the same type.</li>
<li><a href="data-structures-in-r.html#matrix"><strong>Matrix</strong> (<code>matrix</code>)</a>: A two-dimensional array that contains elements of the same type.</li>
<li><a href="data-structures-in-r.html#list"><strong>List</strong> (<code>list</code>)</a>: A one-dimensional array capable of storing various data types.</li>
<li><a href="data-structures-in-r.html#data.frame"><strong>Data Frame</strong> (<code>data.frame</code>)</a>: A two-dimensional array that can accommodate columns of different types.</li>
<li><a href="data-structures-in-r.html#tibble"><strong>Tibble</strong> (<code>tbl_df</code>)</a>: Introduced by the <code>tibble</code> package <span class="citation">(<a href="#ref-R-tibble">Müller and Wickham 2023</a>)</span>, a tibble is a modern take on the data frame. As a component of the <code>tidyverse</code> <span class="citation">(<a href="#ref-R-tidyverse">Wickham 2023c</a>)</span>, tibbles offer improved features for better usability.</li>
<li><a href="data-structures-in-r.html#data.table"><strong>Data Table</strong> (<code>data.table</code>)</a>: A high-performance extension of data frames by the <code>data.table</code> package <span class="citation">(<a href="#ref-R-data.table">Barrett et al. 2024</a>)</span>, crafted for efficient operations on large datasets.</li>
<li><a href="data-structures-in-r.html#xts"><strong>Extensible Time Series</strong> (<code>xts</code>)</a>: A specialized data frame offered by the <code>xts</code> package <span class="citation">(<a href="#ref-R-xts">Ryan and Ulrich 2024b</a>)</span>, designed explicitly for time series data.</li>
</ol>
<p>Understanding the data structure of variables is crucial because it determines the operations and functions that can be applied to them.</p>
<div id="scalar" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Scalar<a href="data-structures-in-r.html#scalar" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Scalars in R are variables holding single objects, such as a number, a string, a logical value, or a date.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="data-structures-in-r.html#cb423-1" tabindex="-1"></a><span class="co"># Numeric (a.k.a. Double)</span></span>
<span id="cb423-2"><a href="data-structures-in-r.html#cb423-2" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fl">5.5</span>  <span class="co"># w is a decimal number.</span></span>
<span id="cb423-3"><a href="data-structures-in-r.html#cb423-3" tabindex="-1"></a><span class="fu">class</span>(w)  <span class="co"># Returns &quot;numeric&quot;.</span></span>
<span id="cb423-4"><a href="data-structures-in-r.html#cb423-4" tabindex="-1"></a></span>
<span id="cb423-5"><a href="data-structures-in-r.html#cb423-5" tabindex="-1"></a><span class="co"># Integer</span></span>
<span id="cb423-6"><a href="data-structures-in-r.html#cb423-6" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span><span class="dt">L</span>  <span class="co"># The L tells R to store x as an integer instead of a decimal number.</span></span>
<span id="cb423-7"><a href="data-structures-in-r.html#cb423-7" tabindex="-1"></a><span class="fu">class</span>(x)  <span class="co"># Returns &quot;integer&quot;.</span></span>
<span id="cb423-8"><a href="data-structures-in-r.html#cb423-8" tabindex="-1"></a></span>
<span id="cb423-9"><a href="data-structures-in-r.html#cb423-9" tabindex="-1"></a><span class="co"># Complex</span></span>
<span id="cb423-10"><a href="data-structures-in-r.html#cb423-10" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span><span class="dt">i</span> <span class="co"># u is a complex number, where 3 is real and 4 is imaginary.</span></span>
<span id="cb423-11"><a href="data-structures-in-r.html#cb423-11" tabindex="-1"></a><span class="fu">class</span>(u)  <span class="co"># Returns &quot;complex&quot;.</span></span>
<span id="cb423-12"><a href="data-structures-in-r.html#cb423-12" tabindex="-1"></a></span>
<span id="cb423-13"><a href="data-structures-in-r.html#cb423-13" tabindex="-1"></a><span class="co"># Character</span></span>
<span id="cb423-14"><a href="data-structures-in-r.html#cb423-14" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;Hello, World!&quot;</span>  <span class="co"># y is a character string.</span></span>
<span id="cb423-15"><a href="data-structures-in-r.html#cb423-15" tabindex="-1"></a><span class="fu">class</span>(y)  <span class="co"># Returns &quot;character&quot;.</span></span>
<span id="cb423-16"><a href="data-structures-in-r.html#cb423-16" tabindex="-1"></a></span>
<span id="cb423-17"><a href="data-structures-in-r.html#cb423-17" tabindex="-1"></a><span class="co"># Logical</span></span>
<span id="cb423-18"><a href="data-structures-in-r.html#cb423-18" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="cn">TRUE</span>  <span class="co"># z is a logical value.</span></span>
<span id="cb423-19"><a href="data-structures-in-r.html#cb423-19" tabindex="-1"></a><span class="fu">class</span>(z)  <span class="co"># Returns &quot;logical&quot;.</span></span>
<span id="cb423-20"><a href="data-structures-in-r.html#cb423-20" tabindex="-1"></a></span>
<span id="cb423-21"><a href="data-structures-in-r.html#cb423-21" tabindex="-1"></a><span class="co"># Date</span></span>
<span id="cb423-22"><a href="data-structures-in-r.html#cb423-22" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;2022-08-12&quot;</span>)  <span class="co"># z is a Date value.</span></span>
<span id="cb423-23"><a href="data-structures-in-r.html#cb423-23" tabindex="-1"></a><span class="fu">class</span>(z)  <span class="co"># Returns &quot;Date&quot;.</span></span>
<span id="cb423-24"><a href="data-structures-in-r.html#cb423-24" tabindex="-1"></a></span>
<span id="cb423-25"><a href="data-structures-in-r.html#cb423-25" tabindex="-1"></a><span class="co"># Time</span></span>
<span id="cb423-26"><a href="data-structures-in-r.html#cb423-26" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">&quot;2022-08-12 22:30:12&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/Chicago&quot;</span>)  <span class="co"># z is a time value.</span></span>
<span id="cb423-27"><a href="data-structures-in-r.html#cb423-27" tabindex="-1"></a><span class="fu">class</span>(z)  <span class="co"># Returns &quot;POSIXct&quot;.</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;
## [1] &quot;integer&quot;
## [1] &quot;complex&quot;
## [1] &quot;character&quot;
## [1] &quot;logical&quot;
## [1] &quot;Date&quot;
## [1] &quot;POSIXct&quot; &quot;POSIXt&quot;</code></pre>
<p>Further discussions on functions pertaining to these data types can be found in Chapters <a href="r-basics.html#basic-operations">3.2</a> and <a href="r-basics.html#dates-and-times">3.3</a>.</p>
</div>
<div id="vector" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Vector<a href="data-structures-in-r.html#vector" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R, a vector is a homogeneous sequence of elements, meaning they must all be of the same data type. As such, a vector can hold multiple numbers, but it cannot mix types, such as having both numbers and words. The function <code>c()</code> (for combine) can be used to create a vector.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="data-structures-in-r.html#cb425-1" tabindex="-1"></a><span class="co"># Numeric vector</span></span>
<span id="cb425-2"><a href="data-structures-in-r.html#cb425-2" tabindex="-1"></a>numeric_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>)</span>
<span id="cb425-3"><a href="data-structures-in-r.html#cb425-3" tabindex="-1"></a><span class="fu">class</span>(numeric_vector)  <span class="co"># Returns &quot;numeric&quot;.</span></span>
<span id="cb425-4"><a href="data-structures-in-r.html#cb425-4" tabindex="-1"></a></span>
<span id="cb425-5"><a href="data-structures-in-r.html#cb425-5" tabindex="-1"></a><span class="co"># Character vector</span></span>
<span id="cb425-6"><a href="data-structures-in-r.html#cb425-6" tabindex="-1"></a>character_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;World&quot;</span>, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb425-7"><a href="data-structures-in-r.html#cb425-7" tabindex="-1"></a><span class="fu">class</span>(character_vector)  <span class="co"># Returns &quot;character&quot;.</span></span>
<span id="cb425-8"><a href="data-structures-in-r.html#cb425-8" tabindex="-1"></a></span>
<span id="cb425-9"><a href="data-structures-in-r.html#cb425-9" tabindex="-1"></a><span class="co"># Logical vector</span></span>
<span id="cb425-10"><a href="data-structures-in-r.html#cb425-10" tabindex="-1"></a>logical_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb425-11"><a href="data-structures-in-r.html#cb425-11" tabindex="-1"></a><span class="fu">class</span>(logical_vector)  <span class="co"># Returns &quot;logical&quot;.</span></span>
<span id="cb425-12"><a href="data-structures-in-r.html#cb425-12" tabindex="-1"></a></span>
<span id="cb425-13"><a href="data-structures-in-r.html#cb425-13" tabindex="-1"></a><span class="co"># Date vector</span></span>
<span id="cb425-14"><a href="data-structures-in-r.html#cb425-14" tabindex="-1"></a>date_vector <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-08-12&quot;</span>, <span class="st">&quot;2022-08-30&quot;</span>, <span class="st">&quot;2022-09-03&quot;</span>))</span>
<span id="cb425-15"><a href="data-structures-in-r.html#cb425-15" tabindex="-1"></a><span class="fu">class</span>(date_vector)  <span class="co"># Returns &quot;Date&quot;.</span></span>
<span id="cb425-16"><a href="data-structures-in-r.html#cb425-16" tabindex="-1"></a></span>
<span id="cb425-17"><a href="data-structures-in-r.html#cb425-17" tabindex="-1"></a><span class="co"># Unordered factor</span></span>
<span id="cb425-18"><a href="data-structures-in-r.html#cb425-18" tabindex="-1"></a>unordered_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>),</span>
<span id="cb425-19"><a href="data-structures-in-r.html#cb425-19" tabindex="-1"></a>                           <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;other&quot;</span>),</span>
<span id="cb425-20"><a href="data-structures-in-r.html#cb425-20" tabindex="-1"></a>                           <span class="at">ordered =</span> <span class="cn">FALSE</span>)</span>
<span id="cb425-21"><a href="data-structures-in-r.html#cb425-21" tabindex="-1"></a><span class="fu">class</span>(unordered_factor)  <span class="co"># Returns &quot;factor&quot;.</span></span>
<span id="cb425-22"><a href="data-structures-in-r.html#cb425-22" tabindex="-1"></a></span>
<span id="cb425-23"><a href="data-structures-in-r.html#cb425-23" tabindex="-1"></a><span class="co"># Ordered factor</span></span>
<span id="cb425-24"><a href="data-structures-in-r.html#cb425-24" tabindex="-1"></a>ordered_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">&quot;L&quot;</span>, <span class="st">&quot;L&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;L&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;H&quot;</span>),</span>
<span id="cb425-25"><a href="data-structures-in-r.html#cb425-25" tabindex="-1"></a>                         <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;L&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;H&quot;</span>),</span>
<span id="cb425-26"><a href="data-structures-in-r.html#cb425-26" tabindex="-1"></a>                         <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb425-27"><a href="data-structures-in-r.html#cb425-27" tabindex="-1"></a><span class="fu">class</span>(ordered_factor)  <span class="co"># Returns &quot;ordered&quot; &quot;factor&quot;.</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;
## [1] &quot;character&quot;
## [1] &quot;logical&quot;
## [1] &quot;Date&quot;
## [1] &quot;factor&quot;
## [1] &quot;ordered&quot; &quot;factor&quot;</code></pre>
<p>In R, the <code>class()</code> function labels both scalars and vectors by their data type, not by their dimension. Consequently, a single integer and a vector of integers are both labeled as “integer”. This perspective aligns with the idea that a scalar is essentially a vector with only one element.</p>
<p>For an overview of vector operations, see Chapters <a href="r-basics.html#vector-operations">3.2.7</a> and <a href="r-basics.html#missing-values">3.2.8</a>.</p>
</div>
<div id="matrix" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Matrix (<code>matrix</code>)<a href="data-structures-in-r.html#matrix" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A matrix in R is a two-dimensional array comprising both rows and columns. Every element within the matrix must belong to the same data type, be it numeric, character, or otherwise.</p>
<div id="create-a-matrix" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Create a Matrix<a href="data-structures-in-r.html#create-a-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Matrices can be formed using the <code>matrix()</code> function, and its important inputs include:</p>
<ul>
<li><code>data</code>: The elements that constitute the matrix.</li>
<li><code>nrow</code> and <code>ncol</code>: Specify the number of rows and columns, respectively.</li>
<li><code>byrow</code>: A logical value. If set to <code>TRUE</code>, the matrix is filled by rows. If <code>FALSE</code> (the default), it’s filled by columns.</li>
</ul>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="data-structures-in-r.html#cb427-1" tabindex="-1"></a><span class="co"># Create a 3x3 numeric matrix, column-wise (default behavior)</span></span>
<span id="cb427-2"><a href="data-structures-in-r.html#cb427-2" tabindex="-1"></a>numeric_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb427-3"><a href="data-structures-in-r.html#cb427-3" tabindex="-1"></a><span class="fu">print</span>(numeric_matrix)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="data-structures-in-r.html#cb429-1" tabindex="-1"></a><span class="co"># Create a 2x3 character matrix, row-wise</span></span>
<span id="cb429-2"><a href="data-structures-in-r.html#cb429-2" tabindex="-1"></a>character_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb429-3"><a href="data-structures-in-r.html#cb429-3" tabindex="-1"></a><span class="fu">print</span>(character_matrix)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] &quot;a&quot;  &quot;b&quot;  &quot;c&quot; 
## [2,] &quot;d&quot;  &quot;e&quot;  &quot;f&quot;</code></pre>
</div>
<div id="inspect-a-matrix" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Inspect a Matrix<a href="data-structures-in-r.html#inspect-a-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To gain an understanding of the type and structure of a matrix, utilize the following functions:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="data-structures-in-r.html#cb431-1" tabindex="-1"></a><span class="co"># Investigate numeric matrix</span></span>
<span id="cb431-2"><a href="data-structures-in-r.html#cb431-2" tabindex="-1"></a><span class="fu">class</span>(numeric_matrix)        <span class="co"># Outputs &quot;matrix&quot;.</span></span>
<span id="cb431-3"><a href="data-structures-in-r.html#cb431-3" tabindex="-1"></a><span class="fu">is.matrix</span>(numeric_matrix)    <span class="co"># Outputs TRUE.</span></span>
<span id="cb431-4"><a href="data-structures-in-r.html#cb431-4" tabindex="-1"></a><span class="fu">typeof</span>(numeric_matrix)       <span class="co"># Outputs &quot;integer&quot;.</span></span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot; 
## [1] TRUE
## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="data-structures-in-r.html#cb433-1" tabindex="-1"></a><span class="co"># Investigate character matrix</span></span>
<span id="cb433-2"><a href="data-structures-in-r.html#cb433-2" tabindex="-1"></a><span class="fu">class</span>(character_matrix)      <span class="co"># Outputs &quot;matrix&quot;.</span></span>
<span id="cb433-3"><a href="data-structures-in-r.html#cb433-3" tabindex="-1"></a><span class="fu">is.matrix</span>(character_matrix)  <span class="co"># Outputs TRUE.</span></span>
<span id="cb433-4"><a href="data-structures-in-r.html#cb433-4" tabindex="-1"></a><span class="fu">typeof</span>(character_matrix)     <span class="co"># Outputs &quot;character&quot;.</span></span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot; 
## [1] TRUE
## [1] &quot;character&quot;</code></pre>
<p>To ascertain the dimensions of a matrix, one can employ the <code>nrow()</code>, <code>ncol()</code>, and <code>dim()</code> functions:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="data-structures-in-r.html#cb435-1" tabindex="-1"></a><span class="co"># Retrieve row count</span></span>
<span id="cb435-2"><a href="data-structures-in-r.html#cb435-2" tabindex="-1"></a>(rows_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(character_matrix))</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="data-structures-in-r.html#cb437-1" tabindex="-1"></a><span class="co"># Retrieve column count</span></span>
<span id="cb437-2"><a href="data-structures-in-r.html#cb437-2" tabindex="-1"></a>(columns_count <span class="ot">&lt;-</span> <span class="fu">ncol</span>(character_matrix))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="data-structures-in-r.html#cb439-1" tabindex="-1"></a><span class="co"># Obtain overall dimensions</span></span>
<span id="cb439-2"><a href="data-structures-in-r.html#cb439-2" tabindex="-1"></a><span class="fu">dim</span>(character_matrix) <span class="co"># Returns a vector: c(rows_count, columns_count)</span></span></code></pre></div>
<pre><code>## [1] 2 3</code></pre>
<p>The <code>head()</code> and <code>tail()</code> functions retrieve the initial and final <code>n</code> rows of a matrix, respectively, with a default value of <code>n = 6</code>. These functions are handy when the matrix has a substantial number of rows, making it difficult to display the entire matrix in the R console.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="data-structures-in-r.html#cb441-1" tabindex="-1"></a><span class="co"># Extract the first two rows</span></span>
<span id="cb441-2"><a href="data-structures-in-r.html#cb441-2" tabindex="-1"></a><span class="fu">head</span>(numeric_matrix, <span class="at">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8</code></pre>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="data-structures-in-r.html#cb443-1" tabindex="-1"></a><span class="co"># Extract the last row</span></span>
<span id="cb443-2"><a href="data-structures-in-r.html#cb443-2" tabindex="-1"></a><span class="fu">tail</span>(character_matrix, <span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [2,] &quot;d&quot;  &quot;e&quot;  &quot;f&quot;</code></pre>
<p>If a matrix has a large number of columns, making it challenging to display even with <code>head()</code> or <code>tail()</code>, RStudio offers the <code>View()</code> function, which presents the matrix in a spreadsheet format. Note that <code>View()</code> is specific to RStudio and isn’t part of base R.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="data-structures-in-r.html#cb445-1" tabindex="-1"></a><span class="co"># Display the matrix in a spreadsheet-like viewer</span></span>
<span id="cb445-2"><a href="data-structures-in-r.html#cb445-2" tabindex="-1"></a><span class="fu">View</span>(character_matrix)</span></code></pre></div>
<p>Moreover, the <code>summary()</code> function delivers a collection of statistical measures for every column in a numeric matrix. This function is invaluable as it offers insights that might not be immediately evident from looking at the data.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="data-structures-in-r.html#cb446-1" tabindex="-1"></a><span class="co"># Generate statistical summaries for the columns of a numeric matrix</span></span>
<span id="cb446-2"><a href="data-structures-in-r.html#cb446-2" tabindex="-1"></a><span class="fu">summary</span>(numeric_matrix)</span></code></pre></div>
<pre><code>##        V1            V2            V3     
##  Min.   :1.0   Min.   :4.0   Min.   :7.0  
##  1st Qu.:1.5   1st Qu.:4.5   1st Qu.:7.5  
##  Median :2.0   Median :5.0   Median :8.0  
##  Mean   :2.0   Mean   :5.0   Mean   :8.0  
##  3rd Qu.:2.5   3rd Qu.:5.5   3rd Qu.:8.5  
##  Max.   :3.0   Max.   :6.0   Max.   :9.0</code></pre>
</div>
<div id="select-and-modify-matrix" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Select and Modify<a href="data-structures-in-r.html#select-and-modify-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can select and modify specific elements, rows, or columns using indexing:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="data-structures-in-r.html#cb448-1" tabindex="-1"></a><span class="co"># Access the element in the 2nd row and 1st column</span></span>
<span id="cb448-2"><a href="data-structures-in-r.html#cb448-2" tabindex="-1"></a>character_matrix[<span class="dv">2</span>, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;d&quot;</code></pre>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="data-structures-in-r.html#cb450-1" tabindex="-1"></a><span class="co"># Access the entire second row</span></span>
<span id="cb450-2"><a href="data-structures-in-r.html#cb450-2" tabindex="-1"></a>character_matrix[<span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## [1] &quot;d&quot; &quot;e&quot; &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="data-structures-in-r.html#cb452-1" tabindex="-1"></a><span class="co"># Access the second row but retain the matrix structure</span></span>
<span id="cb452-2"><a href="data-structures-in-r.html#cb452-2" tabindex="-1"></a>character_matrix[<span class="dv">2</span>, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] &quot;d&quot;  &quot;e&quot;  &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="data-structures-in-r.html#cb454-1" tabindex="-1"></a><span class="co"># Assign a specific value to an element</span></span>
<span id="cb454-2"><a href="data-structures-in-r.html#cb454-2" tabindex="-1"></a>numeric_matrix[<span class="dv">2</span>, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">99</span></span>
<span id="cb454-3"><a href="data-structures-in-r.html#cb454-3" tabindex="-1"></a><span class="fu">print</span>(numeric_matrix)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]   99    5    8
## [3,]    3    6    9</code></pre>
</div>
<div id="add-labels-matrix" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Add Labels<a href="data-structures-in-r.html#add-labels-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For better clarity, rows and columns can be named:</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="data-structures-in-r.html#cb456-1" tabindex="-1"></a><span class="co"># Constructing a matrix with labeled rows and columns</span></span>
<span id="cb456-2"><a href="data-structures-in-r.html#cb456-2" tabindex="-1"></a>labeled_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb456-3"><a href="data-structures-in-r.html#cb456-3" tabindex="-1"></a>                         <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Row1&quot;</span>, <span class="st">&quot;Row2&quot;</span>), </span>
<span id="cb456-4"><a href="data-structures-in-r.html#cb456-4" tabindex="-1"></a>                                         <span class="fu">c</span>(<span class="st">&quot;Col1&quot;</span>, <span class="st">&quot;Col2&quot;</span>)))</span>
<span id="cb456-5"><a href="data-structures-in-r.html#cb456-5" tabindex="-1"></a><span class="fu">print</span>(labeled_matrix)</span></code></pre></div>
<pre><code>##      Col1 Col2
## Row1    1    3
## Row2    2    4</code></pre>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="data-structures-in-r.html#cb458-1" tabindex="-1"></a><span class="co"># Retrieving and modifying labels</span></span>
<span id="cb458-2"><a href="data-structures-in-r.html#cb458-2" tabindex="-1"></a><span class="fu">colnames</span>(labeled_matrix)</span></code></pre></div>
<pre><code>## [1] &quot;Col1&quot; &quot;Col2&quot;</code></pre>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="data-structures-in-r.html#cb460-1" tabindex="-1"></a><span class="fu">rownames</span>(labeled_matrix) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;First_Row&quot;</span>, <span class="st">&quot;Second_Row&quot;</span>)</span>
<span id="cb460-2"><a href="data-structures-in-r.html#cb460-2" tabindex="-1"></a><span class="fu">print</span>(labeled_matrix)</span></code></pre></div>
<pre><code>##            Col1 Col2
## First_Row     1    3
## Second_Row    2    4</code></pre>
</div>
<div id="handle-missing-values-matrix" class="section level3 hasAnchor" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Handle Missing Values<a href="data-structures-in-r.html#handle-missing-values-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Matrices in R can also contain missing values, represented by <code>NA</code>:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="data-structures-in-r.html#cb462-1" tabindex="-1"></a><span class="co"># Matrix with NA values</span></span>
<span id="cb462-2"><a href="data-structures-in-r.html#cb462-2" tabindex="-1"></a>mat_with_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>), <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb462-3"><a href="data-structures-in-r.html#cb462-3" tabindex="-1"></a><span class="fu">print</span>(mat_with_na)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]   NA    6    9</code></pre>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="data-structures-in-r.html#cb464-1" tabindex="-1"></a><span class="co"># Identify NA values</span></span>
<span id="cb464-2"><a href="data-structures-in-r.html#cb464-2" tabindex="-1"></a><span class="fu">is.na</span>(mat_with_na)</span></code></pre></div>
<pre><code>##       [,1]  [,2]  [,3]
## [1,] FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE
## [3,]  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="data-structures-in-r.html#cb466-1" tabindex="-1"></a><span class="co"># Replace NA with a specified value</span></span>
<span id="cb466-2"><a href="data-structures-in-r.html#cb466-2" tabindex="-1"></a>mat_replaced_na <span class="ot">&lt;-</span> mat_with_na</span>
<span id="cb466-3"><a href="data-structures-in-r.html#cb466-3" tabindex="-1"></a>mat_replaced_na[<span class="fu">is.na</span>(mat_replaced_na)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb466-4"><a href="data-structures-in-r.html#cb466-4" tabindex="-1"></a></span>
<span id="cb466-5"><a href="data-structures-in-r.html#cb466-5" tabindex="-1"></a><span class="co"># Remove entire rows with NA values</span></span>
<span id="cb466-6"><a href="data-structures-in-r.html#cb466-6" tabindex="-1"></a>cleaned_mat <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(mat_with_na)</span>
<span id="cb466-7"><a href="data-structures-in-r.html#cb466-7" tabindex="-1"></a><span class="fu">print</span>(cleaned_mat)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## attr(,&quot;na.action&quot;)
## [1] 3
## attr(,&quot;class&quot;)
## [1] &quot;omit&quot;</code></pre>
</div>
<div id="element-wise-operations" class="section level3 hasAnchor" number="4.3.6">
<h3><span class="header-section-number">4.3.6</span> Element-Wise Operations<a href="data-structures-in-r.html#element-wise-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, matrices support a variety of operations that act on their elements. When you use typical arithmetic operators like <code>*</code>, <code>+</code>, <code>-</code>, and <code>/</code> with matrices, they operate element-wise. This means that the operation is applied to each corresponding pair of elements from the two matrices.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="data-structures-in-r.html#cb468-1" tabindex="-1"></a><span class="co"># Define matrix A</span></span>
<span id="cb468-2"><a href="data-structures-in-r.html#cb468-2" tabindex="-1"></a>(A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4</code></pre>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="data-structures-in-r.html#cb470-1" tabindex="-1"></a><span class="co"># Define matrix B of equal size than A</span></span>
<span id="cb470-2"><a href="data-structures-in-r.html#cb470-2" tabindex="-1"></a>(B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">nrow =</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    5    7
## [2,]    6    8</code></pre>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="data-structures-in-r.html#cb472-1" tabindex="-1"></a><span class="co"># Element-wise multiplication</span></span>
<span id="cb472-2"><a href="data-structures-in-r.html#cb472-2" tabindex="-1"></a>A <span class="sc">*</span> B</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    5   21
## [2,]   12   32</code></pre>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="data-structures-in-r.html#cb474-1" tabindex="-1"></a><span class="co"># Element-wise addition</span></span>
<span id="cb474-2"><a href="data-structures-in-r.html#cb474-2" tabindex="-1"></a>A <span class="sc">+</span> B</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    6   10
## [2,]    8   12</code></pre>
<p>Note: For element-wise operations, the matrices should have the same dimensions. If they differ, R will attempt to recycle values, which can result in unexpected behavior.</p>
</div>
<div id="linear-algebra-operations" class="section level3 hasAnchor" number="4.3.7">
<h3><span class="header-section-number">4.3.7</span> Linear Algebra Operations<a href="data-structures-in-r.html#linear-algebra-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Beyond element-wise operations, R provides a variety of functions and operators to perform linear algebra operations on matrices.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Transpose <code>t()</code></strong>:<br />
The transpose of a matrix <span class="math inline">\(A\)</span>, denoted as <span class="math inline">\(A^{\prime}\)</span>, is obtained by flipping it over its diagonal. This interchanges its rows and columns.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="data-structures-in-r.html#cb476-1" tabindex="-1"></a>(A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>))  <span class="co"># Matrix A</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="data-structures-in-r.html#cb478-1" tabindex="-1"></a><span class="fu">t</span>(A)                          <span class="co"># Transpose of matrix A</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre></li>
<li><p><strong>Matrix Multiplication <code>%*%</code></strong>:
Matrix multiplication, unlike element-wise multiplication <code>*</code>, uses the <code>%*%</code> operator. It performs the standard matrix multiplication operation, where each element of the resulting matrix is the sum of the products of elements from the corresponding rows of the first matrix (A) and the corresponding columns of the second matrix (B).</p>
<p>For example, if <span class="math inline">\(A = \begin{bmatrix} a &amp; b \\ c &amp; d \end{bmatrix}\)</span>
and <span class="math inline">\(B = \begin{bmatrix} w &amp; x \\ y &amp; z \end{bmatrix}\)</span>,
then the result of element-wise multiplication <code>A * B</code> will be:
<span class="math inline">\(A \odot B = \begin{bmatrix} a \cdot w &amp; b \cdot x \\ c \cdot y &amp; d \cdot z \end{bmatrix}\)</span>,
whereas the result of matrix multiplication <code>A %*% B</code> will be:
<span class="math inline">\(A B = \begin{bmatrix} (a \cdot w + b \cdot y) &amp; (a \cdot x + b \cdot z) \\ (c \cdot w + d \cdot y) &amp; (c \cdot x + d \cdot z) \end{bmatrix}\)</span>.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="data-structures-in-r.html#cb480-1" tabindex="-1"></a>(A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">2</span>))  <span class="co"># Matrix A</span></span>
<span id="cb480-2"><a href="data-structures-in-r.html#cb480-2" tabindex="-1"></a>(B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">nrow =</span> <span class="dv">2</span>))  <span class="co"># Matrix B</span></span>
<span id="cb480-3"><a href="data-structures-in-r.html#cb480-3" tabindex="-1"></a>A <span class="sc">*</span> B                         <span class="co"># Element-wise multiplication</span></span>
<span id="cb480-4"><a href="data-structures-in-r.html#cb480-4" tabindex="-1"></a>A <span class="sc">%*%</span> B                       <span class="co"># Matrix multiplication AB</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
##      [,1] [,2]
## [1,]    5    7
## [2,]    6    8
##      [,1] [,2]
## [1,]    5   21
## [2,]   12   32
##      [,1] [,2]
## [1,]   23   31
## [2,]   34   46</code></pre></li>
<li><p><strong>Crossproduct <code>crossprod(A, B)</code></strong>:
Computes the matrix product <span class="math inline">\(A&#39;B\)</span>, where <span class="math inline">\(A&#39;\)</span> is the transpose of matrix <span class="math inline">\(A\)</span>. It’s essentially a faster version of computing the transpose of <span class="math inline">\(A\)</span> followed by the regular matrix multiplication with <span class="math inline">\(B\)</span>.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="data-structures-in-r.html#cb482-1" tabindex="-1"></a><span class="fu">crossprod</span>(A, B)  <span class="co"># Equivalent to t(A) %*% B</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   17   23
## [2,]   39   53</code></pre></li>
<li><p><strong>Kronecker Product <code>kronecker(A, B)</code></strong>:
The Kronecker product, often denoted by <span class="math inline">\(\otimes\)</span>, is an operation that takes two matrices and produces a block matrix. In R, it’s computed using the function <code>kronecker()</code>.</p>
<p>For two matrices <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, the Kronecker product <span class="math inline">\(A \otimes B\)</span> will have the matrix <span class="math inline">\(A\)</span> scaled by each element of matrix <span class="math inline">\(B\)</span>.</p>
<p>For example, if
<span class="math inline">\(A = \begin{bmatrix} a &amp; b \\ c &amp; d \end{bmatrix}\)</span>
and
<span class="math inline">\(B = \begin{bmatrix} w &amp; x \\ y &amp; z \end{bmatrix}\)</span>,
then
<span class="math inline">\(A \otimes B = \begin{bmatrix} a \cdot w &amp; a \cdot x &amp; b \cdot w &amp; b \cdot x \\ a \cdot y &amp; a \cdot z &amp; b \cdot y &amp; b \cdot z \\ c \cdot w &amp; c \cdot x &amp; d \cdot w &amp; d \cdot x \\ c \cdot y &amp; c \cdot z &amp; d \cdot y &amp; d \cdot z \end{bmatrix}\)</span>.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="data-structures-in-r.html#cb484-1" tabindex="-1"></a><span class="fu">kronecker</span>(A, B)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    5    7   15   21
## [2,]    6    8   18   24
## [3,]   10   14   20   28
## [4,]   12   16   24   32</code></pre></li>
<li><p><strong>Vec Operator</strong>:
The vec operator is used to stack the columns of a matrix on top of each other, creating a single column vector. In R, you can achieve this by using the <code>c()</code> function or the <code>as.vector()</code> function to concatenate the columns of a matrix into a single vector, and then using the <code>matrix()</code> function to specify that the resulting vector is a column vector.</p>
<p>For example, if
<span class="math inline">\(A = \begin{bmatrix} a &amp; b \\ c &amp; d \end{bmatrix}\)</span>,
then
<span class="math inline">\(\text{vec}(A) = \begin{bmatrix}
a \\
c \\
b \\
d
\end{bmatrix}\)</span>.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="data-structures-in-r.html#cb486-1" tabindex="-1"></a><span class="co"># Use the vec operator to stack the columns of matrix A</span></span>
<span id="cb486-2"><a href="data-structures-in-r.html#cb486-2" tabindex="-1"></a><span class="fu">matrix</span>(<span class="fu">c</span>(A), <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##      [,1]
## [1,]    1
## [2,]    2
## [3,]    3
## [4,]    4</code></pre>
<p>In this example, <code>vec(A)</code> stacks the columns of <code>matrix_A</code> on top of each other to create a single column vector.</p></li>
<li><p><strong>Matrix Inversion <code>solve()</code></strong>:<br />
The inverse of a matrix <span class="math inline">\(A\)</span> (if it exists), denoted as <span class="math inline">\(A^{-1}\)</span>, is a matrix <span class="math inline">\(B\)</span> such that the product of <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> (in that order) is the identity matrix: <span class="math inline">\(AB=I\)</span>. Use <code>solve()</code> to compute the inverse.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="data-structures-in-r.html#cb488-1" tabindex="-1"></a><span class="fu">solve</span>(A)  <span class="co"># Inverse of matrix A</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   -2  1.5
## [2,]    1 -0.5</code></pre></li>
<li><p><strong>Solving Linear Systems with <code>solve(A, B)</code></strong>:<br />
If you have a matrix equation of the form <span class="math inline">\(A X = B\)</span>, you can solve for matrix <span class="math inline">\(X\)</span> using <code>solve(A, B)</code>. This approach is more efficient than computing <code>solve(B) %*% A</code>.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="data-structures-in-r.html#cb490-1" tabindex="-1"></a><span class="fu">solve</span>(A, B) <span class="co"># Determines X in the equation AX = B</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   -1   -2
## [2,]    2    3</code></pre></li>
<li><p><strong>Matrix Exponentiation</strong>:<br />
Raising a matrix to a power (<span class="math inline">\(n\)</span>) is not as straightforward as using the <code>^</code> operator. The <code>%^%</code> operator from the <code>expm</code> package <span class="citation">(<a href="#ref-R-expm">Maechler, Dutang, and Goulet 2024</a>)</span> facilitates matrix exponentiation in accordance with linear algebra rules.</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="data-structures-in-r.html#cb492-1" tabindex="-1"></a><span class="fu">library</span>(expm)</span>
<span id="cb492-2"><a href="data-structures-in-r.html#cb492-2" tabindex="-1"></a>A <span class="sc">^</span> <span class="dv">2</span>    <span class="co"># Element-wise squaring of A</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    9
## [2,]    4   16</code></pre>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="data-structures-in-r.html#cb494-1" tabindex="-1"></a>A <span class="sc">%^%</span> <span class="dv">2</span>  <span class="co"># Matrix squaring of A, equivalent to A %*% A</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    7   15
## [2,]   10   22</code></pre>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="data-structures-in-r.html#cb496-1" tabindex="-1"></a>A <span class="sc">%^%</span> <span class="dv">3</span>  <span class="co"># Computes A %*% A %*% A</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   37   81
## [2,]   54  118</code></pre></li>
<li><p><strong>Eigenvalues and Eigenvectors <code>eigen()</code></strong>:<br />
The <code>eigen()</code> function is used to compute the eigenvalues and eigenvectors of a matrix.</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="data-structures-in-r.html#cb498-1" tabindex="-1"></a><span class="fu">eigen</span>(A)</span></code></pre></div>
<pre><code>## eigen() decomposition
## $values
## [1]  5.3722813 -0.3722813
## 
## $vectors
##            [,1]       [,2]
## [1,] -0.5657675 -0.9093767
## [2,] -0.8245648  0.4159736</code></pre></li>
<li><p><strong>Determinant <code>det()</code></strong>:<br />
You can compute the determinant of a matrix using the <code>det()</code> function.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="data-structures-in-r.html#cb500-1" tabindex="-1"></a><span class="fu">det</span>(A)  <span class="co"># Determinant of matrix A</span></span></code></pre></div>
<pre><code>## [1] -2</code></pre></li>
<li><p><strong>Matrix Rank <code>qr()</code></strong>:<br />
The rank of a matrix, which is the dimension of the column space, can be determined using the <code>qr()</code> function.</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="data-structures-in-r.html#cb502-1" tabindex="-1"></a><span class="fu">qr</span>(A)<span class="sc">$</span>rank  <span class="co"># Rank of matrix A</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre></li>
<li><p><strong>Singular Value Decomposition <code>svd()</code></strong>:
Computes the singular value decomposition of a matrix.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="data-structures-in-r.html#cb504-1" tabindex="-1"></a>svd_result <span class="ot">&lt;-</span> <span class="fu">svd</span>(A)</span>
<span id="cb504-2"><a href="data-structures-in-r.html#cb504-2" tabindex="-1"></a>svd_result<span class="sc">$</span>u  <span class="co"># Left singular vectors</span></span></code></pre></div>
<pre><code>##            [,1]       [,2]
## [1,] -0.5760484 -0.8174156
## [2,] -0.8174156  0.5760484</code></pre>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="data-structures-in-r.html#cb506-1" tabindex="-1"></a>svd_result<span class="sc">$</span>d  <span class="co"># Singular values</span></span></code></pre></div>
<pre><code>## [1] 5.4649857 0.3659662</code></pre>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="data-structures-in-r.html#cb508-1" tabindex="-1"></a>svd_result<span class="sc">$</span>v  <span class="co"># Right singular vectors</span></span></code></pre></div>
<pre><code>##            [,1]       [,2]
## [1,] -0.4045536  0.9145143
## [2,] -0.9145143 -0.4045536</code></pre></li>
<li><p><strong>Cholesky Decomposition <code>chol()</code></strong>:
Performs the Cholesky decomposition on a positive-definite square matrix.</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="data-structures-in-r.html#cb510-1" tabindex="-1"></a><span class="co"># Define positive definite symmetric matrix C</span></span>
<span id="cb510-2"><a href="data-structures-in-r.html#cb510-2" tabindex="-1"></a>(C <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="at">nrow =</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    4    2
## [2,]    2    3</code></pre>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="data-structures-in-r.html#cb512-1" tabindex="-1"></a><span class="co"># Compute Cholesky decomposition</span></span>
<span id="cb512-2"><a href="data-structures-in-r.html#cb512-2" tabindex="-1"></a><span class="fu">chol</span>(C)</span></code></pre></div>
<pre><code>##      [,1]     [,2]
## [1,]    2 1.000000
## [2,]    0 1.414214</code></pre></li>
<li><p><strong>LU Decomposition <code>Matrix::lu()</code></strong>:
The <code>lu()</code> function from the <code>Matrix</code> package <span class="citation">(<a href="#ref-R-Matrix">Bates, Maechler, and Jagan 2024</a>)</span> decomposes a matrix into a product of a lower triangular and an upper triangular matrix.</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="data-structures-in-r.html#cb514-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;Matrix&quot;</span>)</span>
<span id="cb514-2"><a href="data-structures-in-r.html#cb514-2" tabindex="-1"></a><span class="fu">lu</span>(A)</span></code></pre></div>
<pre><code>## LU factorization of Formal class &#39;denseLU&#39; [package &quot;Matrix&quot;] with 4 slots
##   ..@ x       : num [1:4] 2 0.5 4 1
##   ..@ perm    : int [1:2] 2 2
##   ..@ Dim     : int [1:2] 2 2
##   ..@ Dimnames:List of 2
##   .. ..$ : NULL
##   .. ..$ : NULL</code></pre></li>
<li><p><strong>QR Decomposition <code>qr()</code></strong>:
Decomposes a matrix into a product of an orthogonal and a triangular matrix.</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="data-structures-in-r.html#cb516-1" tabindex="-1"></a><span class="fu">qr</span>(A)</span></code></pre></div>
<pre><code>## $qr
##            [,1]       [,2]
## [1,] -2.2360680 -4.9193496
## [2,]  0.8944272 -0.8944272
## 
## $rank
## [1] 2
## 
## $qraux
## [1] 1.4472136 0.8944272
## 
## $pivot
## [1] 1 2
## 
## attr(,&quot;class&quot;)
## [1] &quot;qr&quot;</code></pre></li>
<li><p><strong>Condition Number <code>kappa()</code></strong>:
Estimates the condition number of a matrix, which provides insight into the stability of matrix computations.</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="data-structures-in-r.html#cb518-1" tabindex="-1"></a><span class="fu">kappa</span>(A)</span></code></pre></div>
<pre><code>## [1] 18.77778</code></pre></li>
<li><p><strong>Matrix Norm <code>Matrix::norm()</code></strong>:
The <code>norm()</code> function from the <code>Matrix</code> package <span class="citation">(<a href="#ref-R-Matrix">Bates, Maechler, and Jagan 2024</a>)</span> computes various matrix norms.</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="data-structures-in-r.html#cb520-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;Matrix&quot;</span>)</span>
<span id="cb520-2"><a href="data-structures-in-r.html#cb520-2" tabindex="-1"></a><span class="fu">norm</span>(A, <span class="at">type =</span> <span class="st">&quot;F&quot;</span>)  <span class="co"># Frobenius norm</span></span></code></pre></div>
<pre><code>## [1] 5.477226</code></pre></li>
</ol>
<p>Remember to always ensure that the matrices you’re using with these functions meet the necessary preconditions (e.g., being square, positive-definite, etc.) required for each operation.</p>
</div>
<div id="combine-matrices" class="section level3 hasAnchor" number="4.3.8">
<h3><span class="header-section-number">4.3.8</span> Combine Matrices<a href="data-structures-in-r.html#combine-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Matrices in R can be joined together using various functions. The most straightforward methods are <code>rbind()</code> for row-wise binding and <code>cbind()</code> for column-wise binding:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="data-structures-in-r.html#cb522-1" tabindex="-1"></a><span class="co"># Create matrices with identical column and row numbers</span></span>
<span id="cb522-2"><a href="data-structures-in-r.html#cb522-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb522-3"><a href="data-structures-in-r.html#cb522-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">104</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb522-4"><a href="data-structures-in-r.html#cb522-4" tabindex="-1"></a></span>
<span id="cb522-5"><a href="data-structures-in-r.html#cb522-5" tabindex="-1"></a><span class="co"># Row-wise combination of matrices with same column number</span></span>
<span id="cb522-6"><a href="data-structures-in-r.html#cb522-6" tabindex="-1"></a><span class="fu">rbind</span>(x, y)</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## [3,]  101  103
## [4,]  102  104</code></pre>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="data-structures-in-r.html#cb524-1" tabindex="-1"></a><span class="co"># Column-wise combination of matrices with same row number</span></span>
<span id="cb524-2"><a href="data-structures-in-r.html#cb524-2" tabindex="-1"></a><span class="fu">cbind</span>(x, y)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    3  101  103
## [2,]    2    4  102  104</code></pre>
<p>Additionally, when combining multiple matrices, the <code>Reduce()</code> function can be quite handy:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="data-structures-in-r.html#cb526-1" tabindex="-1"></a><span class="co"># Create additional matrix with identical column number</span></span>
<span id="cb526-2"><a href="data-structures-in-r.html#cb526-2" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">201</span><span class="sc">:</span><span class="dv">206</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb526-3"><a href="data-structures-in-r.html#cb526-3" tabindex="-1"></a></span>
<span id="cb526-4"><a href="data-structures-in-r.html#cb526-4" tabindex="-1"></a><span class="co"># Use Reduce with rbind to combine multiple matrices row-wise</span></span>
<span id="cb526-5"><a href="data-structures-in-r.html#cb526-5" tabindex="-1"></a><span class="fu">Reduce</span>(<span class="at">f =</span> rbind, <span class="at">x =</span> <span class="fu">list</span>(x, y, z))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## [3,]  101  103
## [4,]  102  104
## [5,]  201  204
## [6,]  202  205
## [7,]  203  206</code></pre>
<p>The <code>Reduce()</code> function, detailed in Chapter <a href="r-basics.html#advanced-higher-order-functions">3.5.10</a>, is a prominent example of <a href="r-basics.html#advanced-higher-order-functions">advanced higher-order functions</a>. It facilitates consecutive operations over a list or vector. In the given context, it employs the <code>rbind()</code> function repeatedly to merge matrices. This technique becomes particularly beneficial when dealing with a variable or large number of matrices.</p>
<p>For example, to compute powers of matrices, you can use the <code>Reduce()</code> function to create a custom operation instead of relying on the <code>%^%</code> function from the <code>expm</code> package discussed in Chapter <a href="data-structures-in-r.html#linear-algebra-operations">4.3.7</a>:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="data-structures-in-r.html#cb528-1" tabindex="-1"></a><span class="co"># Define a custom function for matrix exponentiation</span></span>
<span id="cb528-2"><a href="data-structures-in-r.html#cb528-2" tabindex="-1"></a><span class="st">`</span><span class="at">%**%</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(MAT, n) </span>
<span id="cb528-3"><a href="data-structures-in-r.html#cb528-3" tabindex="-1"></a>    <span class="fu">Reduce</span>(<span class="at">f =</span> <span class="st">`</span><span class="at">%*%</span><span class="st">`</span>, <span class="at">x =</span> <span class="fu">replicate</span>(<span class="at">n =</span> n, <span class="at">expr =</span> MAT, <span class="at">simplify =</span> <span class="cn">FALSE</span>))</span>
<span id="cb528-4"><a href="data-structures-in-r.html#cb528-4" tabindex="-1"></a></span>
<span id="cb528-5"><a href="data-structures-in-r.html#cb528-5" tabindex="-1"></a><span class="co"># Demonstrate the sixth power of matrix x (contrast with element-wise exponentiation)</span></span>
<span id="cb528-6"><a href="data-structures-in-r.html#cb528-6" tabindex="-1"></a>x<span class="sc">%**%</span><span class="dv">6</span></span>
<span id="cb528-7"><a href="data-structures-in-r.html#cb528-7" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">6</span></span></code></pre></div>
<pre><code>##      [,1]  [,2]
## [1,] 5743 12555
## [2,] 8370 18298
##      [,1] [,2]
## [1,]    1  729
## [2,]   64 4096</code></pre>
<p>In this revised version, the custom function <code>%**%</code> employs the <code>Reduce()</code> function to successively multiply the matrix with itself, achieving matrix exponentiation.</p>
</div>
<div id="apply-family-matrix" class="section level3 hasAnchor" number="4.3.9">
<h3><span class="header-section-number">4.3.9</span> Apply Family<a href="data-structures-in-r.html#apply-family-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Apply functions</strong> are instrumental in conducting operations on matrices efficiently, offering an optimized alternative to loops (see Chapter <a href="r-basics.html#apply-functions">3.5.9</a>). While the <code>sapply</code> function discussed in Chapter <a href="r-basics.html#apply-functions">3.5.9</a> applies a function to each element of a vector, the <code>apply</code> function is specialized for matrices and applies a function to each row or column of that matrix.</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="data-structures-in-r.html#cb530-1" tabindex="-1"></a><span class="co"># Define a numeric matrix</span></span>
<span id="cb530-2"><a href="data-structures-in-r.html#cb530-2" tabindex="-1"></a>(A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="data-structures-in-r.html#cb532-1" tabindex="-1"></a><span class="co"># Calculating the maximum of each row</span></span>
<span id="cb532-2"><a href="data-structures-in-r.html#cb532-2" tabindex="-1"></a><span class="fu">apply</span>(<span class="at">X =</span> A, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> <span class="cf">function</span>(r) <span class="fu">max</span>(r))</span></code></pre></div>
<pre><code>## [1] 7 8 9</code></pre>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="data-structures-in-r.html#cb534-1" tabindex="-1"></a><span class="co"># Calculating the sum of each column (using compact FUN notation)</span></span>
<span id="cb534-2"><a href="data-structures-in-r.html#cb534-2" tabindex="-1"></a><span class="fu">apply</span>(<span class="at">X =</span> A, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> max)</span></code></pre></div>
<pre><code>## [1] 3 6 9</code></pre>
<p>The inputs for the <code>apply</code> function include:</p>
<ul>
<li><code>X</code>: Specifies the matrix or array.</li>
<li><code>MARGIN</code>: Designates 1 for operations across rows and 2 for columns.</li>
<li><code>FUN</code>: The function to be executed (examples include <code>sum</code>, <code>mean</code>).</li>
</ul>
<p>For those seeking expedited calculations for specific functions like <code>sum()</code> or <code>mean()</code>, R offers faster alternatives such as <code>rowSums()</code>, <code>colSums()</code>, <code>colMeans()</code>, and <code>rowMeans()</code>.</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="data-structures-in-r.html#cb536-1" tabindex="-1"></a><span class="co"># Summation across rows</span></span>
<span id="cb536-2"><a href="data-structures-in-r.html#cb536-2" tabindex="-1"></a><span class="fu">apply</span>(<span class="at">X =</span> A, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> sum)</span>
<span id="cb536-3"><a href="data-structures-in-r.html#cb536-3" tabindex="-1"></a><span class="fu">rowSums</span>(A) <span class="co"># A faster alternative</span></span></code></pre></div>
<pre><code>## [1] 12 15 18
## [1] 12 15 18</code></pre>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="data-structures-in-r.html#cb538-1" tabindex="-1"></a><span class="co"># Averaging across columns</span></span>
<span id="cb538-2"><a href="data-structures-in-r.html#cb538-2" tabindex="-1"></a><span class="fu">apply</span>(<span class="at">X =</span> A, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> mean)</span>
<span id="cb538-3"><a href="data-structures-in-r.html#cb538-3" tabindex="-1"></a><span class="fu">colMeans</span>(A) <span class="co"># A faster alternative</span></span></code></pre></div>
<pre><code>## [1] 2 5 8
## [1] 2 5 8</code></pre>
<p>The <strong><code>sweep()</code> function</strong> allows for efficient array manipulations, such as subtraction or division, across rows or columns using summary statistics. Specifically, it combines the capabilities of <code>apply()</code> and <code>rep()</code> to operate element-wise on a matrix. This is particularly useful when performing operations that require using a summary statistic—such as a mean—across all elements of a matrix. For example, one could use <code>sweep()</code> to demean a matrix by subtracting the mean of each column from every element in that respective column.</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="data-structures-in-r.html#cb540-1" tabindex="-1"></a><span class="co"># Define a numeric matrix</span></span>
<span id="cb540-2"><a href="data-structures-in-r.html#cb540-2" tabindex="-1"></a>(B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">109</span>, <span class="dv">107</span>, <span class="dv">104</span>, <span class="dv">105</span>), <span class="at">ncol =</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1  109
## [2,]    4  107
## [3,]    6  104
## [4,]    8  105</code></pre>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="data-structures-in-r.html#cb542-1" tabindex="-1"></a><span class="co"># Calculate mean of each column</span></span>
<span id="cb542-2"><a href="data-structures-in-r.html#cb542-2" tabindex="-1"></a>(col_means <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(B))</span></code></pre></div>
<pre><code>## [1]   4.75 106.25</code></pre>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="data-structures-in-r.html#cb544-1" tabindex="-1"></a><span class="co"># Use sweep to subtract each column&#39;s mean from each element in that column</span></span>
<span id="cb544-2"><a href="data-structures-in-r.html#cb544-2" tabindex="-1"></a><span class="fu">sweep</span>(<span class="at">x =</span> B, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">STATS =</span> col_means, <span class="at">FUN =</span> <span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<pre><code>##       [,1]  [,2]
## [1,] -3.75  2.75
## [2,] -0.75  0.75
## [3,]  1.25 -2.25
## [4,]  3.25 -1.25</code></pre>
<p>Manually achieving the same effect would involve a combination of <code>apply()</code>, <code>rep()</code>, and element-wise operations:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="data-structures-in-r.html#cb546-1" tabindex="-1"></a><span class="co"># Replicate the means to match the dimensions of the original matrix</span></span>
<span id="cb546-2"><a href="data-structures-in-r.html#cb546-2" tabindex="-1"></a>(rep_means <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(col_means, <span class="at">each =</span> <span class="fu">nrow</span>(B)), <span class="at">nrow =</span> <span class="fu">nrow</span>(B)))</span></code></pre></div>
<pre><code>##      [,1]   [,2]
## [1,] 4.75 106.25
## [2,] 4.75 106.25
## [3,] 4.75 106.25
## [4,] 4.75 106.25</code></pre>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="data-structures-in-r.html#cb548-1" tabindex="-1"></a><span class="co"># Subtract the replicated means from the original matrix element-wise</span></span>
<span id="cb548-2"><a href="data-structures-in-r.html#cb548-2" tabindex="-1"></a>B <span class="sc">-</span> rep_means</span></code></pre></div>
<pre><code>##       [,1]  [,2]
## [1,] -3.75  2.75
## [2,] -0.75  0.75
## [3,]  1.25 -2.25
## [4,]  3.25 -1.25</code></pre>
<p>In conclusion, matrices form an integral component of R, especially for multivariate analysis and linear algebra tasks. A comprehensive understanding of matrix operations in R can substantially elevate your data manipulation and analysis capabilities.</p>
</div>
</div>
<div id="list" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> List (<code>list</code>)<a href="data-structures-in-r.html#list" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A list (<code>list</code>) in R serve as an ordered collection of objects. In contrast to <a href="data-structures-in-r.html#vector">vectors</a>, elements within a list are not required to be of the same type. Moreover, some list elements may store multiple sub-elements, allowing for complex nested structures. For instance, a single element of a list might itself be a <a href="data-structures-in-r.html#matrix">matrix</a> or another list.</p>
<div id="create-a-list" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Create a List<a href="data-structures-in-r.html#create-a-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lists can be formed using the <code>list()</code> function:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="data-structures-in-r.html#cb550-1" tabindex="-1"></a><span class="co"># Constructing a list</span></span>
<span id="cb550-2"><a href="data-structures-in-r.html#cb550-2" tabindex="-1"></a>list_sample <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">name =</span> <span class="st">&quot;John&quot;</span>, </span>
<span id="cb550-3"><a href="data-structures-in-r.html#cb550-3" tabindex="-1"></a>                    <span class="at">age =</span> <span class="dv">25</span>, </span>
<span id="cb550-4"><a href="data-structures-in-r.html#cb550-4" tabindex="-1"></a>                    <span class="at">is_student =</span> <span class="cn">TRUE</span>,</span>
<span id="cb550-5"><a href="data-structures-in-r.html#cb550-5" tabindex="-1"></a>                    <span class="at">scores =</span> <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">90</span>, <span class="dv">78</span>, <span class="dv">92</span>), </span>
<span id="cb550-6"><a href="data-structures-in-r.html#cb550-6" tabindex="-1"></a>                    <span class="at">grade =</span> <span class="st">&quot;B&quot;</span>,</span>
<span id="cb550-7"><a href="data-structures-in-r.html#cb550-7" tabindex="-1"></a>                    <span class="at">relationships =</span> <span class="fu">list</span>(<span class="at">friends =</span> <span class="fu">c</span>(<span class="st">&quot;Marc&quot;</span>, <span class="st">&quot;Victor&quot;</span>, <span class="st">&quot;Peter&quot;</span>), </span>
<span id="cb550-8"><a href="data-structures-in-r.html#cb550-8" tabindex="-1"></a>                                         <span class="at">parents =</span> <span class="fu">c</span>(<span class="st">&quot;Valerie&quot;</span>, <span class="st">&quot;Bob&quot;</span>),</span>
<span id="cb550-9"><a href="data-structures-in-r.html#cb550-9" tabindex="-1"></a>                                         <span class="at">partner =</span> <span class="cn">NA</span>))</span>
<span id="cb550-10"><a href="data-structures-in-r.html#cb550-10" tabindex="-1"></a><span class="fu">print</span>(list_sample)</span></code></pre></div>
<pre><code>## $name
## [1] &quot;John&quot;
## 
## $age
## [1] 25
## 
## $is_student
## [1] TRUE
## 
## $scores
## [1] 88 90 78 92
## 
## $grade
## [1] &quot;B&quot;
## 
## $relationships
## $relationships$friends
## [1] &quot;Marc&quot;   &quot;Victor&quot; &quot;Peter&quot; 
## 
## $relationships$parents
## [1] &quot;Valerie&quot; &quot;Bob&quot;    
## 
## $relationships$partner
## [1] NA</code></pre>
<p>The elements within the list (<code>list_sample</code>) encompass diverse data types: character strings (<code>name</code> and <code>grade</code>), numeric values (<code>age</code>), logical indicators (<code>is_student</code>), vectors (<code>scores</code>), and nested lists (<code>relationships</code>). This shows the versatility of lists in R, capable of storing various data types and structures.</p>
<p>You can also convert other objects (e.g., vectors) into lists using the <code>as.list()</code> function:</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="data-structures-in-r.html#cb552-1" tabindex="-1"></a><span class="co"># Transform a numeric vector into a list</span></span>
<span id="cb552-2"><a href="data-structures-in-r.html#cb552-2" tabindex="-1"></a>converted_list <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb552-3"><a href="data-structures-in-r.html#cb552-3" tabindex="-1"></a></span>
<span id="cb552-4"><a href="data-structures-in-r.html#cb552-4" tabindex="-1"></a><span class="co"># Revert the list back to a vector</span></span>
<span id="cb552-5"><a href="data-structures-in-r.html#cb552-5" tabindex="-1"></a><span class="fu">unlist</span>(converted_list)  </span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
</div>
<div id="inspect-a-list" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Inspect a List<a href="data-structures-in-r.html#inspect-a-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To identify the type and components of a list, the following functions can be utilized:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="data-structures-in-r.html#cb554-1" tabindex="-1"></a><span class="co"># Identify the data structure of the list</span></span>
<span id="cb554-2"><a href="data-structures-in-r.html#cb554-2" tabindex="-1"></a><span class="fu">class</span>(list_sample)    <span class="co"># Outputs &quot;list&quot;.</span></span>
<span id="cb554-3"><a href="data-structures-in-r.html#cb554-3" tabindex="-1"></a><span class="fu">is.list</span>(list_sample)  <span class="co"># Outputs TRUE.</span></span>
<span id="cb554-4"><a href="data-structures-in-r.html#cb554-4" tabindex="-1"></a></span>
<span id="cb554-5"><a href="data-structures-in-r.html#cb554-5" tabindex="-1"></a><span class="co"># Identify the data type of each element within the list</span></span>
<span id="cb554-6"><a href="data-structures-in-r.html#cb554-6" tabindex="-1"></a><span class="fu">sapply</span>(list_sample, class)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;
## [1] TRUE
##          name           age    is_student        scores         grade 
##   &quot;character&quot;     &quot;numeric&quot;     &quot;logical&quot;     &quot;numeric&quot;   &quot;character&quot; 
## relationships 
##        &quot;list&quot;</code></pre>
<p>To determine the total count of items in a list, employ the <code>length()</code> function:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="data-structures-in-r.html#cb556-1" tabindex="-1"></a><span class="co"># Ascertain the count of items in the list</span></span>
<span id="cb556-2"><a href="data-structures-in-r.html#cb556-2" tabindex="-1"></a><span class="fu">length</span>(list_sample)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>To gain a comprehensive view of the list’s content and structure, the <code>str()</code> and <code>summary()</code> functions are valuable:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="data-structures-in-r.html#cb558-1" tabindex="-1"></a><span class="co"># Delve into the list&#39;s structure</span></span>
<span id="cb558-2"><a href="data-structures-in-r.html#cb558-2" tabindex="-1"></a><span class="fu">str</span>(list_sample)</span></code></pre></div>
<pre><code>## List of 6
##  $ name         : chr &quot;John&quot;
##  $ age          : num 25
##  $ is_student   : logi TRUE
##  $ scores       : num [1:4] 88 90 78 92
##  $ grade        : chr &quot;B&quot;
##  $ relationships:List of 3
##   ..$ friends: chr [1:3] &quot;Marc&quot; &quot;Victor&quot; &quot;Peter&quot;
##   ..$ parents: chr [1:2] &quot;Valerie&quot; &quot;Bob&quot;
##   ..$ partner: logi NA</code></pre>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="data-structures-in-r.html#cb560-1" tabindex="-1"></a><span class="co"># Summarize list elements</span></span>
<span id="cb560-2"><a href="data-structures-in-r.html#cb560-2" tabindex="-1"></a><span class="fu">summary</span>(list_sample)</span></code></pre></div>
<pre><code>##               Length Class  Mode     
## name          1      -none- character
## age           1      -none- numeric  
## is_student    1      -none- logical  
## scores        4      -none- numeric  
## grade         1      -none- character
## relationships 3      -none- list</code></pre>
</div>
<div id="select-and-modify-list" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Select and Modify<a href="data-structures-in-r.html#select-and-modify-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can select and modify specific elements using indexing:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="data-structures-in-r.html#cb562-1" tabindex="-1"></a><span class="co"># Retrieving elements by index using double square brackets</span></span>
<span id="cb562-2"><a href="data-structures-in-r.html#cb562-2" tabindex="-1"></a>list_sample[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="data-structures-in-r.html#cb564-1" tabindex="-1"></a><span class="co"># Fetching elements by name with the dollar sign</span></span>
<span id="cb564-2"><a href="data-structures-in-r.html#cb564-2" tabindex="-1"></a>list_sample<span class="sc">$</span>age</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="data-structures-in-r.html#cb566-1" tabindex="-1"></a><span class="co"># Another method for name-based access using double square brackets</span></span>
<span id="cb566-2"><a href="data-structures-in-r.html#cb566-2" tabindex="-1"></a>list_sample[[<span class="st">&quot;age&quot;</span>]]</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="data-structures-in-r.html#cb568-1" tabindex="-1"></a><span class="co"># Accessing multiple elements using an index via single square bracket</span></span>
<span id="cb568-2"><a href="data-structures-in-r.html#cb568-2" tabindex="-1"></a>list_sample[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## $name
## [1] &quot;John&quot;
## 
## $is_student
## [1] TRUE</code></pre>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="data-structures-in-r.html#cb570-1" tabindex="-1"></a><span class="co"># Nested lists: retrieving &#39;Marc&#39; from the &#39;friends&#39; sublist</span></span>
<span id="cb570-2"><a href="data-structures-in-r.html#cb570-2" tabindex="-1"></a>list_sample<span class="sc">$</span>relationships<span class="sc">$</span>friends[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Marc&quot;</code></pre>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="data-structures-in-r.html#cb572-1" tabindex="-1"></a><span class="co"># Introducing a new element</span></span>
<span id="cb572-2"><a href="data-structures-in-r.html#cb572-2" tabindex="-1"></a>list_sample<span class="sc">$</span>address <span class="ot">&lt;-</span> <span class="st">&quot;123 Main St&quot;</span></span>
<span id="cb572-3"><a href="data-structures-in-r.html#cb572-3" tabindex="-1"></a></span>
<span id="cb572-4"><a href="data-structures-in-r.html#cb572-4" tabindex="-1"></a><span class="co"># Adjusting an existing element</span></span>
<span id="cb572-5"><a href="data-structures-in-r.html#cb572-5" tabindex="-1"></a>list_sample<span class="sc">$</span>name <span class="ot">&lt;-</span> <span class="st">&quot;John Travolta&quot;</span></span>
<span id="cb572-6"><a href="data-structures-in-r.html#cb572-6" tabindex="-1"></a></span>
<span id="cb572-7"><a href="data-structures-in-r.html#cb572-7" tabindex="-1"></a><span class="co"># Deleting an element</span></span>
<span id="cb572-8"><a href="data-structures-in-r.html#cb572-8" tabindex="-1"></a>list_sample<span class="sc">$</span>relationships <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
</div>
<div id="add-labels-list" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Add Labels<a href="data-structures-in-r.html#add-labels-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can examine and modify the names of the list elements:</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="data-structures-in-r.html#cb573-1" tabindex="-1"></a><span class="co"># Checking the names of the elements</span></span>
<span id="cb573-2"><a href="data-structures-in-r.html#cb573-2" tabindex="-1"></a><span class="fu">names</span>(list_sample)</span></code></pre></div>
<pre><code>## [1] &quot;name&quot;       &quot;age&quot;        &quot;is_student&quot; &quot;scores&quot;     &quot;grade&quot;     
## [6] &quot;address&quot;</code></pre>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="data-structures-in-r.html#cb575-1" tabindex="-1"></a><span class="co"># Modifying the element names</span></span>
<span id="cb575-2"><a href="data-structures-in-r.html#cb575-2" tabindex="-1"></a><span class="fu">names</span>(list_sample) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Full Name&quot;</span>, <span class="st">&quot;Age&quot;</span>, <span class="st">&quot;Is Student&quot;</span>, </span>
<span id="cb575-3"><a href="data-structures-in-r.html#cb575-3" tabindex="-1"></a>                        <span class="st">&quot;Scores&quot;</span>, <span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Address&quot;</span>)</span></code></pre></div>
</div>
<div id="combine-lists" class="section level3 hasAnchor" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Combine Lists<a href="data-structures-in-r.html#combine-lists" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can merge lists with the <code>c()</code> function:</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="data-structures-in-r.html#cb576-1" tabindex="-1"></a><span class="co"># Create two sample lists</span></span>
<span id="cb576-2"><a href="data-structures-in-r.html#cb576-2" tabindex="-1"></a>list_1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">name =</span> <span class="st">&quot;Alice&quot;</span>, <span class="at">age =</span> <span class="dv">30</span>, <span class="at">is_female =</span> <span class="cn">TRUE</span>)</span>
<span id="cb576-3"><a href="data-structures-in-r.html#cb576-3" tabindex="-1"></a>list_2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">job =</span> <span class="st">&quot;Engineer&quot;</span>, <span class="at">city =</span> <span class="st">&quot;New York&quot;</span>)</span>
<span id="cb576-4"><a href="data-structures-in-r.html#cb576-4" tabindex="-1"></a></span>
<span id="cb576-5"><a href="data-structures-in-r.html#cb576-5" tabindex="-1"></a><span class="co"># Merge the lists</span></span>
<span id="cb576-6"><a href="data-structures-in-r.html#cb576-6" tabindex="-1"></a>merged_list <span class="ot">&lt;-</span> <span class="fu">c</span>(list_1, list_2)</span>
<span id="cb576-7"><a href="data-structures-in-r.html#cb576-7" tabindex="-1"></a><span class="fu">print</span>(merged_list)</span></code></pre></div>
<pre><code>## $name
## [1] &quot;Alice&quot;
## 
## $age
## [1] 30
## 
## $is_female
## [1] TRUE
## 
## $job
## [1] &quot;Engineer&quot;
## 
## $city
## [1] &quot;New York&quot;</code></pre>
<p>For more control over the merging position, use the <code>append()</code> function. It offers an <code>after</code> argument to specify where the second list should be inserted:</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="data-structures-in-r.html#cb578-1" tabindex="-1"></a><span class="co"># Merge the lists, placing the second list after the second element</span></span>
<span id="cb578-2"><a href="data-structures-in-r.html#cb578-2" tabindex="-1"></a>merged_at_position <span class="ot">&lt;-</span> <span class="fu">append</span>(list_1, list_2, <span class="at">after =</span> <span class="dv">2</span>)</span>
<span id="cb578-3"><a href="data-structures-in-r.html#cb578-3" tabindex="-1"></a><span class="fu">print</span>(merged_at_position)</span></code></pre></div>
<pre><code>## $name
## [1] &quot;Alice&quot;
## 
## $age
## [1] 30
## 
## $job
## [1] &quot;Engineer&quot;
## 
## $city
## [1] &quot;New York&quot;
## 
## $is_female
## [1] TRUE</code></pre>
<p>Here, the <code>append()</code> function inserts the elements of <code>list_2</code> immediately after the second element of <code>list_1</code>.</p>
<p>To reverse the order of a list’s elements, apply the <code>rev()</code> function:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="data-structures-in-r.html#cb580-1" tabindex="-1"></a><span class="co"># Reverse the order of list elements</span></span>
<span id="cb580-2"><a href="data-structures-in-r.html#cb580-2" tabindex="-1"></a>reversed_list <span class="ot">&lt;-</span> <span class="fu">rev</span>(list_sample)</span>
<span id="cb580-3"><a href="data-structures-in-r.html#cb580-3" tabindex="-1"></a><span class="fu">print</span>(reversed_list)</span></code></pre></div>
<pre><code>## $Address
## [1] &quot;123 Main St&quot;
## 
## $Grade
## [1] &quot;B&quot;
## 
## $Scores
## [1] 88 90 78 92
## 
## $`Is Student`
## [1] TRUE
## 
## $Age
## [1] 25
## 
## $`Full Name`
## [1] &quot;John Travolta&quot;</code></pre>
</div>
<div id="apply-family-list" class="section level3 hasAnchor" number="4.4.6">
<h3><span class="header-section-number">4.4.6</span> Apply Family<a href="data-structures-in-r.html#apply-family-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <strong>apply functions</strong> are not limited to vectors and matrices; they can be applied to lists, offering a more concise and optimized alternative to loops. This section delves into the use of <strong>apply functions</strong> with lists.</p>
<ol style="list-style-type: decimal">
<li><p><strong>lapply</strong>: The <code>lapply()</code> (list-apply) function is tailored specifically for lists. It applies a given function to each element of a list and consistently returns results in list format.</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="data-structures-in-r.html#cb582-1" tabindex="-1"></a><span class="co"># Define a sample list of numeric vectors</span></span>
<span id="cb582-2"><a href="data-structures-in-r.html#cb582-2" tabindex="-1"></a>sample_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb582-3"><a href="data-structures-in-r.html#cb582-3" tabindex="-1"></a>    <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>),</span>
<span id="cb582-4"><a href="data-structures-in-r.html#cb582-4" tabindex="-1"></a>    <span class="at">b =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">12</span>),</span>
<span id="cb582-5"><a href="data-structures-in-r.html#cb582-5" tabindex="-1"></a>    <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>)</span>
<span id="cb582-6"><a href="data-structures-in-r.html#cb582-6" tabindex="-1"></a>)</span>
<span id="cb582-7"><a href="data-structures-in-r.html#cb582-7" tabindex="-1"></a></span>
<span id="cb582-8"><a href="data-structures-in-r.html#cb582-8" tabindex="-1"></a><span class="co"># Use lapply to calculate the mean of each list element</span></span>
<span id="cb582-9"><a href="data-structures-in-r.html#cb582-9" tabindex="-1"></a><span class="fu">lapply</span>(<span class="at">X =</span> sample_list, <span class="at">FUN =</span> mean)</span></code></pre></div>
<pre><code>## $a
## [1] 4
## 
## $b
## [1] 7.5
## 
## $c
## [1] 6</code></pre></li>
<li><p><strong>sapply</strong>: The <code>sapply()</code> function (simplify-apply) aims to simplify the output, defaulting to vectors whenever feasible. Thus, unlike the <code>lapply()</code> function, its return type is not always a list.</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="data-structures-in-r.html#cb584-1" tabindex="-1"></a><span class="co"># Compute the mean of each list element and return a vector if possible</span></span>
<span id="cb584-2"><a href="data-structures-in-r.html#cb584-2" tabindex="-1"></a><span class="fu">sapply</span>(<span class="at">X =</span> sample_list, <span class="at">FUN =</span> mean)</span></code></pre></div>
<pre><code>##   a   b   c 
## 4.0 7.5 6.0</code></pre></li>
<li><p><strong>vapply</strong>: The <code>vapply()</code> function (value-apply) mirrors <code>sapply()</code> but with an additional provision: you can designate the expected return type. This feature not only ensures consistent output format but can also boost speed in specific cases.</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="data-structures-in-r.html#cb586-1" tabindex="-1"></a><span class="co"># Compute the mean (numeric) of each list element</span></span>
<span id="cb586-2"><a href="data-structures-in-r.html#cb586-2" tabindex="-1"></a><span class="fu">vapply</span>(<span class="at">X =</span> sample_list, <span class="at">FUN =</span> mean, <span class="at">FUN.VALUE =</span> <span class="fu">numeric</span>(<span class="dv">1</span>))</span></code></pre></div>
<pre><code>##   a   b   c 
## 4.0 7.5 6.0</code></pre>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="data-structures-in-r.html#cb588-1" tabindex="-1"></a><span class="co"># Compute the mean (numeric) and type (character) of each list element</span></span>
<span id="cb588-2"><a href="data-structures-in-r.html#cb588-2" tabindex="-1"></a><span class="fu">vapply</span>(<span class="at">X =</span> sample_list, </span>
<span id="cb588-3"><a href="data-structures-in-r.html#cb588-3" tabindex="-1"></a>       <span class="at">FUN =</span> <span class="cf">function</span>(vec) <span class="fu">list</span>(<span class="at">mean_value =</span> <span class="fu">mean</span>(vec), <span class="at">type =</span> <span class="fu">class</span>(vec)), </span>
<span id="cb588-4"><a href="data-structures-in-r.html#cb588-4" tabindex="-1"></a>       <span class="at">FUN.VALUE =</span> <span class="fu">list</span>(<span class="at">mean_value =</span> <span class="fu">numeric</span>(<span class="dv">1</span>), <span class="at">type =</span> <span class="fu">character</span>(<span class="dv">1</span>)))</span></code></pre></div>
<pre><code>##            a         b         c        
## mean_value 4         7.5       6        
## type       &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot;</code></pre></li>
</ol>
<p>In summary, lists are inherently flexible and, due to this characteristic, play a pivotal role in many R tasks, from data manipulation to functional programming.</p>
</div>
</div>
<div id="data.frame" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Data Frame (<code>data.frame</code>)<a href="data-structures-in-r.html#data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A data frame (<code>data.frame</code>) in R resembles a matrix in its two-dimensional, rectangular structure. However, unlike a matrix, a data frame allows each column to contain a different data type. Therefore, within each column (or vector), the elements must be homogeneous, but different columns can accommodate distinct types. Typically, when importing data into R, the default object type used is a data frame.</p>
<div id="create-a-data-frame" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Create a Data Frame<a href="data-structures-in-r.html#create-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data frames can be formed using the <code>data.frame()</code> function:</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="data-structures-in-r.html#cb590-1" tabindex="-1"></a><span class="co"># Create vectors for the data frame</span></span>
<span id="cb590-2"><a href="data-structures-in-r.html#cb590-2" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Anna&quot;</span>, <span class="st">&quot;Ella&quot;</span>, <span class="st">&quot;Sophia&quot;</span>)</span>
<span id="cb590-3"><a href="data-structures-in-r.html#cb590-3" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">23</span>, <span class="cn">NA</span>, <span class="dv">26</span>)</span>
<span id="cb590-4"><a href="data-structures-in-r.html#cb590-4" tabindex="-1"></a>female <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb590-5"><a href="data-structures-in-r.html#cb590-5" tabindex="-1"></a>grades <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>), <span class="at">levels =</span> <span class="fu">rev</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb590-6"><a href="data-structures-in-r.html#cb590-6" tabindex="-1"></a>major <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Math&quot;</span>, <span class="st">&quot;Biology&quot;</span>, <span class="st">&quot;Physics&quot;</span>)</span>
<span id="cb590-7"><a href="data-structures-in-r.html#cb590-7" tabindex="-1"></a></span>
<span id="cb590-8"><a href="data-structures-in-r.html#cb590-8" tabindex="-1"></a><span class="co"># Construct the data frame</span></span>
<span id="cb590-9"><a href="data-structures-in-r.html#cb590-9" tabindex="-1"></a>students_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> names, </span>
<span id="cb590-10"><a href="data-structures-in-r.html#cb590-10" tabindex="-1"></a>                          <span class="at">age =</span> ages, </span>
<span id="cb590-11"><a href="data-structures-in-r.html#cb590-11" tabindex="-1"></a>                          <span class="at">female =</span> female,</span>
<span id="cb590-12"><a href="data-structures-in-r.html#cb590-12" tabindex="-1"></a>                          <span class="at">grade =</span> grades, </span>
<span id="cb590-13"><a href="data-structures-in-r.html#cb590-13" tabindex="-1"></a>                          <span class="at">major =</span> major)</span>
<span id="cb590-14"><a href="data-structures-in-r.html#cb590-14" tabindex="-1"></a><span class="fu">print</span>(students_df)</span></code></pre></div>
<pre><code>##     name age female grade   major
## 1   Anna  23   TRUE     A    Math
## 2   Ella  NA   TRUE     B Biology
## 3 Sophia  26   TRUE     A Physics</code></pre>
<p>In the above code chunk, we observe that like a matrix, every column in a data frame possesses an identical length (3 rows). However, the first and fifth columns are composed of character data (<code>name</code>, <code>major</code>), while the second column comprises numeric data (<code>age</code>), the third column consists of logical values (<code>female</code>), and the fourth column is an ordered factor (<code>grade</code>). This capacity to host varied data types in separate columns is what sets data frames apart from matrices.</p>
</div>
<div id="inspect-a-data-frame" class="section level3 hasAnchor" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Inspect a Data Frame<a href="data-structures-in-r.html#inspect-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To identify the type and components of a data frame, the following functions can be utilized:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="data-structures-in-r.html#cb592-1" tabindex="-1"></a><span class="co"># Identify the data structure of the data frame</span></span>
<span id="cb592-2"><a href="data-structures-in-r.html#cb592-2" tabindex="-1"></a><span class="fu">class</span>(students_df)          <span class="co"># Outputs &quot;data.frame&quot;.</span></span>
<span id="cb592-3"><a href="data-structures-in-r.html#cb592-3" tabindex="-1"></a><span class="fu">is.data.frame</span>(students_df)  <span class="co"># Outputs TRUE</span></span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;
## [1] TRUE</code></pre>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="data-structures-in-r.html#cb594-1" tabindex="-1"></a><span class="co"># Identify the data type of each column within the data frame</span></span>
<span id="cb594-2"><a href="data-structures-in-r.html#cb594-2" tabindex="-1"></a><span class="fu">sapply</span>(students_df, class)</span></code></pre></div>
<pre><code>## $name
## [1] &quot;character&quot;
## 
## $age
## [1] &quot;numeric&quot;
## 
## $female
## [1] &quot;logical&quot;
## 
## $grade
## [1] &quot;ordered&quot; &quot;factor&quot; 
## 
## $major
## [1] &quot;character&quot;</code></pre>
<p>Many matrix operations are compatible with data frames. For instance, to determine the dimensions of a data frame, the functions <code>nrow()</code>, <code>ncol()</code>, and <code>dim()</code> can be used, analogous to their applications with matrices discussed in Chapter <a href="data-structures-in-r.html#matrix">4.3</a>:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="data-structures-in-r.html#cb596-1" tabindex="-1"></a><span class="co"># Retrieve row count</span></span>
<span id="cb596-2"><a href="data-structures-in-r.html#cb596-2" tabindex="-1"></a>(rows_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(students_df))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="data-structures-in-r.html#cb598-1" tabindex="-1"></a><span class="co"># Retrieve column count</span></span>
<span id="cb598-2"><a href="data-structures-in-r.html#cb598-2" tabindex="-1"></a>(columns_count <span class="ot">&lt;-</span> <span class="fu">ncol</span>(students_df))</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="data-structures-in-r.html#cb600-1" tabindex="-1"></a><span class="co"># Obtain overall dimensions</span></span>
<span id="cb600-2"><a href="data-structures-in-r.html#cb600-2" tabindex="-1"></a><span class="fu">dim</span>(students_df) <span class="co"># Returns a vector: c(rows_count, columns_count)</span></span></code></pre></div>
<pre><code>## [1] 3 5</code></pre>
<p>The <code>head()</code> and <code>tail()</code> functions are employed to extract the first and last <code>n</code> rows of a data frame, respectively, where <code>n</code> is defaulted to 6. They are particularly beneficial when working with large data frames, as displaying the entirety in the R console becomes unwieldy.</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="data-structures-in-r.html#cb602-1" tabindex="-1"></a><span class="co"># Retrieve the first two rows</span></span>
<span id="cb602-2"><a href="data-structures-in-r.html#cb602-2" tabindex="-1"></a><span class="fu">head</span>(students_df, <span class="at">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##   name age female grade   major
## 1 Anna  23   TRUE     A    Math
## 2 Ella  NA   TRUE     B Biology</code></pre>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="data-structures-in-r.html#cb604-1" tabindex="-1"></a><span class="co"># Obtain the second-last row</span></span>
<span id="cb604-2"><a href="data-structures-in-r.html#cb604-2" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">tail</span>(students_df, <span class="at">n =</span> <span class="dv">2</span>), <span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##   name age female grade   major
## 2 Ella  NA   TRUE     B Biology</code></pre>
<p>For data frames with many columns, which can be cumbersome to display fully using <code>head()</code> or <code>tail()</code>, RStudio’s <code>View()</code> function is beneficial. It displays the data frame in a spreadsheet style. It’s worth noting that the <code>View()</code> function is exclusive to RStudio and is not a feature of base R.</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="data-structures-in-r.html#cb606-1" tabindex="-1"></a><span class="co"># Open the data frame in RStudio&#39;s spreadsheet-style viewer</span></span>
<span id="cb606-2"><a href="data-structures-in-r.html#cb606-2" tabindex="-1"></a><span class="fu">View</span>(students_df)</span></code></pre></div>
<p>Furthermore, the <code>summary()</code> and <code>str()</code> functions provide detailed insights into a data frame’s columns in terms of their composition and characteristics. These tools are essential for understanding facets of the data that might not be immediately apparent from a cursory glance.</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="data-structures-in-r.html#cb607-1" tabindex="-1"></a><span class="co"># Inspect the data frame&#39;s structure</span></span>
<span id="cb607-2"><a href="data-structures-in-r.html#cb607-2" tabindex="-1"></a><span class="fu">str</span>(students_df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  5 variables:
##  $ name  : chr  &quot;Anna&quot; &quot;Ella&quot; &quot;Sophia&quot;
##  $ age   : num  23 NA 26
##  $ female: logi  TRUE TRUE TRUE
##  $ grade : Ord.factor w/ 6 levels &quot;F&quot;&lt;&quot;E&quot;&lt;&quot;D&quot;&lt;&quot;C&quot;&lt;..: 6 5 6
##  $ major : chr  &quot;Math&quot; &quot;Biology&quot; &quot;Physics&quot;</code></pre>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="data-structures-in-r.html#cb609-1" tabindex="-1"></a><span class="co"># Gather a comprehensive overview of the data frame</span></span>
<span id="cb609-2"><a href="data-structures-in-r.html#cb609-2" tabindex="-1"></a><span class="fu">summary</span>(students_df)</span></code></pre></div>
<pre><code>##      name                age         female        grade    major          
##  Length:3           Min.   :23.00   Mode:logical   F:0   Length:3          
##  Class :character   1st Qu.:23.75   TRUE:3         E:0   Class :character  
##  Mode  :character   Median :24.50                  D:0   Mode  :character  
##                     Mean   :24.50                  C:0                     
##                     3rd Qu.:25.25                  B:1                     
##                     Max.   :26.00                  A:2                     
##                     NA&#39;s   :1</code></pre>
</div>
<div id="select-and-modify-data.frame" class="section level3 hasAnchor" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> Select and Modify<a href="data-structures-in-r.html#select-and-modify-data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Elements within a data frame can be accessed, modified, or created using various indexing methods:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="data-structures-in-r.html#cb611-1" tabindex="-1"></a><span class="co"># Retrieve specific cell: row 2, column 4</span></span>
<span id="cb611-2"><a href="data-structures-in-r.html#cb611-2" tabindex="-1"></a>students_df[<span class="dv">2</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] B
## Levels: F &lt; E &lt; D &lt; C &lt; B &lt; A</code></pre>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="data-structures-in-r.html#cb613-1" tabindex="-1"></a><span class="co"># Obtain an entire column by its name</span></span>
<span id="cb613-2"><a href="data-structures-in-r.html#cb613-2" tabindex="-1"></a>students_df<span class="sc">$</span>major</span>
<span id="cb613-3"><a href="data-structures-in-r.html#cb613-3" tabindex="-1"></a></span>
<span id="cb613-4"><a href="data-structures-in-r.html#cb613-4" tabindex="-1"></a><span class="co"># Another method for name-based column access</span></span>
<span id="cb613-5"><a href="data-structures-in-r.html#cb613-5" tabindex="-1"></a>students_df[[<span class="st">&quot;major&quot;</span>]]</span>
<span id="cb613-6"><a href="data-structures-in-r.html#cb613-6" tabindex="-1"></a></span>
<span id="cb613-7"><a href="data-structures-in-r.html#cb613-7" tabindex="-1"></a><span class="co"># Yet another method for name-based column access</span></span>
<span id="cb613-8"><a href="data-structures-in-r.html#cb613-8" tabindex="-1"></a>students_df[, <span class="st">&quot;major&quot;</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Math&quot;    &quot;Biology&quot; &quot;Physics&quot;
## [1] &quot;Math&quot;    &quot;Biology&quot; &quot;Physics&quot;
## [1] &quot;Math&quot;    &quot;Biology&quot; &quot;Physics&quot;</code></pre>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="data-structures-in-r.html#cb615-1" tabindex="-1"></a><span class="co"># Obtain an entire column while retaining the data frame structure</span></span>
<span id="cb615-2"><a href="data-structures-in-r.html#cb615-2" tabindex="-1"></a>students_df[<span class="st">&quot;major&quot;</span>]</span></code></pre></div>
<pre><code>##     major
## 1    Math
## 2 Biology
## 3 Physics</code></pre>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="data-structures-in-r.html#cb617-1" tabindex="-1"></a><span class="co"># Access multiple columns by their names</span></span>
<span id="cb617-2"><a href="data-structures-in-r.html#cb617-2" tabindex="-1"></a>students_df[, <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;grade&quot;</span>)]</span>
<span id="cb617-3"><a href="data-structures-in-r.html#cb617-3" tabindex="-1"></a></span>
<span id="cb617-4"><a href="data-structures-in-r.html#cb617-4" tabindex="-1"></a><span class="co"># Another method for name-based multiple column access</span></span>
<span id="cb617-5"><a href="data-structures-in-r.html#cb617-5" tabindex="-1"></a>students_df[<span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;grade&quot;</span>)]</span></code></pre></div>
<pre><code>##     name grade
## 1   Anna     A
## 2   Ella     B
## 3 Sophia     A
##     name grade
## 1   Anna     A
## 2   Ella     B
## 3 Sophia     A</code></pre>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="data-structures-in-r.html#cb619-1" tabindex="-1"></a><span class="co"># Extract rows based on specific criteria</span></span>
<span id="cb619-2"><a href="data-structures-in-r.html#cb619-2" tabindex="-1"></a>selected_rows <span class="ot">=</span> students_df<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">24</span> <span class="sc">&amp;</span> students_df<span class="sc">$</span>grade <span class="sc">==</span> <span class="st">&quot;A&quot;</span></span>
<span id="cb619-3"><a href="data-structures-in-r.html#cb619-3" tabindex="-1"></a>students_df[selected_rows, ]</span></code></pre></div>
<pre><code>##     name age female grade   major
## 3 Sophia  26   TRUE     A Physics</code></pre>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="data-structures-in-r.html#cb621-1" tabindex="-1"></a><span class="co"># Introduce a new column (ensuring the vector&#39;s length matches the number of rows)</span></span>
<span id="cb621-2"><a href="data-structures-in-r.html#cb621-2" tabindex="-1"></a>students_df<span class="sc">$</span>gpa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">3.7</span>, <span class="fl">3.4</span>, <span class="fl">3.9</span>)</span>
<span id="cb621-3"><a href="data-structures-in-r.html#cb621-3" tabindex="-1"></a><span class="fu">print</span>(students_df)</span></code></pre></div>
<pre><code>##     name age female grade   major gpa
## 1   Anna  23   TRUE     A    Math 3.7
## 2   Ella  NA   TRUE     B Biology 3.4
## 3 Sophia  26   TRUE     A Physics 3.9</code></pre>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="data-structures-in-r.html#cb623-1" tabindex="-1"></a><span class="co"># Delete a column</span></span>
<span id="cb623-2"><a href="data-structures-in-r.html#cb623-2" tabindex="-1"></a>students_df<span class="sc">$</span>female <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb623-3"><a href="data-structures-in-r.html#cb623-3" tabindex="-1"></a><span class="fu">print</span>(students_df)</span></code></pre></div>
<pre><code>##     name age grade   major gpa
## 1   Anna  23     A    Math 3.7
## 2   Ella  NA     B Biology 3.4
## 3 Sophia  26     A Physics 3.9</code></pre>
<div id="the-with-function" class="section level4 unnumbered hasAnchor">
<h4>The <code>with()</code> Function<a href="data-structures-in-r.html#the-with-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <strong><code>with()</code> function</strong> is an <a href="r-basics.html#indirect-functions">indirect function</a> that simplifies operations on data frame columns by eliminating the need for constant data frame referencing.</p>
<p>For instance, when working with a data frame like <code>students_df</code>, the conventional way to concatenate columns <code>name</code> and <code>major</code> would require referencing the data frame explicitly using <code>students_df$name</code> and <code>students_df$major</code>:</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="data-structures-in-r.html#cb625-1" tabindex="-1"></a><span class="co"># Traditional approach: operation with repeated data frame reference</span></span>
<span id="cb625-2"><a href="data-structures-in-r.html#cb625-2" tabindex="-1"></a><span class="fu">paste0</span>(students_df<span class="sc">$</span>name, <span class="st">&quot; studies &quot;</span>, students_df<span class="sc">$</span>major, <span class="st">&quot;.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Anna studies Math.&quot;      &quot;Ella studies Biology.&quot;  
## [3] &quot;Sophia studies Physics.&quot;</code></pre>
<p>Using <code>with()</code>, you can perform the same operation without the repeated references:</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="data-structures-in-r.html#cb627-1" tabindex="-1"></a><span class="co"># Using with(): operation without repeated data frame reference</span></span>
<span id="cb627-2"><a href="data-structures-in-r.html#cb627-2" tabindex="-1"></a><span class="fu">with</span>(students_df, <span class="fu">paste0</span>(name, <span class="st">&quot; studies &quot;</span>, major, <span class="st">&quot;.&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;Anna studies Math.&quot;      &quot;Ella studies Biology.&quot;  
## [3] &quot;Sophia studies Physics.&quot;</code></pre>
<p>Here are some more illustrative examples:</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="data-structures-in-r.html#cb629-1" tabindex="-1"></a><span class="co"># Traditional approach: operations with repeated data frame reference</span></span>
<span id="cb629-2"><a href="data-structures-in-r.html#cb629-2" tabindex="-1"></a><span class="fu">sum</span>(students_df<span class="sc">$</span>gpa <span class="sc">&gt;=</span> <span class="fl">3.5</span>) <span class="sc">/</span> <span class="fu">length</span>(students_df<span class="sc">$</span>gpa) <span class="sc">*</span> <span class="dv">100</span>     <span class="co"># Cum Laude Share</span></span>
<span id="cb629-3"><a href="data-structures-in-r.html#cb629-3" tabindex="-1"></a>students_df[students_df<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">24</span> <span class="sc">&amp;</span> students_df<span class="sc">$</span>grade <span class="sc">==</span> <span class="st">&quot;A&quot;</span>, ]  <span class="co"># Select rows</span></span>
<span id="cb629-4"><a href="data-structures-in-r.html#cb629-4" tabindex="-1"></a></span>
<span id="cb629-5"><a href="data-structures-in-r.html#cb629-5" tabindex="-1"></a><span class="co"># Using with(): operations without repeated data frame reference</span></span>
<span id="cb629-6"><a href="data-structures-in-r.html#cb629-6" tabindex="-1"></a><span class="fu">with</span>(students_df, <span class="fu">sum</span>(gpa <span class="sc">&gt;=</span> <span class="fl">3.5</span>) <span class="sc">/</span> <span class="fu">length</span>(gpa) <span class="sc">*</span> <span class="dv">100</span>)          <span class="co"># Cum Laude Share</span></span>
<span id="cb629-7"><a href="data-structures-in-r.html#cb629-7" tabindex="-1"></a>students_df[<span class="fu">with</span>(students_df, age <span class="sc">&gt;</span> <span class="dv">24</span> <span class="sc">&amp;</span> grade <span class="sc">==</span> <span class="st">&quot;A&quot;</span>), ]       <span class="co"># Select rows</span></span></code></pre></div>
<pre><code>## [1] 66.66667
##     name age grade   major gpa
## 3 Sophia  26     A Physics 3.9
## [1] 66.66667
##     name age grade   major gpa
## 3 Sophia  26     A Physics 3.9</code></pre>
<p>In summary, the <code>with()</code> function streamlines operations involving data frames by setting a temporary environment for computations. This can make the code more concise and reduce the likelihood of errors due to repeated data object references.</p>
</div>
</div>
<div id="add-labels-data.frame" class="section level3 hasAnchor" number="4.5.4">
<h3><span class="header-section-number">4.5.4</span> Add Labels<a href="data-structures-in-r.html#add-labels-data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can examine and modify the names of the data frame rows and columns:</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="data-structures-in-r.html#cb631-1" tabindex="-1"></a><span class="co"># Names of columns and rows</span></span>
<span id="cb631-2"><a href="data-structures-in-r.html#cb631-2" tabindex="-1"></a><span class="fu">colnames</span>(students_df)</span></code></pre></div>
<pre><code>## [1] &quot;name&quot;  &quot;age&quot;   &quot;grade&quot; &quot;major&quot; &quot;gpa&quot;</code></pre>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="data-structures-in-r.html#cb633-1" tabindex="-1"></a><span class="fu">rownames</span>(students_df)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="data-structures-in-r.html#cb635-1" tabindex="-1"></a><span class="co"># Change column names</span></span>
<span id="cb635-2"><a href="data-structures-in-r.html#cb635-2" tabindex="-1"></a><span class="fu">colnames</span>(students_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Name&quot;</span>, <span class="st">&quot;Age&quot;</span>, <span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Major&quot;</span>, <span class="st">&quot;GPA&quot;</span>)</span>
<span id="cb635-3"><a href="data-structures-in-r.html#cb635-3" tabindex="-1"></a></span>
<span id="cb635-4"><a href="data-structures-in-r.html#cb635-4" tabindex="-1"></a><span class="co"># Change the name of a specific column</span></span>
<span id="cb635-5"><a href="data-structures-in-r.html#cb635-5" tabindex="-1"></a><span class="fu">colnames</span>(students_df)[<span class="fu">colnames</span>(students_df) <span class="sc">==</span> <span class="st">&quot;Major&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Field of Study&quot;</span></span>
<span id="cb635-6"><a href="data-structures-in-r.html#cb635-6" tabindex="-1"></a>students_df</span></code></pre></div>
<pre><code>##     Name Age Grade Field of Study GPA
## 1   Anna  23     A           Math 3.7
## 2   Ella  NA     B        Biology 3.4
## 3 Sophia  26     A        Physics 3.9</code></pre>
</div>
<div id="handle-missing-values-data.frame" class="section level3 hasAnchor" number="4.5.5">
<h3><span class="header-section-number">4.5.5</span> Handle Missing Values<a href="data-structures-in-r.html#handle-missing-values-data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data frames in R can also contain missing values, represented by <code>NA</code>:</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="data-structures-in-r.html#cb637-1" tabindex="-1"></a><span class="co"># Number of missing values in each column</span></span>
<span id="cb637-2"><a href="data-structures-in-r.html#cb637-2" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(students_df))</span></code></pre></div>
<pre><code>##           Name            Age          Grade Field of Study            GPA 
##              0              1              0              0              0</code></pre>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="data-structures-in-r.html#cb639-1" tabindex="-1"></a><span class="co"># Remove all rows that contain missing values</span></span>
<span id="cb639-2"><a href="data-structures-in-r.html#cb639-2" tabindex="-1"></a><span class="fu">na.omit</span>(students_df)</span></code></pre></div>
<pre><code>##     Name Age Grade Field of Study GPA
## 1   Anna  23     A           Math 3.7
## 3 Sophia  26     A        Physics 3.9</code></pre>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="data-structures-in-r.html#cb641-1" tabindex="-1"></a><span class="co"># Replace missing values in &#39;Age&#39; column with the mean age</span></span>
<span id="cb641-2"><a href="data-structures-in-r.html#cb641-2" tabindex="-1"></a>students_df<span class="sc">$</span>Age[<span class="fu">is.na</span>(students_df<span class="sc">$</span>Age)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(students_df<span class="sc">$</span>Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb641-3"><a href="data-structures-in-r.html#cb641-3" tabindex="-1"></a><span class="fu">print</span>(students_df)</span></code></pre></div>
<pre><code>##     Name  Age Grade Field of Study GPA
## 1   Anna 23.0     A           Math 3.7
## 2   Ella 24.5     B        Biology 3.4
## 3 Sophia 26.0     A        Physics 3.9</code></pre>
</div>
<div id="combine-data-frames" class="section level3 hasAnchor" number="4.5.6">
<h3><span class="header-section-number">4.5.6</span> Combine Data Frames<a href="data-structures-in-r.html#combine-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When handling data in R, there are instances where combining data from different sources or merging tables is necessary. In this context, functions like <code>merge()</code>, <code>rbind()</code>, and <code>cbind()</code> are invaluable. Let’s explore these functions with examples:</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>rbind()</code></strong>: This function allows you to concatenate data frames vertically, stacking one on top of the other. It is essential that the columns of both data frames match in both name and order:</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="data-structures-in-r.html#cb643-1" tabindex="-1"></a><span class="co"># Create data frames with identical column names</span></span>
<span id="cb643-2"><a href="data-structures-in-r.html#cb643-2" tabindex="-1"></a>(students_2022 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Alice&quot;</span>, <span class="st">&quot;Bob&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">22</span>)))</span>
<span id="cb643-3"><a href="data-structures-in-r.html#cb643-3" tabindex="-1"></a>(students_2023 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Charlie&quot;</span>, <span class="st">&quot;David&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">23</span>, <span class="dv">24</span>)))</span></code></pre></div>
<pre><code>##    Name Age
## 1 Alice  21
## 2   Bob  22
##      Name Age
## 1 Charlie  23
## 2   David  24</code></pre>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="data-structures-in-r.html#cb645-1" tabindex="-1"></a><span class="co"># Combine data frames by rows</span></span>
<span id="cb645-2"><a href="data-structures-in-r.html#cb645-2" tabindex="-1"></a><span class="fu">rbind</span>(students_2022, students_2023)</span></code></pre></div>
<pre><code>##      Name Age
## 1   Alice  21
## 2     Bob  22
## 3 Charlie  23
## 4   David  24</code></pre></li>
<li><p><strong><code>cbind()</code></strong>: This function combines data frames horizontally, side by side. It’s essential the data frames have the same number of rows, and the rows must have the same order. In the provided example, the first score of 91.1 corresponds with “Alice” from the first row, while the second score of 85.3 aligns with “Bob” from the second row:</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="data-structures-in-r.html#cb647-1" tabindex="-1"></a><span class="co"># Create a data frame with the same number of rows</span></span>
<span id="cb647-2"><a href="data-structures-in-r.html#cb647-2" tabindex="-1"></a>(scores_2022 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Score =</span> <span class="fu">c</span>(<span class="fl">91.1</span>, <span class="fl">85.3</span>)))</span></code></pre></div>
<pre><code>##   Score
## 1  91.1
## 2  85.3</code></pre>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="data-structures-in-r.html#cb649-1" tabindex="-1"></a><span class="co"># Combine data frames by columns</span></span>
<span id="cb649-2"><a href="data-structures-in-r.html#cb649-2" tabindex="-1"></a><span class="fu">cbind</span>(students_2022, scores_2022)</span></code></pre></div>
<pre><code>##    Name Age Score
## 1 Alice  21  91.1
## 2   Bob  22  85.3</code></pre></li>
<li><p><strong><code>merge()</code></strong>: The <code>merge()</code> function comes into play when data frames don’t necessarily have rows in the same order, but possess a shared identifier (such as “Name”). This function aligns the data frames by the shared identifier, determined using the <code>by</code> argument (such as <code>by = "Name"</code>):</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="data-structures-in-r.html#cb651-1" tabindex="-1"></a><span class="co"># Create a data frame with a common column &quot;Name&quot;</span></span>
<span id="cb651-2"><a href="data-structures-in-r.html#cb651-2" tabindex="-1"></a>(scores_2022 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Alice&quot;</span>), <span class="at">Score =</span> <span class="fu">c</span>(<span class="fl">85.3</span>, <span class="fl">91.1</span>)))</span></code></pre></div>
<pre><code>##    Name Score
## 1   Bob  85.3
## 2 Alice  91.1</code></pre>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="data-structures-in-r.html#cb653-1" tabindex="-1"></a><span class="co"># Merge data frames by common column &quot;Name&quot;</span></span>
<span id="cb653-2"><a href="data-structures-in-r.html#cb653-2" tabindex="-1"></a><span class="fu">merge</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>)</span></code></pre></div>
<pre><code>##    Name Age Score
## 1 Alice  21  91.1
## 2   Bob  22  85.3</code></pre></li>
<li><p><strong><code>merge()</code> with Different Merge Types</strong>: Sometimes, two data frames intended for merging may have varying row counts. This can occur because one data frame contains extra entries not found in the other. In these cases, you can specify the type of merge to perform:</p>
<ul>
<li><strong>Inner Merge</strong> (<code>all = FALSE</code>): Retains only the entries found in both data frames.</li>
<li><strong>Outer Merge</strong> (<code>all = TRUE</code>): Retains all unique entries from both data frames.</li>
<li><strong>Left Merge</strong> (<code>all.x = TRUE</code>): Keeps all entries from the first data frame, regardless of whether they have a match in the second data frame.</li>
<li><strong>Right Merge</strong> (<code>all.y = TRUE</code>): Keeps all entries from the second data frame.</li>
</ul>
<p>If an entry is present in one data frame but absent in the other, the missing columns for that entry are populated with <code>NA</code> values:</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="data-structures-in-r.html#cb655-1" tabindex="-1"></a><span class="co"># Construct a data frame with a partially shared &quot;Name&quot; column</span></span>
<span id="cb655-2"><a href="data-structures-in-r.html#cb655-2" tabindex="-1"></a>(scores_2022 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Eva&quot;</span>), <span class="at">Score =</span> <span class="fu">c</span>(<span class="fl">85.3</span>, <span class="fl">78.3</span>)))</span></code></pre></div>
<pre><code>##   Name Score
## 1  Bob  85.3
## 2  Eva  78.3</code></pre>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="data-structures-in-r.html#cb657-1" tabindex="-1"></a><span class="co"># Inner-merge retaining common &#39;Name&#39; entries (benchmark)</span></span>
<span id="cb657-2"><a href="data-structures-in-r.html#cb657-2" tabindex="-1"></a><span class="fu">merge</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>, <span class="at">all =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>##   Name Age Score
## 1  Bob  22  85.3</code></pre>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="data-structures-in-r.html#cb659-1" tabindex="-1"></a><span class="co"># Outer-merge retaining all unique &#39;Name&#39; entries from both data frames</span></span>
<span id="cb659-2"><a href="data-structures-in-r.html#cb659-2" tabindex="-1"></a><span class="fu">merge</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##    Name Age Score
## 1 Alice  21    NA
## 2   Bob  22  85.3
## 3   Eva  NA  78.3</code></pre>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="data-structures-in-r.html#cb661-1" tabindex="-1"></a><span class="co"># Left-merge to keep all rows from &#39;students_2022&#39;</span></span>
<span id="cb661-2"><a href="data-structures-in-r.html#cb661-2" tabindex="-1"></a><span class="fu">merge</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##    Name Age Score
## 1 Alice  21    NA
## 2   Bob  22  85.3</code></pre>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="data-structures-in-r.html#cb663-1" tabindex="-1"></a><span class="co"># Right-merge to retain all rows from &#39;scores_2022&#39;</span></span>
<span id="cb663-2"><a href="data-structures-in-r.html#cb663-2" tabindex="-1"></a><span class="fu">merge</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##   Name Age Score
## 1  Bob  22  85.3
## 2  Eva  NA  78.3</code></pre></li>
<li><p><strong><code>do.call()</code> + <code>rbind()</code>, <code>cbind()</code>, or <code>merge()</code></strong>: When you use the <a href="r-basics.html#indirect-functions">indirect function</a> <code>do.call()</code> in combination with functions like <code>rbind()</code>, <code>cbind()</code>, or <code>merge()</code> and supply a list of data frames, it effectively binds them together.</p>
<p>For example, if you have a list of data frames and you want to bind them all together into one data frame by stacking them vertically:</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="data-structures-in-r.html#cb665-1" tabindex="-1"></a><span class="co"># Create data frames for different months</span></span>
<span id="cb665-2"><a href="data-structures-in-r.html#cb665-2" tabindex="-1"></a>jan <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Eve&quot;</span>, <span class="st">&quot;Frank&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">26</span>))</span>
<span id="cb665-3"><a href="data-structures-in-r.html#cb665-3" tabindex="-1"></a>feb <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Grace&quot;</span>, <span class="st">&quot;Harry&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">27</span>, <span class="dv">28</span>))</span>
<span id="cb665-4"><a href="data-structures-in-r.html#cb665-4" tabindex="-1"></a>mar <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Irene&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">29</span>))</span>
<span id="cb665-5"><a href="data-structures-in-r.html#cb665-5" tabindex="-1"></a></span>
<span id="cb665-6"><a href="data-structures-in-r.html#cb665-6" tabindex="-1"></a><span class="co"># Save all data frames in a list</span></span>
<span id="cb665-7"><a href="data-structures-in-r.html#cb665-7" tabindex="-1"></a>list_of_dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(jan, feb, mar)</span>
<span id="cb665-8"><a href="data-structures-in-r.html#cb665-8" tabindex="-1"></a></span>
<span id="cb665-9"><a href="data-structures-in-r.html#cb665-9" tabindex="-1"></a><span class="co"># Combine all data frames by rows</span></span>
<span id="cb665-10"><a href="data-structures-in-r.html#cb665-10" tabindex="-1"></a>(combined_df <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, list_of_dfs))</span></code></pre></div>
<pre><code>##    Name Age
## 1   Eve  25
## 2 Frank  26
## 3 Grace  27
## 4 Harry  28
## 5 Irene  29</code></pre>
<p>What <code>do.call()</code> does here is similar to iteratively binding each data frame in the list. The resulting <code>combined_df</code> stacks <code>jan</code>, <code>feb</code>, and <code>mar</code> on top of each other. The advantage of utilizing <code>do.call(rbind, list_of_dfs)</code> over the direct <code>rbind(jan, feb, mar)</code> approach is its flexibility: it can merge any number of data frames within a list without needing to know their individual names or the total count. This makes <code>do.call()</code> particularly valuable when the number of data frames is unpredictable, a scenario frequently encountered in data repositories. In such repositories, data might be segmented into separate data frames for each year. Using the conventional <code>rbind()</code> method would necessitate yearly adjustments to accommodate the varying number of data frames. In contrast, the <code>do.call()</code> method operates smoothly without such annual adjustments.</p></li>
</ol>
<p>When combining multiple data frames, always check for consistency in column names and data types to prevent unexpected results.</p>
</div>
<div id="apply-family-data.frame" class="section level3 hasAnchor" number="4.5.7">
<h3><span class="header-section-number">4.5.7</span> Apply Family<a href="data-structures-in-r.html#apply-family-data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, the <strong>apply functions</strong> execute repeated operations without the need for writing explicit loops. While initially tailored for matrices, they also offer great utility with data frames. This chapter elucidates the application of the apply family on data frames.</p>
<div id="apply-by-columns-and-rows-data.frame" class="section level4 unnumbered hasAnchor">
<h4>Apply by Columns and Rows<a href="data-structures-in-r.html#apply-by-columns-and-rows-data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p><strong><code>apply()</code></strong>: While initially intended for matrices, <code>apply()</code> can be used with data frames, treating them as lists of columns. Its core function is to process a function over rows or columns:</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="data-structures-in-r.html#cb667-1" tabindex="-1"></a><span class="co"># Sample data frame</span></span>
<span id="cb667-2"><a href="data-structures-in-r.html#cb667-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">b =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb667-3"><a href="data-structures-in-r.html#cb667-3" tabindex="-1"></a></span>
<span id="cb667-4"><a href="data-structures-in-r.html#cb667-4" tabindex="-1"></a><span class="co"># Mean values across columns (resultant is a vector)</span></span>
<span id="cb667-5"><a href="data-structures-in-r.html#cb667-5" tabindex="-1"></a><span class="fu">apply</span>(<span class="at">X =</span> df, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> mean)</span></code></pre></div>
<pre><code>##   a   b 
## 2.5 6.5</code></pre></li>
<li><p><strong><code>lapply()</code></strong>: Primarily for lists, <code>lapply()</code> works seamlessly with data frames, which are inherently lists of vectors (columns). It processes a function over each column, producing a list:</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="data-structures-in-r.html#cb669-1" tabindex="-1"></a><span class="co"># Derive mean for each column (output is a list)</span></span>
<span id="cb669-2"><a href="data-structures-in-r.html#cb669-2" tabindex="-1"></a><span class="fu">lapply</span>(<span class="at">X =</span> df, <span class="at">FUN =</span> mean)</span></code></pre></div>
<pre><code>## $a
## [1] 2.5
## 
## $b
## [1] 6.5</code></pre></li>
<li><p><strong><code>sapply()</code></strong>: A more concise form of <code>lapply()</code>, <code>sapply()</code> tries to yield a simplified output, outputting vectors, matrices, or lists based on the scenario:</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="data-structures-in-r.html#cb671-1" tabindex="-1"></a><span class="co"># Determine mean for each column (output is a vector)</span></span>
<span id="cb671-2"><a href="data-structures-in-r.html#cb671-2" tabindex="-1"></a><span class="fu">sapply</span>(<span class="at">X =</span> df, <span class="at">FUN =</span> mean)</span></code></pre></div>
<pre><code>##   a   b 
## 2.5 6.5</code></pre></li>
<li><p><strong><code>vapply()</code></strong>: Resembling <code>sapply()</code>, with <code>vapply()</code> you declare the return value’s type, ensuring a uniform output:</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="data-structures-in-r.html#cb673-1" tabindex="-1"></a><span class="co"># Derive mean for each column while stating the output type</span></span>
<span id="cb673-2"><a href="data-structures-in-r.html#cb673-2" tabindex="-1"></a><span class="fu">vapply</span>(<span class="at">X =</span> df, <span class="at">FUN =</span> mean, <span class="at">FUN.VALUE =</span> <span class="fu">numeric</span>(<span class="dv">1</span>))</span></code></pre></div>
<pre><code>##   a   b 
## 2.5 6.5</code></pre></li>
<li><p><strong><code>mapply()</code></strong>: This is the “multivariate” version of apply. It applies a function across multiple input lists on an element-to-element basis:</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="data-structures-in-r.html#cb675-1" tabindex="-1"></a><span class="co"># Sample data sets</span></span>
<span id="cb675-2"><a href="data-structures-in-r.html#cb675-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">z =</span> <span class="dv">9</span><span class="sc">:</span><span class="dv">11</span>)</span>
<span id="cb675-3"><a href="data-structures-in-r.html#cb675-3" tabindex="-1"></a></span>
<span id="cb675-4"><a href="data-structures-in-r.html#cb675-4" tabindex="-1"></a><span class="co"># Apply function</span></span>
<span id="cb675-5"><a href="data-structures-in-r.html#cb675-5" tabindex="-1"></a><span class="fu">with</span>(df, <span class="fu">mapply</span>(<span class="at">FUN =</span> <span class="cf">function</span>(x, y, z) (y <span class="sc">-</span> z)<span class="sc">^</span>x, x, y, z))</span></code></pre></div>
<pre><code>## [1]   -5   25 -125</code></pre></li>
</ol>
</div>
<div id="apply-by-groups-data.frame" class="section level4 unnumbered hasAnchor">
<h4>Apply by Groups<a href="data-structures-in-r.html#apply-by-groups-data.frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When dealing with grouped or categorized data, the goal often becomes performing operations within these distinct groups rather than across entire rows or columns. Typically, a specific column in the data frame denotes these groups, categorizing each data point. R provides several functions, part of the apply family and beyond, that allow for such “group-wise” computation.</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>split()</code></strong>: Before diving into the apply-by-group functions, understanding <code>split()</code> is crucial. It partitions a data frame based on the levels of a factor, producing a list of data frames. This facilitates the application of functions to each subset individually.</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="data-structures-in-r.html#cb677-1" tabindex="-1"></a><span class="co"># Sample grouped data frame</span></span>
<span id="cb677-2"><a href="data-structures-in-r.html#cb677-2" tabindex="-1"></a>df_grouped <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">group =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>), </span>
<span id="cb677-3"><a href="data-structures-in-r.html#cb677-3" tabindex="-1"></a>                         <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>))</span>
<span id="cb677-4"><a href="data-structures-in-r.html#cb677-4" tabindex="-1"></a><span class="fu">print</span>(df_grouped)</span></code></pre></div>
<pre><code>##   group value
## 1     A    10
## 2     A    20
## 3     B    30
## 4     B    40
## 5     B    50</code></pre>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="data-structures-in-r.html#cb679-1" tabindex="-1"></a><span class="co"># Splitting the data frame by &#39;group&#39;</span></span>
<span id="cb679-2"><a href="data-structures-in-r.html#cb679-2" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> <span class="fu">split</span>(<span class="at">x =</span> df_grouped, <span class="at">f =</span> df_grouped<span class="sc">$</span>group)</span>
<span id="cb679-3"><a href="data-structures-in-r.html#cb679-3" tabindex="-1"></a><span class="fu">print</span>(split_data)</span></code></pre></div>
<pre><code>## $A
##   group value
## 1     A    10
## 2     A    20
## 
## $B
##   group value
## 3     B    30
## 4     B    40
## 5     B    50</code></pre></li>
<li><p><strong>Split-Apply-Combine strategy with <code>split()</code> + <code>lapply()</code> + <code>do.call()</code> + <code>c()</code></strong>: The split-apply-combine strategy is foundational in R. First, data is split into subsets based on some criteria (often a factor). Next, a function is applied to each subset independently. Finally, results are combined back into a useful data structure.</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb681-1"><a href="data-structures-in-r.html#cb681-1" tabindex="-1"></a><span class="co"># Split: Dividing the data based on &#39;group&#39;</span></span>
<span id="cb681-2"><a href="data-structures-in-r.html#cb681-2" tabindex="-1"></a>(split_data <span class="ot">&lt;-</span> <span class="fu">split</span>(<span class="at">x =</span> df_grouped<span class="sc">$</span>value, <span class="at">f =</span> df_grouped<span class="sc">$</span>group))</span></code></pre></div>
<pre><code>## $A
## [1] 10 20
## 
## $B
## [1] 30 40 50</code></pre>
<div class="sourceCode" id="cb683"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb683-1"><a href="data-structures-in-r.html#cb683-1" tabindex="-1"></a><span class="co"># Apply: Summing the &#39;value&#39; within each split group</span></span>
<span id="cb683-2"><a href="data-structures-in-r.html#cb683-2" tabindex="-1"></a>(applied_data <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="at">X =</span> split_data, <span class="at">FUN =</span> sum))</span></code></pre></div>
<pre><code>## $A
## [1] 30
## 
## $B
## [1] 120</code></pre>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb685-1"><a href="data-structures-in-r.html#cb685-1" tabindex="-1"></a><span class="co"># Combine: combines results into a named vector</span></span>
<span id="cb685-2"><a href="data-structures-in-r.html#cb685-2" tabindex="-1"></a>(combined_data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="at">what =</span> c, <span class="at">args =</span> applied_data))</span></code></pre></div>
<pre><code>##   A   B 
##  30 120</code></pre></li>
<li><p><strong><code>tapply()</code></strong>: The <code>tapply()</code> function stands for “table-apply”. It quickly implements the split-apply-combine approach, using its <code>INDEX</code> parameter to define the grouping.</p>
<div class="sourceCode" id="cb687"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb687-1"><a href="data-structures-in-r.html#cb687-1" tabindex="-1"></a><span class="co"># Summing &#39;value&#39; based on &#39;group&#39;</span></span>
<span id="cb687-2"><a href="data-structures-in-r.html#cb687-2" tabindex="-1"></a><span class="fu">tapply</span>(<span class="at">X =</span> df_grouped<span class="sc">$</span>value, <span class="at">INDEX =</span> df_grouped<span class="sc">$</span>group, <span class="at">FUN =</span> sum)</span></code></pre></div>
<pre><code>##   A   B 
##  30 120</code></pre></li>
<li><p><strong><code>aggregate()</code></strong>: The <code>aggregate()</code> function employs the split-apply-combine approach, returning a data frame that combines group names with computed statistics for each group.</p>
<div class="sourceCode" id="cb689"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb689-1"><a href="data-structures-in-r.html#cb689-1" tabindex="-1"></a><span class="co"># Using aggregate() to compute the sum for each group</span></span>
<span id="cb689-2"><a href="data-structures-in-r.html#cb689-2" tabindex="-1"></a>df_agg <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">x =</span> value <span class="sc">~</span> group, </span>
<span id="cb689-3"><a href="data-structures-in-r.html#cb689-3" tabindex="-1"></a>                    <span class="at">data =</span> df_grouped, </span>
<span id="cb689-4"><a href="data-structures-in-r.html#cb689-4" tabindex="-1"></a>                    <span class="at">FUN =</span> sum)</span>
<span id="cb689-5"><a href="data-structures-in-r.html#cb689-5" tabindex="-1"></a></span>
<span id="cb689-6"><a href="data-structures-in-r.html#cb689-6" tabindex="-1"></a><span class="co"># Alternative: Using aggregate() with lists</span></span>
<span id="cb689-7"><a href="data-structures-in-r.html#cb689-7" tabindex="-1"></a>df_agg <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">x =</span> <span class="fu">list</span>(<span class="at">value =</span> df_grouped<span class="sc">$</span>value), </span>
<span id="cb689-8"><a href="data-structures-in-r.html#cb689-8" tabindex="-1"></a>                    <span class="at">by =</span> <span class="fu">list</span>(<span class="at">group =</span> df_grouped<span class="sc">$</span>group), </span>
<span id="cb689-9"><a href="data-structures-in-r.html#cb689-9" tabindex="-1"></a>                    <span class="at">FUN =</span> sum)</span>
<span id="cb689-10"><a href="data-structures-in-r.html#cb689-10" tabindex="-1"></a><span class="fu">print</span>(df_agg)</span></code></pre></div>
<pre><code>##   group value
## 1     A    30
## 2     B   120</code></pre>
<ul>
<li>The formula <code>x = value ~ group</code> indicates that the function should summarize the <code>value</code> variable based on the <code>group</code> variable.</li>
<li>The <code>data = df_grouped</code> argument specifies the dataset to use.</li>
<li>The <code>FUN = sum</code> argument tells the function to compute the sum for each group.</li>
<li>Alternatively, using lists: the <code>x</code> argument takes a list that specifies the variables to be aggregated, and the <code>by</code> argument provides a list that determines how the dataset is grouped.</li>
</ul>
<p>The result is a summary data frame where each unique level of the <code>group</code> variable has a corresponding sum of the <code>value</code> variable.</p></li>
<li><p><strong><code>aggregate()</code> with multiple variables</strong>: The <code>aggregate()</code> function can handle scenarios that involve multiple group and value variables. When you have a dataset with more than one group and value column, you can use the <code>aggregate()</code> function to group by multiple columns and compute summaries over several value columns simultaneously.</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb691-1"><a href="data-structures-in-r.html#cb691-1" tabindex="-1"></a><span class="co"># Sample dataset with multiple groups and values</span></span>
<span id="cb691-2"><a href="data-structures-in-r.html#cb691-2" tabindex="-1"></a>df_advanced <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb691-3"><a href="data-structures-in-r.html#cb691-3" tabindex="-1"></a>    <span class="at">group1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>),</span>
<span id="cb691-4"><a href="data-structures-in-r.html#cb691-4" tabindex="-1"></a>    <span class="at">group2 =</span> <span class="fu">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;Y&quot;</span>),</span>
<span id="cb691-5"><a href="data-structures-in-r.html#cb691-5" tabindex="-1"></a>    <span class="at">v1 =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>),</span>
<span id="cb691-6"><a href="data-structures-in-r.html#cb691-6" tabindex="-1"></a>    <span class="at">v2 =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>)</span>
<span id="cb691-7"><a href="data-structures-in-r.html#cb691-7" tabindex="-1"></a>)</span>
<span id="cb691-8"><a href="data-structures-in-r.html#cb691-8" tabindex="-1"></a></span>
<span id="cb691-9"><a href="data-structures-in-r.html#cb691-9" tabindex="-1"></a><span class="co"># Using aggregate() to compute the mean for each group1 &amp; group2 combination</span></span>
<span id="cb691-10"><a href="data-structures-in-r.html#cb691-10" tabindex="-1"></a>df_agg <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">x =</span> <span class="fu">cbind</span>(v1, v2) <span class="sc">~</span> group1 <span class="sc">+</span> group2, </span>
<span id="cb691-11"><a href="data-structures-in-r.html#cb691-11" tabindex="-1"></a>                    <span class="at">data =</span> df_advanced, </span>
<span id="cb691-12"><a href="data-structures-in-r.html#cb691-12" tabindex="-1"></a>                    <span class="at">FUN =</span> mean)</span>
<span id="cb691-13"><a href="data-structures-in-r.html#cb691-13" tabindex="-1"></a></span>
<span id="cb691-14"><a href="data-structures-in-r.html#cb691-14" tabindex="-1"></a><span class="co"># Alternative: Using aggregate() with lists    </span></span>
<span id="cb691-15"><a href="data-structures-in-r.html#cb691-15" tabindex="-1"></a>df_agg <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">x =</span> df_advanced[<span class="fu">c</span>(<span class="st">&quot;v1&quot;</span>, <span class="st">&quot;v2&quot;</span>)], </span>
<span id="cb691-16"><a href="data-structures-in-r.html#cb691-16" tabindex="-1"></a>                    <span class="at">by =</span> df_advanced[<span class="fu">c</span>(<span class="st">&quot;group1&quot;</span>, <span class="st">&quot;group2&quot;</span>)], </span>
<span id="cb691-17"><a href="data-structures-in-r.html#cb691-17" tabindex="-1"></a>                    <span class="at">FUN =</span> sum)</span>
<span id="cb691-18"><a href="data-structures-in-r.html#cb691-18" tabindex="-1"></a><span class="fu">print</span>(df_agg)</span></code></pre></div>
<pre><code>##   group1 group2  v1 v2
## 1      A      X  30 15
## 2      B      X  40 20
## 3      A      Y  30 15
## 4      B      Y 110 55</code></pre>
<ul>
<li>The formula <code>cbind(v1, v2) ~ group1 + group2</code> instructs R to group by both <code>group1</code> and <code>group2</code>, and then summarize both <code>v1</code> and <code>v2</code>.</li>
<li>The <code>data = df_advanced</code> argument specifies the dataset to use.</li>
<li>The <code>FUN = mean</code> tells the function to calculate the mean for each grouped set of data.</li>
<li>In the list-based approach, the <code>x</code> argument provides the data columns to aggregate, while the <code>by</code> argument specifies the grouping columns.</li>
</ul>
<p>The resulting output showcases the average values for <code>v1</code> and <code>v2</code> for each unique combination of <code>group1</code> and <code>group2</code>. This approach offers a concise way to produce summaries for complex datasets with multiple grouping variables.</p></li>
</ol>
<p>In essence, group-wise computation is a cornerstone in many analyses. Knowing how to efficiently split, process, and combine data is pivotal. Functions in R, especially within the apply family, provide the tools to handle such computations with ease, making the data analysis process streamlined and robust.</p>
</div>
</div>
<div id="reshape-data-frames" class="section level3 hasAnchor" number="4.5.8">
<h3><span class="header-section-number">4.5.8</span> Reshape Data Frames<a href="data-structures-in-r.html#reshape-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Working with different data formats is essential for a seamless data analysis experience. In R, the two primary data structures are the wide and long formats:</p>
<ul>
<li><p><strong>Wide Format</strong>: In this configuration, each row corresponds to a unique observation, with all its associated measurements or characteristics spread across distinct columns. To illustrate, consider an individual named John. In the wide format, John would occupy a single row. Attributes such as age, gender, and IQ would each have their own columns. For John, these might be represented as separate columns with values 38, Male, and 120, respectively.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<p><span id="tab:unnamed-chunk-285">Table 4.1: </span>Wide Format Example</p>
</caption>
<thead>
<tr>
<th style="text-align:left;">
<p>Name</p>
</th>
<th style="text-align:right;">
<p>Age</p>
</th>
<th style="text-align:left;">
<p>Gender</p>
</th>
<th style="text-align:right;">
<p>IQ</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>John</p>
</td>
<td style="text-align:right;">
<p>38</p>
</td>
<td style="text-align:left;">
<p>Male</p>
</td>
<td style="text-align:right;">
<p>120</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Marie</p>
</td>
<td style="text-align:right;">
<p>29</p>
</td>
<td style="text-align:left;">
<p>Female</p>
</td>
<td style="text-align:right;">
<p>121</p>
</td>
</tr>
</tbody>
</table></li>
<li><p><strong>Long Format</strong>: Contrary to the wide format, in the long format, each row stands for just one characteristic or measurement of an observation. As a result, a single entity might be represented across several rows. Using John as an example again, he would be spread across three rows, one for each attribute. The dataset would typically have three columns: one indicating the individual (John, John, John), one specifying the type of attribute (age, gender, IQ), and the last one containing the corresponding values (38, Male, 120).</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<p><span id="tab:unnamed-chunk-286">Table 4.2: </span>Long Format Example</p>
</caption>
<thead>
<tr>
<th style="text-align:left;">
<p>Name</p>
</th>
<th style="text-align:left;">
<p>Attribute</p>
</th>
<th style="text-align:left;">
<p>Value</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>John</p>
</td>
<td style="text-align:left;">
<p>Age</p>
</td>
<td style="text-align:left;">
<p>38</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>John</p>
</td>
<td style="text-align:left;">
<p>Gender</p>
</td>
<td style="text-align:left;">
<p>Male</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>John</p>
</td>
<td style="text-align:left;">
<p>IQ</p>
</td>
<td style="text-align:left;">
<p>120</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Marie</p>
</td>
<td style="text-align:left;">
<p>Age</p>
</td>
<td style="text-align:left;">
<p>29</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Marie</p>
</td>
<td style="text-align:left;">
<p>Gender</p>
</td>
<td style="text-align:left;">
<p>Female</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Marie</p>
</td>
<td style="text-align:left;">
<p>IQ</p>
</td>
<td style="text-align:left;">
<p>121</p>
</td>
</tr>
</tbody>
</table></li>
</ul>
<p>The <strong><code>reshape()</code> function</strong> offers a robust method to toggle between these two formats.</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb693-1"><a href="data-structures-in-r.html#cb693-1" tabindex="-1"></a><span class="co"># Sample data in wide format</span></span>
<span id="cb693-2"><a href="data-structures-in-r.html#cb693-2" tabindex="-1"></a>wide_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb693-3"><a href="data-structures-in-r.html#cb693-3" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Marie&quot;</span>),</span>
<span id="cb693-4"><a href="data-structures-in-r.html#cb693-4" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">38</span>, <span class="dv">29</span>),</span>
<span id="cb693-5"><a href="data-structures-in-r.html#cb693-5" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>),</span>
<span id="cb693-6"><a href="data-structures-in-r.html#cb693-6" tabindex="-1"></a>    <span class="at">iq =</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">121</span>)</span>
<span id="cb693-7"><a href="data-structures-in-r.html#cb693-7" tabindex="-1"></a>)</span>
<span id="cb693-8"><a href="data-structures-in-r.html#cb693-8" tabindex="-1"></a><span class="fu">print</span>(wide_data)</span></code></pre></div>
<pre><code>##    name age gender  iq
## 1  John  38   Male 120
## 2 Marie  29 Female 121</code></pre>
<div class="sourceCode" id="cb695"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb695-1"><a href="data-structures-in-r.html#cb695-1" tabindex="-1"></a><span class="co"># Convert to long format</span></span>
<span id="cb695-2"><a href="data-structures-in-r.html#cb695-2" tabindex="-1"></a>long_data <span class="ot">&lt;-</span> <span class="fu">reshape</span>(</span>
<span id="cb695-3"><a href="data-structures-in-r.html#cb695-3" tabindex="-1"></a>    <span class="at">data =</span> wide_data, </span>
<span id="cb695-4"><a href="data-structures-in-r.html#cb695-4" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">&quot;long&quot;</span>, </span>
<span id="cb695-5"><a href="data-structures-in-r.html#cb695-5" tabindex="-1"></a>    <span class="at">varying =</span> <span class="fu">list</span>(<span class="at">attribute =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;iq&quot;</span>)),</span>
<span id="cb695-6"><a href="data-structures-in-r.html#cb695-6" tabindex="-1"></a>    <span class="at">times =</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>, <span class="st">&quot;Gender&quot;</span>, <span class="st">&quot;IQ&quot;</span>),</span>
<span id="cb695-7"><a href="data-structures-in-r.html#cb695-7" tabindex="-1"></a>    <span class="at">timevar =</span> <span class="st">&quot;attribute&quot;</span>,</span>
<span id="cb695-8"><a href="data-structures-in-r.html#cb695-8" tabindex="-1"></a>    <span class="at">v.names =</span> <span class="st">&quot;value&quot;</span>,</span>
<span id="cb695-9"><a href="data-structures-in-r.html#cb695-9" tabindex="-1"></a>    <span class="at">idvar =</span> <span class="st">&quot;name&quot;</span></span>
<span id="cb695-10"><a href="data-structures-in-r.html#cb695-10" tabindex="-1"></a>)</span>
<span id="cb695-11"><a href="data-structures-in-r.html#cb695-11" tabindex="-1"></a><span class="fu">rownames</span>(long_data) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb695-12"><a href="data-structures-in-r.html#cb695-12" tabindex="-1"></a><span class="fu">print</span>(long_data)</span></code></pre></div>
<pre><code>##    name attribute  value
## 1  John       Age     38
## 2 Marie       Age     29
## 3  John    Gender   Male
## 4 Marie    Gender Female
## 5  John        IQ    120
## 6 Marie        IQ    121</code></pre>
<div class="sourceCode" id="cb697"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb697-1"><a href="data-structures-in-r.html#cb697-1" tabindex="-1"></a><span class="co"># Convert long format back to wide format</span></span>
<span id="cb697-2"><a href="data-structures-in-r.html#cb697-2" tabindex="-1"></a>reshaped_wide_data <span class="ot">&lt;-</span> <span class="fu">reshape</span>(</span>
<span id="cb697-3"><a href="data-structures-in-r.html#cb697-3" tabindex="-1"></a>    <span class="at">data =</span> long_data, </span>
<span id="cb697-4"><a href="data-structures-in-r.html#cb697-4" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">&quot;wide&quot;</span>, </span>
<span id="cb697-5"><a href="data-structures-in-r.html#cb697-5" tabindex="-1"></a>    <span class="at">timevar =</span> <span class="st">&quot;attribute&quot;</span>,</span>
<span id="cb697-6"><a href="data-structures-in-r.html#cb697-6" tabindex="-1"></a>    <span class="at">v.names =</span> <span class="st">&quot;value&quot;</span>,</span>
<span id="cb697-7"><a href="data-structures-in-r.html#cb697-7" tabindex="-1"></a>    <span class="at">idvar =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb697-8"><a href="data-structures-in-r.html#cb697-8" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb697-9"><a href="data-structures-in-r.html#cb697-9" tabindex="-1"></a>)</span>
<span id="cb697-10"><a href="data-structures-in-r.html#cb697-10" tabindex="-1"></a><span class="fu">print</span>(reshaped_wide_data)</span></code></pre></div>
<pre><code>##    name value_Age value_Gender value_IQ
## 1  John        38         Male      120
## 2 Marie        29       Female      121</code></pre>
<p>In the <code>reshape</code> function:</p>
<ul>
<li><code>data</code>: This specifies the data frame you intend to reshape.</li>
<li><code>direction</code>: Determines if you’re going from ‘wide’ to ‘long’ format or vice-versa.</li>
<li><code>varying</code>: Lists columns that you’ll be reshaping.</li>
<li><code>times</code>: This denotes unique times or measurements in the reshaped data.</li>
<li><code>timevar</code>: This names the column in the reshaped data that will contain the unique <code>times</code> identifiers.</li>
<li><code>v.names</code>: The name of the column in the reshaped data that will contain the data values.</li>
<li><code>idvar</code>: Specifies the identifier variable, which will remain the same between reshaped versions.</li>
<li><code>sep</code>: Used in converting from long to wide format, it defines the separator between the identifier and the measurement variables.</li>
</ul>
<p>For beginners, the <code>reshape()</code> function might seem intricate due to its numerous parameters. Yet, with practice, it becomes a valuable tool in a data scientist’s toolkit. Always refer to R’s built-in documentation with <code>?reshape</code> for additional details, or read the vignette available through <code>vignette("reshape")</code>.</p>
</div>
</div>
<div id="tibble" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Tibble (<code>tbl_df</code>)<a href="data-structures-in-r.html#tibble" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A tibble (<code>tbl_df</code>) refines the conventional data frame, offering a more user-friendly alternative. It is part of the <code>tibble</code> package by <span class="citation">Müller and Wickham (<a href="#ref-R-tibble">2023</a>)</span>, which is in the <code>tidyverse</code> collection of R packages <span class="citation">(<a href="#ref-R-tidyverse">Wickham 2023c</a>)</span>. For an introduction into the Tidyverse, consult Chapter <a href="r-basics.html#the-tidyverse">3.6.7</a>.</p>
<p>To use tibbles, you need to install the <code>tibble</code> package by executing <code>install.packages("tibble")</code> in your console. Don’t forget to include <code>library("tibble")</code> at the beginning of your R script. If you’re already using the Tidyverse suite, a simple <code>library("tidyverse")</code> will suffice, as it internally loads the <code>tibble</code> package.</p>
<p>Despite their modern touch, tibbles remain data frames at their core. This duality is evident when the <code>class()</code> function, applied to a tibble, returns both <code>"tbl_df"</code> and <code>"data.frame"</code>. Therefore, the operations and functions elucidated in the data frame section @ref(data.frame) are entirely compatible with tibbles.</p>
<p>Building on this compatibility, this chapter explores the Tidyverse way of manipulating tibbles, leveraging user-friendly functions from the <code>dplyr</code> package by <span class="citation">Wickham et al. (<a href="#ref-R-dplyr">2023</a>)</span>, rather than solely relying on <code>base</code> functions. The <code>dplyr</code> package is one of the core packages of the <code>tidyverse</code> collection and specializes in data manipulation. The package offers a series of verbs (functions) for the most common data manipulation tasks. Let’s explore some of these functions and see how they can be applied to tibbles.</p>
<div id="create-a-tibble" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Create a Tibble<a href="data-structures-in-r.html#create-a-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tibbles can be formed using the <code>tibble()</code> function from the <code>tibble</code> package:</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb699-1"><a href="data-structures-in-r.html#cb699-1" tabindex="-1"></a><span class="co"># Load tibble package</span></span>
<span id="cb699-2"><a href="data-structures-in-r.html#cb699-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tibble&quot;</span>)</span>
<span id="cb699-3"><a href="data-structures-in-r.html#cb699-3" tabindex="-1"></a></span>
<span id="cb699-4"><a href="data-structures-in-r.html#cb699-4" tabindex="-1"></a><span class="co"># Create vectors for the tibble</span></span>
<span id="cb699-5"><a href="data-structures-in-r.html#cb699-5" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Anna&quot;</span>, <span class="st">&quot;Ella&quot;</span>, <span class="st">&quot;Sophia&quot;</span>)</span>
<span id="cb699-6"><a href="data-structures-in-r.html#cb699-6" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">23</span>, <span class="cn">NA</span>, <span class="dv">26</span>)</span>
<span id="cb699-7"><a href="data-structures-in-r.html#cb699-7" tabindex="-1"></a>female <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb699-8"><a href="data-structures-in-r.html#cb699-8" tabindex="-1"></a>grades <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>), <span class="at">levels =</span> <span class="fu">rev</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb699-9"><a href="data-structures-in-r.html#cb699-9" tabindex="-1"></a>major <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Math&quot;</span>, <span class="st">&quot;Biology&quot;</span>, <span class="st">&quot;Physics&quot;</span>)</span>
<span id="cb699-10"><a href="data-structures-in-r.html#cb699-10" tabindex="-1"></a></span>
<span id="cb699-11"><a href="data-structures-in-r.html#cb699-11" tabindex="-1"></a><span class="co"># Construct the tibble</span></span>
<span id="cb699-12"><a href="data-structures-in-r.html#cb699-12" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> names, </span>
<span id="cb699-13"><a href="data-structures-in-r.html#cb699-13" tabindex="-1"></a>                       <span class="at">age =</span> ages, </span>
<span id="cb699-14"><a href="data-structures-in-r.html#cb699-14" tabindex="-1"></a>                       <span class="at">female =</span> female,</span>
<span id="cb699-15"><a href="data-structures-in-r.html#cb699-15" tabindex="-1"></a>                       <span class="at">grade =</span> grades, </span>
<span id="cb699-16"><a href="data-structures-in-r.html#cb699-16" tabindex="-1"></a>                       <span class="at">major =</span> major)</span>
<span id="cb699-17"><a href="data-structures-in-r.html#cb699-17" tabindex="-1"></a><span class="fu">print</span>(students_tbl)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   name     age female grade major  
##   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;  
## 1 Anna      23 TRUE   A     Math   
## 2 Ella      NA TRUE   B     Biology
## 3 Sophia    26 TRUE   A     Physics</code></pre>
<p>Moreover, tibbles support incremental construction by referencing a previously established tibble and appending additional columns:</p>
<div class="sourceCode" id="cb701"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb701-1"><a href="data-structures-in-r.html#cb701-1" tabindex="-1"></a><span class="co"># Initiate the tibble</span></span>
<span id="cb701-2"><a href="data-structures-in-r.html#cb701-2" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> names, </span>
<span id="cb701-3"><a href="data-structures-in-r.html#cb701-3" tabindex="-1"></a>                       <span class="at">age =</span> ages,</span>
<span id="cb701-4"><a href="data-structures-in-r.html#cb701-4" tabindex="-1"></a>                       <span class="at">female =</span> female)</span>
<span id="cb701-5"><a href="data-structures-in-r.html#cb701-5" tabindex="-1"></a></span>
<span id="cb701-6"><a href="data-structures-in-r.html#cb701-6" tabindex="-1"></a><span class="co"># Expand the tibble by adding columns</span></span>
<span id="cb701-7"><a href="data-structures-in-r.html#cb701-7" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(students_tbl,</span>
<span id="cb701-8"><a href="data-structures-in-r.html#cb701-8" tabindex="-1"></a>                       <span class="at">grade =</span> grades, </span>
<span id="cb701-9"><a href="data-structures-in-r.html#cb701-9" tabindex="-1"></a>                       <span class="at">major =</span> major)</span>
<span id="cb701-10"><a href="data-structures-in-r.html#cb701-10" tabindex="-1"></a><span class="fu">print</span>(students_tbl)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   name     age female grade major  
##   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;  
## 1 Anna      23 TRUE   A     Math   
## 2 Ella      NA TRUE   B     Biology
## 3 Sophia    26 TRUE   A     Physics</code></pre>
<p>Unlike regular data frames, tibbles allow non-standard column names. You can use special characters or numbers as column names. Here’s an example:</p>
<div class="sourceCode" id="cb703"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb703-1"><a href="data-structures-in-r.html#cb703-1" tabindex="-1"></a><span class="co"># Construct a tibble with unconventional column names</span></span>
<span id="cb703-2"><a href="data-structures-in-r.html#cb703-2" tabindex="-1"></a><span class="fu">tibble</span>(<span class="st">`</span><span class="at">:)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;smile&quot;</span>, </span>
<span id="cb703-3"><a href="data-structures-in-r.html#cb703-3" tabindex="-1"></a>       <span class="st">`</span><span class="at"> </span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;space&quot;</span>, </span>
<span id="cb703-4"><a href="data-structures-in-r.html#cb703-4" tabindex="-1"></a>       <span class="st">`</span><span class="at">2000</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;number&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   `:)`  ` `   `2000`
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 smile space number</code></pre>
<p>Another way to create a tibble is with the <code>tribble()</code> function. It allows you to define column headings using formulas starting with ~ and separate entries with commas. Here’s an example:</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb705-1"><a href="data-structures-in-r.html#cb705-1" tabindex="-1"></a><span class="fu">tribble</span>(</span>
<span id="cb705-2"><a href="data-structures-in-r.html#cb705-2" tabindex="-1"></a>    <span class="sc">~</span>x, <span class="sc">~</span>y, <span class="sc">~</span>z,</span>
<span id="cb705-3"><a href="data-structures-in-r.html#cb705-3" tabindex="-1"></a>    <span class="st">&quot;a&quot;</span>, <span class="dv">2</span>, <span class="fl">3.6</span>,</span>
<span id="cb705-4"><a href="data-structures-in-r.html#cb705-4" tabindex="-1"></a>    <span class="st">&quot;b&quot;</span>, <span class="dv">1</span>, <span class="fl">8.5</span></span>
<span id="cb705-5"><a href="data-structures-in-r.html#cb705-5" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   x         y     z
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 a         2   3.6
## 2 b         1   8.5</code></pre>
</div>
<div id="inspect-a-tibble" class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Inspect a Tibble<a href="data-structures-in-r.html#inspect-a-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To discern the type and components of a tibble, the following functions can be employed:</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb707-1"><a href="data-structures-in-r.html#cb707-1" tabindex="-1"></a><span class="co"># Identify the data structure of the tibble</span></span>
<span id="cb707-2"><a href="data-structures-in-r.html#cb707-2" tabindex="-1"></a><span class="fu">class</span>(students_tbl)          <span class="co"># Outputs &quot;tbl_df&quot; &quot;tbl&quot; &quot;data.frame&quot;.</span></span>
<span id="cb707-3"><a href="data-structures-in-r.html#cb707-3" tabindex="-1"></a><span class="fu">is_tibble</span>(students_tbl)      <span class="co"># Outputs TRUE.</span></span>
<span id="cb707-4"><a href="data-structures-in-r.html#cb707-4" tabindex="-1"></a><span class="fu">is.data.frame</span>(students_tbl)  <span class="co"># Outputs TRUE.</span></span>
<span id="cb707-5"><a href="data-structures-in-r.html#cb707-5" tabindex="-1"></a><span class="fu">is.matrix</span>(students_tbl)      <span class="co"># Outputs FALSE.</span></span></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;
## [1] TRUE
## [1] TRUE
## [1] FALSE</code></pre>
<div class="sourceCode" id="cb709"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb709-1"><a href="data-structures-in-r.html#cb709-1" tabindex="-1"></a><span class="co"># Identify the data type of each column within the tibble</span></span>
<span id="cb709-2"><a href="data-structures-in-r.html#cb709-2" tabindex="-1"></a><span class="fu">sapply</span>(students_tbl, class)</span></code></pre></div>
<pre><code>## $name
## [1] &quot;character&quot;
## 
## $age
## [1] &quot;numeric&quot;
## 
## $female
## [1] &quot;logical&quot;
## 
## $grade
## [1] &quot;ordered&quot; &quot;factor&quot; 
## 
## $major
## [1] &quot;character&quot;</code></pre>
<p>Inspecting tibbles can be achieved using functions like <code>nrow()</code>, <code>ncol()</code>, <code>dim()</code>, <code>head()</code>, <code>tail()</code>, <code>str()</code>, <code>summarize()</code>, and <code>View()</code>, much like their use for data frames as outlined in Chapter <a href="data-structures-in-r.html#inspect-a-data-frame">4.5.2</a>. However, when printing a tibble in R, the default behavior differs from that of a data frame. Only the first 10 rows and the columns that fit on the screen are displayed, accompanied by a message noting the additional rows and columns present. This makes the <code>head()</code> and <code>tail()</code> functions less necessary, as printing a tibble already provides a concise overview.</p>
<p>For a more concise structural overview of a tibble, instead of using <code>str()</code>, one might prefer the <code>glimpse()</code> function from the <code>tibble</code> package:</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb711-1"><a href="data-structures-in-r.html#cb711-1" tabindex="-1"></a><span class="co"># Examine the tibble&#39;s structure</span></span>
<span id="cb711-2"><a href="data-structures-in-r.html#cb711-2" tabindex="-1"></a><span class="fu">glimpse</span>(students_tbl)</span></code></pre></div>
<pre><code>## Rows: 3
## Columns: 5
## $ name   &lt;chr&gt; &quot;Anna&quot;, &quot;Ella&quot;, &quot;Sophia&quot;
## $ age    &lt;dbl&gt; 23, NA, 26
## $ female &lt;lgl&gt; TRUE, TRUE, TRUE
## $ grade  &lt;ord&gt; A, B, A
## $ major  &lt;chr&gt; &quot;Math&quot;, &quot;Biology&quot;, &quot;Physics&quot;</code></pre>
</div>
<div id="select-and-modify-tibble" class="section level3 hasAnchor" number="4.6.3">
<h3><span class="header-section-number">4.6.3</span> Select and Modify<a href="data-structures-in-r.html#select-and-modify-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>dplyr</code> package <span class="citation">(<a href="#ref-R-dplyr">Wickham et al. 2023</a>)</span> from the Tidyverse provides an array of functions tailored for data manipulation with tibbles.</p>
<div class="sourceCode" id="cb713"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb713-1"><a href="data-structures-in-r.html#cb713-1" tabindex="-1"></a><span class="co"># Load the dplyr package</span></span>
<span id="cb713-2"><a href="data-structures-in-r.html#cb713-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<div id="select-and-order-columns" class="section level4 unnumbered hasAnchor">
<h4>Select and Order Columns<a href="data-structures-in-r.html#select-and-order-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Using <code>select()</code> to retrieve specific columns:</p>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb714-1"><a href="data-structures-in-r.html#cb714-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb714-2"><a href="data-structures-in-r.html#cb714-2" tabindex="-1"></a>students_tbl[<span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;grade&quot;</span>)]</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   name   grade
##   &lt;chr&gt;  &lt;ord&gt;
## 1 Anna   A    
## 2 Ella   B    
## 3 Sophia A</code></pre>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb716-1"><a href="data-structures-in-r.html#cb716-1" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb716-2"><a href="data-structures-in-r.html#cb716-2" tabindex="-1"></a><span class="fu">select</span>(students_tbl, name, grade)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   name   grade
##   &lt;chr&gt;  &lt;ord&gt;
## 1 Anna   A    
## 2 Ella   B    
## 3 Sophia A</code></pre>
<p>Using <code>select()</code> to order columns alphabetically:</p>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb718-1"><a href="data-structures-in-r.html#cb718-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb718-2"><a href="data-structures-in-r.html#cb718-2" tabindex="-1"></a>students_tbl[<span class="fu">sort</span>(<span class="fu">colnames</span>(students_tbl))]</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##     age female grade major   name  
##   &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1    23 TRUE   A     Math    Anna  
## 2    NA TRUE   B     Biology Ella  
## 3    26 TRUE   A     Physics Sophia</code></pre>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb720-1"><a href="data-structures-in-r.html#cb720-1" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb720-2"><a href="data-structures-in-r.html#cb720-2" tabindex="-1"></a><span class="fu">select</span>(students_tbl, <span class="fu">sort</span>(<span class="fu">colnames</span>(students_tbl)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##     age female grade major   name  
##   &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1    23 TRUE   A     Math    Anna  
## 2    NA TRUE   B     Biology Ella  
## 3    26 TRUE   A     Physics Sophia</code></pre>
</div>
<div id="filter-and-order-rows" class="section level4 unnumbered hasAnchor">
<h4>Filter and Order Rows<a href="data-structures-in-r.html#filter-and-order-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Use <code>filter()</code> to extract rows based on conditions:</p>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb722-1"><a href="data-structures-in-r.html#cb722-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb722-2"><a href="data-structures-in-r.html#cb722-2" tabindex="-1"></a>students_tbl[students_tbl<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">24</span> <span class="sc">&amp;</span> students_tbl<span class="sc">$</span>grade <span class="sc">==</span> <span class="st">&quot;A&quot;</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   name     age female grade major  
##   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;  
## 1 Sophia    26 TRUE   A     Physics</code></pre>
<div class="sourceCode" id="cb724"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb724-1"><a href="data-structures-in-r.html#cb724-1" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb724-2"><a href="data-structures-in-r.html#cb724-2" tabindex="-1"></a><span class="fu">filter</span>(students_tbl, age <span class="sc">&gt;</span> <span class="dv">24</span> <span class="sc">&amp;</span> grade <span class="sc">==</span> <span class="st">&quot;A&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   name     age female grade major  
##   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;  
## 1 Sophia    26 TRUE   A     Physics</code></pre>
<p>The rows can be ordered with the <code>arrange()</code> function:</p>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="data-structures-in-r.html#cb726-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb726-2"><a href="data-structures-in-r.html#cb726-2" tabindex="-1"></a>students_tbl[<span class="fu">order</span>(students_tbl<span class="sc">$</span>age, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   name     age female grade major  
##   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;  
## 1 Sophia    26 TRUE   A     Physics
## 2 Anna      23 TRUE   A     Math   
## 3 Ella      NA TRUE   B     Biology</code></pre>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb728-1"><a href="data-structures-in-r.html#cb728-1" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb728-2"><a href="data-structures-in-r.html#cb728-2" tabindex="-1"></a><span class="fu">arrange</span>(students_tbl, <span class="fu">desc</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   name     age female grade major  
##   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;  
## 1 Sophia    26 TRUE   A     Physics
## 2 Anna      23 TRUE   A     Math   
## 3 Ella      NA TRUE   B     Biology</code></pre>
<p>In the dplyr approach, the <code>desc()</code> function is utilized to order values in descending order.</p>
</div>
<div id="add-and-remove-columns" class="section level4 unnumbered hasAnchor">
<h4>Add and Remove Columns<a href="data-structures-in-r.html#add-and-remove-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To create a new column, employ <code>mutate()</code>:</p>
<div class="sourceCode" id="cb730"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb730-1"><a href="data-structures-in-r.html#cb730-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb730-2"><a href="data-structures-in-r.html#cb730-2" tabindex="-1"></a>students_tbl<span class="sc">$</span>gpa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">3.7</span>, <span class="fl">3.4</span>, <span class="fl">3.9</span>)</span>
<span id="cb730-3"><a href="data-structures-in-r.html#cb730-3" tabindex="-1"></a></span>
<span id="cb730-4"><a href="data-structures-in-r.html#cb730-4" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb730-5"><a href="data-structures-in-r.html#cb730-5" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> <span class="fu">mutate</span>(students_tbl, <span class="at">gpa =</span> <span class="fu">c</span>(<span class="fl">3.7</span>, <span class="fl">3.4</span>, <span class="fl">3.9</span>))</span>
<span id="cb730-6"><a href="data-structures-in-r.html#cb730-6" tabindex="-1"></a><span class="fu">print</span>(students_tbl)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##   name     age female grade major     gpa
##   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;  &lt;ord&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1 Anna      23 TRUE   A     Math      3.7
## 2 Ella      NA TRUE   B     Biology   3.4
## 3 Sophia    26 TRUE   A     Physics   3.9</code></pre>
<p>Columns can be removed using <code>select()</code>:</p>
<div class="sourceCode" id="cb732"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb732-1"><a href="data-structures-in-r.html#cb732-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb732-2"><a href="data-structures-in-r.html#cb732-2" tabindex="-1"></a>students_tbl<span class="sc">$</span>female <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb732-3"><a href="data-structures-in-r.html#cb732-3" tabindex="-1"></a></span>
<span id="cb732-4"><a href="data-structures-in-r.html#cb732-4" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb732-5"><a href="data-structures-in-r.html#cb732-5" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> <span class="fu">select</span>(students_tbl, <span class="sc">-</span>female)</span>
<span id="cb732-6"><a href="data-structures-in-r.html#cb732-6" tabindex="-1"></a><span class="fu">print</span>(students_tbl)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   name     age grade major     gpa
##   &lt;chr&gt;  &lt;dbl&gt; &lt;ord&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1 Anna      23 A     Math      3.7
## 2 Ella      NA B     Biology   3.4
## 3 Sophia    26 A     Physics   3.9</code></pre>
</div>
<div id="manipulate-columns" class="section level4 unnumbered hasAnchor">
<h4>Manipulate Columns<a href="data-structures-in-r.html#manipulate-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To construct new values for each row based on existing columns, you can utilize the <code>reframe()</code> function:</p>
<div class="sourceCode" id="cb734"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb734-1"><a href="data-structures-in-r.html#cb734-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb734-2"><a href="data-structures-in-r.html#cb734-2" tabindex="-1"></a><span class="fu">with</span>(students_tbl, <span class="fu">paste0</span>(name, <span class="st">&quot; studies &quot;</span>, major, <span class="st">&quot;.&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;Anna studies Math.&quot;      &quot;Ella studies Biology.&quot;  
## [3] &quot;Sophia studies Physics.&quot;</code></pre>
<div class="sourceCode" id="cb736"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb736-1"><a href="data-structures-in-r.html#cb736-1" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb736-2"><a href="data-structures-in-r.html#cb736-2" tabindex="-1"></a><span class="fu">reframe</span>(students_tbl, <span class="fu">paste0</span>(name, <span class="st">&quot; studies &quot;</span>, major, <span class="st">&quot;.&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 1
##   `paste0(name, &quot; studies &quot;, major, &quot;.&quot;)`
##   &lt;chr&gt;                                  
## 1 Anna studies Math.                     
## 2 Ella studies Biology.                  
## 3 Sophia studies Physics.</code></pre>
<p>The key difference between <code>mutate()</code> and <code>reframe()</code> is that <code>mutate()</code> returns the full tibble, while <code>reframe()</code> only returns the newly computed column:</p>
<div class="sourceCode" id="cb738"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb738-1"><a href="data-structures-in-r.html#cb738-1" tabindex="-1"></a><span class="co"># Using mutate() for comparison</span></span>
<span id="cb738-2"><a href="data-structures-in-r.html#cb738-2" tabindex="-1"></a><span class="fu">mutate</span>(students_tbl, <span class="at">new_description =</span> <span class="fu">paste0</span>(name, <span class="st">&quot; studies &quot;</span>, major, <span class="st">&quot;.&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##   name     age grade major     gpa new_description        
##   &lt;chr&gt;  &lt;dbl&gt; &lt;ord&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                  
## 1 Anna      23 A     Math      3.7 Anna studies Math.     
## 2 Ella      NA B     Biology   3.4 Ella studies Biology.  
## 3 Sophia    26 A     Physics   3.9 Sophia studies Physics.</code></pre>
<p>To compute summary statistics over all rows, the <code>summarize()</code> or <code>summarise()</code> function can be employed:</p>
<div class="sourceCode" id="cb740"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb740-1"><a href="data-structures-in-r.html#cb740-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb740-2"><a href="data-structures-in-r.html#cb740-2" tabindex="-1"></a><span class="fu">with</span>(students_tbl, <span class="fu">mean</span>(gpa))</span></code></pre></div>
<pre><code>## [1] 3.666667</code></pre>
<div class="sourceCode" id="cb742"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb742-1"><a href="data-structures-in-r.html#cb742-1" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb742-2"><a href="data-structures-in-r.html#cb742-2" tabindex="-1"></a><span class="fu">summarize</span>(students_tbl, <span class="fu">mean</span>(gpa))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   `mean(gpa)`
##         &lt;dbl&gt;
## 1        3.67</code></pre>
<p>The difference between <code>mutate()</code> and <code>summarize()</code> is that <code>mutate()</code> keeps the tibble format, thus, in this case, <code>mutate()</code> creates a new column with the average values repeated multiple times:</p>
<div class="sourceCode" id="cb744"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb744-1"><a href="data-structures-in-r.html#cb744-1" tabindex="-1"></a><span class="co"># Using mutate() instead of summarize()</span></span>
<span id="cb744-2"><a href="data-structures-in-r.html#cb744-2" tabindex="-1"></a><span class="fu">mutate</span>(students_tbl, <span class="at">mean_gpa =</span> <span class="fu">mean</span>(gpa))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##   name     age grade major     gpa mean_gpa
##   &lt;chr&gt;  &lt;dbl&gt; &lt;ord&gt; &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt;
## 1 Anna      23 A     Math      3.7     3.67
## 2 Ella      NA B     Biology   3.4     3.67
## 3 Sophia    26 A     Physics   3.9     3.67</code></pre>
<p>Note that while base R returns a scalar, <code>reframe()</code> and <code>summarize()</code> keep the tibble structure. To extract just the value, use the <code>pull()</code> function:</p>
<div class="sourceCode" id="cb746"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb746-1"><a href="data-structures-in-r.html#cb746-1" tabindex="-1"></a><span class="co"># Pull to retrieve a vector</span></span>
<span id="cb746-2"><a href="data-structures-in-r.html#cb746-2" tabindex="-1"></a><span class="fu">pull</span>(<span class="fu">summarize</span>(students_tbl, <span class="at">mean_gpa =</span> <span class="fu">mean</span>(gpa)), mean_gpa)</span></code></pre></div>
<pre><code>## [1] 3.666667</code></pre>
</div>
<div id="use-the-pipe-operator" class="section level4 unnumbered hasAnchor">
<h4>Use the Pipe Operator<a href="data-structures-in-r.html#use-the-pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Tidyverse introduces the <a href="pipe-operator">pipe operator</a>, <code>%&gt;%</code>. This operator, detailed in Chapter <a href="r-basics.html#the-tidyverse">3.6.7</a>, allows for sequential execution of functions:</p>
<div class="sourceCode" id="cb748"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb748-1"><a href="data-structures-in-r.html#cb748-1" tabindex="-1"></a><span class="co"># Without the pipe operator</span></span>
<span id="cb748-2"><a href="data-structures-in-r.html#cb748-2" tabindex="-1"></a><span class="fu">mutate</span>(<span class="fu">select</span>(students_tbl, <span class="sc">-</span>age, <span class="sc">-</span>grade), <span class="at">is_cum_laude =</span> gpa <span class="sc">&gt;=</span> <span class="fl">3.5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   name   major     gpa is_cum_laude
##   &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;lgl&gt;       
## 1 Anna   Math      3.7 TRUE        
## 2 Ella   Biology   3.4 FALSE       
## 3 Sophia Physics   3.9 TRUE</code></pre>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb750-1"><a href="data-structures-in-r.html#cb750-1" tabindex="-1"></a><span class="co"># Employ the pipe operator</span></span>
<span id="cb750-2"><a href="data-structures-in-r.html#cb750-2" tabindex="-1"></a>students_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb750-3"><a href="data-structures-in-r.html#cb750-3" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>age, <span class="sc">-</span>grade) <span class="sc">%&gt;%</span> </span>
<span id="cb750-4"><a href="data-structures-in-r.html#cb750-4" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">is_cum_laude =</span> gpa <span class="sc">&gt;=</span> <span class="fl">3.5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   name   major     gpa is_cum_laude
##   &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;lgl&gt;       
## 1 Anna   Math      3.7 TRUE        
## 2 Ella   Biology   3.4 FALSE       
## 3 Sophia Physics   3.9 TRUE</code></pre>
<p>With the pipe operator, operations become more readable and straightforward, promoting cleaner code structuring.</p>
</div>
</div>
<div id="add-labels-tibble" class="section level3 hasAnchor" number="4.6.4">
<h3><span class="header-section-number">4.6.4</span> Add Labels<a href="data-structures-in-r.html#add-labels-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To modify the names of the columns in a tibble, you can use the <code>rename()</code> function from the <code>dplyr</code> package:</p>
<div class="sourceCode" id="cb752"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb752-1"><a href="data-structures-in-r.html#cb752-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb752-2"><a href="data-structures-in-r.html#cb752-2" tabindex="-1"></a><span class="fu">colnames</span>(students_tbl) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Name&quot;</span>, <span class="st">&quot;Age&quot;</span>, <span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Major&quot;</span>, <span class="st">&quot;GPA&quot;</span>)</span>
<span id="cb752-3"><a href="data-structures-in-r.html#cb752-3" tabindex="-1"></a></span>
<span id="cb752-4"><a href="data-structures-in-r.html#cb752-4" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb752-5"><a href="data-structures-in-r.html#cb752-5" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> students_tbl <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Name =</span> name,</span>
<span id="cb752-6"><a href="data-structures-in-r.html#cb752-6" tabindex="-1"></a>                                        <span class="at">Age =</span> age,</span>
<span id="cb752-7"><a href="data-structures-in-r.html#cb752-7" tabindex="-1"></a>                                        <span class="at">Grade =</span> grade,</span>
<span id="cb752-8"><a href="data-structures-in-r.html#cb752-8" tabindex="-1"></a>                                        <span class="at">Major =</span> major,</span>
<span id="cb752-9"><a href="data-structures-in-r.html#cb752-9" tabindex="-1"></a>                                        <span class="at">GPA =</span> gpa)</span>
<span id="cb752-10"><a href="data-structures-in-r.html#cb752-10" tabindex="-1"></a><span class="fu">print</span>(students_tbl)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   Name     Age Grade Major     GPA
##   &lt;chr&gt;  &lt;dbl&gt; &lt;ord&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1 Anna      23 A     Math      3.7
## 2 Ella      NA B     Biology   3.4
## 3 Sophia    26 A     Physics   3.9</code></pre>
<p>The <code>rename()</code> function is particularly useful when modifying only a subset of column:</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb754-1"><a href="data-structures-in-r.html#cb754-1" tabindex="-1"></a><span class="co"># Base R method</span></span>
<span id="cb754-2"><a href="data-structures-in-r.html#cb754-2" tabindex="-1"></a><span class="fu">colnames</span>(students_tbl)[<span class="fu">colnames</span>(students_tbl) <span class="sc">==</span> <span class="st">&quot;Major&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Field of Study&quot;</span></span>
<span id="cb754-3"><a href="data-structures-in-r.html#cb754-3" tabindex="-1"></a></span>
<span id="cb754-4"><a href="data-structures-in-r.html#cb754-4" tabindex="-1"></a><span class="co"># With dplyr</span></span>
<span id="cb754-5"><a href="data-structures-in-r.html#cb754-5" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> students_tbl <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">`</span><span class="at">Field of Study</span><span class="st">`</span> <span class="ot">=</span> Major)</span>
<span id="cb754-6"><a href="data-structures-in-r.html#cb754-6" tabindex="-1"></a><span class="fu">print</span>(students_tbl)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   Name     Age Grade `Field of Study`   GPA
##   &lt;chr&gt;  &lt;dbl&gt; &lt;ord&gt; &lt;chr&gt;            &lt;dbl&gt;
## 1 Anna      23 A     Math               3.7
## 2 Ella      NA B     Biology            3.4
## 3 Sophia    26 A     Physics            3.9</code></pre>
</div>
<div id="handle-missing-values-tibble" class="section level3 hasAnchor" number="4.6.5">
<h3><span class="header-section-number">4.6.5</span> Handle Missing Values<a href="data-structures-in-r.html#handle-missing-values-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tibbles can contain missing values (<code>NA</code>) just like data frames. To manage these missing values, you can use the <code>drop_na()</code> function from the <code>tidyr</code> package by <span class="citation">Wickham, Vaughan, and Girlich (<a href="#ref-R-tidyr">2024</a>)</span>, part of the Tidyverse.</p>
<div class="sourceCode" id="cb756"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb756-1"><a href="data-structures-in-r.html#cb756-1" tabindex="-1"></a><span class="co"># Load the tidyr package</span></span>
<span id="cb756-2"><a href="data-structures-in-r.html#cb756-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb756-3"><a href="data-structures-in-r.html#cb756-3" tabindex="-1"></a></span>
<span id="cb756-4"><a href="data-structures-in-r.html#cb756-4" tabindex="-1"></a><span class="co"># Remove all rows containing missing values</span></span>
<span id="cb756-5"><a href="data-structures-in-r.html#cb756-5" tabindex="-1"></a><span class="co"># --&gt; Base R method</span></span>
<span id="cb756-6"><a href="data-structures-in-r.html#cb756-6" tabindex="-1"></a><span class="fu">na.omit</span>(students_tbl)</span>
<span id="cb756-7"><a href="data-structures-in-r.html#cb756-7" tabindex="-1"></a></span>
<span id="cb756-8"><a href="data-structures-in-r.html#cb756-8" tabindex="-1"></a><span class="co"># --&gt;  With tidyr</span></span>
<span id="cb756-9"><a href="data-structures-in-r.html#cb756-9" tabindex="-1"></a>students_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb756-10"><a href="data-structures-in-r.html#cb756-10" tabindex="-1"></a>    <span class="fu">drop_na</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   Name     Age Grade `Field of Study`   GPA
##   &lt;chr&gt;  &lt;dbl&gt; &lt;ord&gt; &lt;chr&gt;            &lt;dbl&gt;
## 1 Anna      23 A     Math               3.7
## 2 Sophia    26 A     Physics            3.9</code></pre>
<p>The <code>drop_na()</code> function offers the flexibility to target specific columns for <code>NA</code> checking, e.g. <code>drop_na(Age)</code>, ensuring that less critical columns with numerous <code>NA</code> values don’t substantially reduce the dataset. For more details, consult the function documentation by executing <code>?drop_na</code>.</p>
<p>To replace missing values, you can use functions from the <code>dplyr</code> package:</p>
<div class="sourceCode" id="cb758"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb758-1"><a href="data-structures-in-r.html#cb758-1" tabindex="-1"></a><span class="co"># Replace missing &#39;Age&#39; values with mean age</span></span>
<span id="cb758-2"><a href="data-structures-in-r.html#cb758-2" tabindex="-1"></a><span class="co"># --&gt; Base R method</span></span>
<span id="cb758-3"><a href="data-structures-in-r.html#cb758-3" tabindex="-1"></a>students_tbl<span class="sc">$</span>Age[<span class="fu">is.na</span>(students_tbl<span class="sc">$</span>Age)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(students_tbl<span class="sc">$</span>Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb758-4"><a href="data-structures-in-r.html#cb758-4" tabindex="-1"></a></span>
<span id="cb758-5"><a href="data-structures-in-r.html#cb758-5" tabindex="-1"></a><span class="co"># --&gt; With dplyr</span></span>
<span id="cb758-6"><a href="data-structures-in-r.html#cb758-6" tabindex="-1"></a>students_tbl <span class="ot">&lt;-</span> students_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb758-7"><a href="data-structures-in-r.html#cb758-7" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(students_tbl<span class="sc">$</span>Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb758-8"><a href="data-structures-in-r.html#cb758-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Age =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(Age), mean_age, Age)) <span class="sc">%&gt;%</span></span>
<span id="cb758-9"><a href="data-structures-in-r.html#cb758-9" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>mean_age)</span>
<span id="cb758-10"><a href="data-structures-in-r.html#cb758-10" tabindex="-1"></a><span class="fu">print</span>(students_tbl)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   Name     Age Grade `Field of Study`   GPA
##   &lt;chr&gt;  &lt;dbl&gt; &lt;ord&gt; &lt;chr&gt;            &lt;dbl&gt;
## 1 Anna    23   A     Math               3.7
## 2 Ella    24.5 B     Biology            3.4
## 3 Sophia  26   A     Physics            3.9</code></pre>
<p>Here, the <code>mutate()</code> function replaces <code>NA</code> values in the ‘Age’ column with the mean age, calculated with <code>na.rm = TRUE</code> to ignore <code>NA</code>s in the calculation.</p>
</div>
<div id="combine-tibbles" class="section level3 hasAnchor" number="4.6.6">
<h3><span class="header-section-number">4.6.6</span> Combine Tibbles<a href="data-structures-in-r.html#combine-tibbles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When dealing with multiple tibbles, the Tidyverse provides powerful tools for combination and merging. Specifically, the <code>dplyr</code> package by <span class="citation">Wickham et al. (<a href="#ref-R-dplyr">2023</a>)</span> offers functions such as <code>bind_rows()</code>, <code>bind_cols()</code>, and various <code>*_join()</code> methods like <code>inner_join()</code>. Additionally, the <code>purrr</code> package by <span class="citation">Wickham and Henry (<a href="#ref-R-purrr">2023</a>)</span> introduces the <code>map_*()</code> functions, including <code>map_dfr()</code>. Here’s how they work:</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>bind_rows()</code></strong>: This function is the Tidyverse equivalent of <code>rbind()</code> and stacks tibbles vertically. It requires that the columns have matching names:</p>
<div class="sourceCode" id="cb760"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb760-1"><a href="data-structures-in-r.html#cb760-1" tabindex="-1"></a><span class="co"># Create tibbles with identical column names</span></span>
<span id="cb760-2"><a href="data-structures-in-r.html#cb760-2" tabindex="-1"></a>(students_2022 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Alice&quot;</span>, <span class="st">&quot;Bob&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">22</span>)))</span>
<span id="cb760-3"><a href="data-structures-in-r.html#cb760-3" tabindex="-1"></a>(students_2023 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Charlie&quot;</span>, <span class="st">&quot;David&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">23</span>, <span class="dv">24</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   Name    Age
##   &lt;chr&gt; &lt;dbl&gt;
## 1 Alice    21
## 2 Bob      22
## # A tibble: 2 × 2
##   Name      Age
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 Charlie    23
## 2 David      24</code></pre>
<div class="sourceCode" id="cb762"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb762-1"><a href="data-structures-in-r.html#cb762-1" tabindex="-1"></a><span class="co"># Combine tibbles by rows</span></span>
<span id="cb762-2"><a href="data-structures-in-r.html#cb762-2" tabindex="-1"></a><span class="fu">bind_rows</span>(students_2022, students_2023)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   Name      Age
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 Alice      21
## 2 Bob        22
## 3 Charlie    23
## 4 David      24</code></pre></li>
<li><p><strong><code>bind_cols()</code></strong>: This function is the Tidyverse equivalent of <code>cbind()</code> and aligns tibbles horizontally. Ensure the tibbles have the same number of rows:</p>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb764-1"><a href="data-structures-in-r.html#cb764-1" tabindex="-1"></a><span class="co"># Create a tibble with the same number of rows</span></span>
<span id="cb764-2"><a href="data-structures-in-r.html#cb764-2" tabindex="-1"></a>(scores_2022 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Score =</span> <span class="fu">c</span>(<span class="fl">91.1</span>, <span class="fl">85.3</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 1
##   Score
##   &lt;dbl&gt;
## 1  91.1
## 2  85.3</code></pre>
<div class="sourceCode" id="cb766"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb766-1"><a href="data-structures-in-r.html#cb766-1" tabindex="-1"></a><span class="co"># Combine tibbles by columns</span></span>
<span id="cb766-2"><a href="data-structures-in-r.html#cb766-2" tabindex="-1"></a><span class="fu">bind_cols</span>(students_2022, scores_2022)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Name    Age Score
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Alice    21  91.1
## 2 Bob      22  85.3</code></pre></li>
<li><p><strong><code>inner_join()</code></strong>: Similar to <code>merge()</code>, <code>inner_join()</code> matches tibbles based on a shared identifier specified by the <code>by</code> argument:</p>
<div class="sourceCode" id="cb768"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb768-1"><a href="data-structures-in-r.html#cb768-1" tabindex="-1"></a><span class="co"># Create a tibble with a common column &quot;Name&quot;</span></span>
<span id="cb768-2"><a href="data-structures-in-r.html#cb768-2" tabindex="-1"></a>(scores_2022 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Alice&quot;</span>), <span class="at">Score =</span> <span class="fu">c</span>(<span class="fl">85.3</span>, <span class="fl">91.1</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   Name  Score
##   &lt;chr&gt; &lt;dbl&gt;
## 1 Bob    85.3
## 2 Alice  91.1</code></pre>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="data-structures-in-r.html#cb770-1" tabindex="-1"></a><span class="co"># Merge tibbles by common column &quot;Name&quot;</span></span>
<span id="cb770-2"><a href="data-structures-in-r.html#cb770-2" tabindex="-1"></a><span class="fu">inner_join</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Name    Age Score
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Alice    21  91.1
## 2 Bob      22  85.3</code></pre></li>
<li><p><strong>Different Types of Joins with <code>dplyr</code></strong>: With <code>dplyr</code>, there are specialized functions for each type of merge/join operation, making it more intuitive:</p>
<ul>
<li><strong>Inner Join</strong>: Retained entries are only those found in both tibbles.</li>
<li><strong>Full (Outer) Join</strong>: Keeps all entries from both tibbles.</li>
<li><strong>Left Join</strong>: Keeps all entries from the first tibble.</li>
<li><strong>Right Join</strong>: Retains all entries from the second tibble.</li>
</ul>
<p>When an entry exists in one tibble but not the other, the missing columns for that entry will be filled with <code>NA</code> values:</p>
<div class="sourceCode" id="cb772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb772-1"><a href="data-structures-in-r.html#cb772-1" tabindex="-1"></a><span class="co"># Construct a tibble with a partially shared &quot;Name&quot; column</span></span>
<span id="cb772-2"><a href="data-structures-in-r.html#cb772-2" tabindex="-1"></a>(scores_2022 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Eva&quot;</span>), <span class="at">Score =</span> <span class="fu">c</span>(<span class="fl">85.3</span>, <span class="fl">78.3</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   Name  Score
##   &lt;chr&gt; &lt;dbl&gt;
## 1 Bob    85.3
## 2 Eva    78.3</code></pre>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="data-structures-in-r.html#cb774-1" tabindex="-1"></a><span class="co"># Inner join to keep common &#39;Name&#39; entries</span></span>
<span id="cb774-2"><a href="data-structures-in-r.html#cb774-2" tabindex="-1"></a><span class="fu">inner_join</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   Name    Age Score
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Bob      22  85.3</code></pre>
<div class="sourceCode" id="cb776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb776-1"><a href="data-structures-in-r.html#cb776-1" tabindex="-1"></a><span class="co"># Full (outer) join to retain all unique &#39;Name&#39; entries from both tibbles</span></span>
<span id="cb776-2"><a href="data-structures-in-r.html#cb776-2" tabindex="-1"></a><span class="fu">full_join</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   Name    Age Score
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Alice    21  NA  
## 2 Bob      22  85.3
## 3 Eva      NA  78.3</code></pre>
<div class="sourceCode" id="cb778"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb778-1"><a href="data-structures-in-r.html#cb778-1" tabindex="-1"></a><span class="co"># Left join to keep all rows from &#39;students_2022&#39;</span></span>
<span id="cb778-2"><a href="data-structures-in-r.html#cb778-2" tabindex="-1"></a><span class="fu">left_join</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Name    Age Score
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Alice    21  NA  
## 2 Bob      22  85.3</code></pre>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="data-structures-in-r.html#cb780-1" tabindex="-1"></a><span class="co"># Right join to keep all rows from &#39;scores_2022&#39;</span></span>
<span id="cb780-2"><a href="data-structures-in-r.html#cb780-2" tabindex="-1"></a><span class="fu">right_join</span>(students_2022, scores_2022, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Name    Age Score
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Bob      22  85.3
## 2 Eva      NA  78.3</code></pre></li>
<li><p><strong><code>map_dfr()</code> and <code>map_dfc()</code></strong>: For combining multiple tibbles stored in a list, the <code>purrr</code> package provides the <code>map_dfr()</code> and <code>map_dfc()</code> functions, which are more flexible alternatives to using <code>do.call()</code> in combination with <code>rbind()</code>, or <code>cbind()</code>:</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb782-1"><a href="data-structures-in-r.html#cb782-1" tabindex="-1"></a><span class="co"># Load purrr package</span></span>
<span id="cb782-2"><a href="data-structures-in-r.html#cb782-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;purrr&quot;</span>)</span>
<span id="cb782-3"><a href="data-structures-in-r.html#cb782-3" tabindex="-1"></a></span>
<span id="cb782-4"><a href="data-structures-in-r.html#cb782-4" tabindex="-1"></a><span class="co"># Create tibbles for different months</span></span>
<span id="cb782-5"><a href="data-structures-in-r.html#cb782-5" tabindex="-1"></a>jan <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Eve&quot;</span>, <span class="st">&quot;Frank&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">26</span>))</span>
<span id="cb782-6"><a href="data-structures-in-r.html#cb782-6" tabindex="-1"></a>feb <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Grace&quot;</span>, <span class="st">&quot;Harry&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">27</span>, <span class="dv">28</span>))</span>
<span id="cb782-7"><a href="data-structures-in-r.html#cb782-7" tabindex="-1"></a>mar <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Irene&quot;</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">29</span>))</span>
<span id="cb782-8"><a href="data-structures-in-r.html#cb782-8" tabindex="-1"></a></span>
<span id="cb782-9"><a href="data-structures-in-r.html#cb782-9" tabindex="-1"></a><span class="co"># Store all tibbles in a list</span></span>
<span id="cb782-10"><a href="data-structures-in-r.html#cb782-10" tabindex="-1"></a>list_of_tibbles <span class="ot">&lt;-</span> <span class="fu">list</span>(jan, feb, mar)</span>
<span id="cb782-11"><a href="data-structures-in-r.html#cb782-11" tabindex="-1"></a></span>
<span id="cb782-12"><a href="data-structures-in-r.html#cb782-12" tabindex="-1"></a><span class="co"># Combine all tibbles by rows</span></span>
<span id="cb782-13"><a href="data-structures-in-r.html#cb782-13" tabindex="-1"></a>(combined_tibble <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(<span class="at">.x =</span> list_of_tibbles, <span class="at">.f =</span> <span class="sc">~</span>.x))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   Name    Age
##   &lt;chr&gt; &lt;dbl&gt;
## 1 Eve      25
## 2 Frank    26
## 3 Grace    27
## 4 Harry    28
## 5 Irene    29</code></pre>
<p>With this approach, <code>map_dfr()</code> sequentially combines each tibble in the list by rows. This method is particularly useful when the number of tibbles to be combined is unknown or variable, offering more flexibility than calling functions like <code>bind_rows(jan, feb, mar)</code> directly. The <code>map_dfc()</code> function operates similarly but combines the tibbles column-wise instead of row-wise.</p>
<p>Within the <code>map_*()</code> functions, the argument <code>.f = ~.x</code> is a shorthand formula notation which translates to <code>.f = function(x) x</code>. This means that for each tibble in the list, the function takes the tibble as it is and returns it without any transformation, making it an efficient way to combine them row- or column-wise.</p></li>
<li><p><strong><code>reduce()</code> + <code>*_join()</code></strong>: When tasked with merging multiple tibbles stored in a list based on a common column, the combination of <code>purrr::reduce()</code> and <code>dplyr::*_join()</code> functions such as <code>dplyr::full_join()</code> offers a more flexible alternative to using <code>do.call()</code> in combination with <code>merge()</code>:</p>
<div class="sourceCode" id="cb784"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb784-1"><a href="data-structures-in-r.html#cb784-1" tabindex="-1"></a><span class="co"># Construct a tibble with a partially shared &quot;Name&quot; column</span></span>
<span id="cb784-2"><a href="data-structures-in-r.html#cb784-2" tabindex="-1"></a>(subject_2022 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Pete&quot;</span>), </span>
<span id="cb784-3"><a href="data-structures-in-r.html#cb784-3" tabindex="-1"></a>                        <span class="at">Subject =</span> <span class="fu">c</span>(<span class="st">&quot;History&quot;</span>, <span class="st">&quot;Economics&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   Name  Subject  
##   &lt;chr&gt; &lt;chr&gt;    
## 1 Bob   History  
## 2 Pete  Economics</code></pre>
<div class="sourceCode" id="cb786"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb786-1"><a href="data-structures-in-r.html#cb786-1" tabindex="-1"></a><span class="co"># A list comprising the tibbles to be merged</span></span>
<span id="cb786-2"><a href="data-structures-in-r.html#cb786-2" tabindex="-1"></a>list_of_tibbles <span class="ot">&lt;-</span> <span class="fu">list</span>(students_2022, scores_2022, subject_2022)</span>
<span id="cb786-3"><a href="data-structures-in-r.html#cb786-3" tabindex="-1"></a></span>
<span id="cb786-4"><a href="data-structures-in-r.html#cb786-4" tabindex="-1"></a><span class="co"># Execute an outer-merge using reduce() and full_join()</span></span>
<span id="cb786-5"><a href="data-structures-in-r.html#cb786-5" tabindex="-1"></a>(merged_tibble <span class="ot">&lt;-</span> <span class="fu">reduce</span>(list_of_tibbles, <span class="at">.f =</span> <span class="sc">~</span><span class="fu">full_join</span>(.x, .y, <span class="at">by =</span> <span class="st">&quot;Name&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##   Name    Age Score Subject  
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    
## 1 Alice    21  NA   &lt;NA&gt;     
## 2 Bob      22  85.3 History  
## 3 Eva      NA  78.3 &lt;NA&gt;     
## 4 Pete     NA  NA   Economics</code></pre></li>
</ol>
</div>
<div id="apply-family-tibble" class="section level3 hasAnchor" number="4.6.7">
<h3><span class="header-section-number">4.6.7</span> Apply Family<a href="data-structures-in-r.html#apply-family-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, the Tidyverse collection of packages offers functions for manipulating tibbles in a more readable and consistent manner. This chapter focuses on these functionalities that replace the traditional apply family used with data frames.</p>
<div id="apply-by-columns-and-rows-tibble" class="section level4 unnumbered hasAnchor">
<h4>Apply by Columns and Rows<a href="data-structures-in-r.html#apply-by-columns-and-rows-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p><strong><code>map()</code></strong>: Instead of <code>apply()</code>, use the <code>purrr::map()</code> function to process each column of a tibble:</p>
<div class="sourceCode" id="cb788"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb788-1"><a href="data-structures-in-r.html#cb788-1" tabindex="-1"></a><span class="co"># Sample tibble</span></span>
<span id="cb788-2"><a href="data-structures-in-r.html#cb788-2" tabindex="-1"></a>tb <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">b =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb788-3"><a href="data-structures-in-r.html#cb788-3" tabindex="-1"></a></span>
<span id="cb788-4"><a href="data-structures-in-r.html#cb788-4" tabindex="-1"></a><span class="co"># Mean values across columns (resultant is a list)</span></span>
<span id="cb788-5"><a href="data-structures-in-r.html#cb788-5" tabindex="-1"></a><span class="fu">map</span>(tb, mean)</span></code></pre></div>
<pre><code>## $a
## [1] 2.5
## 
## $b
## [1] 6.5</code></pre></li>
<li><p><strong><code>map_dbl()</code></strong>: Similar to <code>lapply()</code>, the <code>purrr::map_dbl()</code> function processes each column and returns a double vector:</p>
<div class="sourceCode" id="cb790"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb790-1"><a href="data-structures-in-r.html#cb790-1" tabindex="-1"></a><span class="co"># Mean values for each column (output is a double vector)</span></span>
<span id="cb790-2"><a href="data-structures-in-r.html#cb790-2" tabindex="-1"></a><span class="fu">map_dbl</span>(tb, mean)</span></code></pre></div>
<pre><code>##   a   b 
## 2.5 6.5</code></pre></li>
</ol>
</div>
<div id="apply-by-groups-tibble" class="section level4 unnumbered hasAnchor">
<h4>Apply by Groups<a href="data-structures-in-r.html#apply-by-groups-tibble" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When dealing with grouped data, you can perform operations within these distinct groups using Tidyverse functions.</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>group_by()</code> + <code>summarize()</code></strong>: This pair of functions from <code>dplyr</code> replaces the need for <code>split()</code> and <code>lapply()</code>:</p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="data-structures-in-r.html#cb792-1" tabindex="-1"></a><span class="co"># Sample grouped tibble</span></span>
<span id="cb792-2"><a href="data-structures-in-r.html#cb792-2" tabindex="-1"></a>tb_grouped <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">group =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>), </span>
<span id="cb792-3"><a href="data-structures-in-r.html#cb792-3" tabindex="-1"></a>                     <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>))</span>
<span id="cb792-4"><a href="data-structures-in-r.html#cb792-4" tabindex="-1"></a></span>
<span id="cb792-5"><a href="data-structures-in-r.html#cb792-5" tabindex="-1"></a><span class="co"># Summarizing &#39;value&#39; based on &#39;group&#39;</span></span>
<span id="cb792-6"><a href="data-structures-in-r.html#cb792-6" tabindex="-1"></a>tb_grouped <span class="sc">%&gt;%</span> </span>
<span id="cb792-7"><a href="data-structures-in-r.html#cb792-7" tabindex="-1"></a>    <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb792-8"><a href="data-structures-in-r.html#cb792-8" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">sum_value =</span> <span class="fu">sum</span>(value))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   group sum_value
##   &lt;chr&gt;     &lt;dbl&gt;
## 1 A            30
## 2 B           120</code></pre></li>
<li><p><strong><code>group_by()</code> + <code>summarize()</code> for Multiple Groups and Variables</strong>: The <code>dplyr</code> functions can handle multiple group and value variables:</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb794-1"><a href="data-structures-in-r.html#cb794-1" tabindex="-1"></a><span class="co"># Sample tibble with multiple groups and values</span></span>
<span id="cb794-2"><a href="data-structures-in-r.html#cb794-2" tabindex="-1"></a>tb_advanced <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb794-3"><a href="data-structures-in-r.html#cb794-3" tabindex="-1"></a>    <span class="at">group1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>),</span>
<span id="cb794-4"><a href="data-structures-in-r.html#cb794-4" tabindex="-1"></a>    <span class="at">group2 =</span> <span class="fu">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;Y&quot;</span>),</span>
<span id="cb794-5"><a href="data-structures-in-r.html#cb794-5" tabindex="-1"></a>    <span class="at">v1 =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>),</span>
<span id="cb794-6"><a href="data-structures-in-r.html#cb794-6" tabindex="-1"></a>    <span class="at">v2 =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>)</span>
<span id="cb794-7"><a href="data-structures-in-r.html#cb794-7" tabindex="-1"></a>)</span>
<span id="cb794-8"><a href="data-structures-in-r.html#cb794-8" tabindex="-1"></a></span>
<span id="cb794-9"><a href="data-structures-in-r.html#cb794-9" tabindex="-1"></a><span class="co"># Summarize for each group1 &amp; group2 combination</span></span>
<span id="cb794-10"><a href="data-structures-in-r.html#cb794-10" tabindex="-1"></a>tb_advanced <span class="sc">%&gt;%</span> </span>
<span id="cb794-11"><a href="data-structures-in-r.html#cb794-11" tabindex="-1"></a>    <span class="fu">group_by</span>(group1, group2) <span class="sc">%&gt;%</span> </span>
<span id="cb794-12"><a href="data-structures-in-r.html#cb794-12" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_v1 =</span> <span class="fu">mean</span>(v1), </span>
<span id="cb794-13"><a href="data-structures-in-r.html#cb794-13" tabindex="-1"></a>              <span class="at">mean_v2 =</span> <span class="fu">mean</span>(v2))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
## # Groups:   group1 [2]
##   group1 group2 mean_v1 mean_v2
##   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;
## 1 A      X           15     7.5
## 2 A      Y           30    15  
## 3 B      X           40    20  
## 4 B      Y           55    27.5</code></pre></li>
</ol>
</div>
</div>
<div id="reshape-tibbles" class="section level3 hasAnchor" number="4.6.8">
<h3><span class="header-section-number">4.6.8</span> Reshape Tibbles<a href="data-structures-in-r.html#reshape-tibbles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As discussed in Chapter <a href="data-structures-in-r.html#reshape-data-frames">4.5.8</a>, data can be organized in either a wide or long format:</p>
<ul>
<li><p><strong>Wide Format</strong>: The wide format has each row representing a unique observation, with various attributes detailed across columns.</p></li>
<li><p><strong>Long Format</strong>: Contrary to the wide format, the long format has each row representing a single attribute or measure of an observation, resulting in multiple rows for each observation.</p></li>
</ul>
<p>The <code>tidyr</code> package by <span class="citation">Wickham, Vaughan, and Girlich (<a href="#ref-R-tidyr">2024</a>)</span> provides two key functions for reshaping data: <code>pivot_longer()</code> and <code>pivot_wider()</code>:</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="data-structures-in-r.html#cb796-1" tabindex="-1"></a><span class="co"># Load tidyr package</span></span>
<span id="cb796-2"><a href="data-structures-in-r.html#cb796-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb796-3"><a href="data-structures-in-r.html#cb796-3" tabindex="-1"></a></span>
<span id="cb796-4"><a href="data-structures-in-r.html#cb796-4" tabindex="-1"></a><span class="co"># Create tibble using wide format</span></span>
<span id="cb796-5"><a href="data-structures-in-r.html#cb796-5" tabindex="-1"></a>wide_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb796-6"><a href="data-structures-in-r.html#cb796-6" tabindex="-1"></a>    <span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Marie&quot;</span>),</span>
<span id="cb796-7"><a href="data-structures-in-r.html#cb796-7" tabindex="-1"></a>    <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">38</span>, <span class="dv">29</span>),</span>
<span id="cb796-8"><a href="data-structures-in-r.html#cb796-8" tabindex="-1"></a>    <span class="at">Gender =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>),</span>
<span id="cb796-9"><a href="data-structures-in-r.html#cb796-9" tabindex="-1"></a>    <span class="at">IQ =</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">121</span>)</span>
<span id="cb796-10"><a href="data-structures-in-r.html#cb796-10" tabindex="-1"></a>)</span>
<span id="cb796-11"><a href="data-structures-in-r.html#cb796-11" tabindex="-1"></a><span class="fu">print</span>(wide_data)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   Name    Age Gender    IQ
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1 John     38 Male     120
## 2 Marie    29 Female   121</code></pre>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="data-structures-in-r.html#cb798-1" tabindex="-1"></a><span class="co"># Coerce all varying attributes to character type</span></span>
<span id="cb798-2"><a href="data-structures-in-r.html#cb798-2" tabindex="-1"></a>wide_data <span class="ot">&lt;-</span> wide_data <span class="sc">%&gt;%</span> </span>
<span id="cb798-3"><a href="data-structures-in-r.html#cb798-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), as.character))</span>
<span id="cb798-4"><a href="data-structures-in-r.html#cb798-4" tabindex="-1"></a></span>
<span id="cb798-5"><a href="data-structures-in-r.html#cb798-5" tabindex="-1"></a><span class="co"># Pivot to long format</span></span>
<span id="cb798-6"><a href="data-structures-in-r.html#cb798-6" tabindex="-1"></a>long_data <span class="ot">&lt;-</span> wide_data <span class="sc">%&gt;%</span> </span>
<span id="cb798-7"><a href="data-structures-in-r.html#cb798-7" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Name, </span>
<span id="cb798-8"><a href="data-structures-in-r.html#cb798-8" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Attribute&quot;</span>, </span>
<span id="cb798-9"><a href="data-structures-in-r.html#cb798-9" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Value&quot;</span>)</span>
<span id="cb798-10"><a href="data-structures-in-r.html#cb798-10" tabindex="-1"></a><span class="fu">print</span>(long_data)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   Name  Attribute Value 
##   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; 
## 1 John  Age       38    
## 2 John  Gender    Male  
## 3 John  IQ        120   
## 4 Marie Age       29    
## 5 Marie Gender    Female
## 6 Marie IQ        121</code></pre>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="data-structures-in-r.html#cb800-1" tabindex="-1"></a><span class="co"># Convert long format back to wide format</span></span>
<span id="cb800-2"><a href="data-structures-in-r.html#cb800-2" tabindex="-1"></a>reshaped_wide_data <span class="ot">&lt;-</span> long_data <span class="sc">%&gt;%</span> </span>
<span id="cb800-3"><a href="data-structures-in-r.html#cb800-3" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Attribute, </span>
<span id="cb800-4"><a href="data-structures-in-r.html#cb800-4" tabindex="-1"></a>                <span class="at">values_from =</span> Value)</span>
<span id="cb800-5"><a href="data-structures-in-r.html#cb800-5" tabindex="-1"></a><span class="fu">print</span>(reshaped_wide_data)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   Name  Age   Gender IQ   
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;
## 1 John  38    Male   120  
## 2 Marie 29    Female 121</code></pre>
<p>In <code>pivot_longer()</code> and <code>pivot_wider()</code>:</p>
<ul>
<li><code>cols</code>: Specifies the columns to pivot into longer or wider format.</li>
<li><code>names_to</code>: Names the column in the reshaped data containing the unique identifiers.</li>
<li><code>values_to</code>: Names the column in the reshaped data that will hold the data values.</li>
<li><code>names_from</code>: Indicates the column that will provide names in the widened data.</li>
<li><code>values_from</code>: Indicates the column that will provide values in the widened data.</li>
</ul>
<p>For those new to tibbles and tidyverse, these functions may initially seem complicated. However, they offer a straightforward way to reshape data in R. You can always refer to the official documentation (<code>?pivot_longer</code>, <code>?pivot_wider</code>) or read available vignettes for further insights.</p>
</div>
</div>
<div id="data.table" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Data Table (<code>data.table</code>)<a href="data-structures-in-r.html#data.table" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A data table (<code>data.table</code>) is similar to a data frame but with more advanced features for data manipulation. Credited to the <code>data.table</code> package by <span class="citation">Barrett et al. (<a href="#ref-R-data.table">2024</a>)</span>, data tables are known for their high-speed operations, particularly beneficial for large datasets. This sets them apart from <code>tibbles</code> which, although more user-friendly, may not be as optimized for speed. Consequently, <code>data.table</code> and <code>tibble</code> can be seen as competitors, each improving upon the basic data frame in their unique ways. Like tibble, <code>data.table</code> is not a part of base R. It requires the installation of the <code>data.table</code> package via <code>install.packages("data.table")</code>, followed by <code>library("data.table")</code> at the beginning of your script.</p>
<p>The syntax of <code>data.table</code> differs significantly from the syntax used in the Tidyverse, making the R codes appear almost as distinct languages. While my research often employs <code>data.table</code> for its efficiency, in this book, I have chosen to emphasize <code>tibble</code> and the associated Tidyverse syntax. This decision is primarily due to the more intuitive and user-friendly nature of the Tidyverse.</p>
<p>For those who wish to explore the <code>data.table</code> package in more depth, I suggest starting with its vignette. You can access it in R using:</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="data-structures-in-r.html#cb802-1" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;datatable-intro&quot;</span>, <span class="at">package =</span> <span class="st">&quot;data.table&quot;</span>)</span></code></pre></div>
<p>If you’re unsure about the specific vignettes available, list all vignettes associated with <code>data.table</code>:</p>
<div class="sourceCode" id="cb803"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb803-1"><a href="data-structures-in-r.html#cb803-1" tabindex="-1"></a><span class="fu">vignette</span>(<span class="at">package =</span> <span class="st">&quot;data.table&quot;</span>)</span></code></pre></div>
<p>Then, based on your interest, you can select a vignette and view it with the <code>vignette()</code> function, as shown earlier.</p>
<p>Moreover, for structured learning on <code>data.table</code>, <a href="https://learn.datacamp.com/" target="_blank">DataCamp</a> offers comprehensive courses including:</p>
<ul>
<li><a href="https://learn.datacamp.com/courses/data-manipulation-with-datatable-in-r" target="_blank">Data Manipulation with data.table in R</a></li>
<li><a href="https://learn.datacamp.com/courses/joining-data-with-datatable-in-r" target="_blank">Joining Data with data.table in R</a></li>
<li><a href="https://learn.datacamp.com/courses/time-series-with-datatable-in-r" target="_blank">Time Series with data.table in R</a></li>
</ul>
<p>These courses provide an in-depth exploration, from basic operations to advanced manipulations using <code>data.table</code>.</p>
</div>
<div id="xts" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Extensible Time Series (<code>xts</code>)<a href="data-structures-in-r.html#xts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The e<strong>x</strong>tensible <strong>t</strong>ime <strong>s</strong>eries (<code>xts</code>) object of the <code>xts</code> package by <span class="citation">Ryan and Ulrich (<a href="#ref-R-xts">2024b</a>)</span> pairs a matrix with a time index:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:matrix-with-index"></span>
<img src="files/xtsobject.png" alt="`xts` Object as a Matrix with Time Index" width="40%" />
<p class="caption">
Figure 4.1: <code>xts</code> Object as a Matrix with Time Index
</p>
</div>
<p>In <code>xts</code>, each row of a matrix is marked with a unique timestamp, typically formatted as a <code>Date</code> or <code>POSIXct</code>. Details on creating <code>Date</code> or <code>POSIXct</code> time indices can be gathered from Chapter <a href="r-basics.html#dates-and-times">3.3</a>. It’s important to note that an <code>xts</code> object’s base is a matrix, not a data frame or tibble, which mandates that all columns share the same data type. This means an <code>xts</code> object contains exclusively numbers or characters but not a mix of the two. While most matrix-related functions from Chapter <a href="data-structures-in-r.html#matrix">4.3</a> are compatible with <code>xts</code> objects, <code>xts</code> offers an additional set of specialized functions tailored for handling time series data.</p>
<p>By design, <code>xts</code> objects always sort data chronologically, from the earliest to the latest observation. If you have use-cases that demand arranging time series data based on other criteria (e.g., size of stock returns), it’s necessary to first revert the <code>xts</code> object back to a matrix or a data frame.</p>
<p><code>xts</code> objects are fundamentally based on <code>zoo</code> objects from the <code>zoo</code> package by <span class="citation">Zeileis, Grothendieck, and Ryan (<a href="#ref-R-zoo">2023</a>)</span>, named after <strong>Z</strong>eileis’ <strong>o</strong>rdered <strong>o</strong>bservations. These, too, are time-indexed data structures, but the <code>xts</code> package introduces additional functionalities.</p>
<p>To integrate <code>xts</code> into your workflow, it needs to be installed first using <code>install.packages("xts")</code>. Subsequently, invoking <code>library("xts")</code> at the beginning of your script loads the package.</p>
<div id="create-an-xts-object" class="section level3 hasAnchor" number="4.8.1">
<h3><span class="header-section-number">4.8.1</span> Create an <code>xts</code> Object<a href="data-structures-in-r.html#create-an-xts-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An <code>xts</code> object can be created using the <code>xts()</code> function. This function binds data with its respective time index (<code>order.by = time_index</code>):</p>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb804-1"><a href="data-structures-in-r.html#cb804-1" tabindex="-1"></a><span class="co"># Load xts package</span></span>
<span id="cb804-2"><a href="data-structures-in-r.html#cb804-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;xts&quot;</span>)</span>
<span id="cb804-3"><a href="data-structures-in-r.html#cb804-3" tabindex="-1"></a></span>
<span id="cb804-4"><a href="data-structures-in-r.html#cb804-4" tabindex="-1"></a><span class="co"># Create a data matrix</span></span>
<span id="cb804-5"><a href="data-structures-in-r.html#cb804-5" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="cn">NULL</span>, <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)))</span>
<span id="cb804-6"><a href="data-structures-in-r.html#cb804-6" tabindex="-1"></a><span class="fu">print</span>(data)</span></code></pre></div>
<pre><code>##      a  b
## [1,] 1  7
## [2,] 2  8
## [3,] 3  9
## [4,] 4 10
## [5,] 5 11
## [6,] 6 12</code></pre>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="data-structures-in-r.html#cb806-1" tabindex="-1"></a><span class="co"># Create a time index of the same length as the data matrix</span></span>
<span id="cb806-2"><a href="data-structures-in-r.html#cb806-2" tabindex="-1"></a>time_index <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1995-11-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;1996-04-01&quot;</span>), <span class="at">by =</span> <span class="st">&quot;month&quot;</span>)</span>
<span id="cb806-3"><a href="data-structures-in-r.html#cb806-3" tabindex="-1"></a><span class="fu">print</span>(time_index)</span></code></pre></div>
<pre><code>## [1] &quot;1995-11-01&quot; &quot;1995-12-01&quot; &quot;1996-01-01&quot; &quot;1996-02-01&quot; &quot;1996-03-01&quot;
## [6] &quot;1996-04-01&quot;</code></pre>
<div class="sourceCode" id="cb808"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb808-1"><a href="data-structures-in-r.html#cb808-1" tabindex="-1"></a><span class="co"># Create an xts object based on the data matrix its time index</span></span>
<span id="cb808-2"><a href="data-structures-in-r.html#cb808-2" tabindex="-1"></a>dxts <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> data, <span class="at">order.by =</span> time_index)</span>
<span id="cb808-3"><a href="data-structures-in-r.html#cb808-3" tabindex="-1"></a><span class="fu">print</span>(dxts)</span></code></pre></div>
<pre><code>##            a  b
## 1995-11-01 1  7
## 1995-12-01 2  8
## 1996-01-01 3  9
## 1996-02-01 4 10
## 1996-03-01 5 11
## 1996-04-01 6 12</code></pre>
</div>
<div id="inspect-an-xts-object" class="section level3 hasAnchor" number="4.8.2">
<h3><span class="header-section-number">4.8.2</span> Inspect an <code>xts</code> Object<a href="data-structures-in-r.html#inspect-an-xts-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before delving into the specifics of an <code>xts</code> object, it’s helpful to grasp its overall structure and the type of time index it utilizes.</p>
<div class="sourceCode" id="cb810"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb810-1"><a href="data-structures-in-r.html#cb810-1" tabindex="-1"></a><span class="co"># Check data structure and time index type</span></span>
<span id="cb810-2"><a href="data-structures-in-r.html#cb810-2" tabindex="-1"></a><span class="fu">class</span>(dxts)            <span class="co"># Returns &quot;xts&quot; and &quot;zoo&quot;, but it&#39;s also a &quot;matrix&quot;.</span></span>
<span id="cb810-3"><a href="data-structures-in-r.html#cb810-3" tabindex="-1"></a><span class="fu">typeof</span>(dxts)           <span class="co"># Returns &quot;integer&quot;.</span></span>
<span id="cb810-4"><a href="data-structures-in-r.html#cb810-4" tabindex="-1"></a><span class="fu">tclass</span>(dxts)           <span class="co"># Returns &quot;Date&quot;.</span></span>
<span id="cb810-5"><a href="data-structures-in-r.html#cb810-5" tabindex="-1"></a><span class="fu">is.xts</span>(dxts)           <span class="co"># Returns TRUE.</span></span>
<span id="cb810-6"><a href="data-structures-in-r.html#cb810-6" tabindex="-1"></a><span class="fu">is.zoo</span>(dxts)           <span class="co"># Returns TRUE.</span></span>
<span id="cb810-7"><a href="data-structures-in-r.html#cb810-7" tabindex="-1"></a><span class="fu">is.matrix</span>(dxts)        <span class="co"># Returns TRUE.</span></span>
<span id="cb810-8"><a href="data-structures-in-r.html#cb810-8" tabindex="-1"></a><span class="fu">is.data.frame</span>(dxts)    <span class="co"># Returns FALSE.</span></span></code></pre></div>
<pre><code>## [1] &quot;xts&quot; &quot;zoo&quot;
## [1] &quot;integer&quot;
## [1] &quot;Date&quot;
## [1] TRUE
## [1] TRUE
## [1] TRUE
## [1] FALSE</code></pre>
<p>To inspect <code>xts</code> objects, functions like <code>nrow()</code>, <code>ncol()</code>, <code>dim()</code>, <code>head()</code>, <code>tail()</code>, <code>summarize()</code>, and <code>View()</code> can be employed. Their application is identical to their use with matrices, as detailed in Chapter <a href="data-structures-in-r.html#inspect-a-matrix">4.3.2</a>.</p>
<p>Sometimes you might want to separately view the core data (<code>matrix</code>) and the associated time index (<code>Date</code> or <code>POSIXct</code> vector):</p>
<div class="sourceCode" id="cb812"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb812-1"><a href="data-structures-in-r.html#cb812-1" tabindex="-1"></a><span class="co"># Extract the time index from the xts object</span></span>
<span id="cb812-2"><a href="data-structures-in-r.html#cb812-2" tabindex="-1"></a><span class="fu">index</span>(dxts)</span></code></pre></div>
<pre><code>## [1] &quot;1995-11-01&quot; &quot;1995-12-01&quot; &quot;1996-01-01&quot; &quot;1996-02-01&quot; &quot;1996-03-01&quot;
## [6] &quot;1996-04-01&quot;</code></pre>
<div class="sourceCode" id="cb814"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb814-1"><a href="data-structures-in-r.html#cb814-1" tabindex="-1"></a><span class="co"># Retrieve the core data as a matrix from the xts object</span></span>
<span id="cb814-2"><a href="data-structures-in-r.html#cb814-2" tabindex="-1"></a><span class="fu">coredata</span>(dxts)</span></code></pre></div>
<pre><code>##      a  b
## [1,] 1  7
## [2,] 2  8
## [3,] 3  9
## [4,] 4 10
## [5,] 5 11
## [6,] 6 12</code></pre>
<div class="sourceCode" id="cb816"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb816-1"><a href="data-structures-in-r.html#cb816-1" tabindex="-1"></a><span class="co"># Retrieve the core data as a numeric vector from the xts object</span></span>
<span id="cb816-2"><a href="data-structures-in-r.html#cb816-2" tabindex="-1"></a><span class="fu">as.numeric</span>(dxts)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12</code></pre>
<p>The <code>xts</code> package provides a range of functions tailored for extracting detailed information about the time index:</p>
<div class="sourceCode" id="cb818"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb818-1"><a href="data-structures-in-r.html#cb818-1" tabindex="-1"></a><span class="co"># Extract specific time index information</span></span>
<span id="cb818-2"><a href="data-structures-in-r.html#cb818-2" tabindex="-1"></a><span class="fu">cbind</span>(<span class="at">Date =</span> <span class="fu">index</span>(dxts),</span>
<span id="cb818-3"><a href="data-structures-in-r.html#cb818-3" tabindex="-1"></a>      <span class="at">Year =</span> <span class="dv">1900</span> <span class="sc">+</span> <span class="fu">.indexyear</span>(dxts),      <span class="co"># -&gt; format(index(dxts), &quot;%Y&quot;)</span></span>
<span id="cb818-4"><a href="data-structures-in-r.html#cb818-4" tabindex="-1"></a>      <span class="at">Month =</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">.indexmon</span>(dxts),         <span class="co"># -&gt; format(index(dxts), &quot;%m&quot;)</span></span>
<span id="cb818-5"><a href="data-structures-in-r.html#cb818-5" tabindex="-1"></a>      <span class="at">Weekday =</span> <span class="fu">.indexwday</span>(dxts),          <span class="co"># -&gt; format(index(dxts), &quot;%u&quot;)</span></span>
<span id="cb818-6"><a href="data-structures-in-r.html#cb818-6" tabindex="-1"></a>      <span class="at">Day_by_Month =</span> <span class="fu">.indexmday</span>(dxts),     <span class="co"># -&gt; format(index(dxts), &quot;%d&quot;)</span></span>
<span id="cb818-7"><a href="data-structures-in-r.html#cb818-7" tabindex="-1"></a>      <span class="at">Day_by_Year =</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">.indexyday</span>(dxts),  <span class="co"># -&gt; format(index(dxts), &quot;%j&quot;)</span></span>
<span id="cb818-8"><a href="data-structures-in-r.html#cb818-8" tabindex="-1"></a>      <span class="at">Unix_Seconds =</span> <span class="fu">.index</span>(dxts),         <span class="co"># -&gt; as.numeric(index(dxts)) * 86400</span></span>
<span id="cb818-9"><a href="data-structures-in-r.html#cb818-9" tabindex="-1"></a>      <span class="at">Unix_Days =</span> <span class="fu">.index</span>(dxts) <span class="sc">/</span> <span class="dv">86400</span>)    <span class="co"># -&gt; as.numeric(index(dxts))</span></span></code></pre></div>
<pre><code>##      Date Year Month Weekday Day_by_Month Day_by_Year Unix_Seconds Unix_Days
## [1,] 9435 1995    11       3            1         305    815184000      9435
## [2,] 9465 1995    12       5            1         335    817776000      9465
## [3,] 9496 1996     1       1            1           1    820454400      9496
## [4,] 9527 1996     2       4            1          32    823132800      9527
## [5,] 9556 1996     3       5            1          61    825638400      9556
## [6,] 9587 1996     4       1            1          92    828316800      9587</code></pre>
<p>For a deeper understanding of Unix time and date-time formatting strings such as <code>%Y</code>, <code>%m</code>, <code>%u</code>, etc., please refer to Chapter <a href="r-basics.html#dates-and-times">3.3</a>. Here’s how to convert between Unix time and date format:</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb820-1"><a href="data-structures-in-r.html#cb820-1" tabindex="-1"></a><span class="co"># Unix time conversions</span></span>
<span id="cb820-2"><a href="data-structures-in-r.html#cb820-2" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">index</span>(dxts) <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="fu">as.numeric</span>(<span class="fu">index</span>(dxts))))</span>
<span id="cb820-3"><a href="data-structures-in-r.html#cb820-3" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">index</span>(dxts) <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="fu">as.POSIXct</span>(<span class="fu">.index</span>(dxts))))</span></code></pre></div>
<pre><code>## [1] TRUE
## [1] TRUE</code></pre>
<p>When analyzing time series data, recognizing the periodicity, frequency, and data span is crucial. The <code>xts</code> package offers a set of functions specifically designed for these tasks:</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="data-structures-in-r.html#cb822-1" tabindex="-1"></a><span class="co"># Determine the start and end date of the series</span></span>
<span id="cb822-2"><a href="data-structures-in-r.html#cb822-2" tabindex="-1"></a><span class="fu">start</span>(dxts)</span>
<span id="cb822-3"><a href="data-structures-in-r.html#cb822-3" tabindex="-1"></a><span class="fu">end</span>(dxts)</span></code></pre></div>
<pre><code>## [1] &quot;1995-11-01&quot;
## [1] &quot;1996-04-01&quot;</code></pre>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb824-1"><a href="data-structures-in-r.html#cb824-1" tabindex="-1"></a><span class="co"># Detect the underlying frequency of the data</span></span>
<span id="cb824-2"><a href="data-structures-in-r.html#cb824-2" tabindex="-1"></a><span class="fu">periodicity</span>(dxts)</span></code></pre></div>
<pre><code>## Monthly periodicity from 1995-11-01 to 1996-04-01</code></pre>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb826-1"><a href="data-structures-in-r.html#cb826-1" tabindex="-1"></a><span class="co"># Gauge the time span covered by the data</span></span>
<span id="cb826-2"><a href="data-structures-in-r.html#cb826-2" tabindex="-1"></a><span class="fu">c</span>(<span class="at">y =</span> <span class="fu">nyears</span>(dxts), <span class="at">q =</span> <span class="fu">nquarters</span>(dxts), <span class="at">m =</span> <span class="fu">nmonths</span>(dxts),</span>
<span id="cb826-3"><a href="data-structures-in-r.html#cb826-3" tabindex="-1"></a>  <span class="at">w =</span> <span class="fu">nweeks</span>(dxts), <span class="at">d =</span> <span class="fu">ndays</span>(dxts), <span class="at">H =</span> <span class="fu">nhours</span>(dxts),</span>
<span id="cb826-4"><a href="data-structures-in-r.html#cb826-4" tabindex="-1"></a>  <span class="at">M =</span> <span class="fu">nminutes</span>(dxts), <span class="at">S =</span> <span class="fu">nseconds</span>(dxts))</span></code></pre></div>
<pre><code>## y q m w d H M S 
## 2 3 6 6 6 6 6 6</code></pre>
</div>
<div id="select-and-modify-xts" class="section level3 hasAnchor" number="4.8.3">
<h3><span class="header-section-number">4.8.3</span> Select and Modify<a href="data-structures-in-r.html#select-and-modify-xts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One major strength of <code>xts</code> objects is the intuitive syntax for time subsetting. The following showcases various methods to subset data based on its <code>Date</code> format timestamp:</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="data-structures-in-r.html#cb828-1" tabindex="-1"></a><span class="co"># Examples of time subsetting:</span></span>
<span id="cb828-2"><a href="data-structures-in-r.html#cb828-2" tabindex="-1"></a>dxts[<span class="st">&quot;1995&quot;</span>]                               <span class="co"># All data from the year 1995</span></span></code></pre></div>
<pre><code>##            a b
## 1995-11-01 1 7
## 1995-12-01 2 8</code></pre>
<div class="sourceCode" id="cb830"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb830-1"><a href="data-structures-in-r.html#cb830-1" tabindex="-1"></a>dxts[<span class="st">&quot;1995-12-01&quot;</span>]                         <span class="co"># All data from Dec 1, 1995</span></span>
<span id="cb830-2"><a href="data-structures-in-r.html#cb830-2" tabindex="-1"></a>dxts[<span class="st">&quot;1994/1996&quot;</span>]                          <span class="co"># Data from 1994 through 1996</span></span>
<span id="cb830-3"><a href="data-structures-in-r.html#cb830-3" tabindex="-1"></a>dxts[<span class="st">&quot;1995-02-22/1998-08-03&quot;</span>]              <span class="co"># Data from Feb 22, 1995, to Aug 3, 1998</span></span>
<span id="cb830-4"><a href="data-structures-in-r.html#cb830-4" tabindex="-1"></a>dxts[<span class="st">&quot;1996-01/03&quot;</span>]                         <span class="co"># Data from Jan through Mar 1996</span></span>
<span id="cb830-5"><a href="data-structures-in-r.html#cb830-5" tabindex="-1"></a>dxts[<span class="st">&quot;1995-12/&quot;</span>]                           <span class="co"># Data from Dec 1995 to the end</span></span>
<span id="cb830-6"><a href="data-structures-in-r.html#cb830-6" tabindex="-1"></a>xts<span class="sc">::</span><span class="fu">first</span>(dxts, <span class="dv">3</span>)                        <span class="co"># First three observations</span></span>
<span id="cb830-7"><a href="data-structures-in-r.html#cb830-7" tabindex="-1"></a>xts<span class="sc">::</span><span class="fu">last</span>(dxts, <span class="st">&quot;4 months&quot;</span>)                <span class="co"># Data from the last four months</span></span>
<span id="cb830-8"><a href="data-structures-in-r.html#cb830-8" tabindex="-1"></a>xts<span class="sc">::</span><span class="fu">first</span>(</span>
<span id="cb830-9"><a href="data-structures-in-r.html#cb830-9" tabindex="-1"></a>    xts<span class="sc">::</span><span class="fu">last</span>(dxts, <span class="st">&quot;1 year&quot;</span>), <span class="st">&quot;2 months&quot;</span>) <span class="co"># First 2 months of the last year</span></span></code></pre></div>
<p>The function <code>xts::first()</code> specifically references the <code>first()</code> function from the <code>xts</code> package. This is essential because both <code>dplyr</code> and <code>xts</code> have a function named <code>first()</code>. Since we’ve loaded <code>dplyr</code> earlier, using just <code>first()</code> would call the <code>dplyr::first()</code> version. By prefixing with <code>xts::</code>, we ensure we’re using the function from the <code>xts</code> package.</p>
<p>Because <code>xts</code> objects are built upon matrices, the selection and modification procedures described in Chapter <a href="data-structures-in-r.html#select-and-modify-matrix">4.3.3</a> can also be employed with <code>xts</code> objects:</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb831-1"><a href="data-structures-in-r.html#cb831-1" tabindex="-1"></a><span class="co"># Retrieve the element from the 2nd row and 1st column</span></span>
<span id="cb831-2"><a href="data-structures-in-r.html#cb831-2" tabindex="-1"></a>dxts[<span class="dv">2</span>, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##            a
## 1995-12-01 2</code></pre>
<div class="sourceCode" id="cb833"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb833-1"><a href="data-structures-in-r.html#cb833-1" tabindex="-1"></a><span class="co"># Two approaches to update the aforementioned element to 100</span></span>
<span id="cb833-2"><a href="data-structures-in-r.html#cb833-2" tabindex="-1"></a>dxts[<span class="dv">2</span>, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb833-3"><a href="data-structures-in-r.html#cb833-3" tabindex="-1"></a>dxts[<span class="st">&quot;1995-12-01&quot;</span>, <span class="st">&quot;a&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">100</span></span></code></pre></div>
</div>
<div id="add-labels-xts" class="section level3 hasAnchor" number="4.8.4">
<h3><span class="header-section-number">4.8.4</span> Add Labels<a href="data-structures-in-r.html#add-labels-xts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While column names in <code>xts</code> objects can be modified similarly to matrices, as detailed in Chapter <a href="data-structures-in-r.html#add-labels-matrix">4.3.4</a>, <code>xts</code> objects don’t support row names. This is because the rows inherently have a time index.</p>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="data-structures-in-r.html#cb834-1" tabindex="-1"></a><span class="co"># Fetching column names</span></span>
<span id="cb834-2"><a href="data-structures-in-r.html#cb834-2" tabindex="-1"></a><span class="fu">colnames</span>(dxts)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot;</code></pre>
<div class="sourceCode" id="cb836"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb836-1"><a href="data-structures-in-r.html#cb836-1" tabindex="-1"></a><span class="co"># Altering column names</span></span>
<span id="cb836-2"><a href="data-structures-in-r.html#cb836-2" tabindex="-1"></a><span class="fu">colnames</span>(dxts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb836-3"><a href="data-structures-in-r.html#cb836-3" tabindex="-1"></a><span class="fu">print</span>(dxts)</span></code></pre></div>
<pre><code>##              A  B
## 1995-11-01   1  7
## 1995-12-01 100  8
## 1996-01-01   3  9
## 1996-02-01   4 10
## 1996-03-01   5 11
## 1996-04-01   6 12</code></pre>
</div>
<div id="handle-missing-values-xts" class="section level3 hasAnchor" number="4.8.5">
<h3><span class="header-section-number">4.8.5</span> Handle Missing Values<a href="data-structures-in-r.html#handle-missing-values-xts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Given the time-dependent nature of <code>xts</code> objects, specific strategies can be employed to address missing values in the data. Below are some common functions and their use-cases:</p>
<ul>
<li><code>na.omit()</code>: Removes any rows containing <code>NA</code> values, effectively shrinking the dataset.</li>
<li><code>na.trim()</code>: Eliminates rows with <code>NA</code> values only at the beginning and end of the dataset, preserving the central portion.</li>
<li><code>na.fill()</code>: This function replaces <code>NA</code> entries with a specified value, for example, 666.</li>
<li><code>na.locf()</code>: Stands for “Last Observation Carried Forward.” If an <code>NA</code> value is encountered, this function fills it with the previous non-missing value.</li>
<li><code>na.locf(, fromLast = TRUE)</code>: A variation of the above, but instead of using the previous value, it utilizes the subsequent non-missing value for filling.</li>
<li><code>na.approx()</code>: Replaces <code>NA</code> values with linearly interpolated values, which can be particularly useful when data points are missing at regular intervals.</li>
</ul>
<div class="sourceCode" id="cb838"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb838-1"><a href="data-structures-in-r.html#cb838-1" tabindex="-1"></a><span class="co"># Create an xts object with missing values</span></span>
<span id="cb838-2"><a href="data-structures-in-r.html#cb838-2" tabindex="-1"></a>date_seq <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;2000-11-03&quot;</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb838-3"><a href="data-structures-in-r.html#cb838-3" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">3.5</span>, <span class="cn">NA</span>, <span class="fl">4.5</span>, <span class="cn">NA</span>)</span>
<span id="cb838-4"><a href="data-structures-in-r.html#cb838-4" tabindex="-1"></a>dxts <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> values, <span class="at">order.by =</span> date_seq)</span>
<span id="cb838-5"><a href="data-structures-in-r.html#cb838-5" tabindex="-1"></a></span>
<span id="cb838-6"><a href="data-structures-in-r.html#cb838-6" tabindex="-1"></a><span class="co"># Different methods to handle missing values</span></span>
<span id="cb838-7"><a href="data-structures-in-r.html#cb838-7" tabindex="-1"></a>locf <span class="ot">&lt;-</span> <span class="fu">na.locf</span>(dxts)</span>
<span id="cb838-8"><a href="data-structures-in-r.html#cb838-8" tabindex="-1"></a>locf_fromLast <span class="ot">&lt;-</span> <span class="fu">na.locf</span>(dxts, <span class="at">fromLast =</span> <span class="cn">TRUE</span>)</span>
<span id="cb838-9"><a href="data-structures-in-r.html#cb838-9" tabindex="-1"></a>filled <span class="ot">&lt;-</span> <span class="fu">na.fill</span>(dxts, <span class="at">fill =</span> <span class="dv">666</span>)</span>
<span id="cb838-10"><a href="data-structures-in-r.html#cb838-10" tabindex="-1"></a>interpolated <span class="ot">&lt;-</span> <span class="fu">na.approx</span>(dxts)</span>
<span id="cb838-11"><a href="data-structures-in-r.html#cb838-11" tabindex="-1"></a></span>
<span id="cb838-12"><a href="data-structures-in-r.html#cb838-12" tabindex="-1"></a><span class="co"># Merging for comparison</span></span>
<span id="cb838-13"><a href="data-structures-in-r.html#cb838-13" tabindex="-1"></a><span class="fu">merge</span>(dxts, locf, locf_fromLast, filled, interpolated)</span></code></pre></div>
<pre><code>##            dxts locf locf_fromLast filled interpolated
## 2000-11-03  3.5  3.5           3.5    3.5          3.5
## 2000-11-04   NA  3.5           4.5  666.0          4.0
## 2000-11-05  4.5  4.5           4.5    4.5          4.5
## 2000-11-06   NA  4.5            NA  666.0           NA</code></pre>
</div>
<div id="combine-xts-objects" class="section level3 hasAnchor" number="4.8.6">
<h3><span class="header-section-number">4.8.6</span> Combine xts Objects<a href="data-structures-in-r.html#combine-xts-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the realm of time series analysis using R, combining multiple datasets becomes a common requirement. With <code>xts</code> objects, merging data according to the time index is elegantly handled by the <code>merge()</code> function. Notably, when you apply the <code>merge()</code> function to <code>xts</code> objects, R smartly invokes the <code>merge.xts()</code> function. This specialized function considers the chronological order of time indices and merges the data accordingly, eliminating the need for an explicit <code>by</code> argument, which one might use when dealing with matrices.</p>
<p>Here’s a simple demonstration:</p>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="data-structures-in-r.html#cb840-1" tabindex="-1"></a><span class="co"># Sample xts objects with different time indices</span></span>
<span id="cb840-2"><a href="data-structures-in-r.html#cb840-2" tabindex="-1"></a>xts_a <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="cb840-3"><a href="data-structures-in-r.html#cb840-3" tabindex="-1"></a>             <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-01-01&quot;</span>, <span class="st">&quot;2022-01-02&quot;</span>, <span class="st">&quot;2022-01-04&quot;</span>)))</span>
<span id="cb840-4"><a href="data-structures-in-r.html#cb840-4" tabindex="-1"></a>xts_b <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, </span>
<span id="cb840-5"><a href="data-structures-in-r.html#cb840-5" tabindex="-1"></a>             <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-01-01&quot;</span>, <span class="st">&quot;2022-01-03&quot;</span>, <span class="st">&quot;2022-01-04&quot;</span>)))</span>
<span id="cb840-6"><a href="data-structures-in-r.html#cb840-6" tabindex="-1"></a></span>
<span id="cb840-7"><a href="data-structures-in-r.html#cb840-7" tabindex="-1"></a><span class="co"># Merging the xts objects</span></span>
<span id="cb840-8"><a href="data-structures-in-r.html#cb840-8" tabindex="-1"></a><span class="fu">merge</span>(xts_a, xts_b)</span></code></pre></div>
<pre><code>##            xts_a xts_b
## 2022-01-01     1     4
## 2022-01-02     2    NA
## 2022-01-03    NA     5
## 2022-01-04     3     6</code></pre>
<p>For situations where a variable amount of <code>xts</code> objects need to be combined, the <code>Reduce()</code> function offers a flexible solution:</p>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="data-structures-in-r.html#cb842-1" tabindex="-1"></a><span class="co"># Create an additional xts object with slightly different time indices</span></span>
<span id="cb842-2"><a href="data-structures-in-r.html#cb842-2" tabindex="-1"></a>xts_c <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="st">&#39;2022-01-04&#39;</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb842-3"><a href="data-structures-in-r.html#cb842-3" tabindex="-1"></a></span>
<span id="cb842-4"><a href="data-structures-in-r.html#cb842-4" tabindex="-1"></a><span class="co"># Use Reduce with merge function to combine multiple xts objects</span></span>
<span id="cb842-5"><a href="data-structures-in-r.html#cb842-5" tabindex="-1"></a><span class="fu">Reduce</span>(<span class="at">f =</span> merge, <span class="at">x =</span> <span class="fu">list</span>(xts_a, xts_b, xts_c))</span></code></pre></div>
<pre><code>##            init x..i.. x..i...1
## 2022-01-01    1      4       NA
## 2022-01-02    2     NA       NA
## 2022-01-03   NA      5       NA
## 2022-01-04    3      6        7
## 2022-01-05   NA     NA        8
## 2022-01-06   NA     NA        9</code></pre>
<p>To combine <code>xts</code> objects in a manner analogous to <code>rbind()</code> with matrices, you’d append one time series dataset after another. This approach is especially handy when consecutively adding datasets—for instance, appending data for 2023 after 2022:</p>
<div class="sourceCode" id="cb844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb844-1"><a href="data-structures-in-r.html#cb844-1" tabindex="-1"></a><span class="co"># Construct xts data for 2022 and 2023</span></span>
<span id="cb844-2"><a href="data-structures-in-r.html#cb844-2" tabindex="-1"></a>xts_2022 <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="st">&#39;2022-01-01&#39;</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb844-3"><a href="data-structures-in-r.html#cb844-3" tabindex="-1"></a>xts_2023 <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="st">&#39;2023-01-01&#39;</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb844-4"><a href="data-structures-in-r.html#cb844-4" tabindex="-1"></a></span>
<span id="cb844-5"><a href="data-structures-in-r.html#cb844-5" tabindex="-1"></a><span class="co"># Combine the two xts objects</span></span>
<span id="cb844-6"><a href="data-structures-in-r.html#cb844-6" tabindex="-1"></a>combined_xts <span class="ot">&lt;-</span> <span class="fu">rbind</span>(xts_2022, xts_2023)</span>
<span id="cb844-7"><a href="data-structures-in-r.html#cb844-7" tabindex="-1"></a><span class="fu">print</span>(combined_xts)</span></code></pre></div>
<pre><code>##            [,1]
## 2022-01-01    1
## 2022-01-02    2
## 2022-01-03    3
## 2023-01-01    4
## 2023-01-02    5
## 2023-01-03    6</code></pre>
<p>However, a word of caution with <code>rbind()</code>: Ensure the time indices don’t overlap. Unlike <code>merge()</code>, which handles overlaps gracefully, <code>rbind()</code> can result in duplicated entries if there’s an overlap.</p>
<div id="align-time-indices" class="section level4 unnumbered hasAnchor">
<h4>Align Time Indices<a href="data-structures-in-r.html#align-time-indices" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes, the time indices of two <code>xts</code> objects don’t match. For example, one dataset could have dates representing the start of a month, while another dataset might use the month’s end. In such situations, alignment functions such as <code>as.yearmon()</code> and <code>as.yearqtr()</code> from the <code>zoo</code> package can be invaluable. These functions effectively transform dates, making them represent a generalized month or quarter, regardless of the specific day:</p>
<div class="sourceCode" id="cb846"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb846-1"><a href="data-structures-in-r.html#cb846-1" tabindex="-1"></a><span class="co"># Convert daily dates to generalized monthly dates</span></span>
<span id="cb846-2"><a href="data-structures-in-r.html#cb846-2" tabindex="-1"></a>xts_start <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-01-01&quot;</span>, <span class="st">&quot;2022-02-01&quot;</span>, <span class="st">&quot;2022-03-01&quot;</span>)))</span>
<span id="cb846-3"><a href="data-structures-in-r.html#cb846-3" tabindex="-1"></a>xts_end <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-01-31&quot;</span>, <span class="st">&quot;2022-02-28&quot;</span>, <span class="st">&quot;2022-03-31&quot;</span>)))</span>
<span id="cb846-4"><a href="data-structures-in-r.html#cb846-4" tabindex="-1"></a></span>
<span id="cb846-5"><a href="data-structures-in-r.html#cb846-5" tabindex="-1"></a><span class="co"># Merge unaligned datasets</span></span>
<span id="cb846-6"><a href="data-structures-in-r.html#cb846-6" tabindex="-1"></a><span class="fu">merge</span>(xts_start, xts_end)</span></code></pre></div>
<pre><code>##            xts_start xts_end
## 2022-01-01         1      NA
## 2022-01-31        NA       4
## 2022-02-01         2      NA
## 2022-02-28        NA       5
## 2022-03-01         3      NA
## 2022-03-31        NA       6</code></pre>
<div class="sourceCode" id="cb848"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb848-1"><a href="data-structures-in-r.html#cb848-1" tabindex="-1"></a><span class="co"># Aligned time indices</span></span>
<span id="cb848-2"><a href="data-structures-in-r.html#cb848-2" tabindex="-1"></a><span class="fu">index</span>(xts_start) <span class="ot">&lt;-</span> <span class="fu">as.yearmon</span>(<span class="fu">index</span>(xts_start))</span>
<span id="cb848-3"><a href="data-structures-in-r.html#cb848-3" tabindex="-1"></a><span class="fu">index</span>(xts_end) <span class="ot">&lt;-</span> <span class="fu">as.yearmon</span>(<span class="fu">index</span>(xts_end))</span>
<span id="cb848-4"><a href="data-structures-in-r.html#cb848-4" tabindex="-1"></a></span>
<span id="cb848-5"><a href="data-structures-in-r.html#cb848-5" tabindex="-1"></a><span class="co"># Merge the aligned datasets</span></span>
<span id="cb848-6"><a href="data-structures-in-r.html#cb848-6" tabindex="-1"></a><span class="fu">merge</span>(xts_start, xts_end)</span></code></pre></div>
<pre><code>##          xts_start xts_end
## Jan 2022         1       4
## Feb 2022         2       5
## Mar 2022         3       6</code></pre>
<p>Such alignment is instrumental in ensuring datasets are combined correctly and without introducing unintended <code>NA</code> values.</p>
<p>In conclusion, the <code>xts</code> package, with its suite of functions and compatibility with other packages like <code>zoo</code>, offers comprehensive tools for efficiently combining and managing time series data in R.</p>
</div>
</div>
<div id="time-series-transformations" class="section level3 hasAnchor" number="4.8.7">
<h3><span class="header-section-number">4.8.7</span> Time Series Transformations<a href="data-structures-in-r.html#time-series-transformations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the realm of time series analysis, certain operations are quintessential for processing and deducing meaningful insights. The <code>xts</code> package provides a rich set of tools to facilitate these transformations, such as lagging time series, computing differences, and calculating returns.</p>
<div id="lag-time-series" class="section level4 unnumbered hasAnchor">
<h4>Lag Time Series<a href="data-structures-in-r.html#lag-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Lagging, in time series terminology, refers to the shifting of data by a specified number of periods. This is useful for comparing values across different points in time.</p>
<p>The <code>lag()</code> function shifts the data by <code>k</code> periods. However, it’s essential to note that <code>lag()</code> is a <strong>wrapper function</strong>: its behavior adapts based on the object type. For <code>xts</code> objects, <code>lag()</code> internally calls <code>lag.xts()</code>. Additionally, various other packages such as <code>dplyr</code> also include a function called <code>lag()</code>, potentially leading to confusion. Therefore, for <code>xts</code> objects, the direct use of <code>lag.xts()</code> is advised.</p>
<p>To elucidate, here’s a sample <code>xts</code> object:</p>
<div class="sourceCode" id="cb850"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb850-1"><a href="data-structures-in-r.html#cb850-1" tabindex="-1"></a><span class="co"># Define an xts object</span></span>
<span id="cb850-2"><a href="data-structures-in-r.html#cb850-2" tabindex="-1"></a>dxts <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">102</span>, <span class="dv">103</span>, <span class="dv">101</span>, <span class="dv">108</span>), <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2022-01-01&quot;</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">4</span>)</span></code></pre></div>
<p>Notice that when we introduce a one-period lag to the data, the initial value <code>100</code> from the original series aligns with the subsequent date <code>2022-01-02</code> in the lagged series. This indicates that, as of <code>2022-01-02</code>, the value <code>100</code> is a lagged observation as it pertains to the previous period:</p>
<div class="sourceCode" id="cb851"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb851-1"><a href="data-structures-in-r.html#cb851-1" tabindex="-1"></a><span class="co"># Implement a single-period lag</span></span>
<span id="cb851-2"><a href="data-structures-in-r.html#cb851-2" tabindex="-1"></a>lagged_data <span class="ot">&lt;-</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb851-3"><a href="data-structures-in-r.html#cb851-3" tabindex="-1"></a><span class="fu">print</span>(lagged_data)</span></code></pre></div>
<pre><code>##            [,1]
## 2022-01-01   NA
## 2022-01-02  100
## 2022-01-03  102
## 2022-01-04  103
## 2022-01-05  101</code></pre>
<div class="sourceCode" id="cb853"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb853-1"><a href="data-structures-in-r.html#cb853-1" tabindex="-1"></a><span class="co"># Comparison: original vs. lagged data</span></span>
<span id="cb853-2"><a href="data-structures-in-r.html#cb853-2" tabindex="-1"></a><span class="fu">merge</span>(dxts, lagged_data)</span></code></pre></div>
<pre><code>##            dxts lagged_data
## 2022-01-01  100          NA
## 2022-01-02  102         100
## 2022-01-03  103         102
## 2022-01-04  101         103
## 2022-01-05  108         101</code></pre>
<p>If the intent is to lag the data by two periods, the operation would be:</p>
<div class="sourceCode" id="cb855"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb855-1"><a href="data-structures-in-r.html#cb855-1" tabindex="-1"></a><span class="co"># Shift data two periods forward</span></span>
<span id="cb855-2"><a href="data-structures-in-r.html#cb855-2" tabindex="-1"></a>lagged_data_two <span class="ot">&lt;-</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">2</span>)</span>
<span id="cb855-3"><a href="data-structures-in-r.html#cb855-3" tabindex="-1"></a><span class="fu">print</span>(lagged_data_two)</span></code></pre></div>
<pre><code>##            [,1]
## 2022-01-01   NA
## 2022-01-02   NA
## 2022-01-03  100
## 2022-01-04  102
## 2022-01-05  103</code></pre>
<div class="sourceCode" id="cb857"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb857-1"><a href="data-structures-in-r.html#cb857-1" tabindex="-1"></a><span class="co"># Comparison: original and doubly-lagged data</span></span>
<span id="cb857-2"><a href="data-structures-in-r.html#cb857-2" tabindex="-1"></a><span class="fu">merge</span>(dxts, lagged_data_two)</span></code></pre></div>
<pre><code>##            dxts lagged_data_two
## 2022-01-01  100              NA
## 2022-01-02  102              NA
## 2022-01-03  103             100
## 2022-01-04  101             102
## 2022-01-05  108             103</code></pre>
<p>Should you wish to remove the initial <code>NA</code> values, the command transforms slightly:</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb859-1"><a href="data-structures-in-r.html#cb859-1" tabindex="-1"></a><span class="co"># Forward shift by two periods, excluding initial NAs</span></span>
<span id="cb859-2"><a href="data-structures-in-r.html#cb859-2" tabindex="-1"></a>lagged_trimmed <span class="ot">&lt;-</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">2</span>, <span class="at">na.pad =</span> <span class="cn">FALSE</span>)</span>
<span id="cb859-3"><a href="data-structures-in-r.html#cb859-3" tabindex="-1"></a><span class="fu">print</span>(lagged_trimmed)</span></code></pre></div>
<pre><code>##            [,1]
## 2022-01-03  100
## 2022-01-04  102
## 2022-01-05  103</code></pre>
<p>Intriguingly, the <code>k</code> parameter is flexible enough to process negative values (which leads the series) or even vector inputs. The latter results in a matrix output where each column stands for a different lag duration:</p>
<div class="sourceCode" id="cb861"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb861-1"><a href="data-structures-in-r.html#cb861-1" tabindex="-1"></a><span class="co"># Various lag periods applied to data</span></span>
<span id="cb861-2"><a href="data-structures-in-r.html#cb861-2" tabindex="-1"></a>various_lags <span class="ot">&lt;-</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="sc">-</span><span class="dv">2</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb861-3"><a href="data-structures-in-r.html#cb861-3" tabindex="-1"></a><span class="fu">print</span>(various_lags)</span></code></pre></div>
<pre><code>##            lag.2 lag.1 lag0 lag1 lag2
## 2022-01-01   103   102  100   NA   NA
## 2022-01-02   101   103  102  100   NA
## 2022-01-03   108   101  103  102  100
## 2022-01-04    NA   108  101  103  102
## 2022-01-05    NA    NA  108  101  103</code></pre>
<p>In the realm of time series analysis, the ability to lag proves indispensable. For instance, discerning the correlation between the present and lagged values can be insightful in gauging the persistence or autocorrelation of a time series:</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb863-1"><a href="data-structures-in-r.html#cb863-1" tabindex="-1"></a><span class="co"># Compute time series persistence</span></span>
<span id="cb863-2"><a href="data-structures-in-r.html#cb863-2" tabindex="-1"></a><span class="fu">cor</span>(<span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>), <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>)[<span class="dv">1</span>,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] -0.3321819</code></pre>
</div>
<div id="convert-levels-to-changes" class="section level4 unnumbered hasAnchor">
<h4>Convert Levels to Changes<a href="data-structures-in-r.html#convert-levels-to-changes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A critical step in the analysis of economic and financial time series is the conversion of time series levels into changes or differences. For instance, discerning a change in the unemployment rate can offer insights about the economy’s trajectory.</p>
<p>To undertake this, the <code>diff()</code> function computes these differences. But, as with the lag function, it’s safer to use <code>diff.xts()</code>.</p>
<p>Comparing the outputs of <code>diff.xts()</code> and <code>lag.xts()</code>:</p>
<div class="sourceCode" id="cb865"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb865-1"><a href="data-structures-in-r.html#cb865-1" tabindex="-1"></a><span class="co"># Compute first difference with both diff.xts() and lag.xts()</span></span>
<span id="cb865-2"><a href="data-structures-in-r.html#cb865-2" tabindex="-1"></a>first_diff <span class="ot">&lt;-</span> <span class="fu">diff.xts</span>(dxts)</span>
<span id="cb865-3"><a href="data-structures-in-r.html#cb865-3" tabindex="-1"></a>first_diff_alt <span class="ot">&lt;-</span> dxts <span class="sc">-</span> <span class="fu">lag.xts</span>(dxts)</span>
<span id="cb865-4"><a href="data-structures-in-r.html#cb865-4" tabindex="-1"></a></span>
<span id="cb865-5"><a href="data-structures-in-r.html#cb865-5" tabindex="-1"></a><span class="co"># Comparison: original data vs. computed differences</span></span>
<span id="cb865-6"><a href="data-structures-in-r.html#cb865-6" tabindex="-1"></a><span class="fu">merge</span>(dxts, first_diff, first_diff_alt)</span></code></pre></div>
<pre><code>##            dxts first_diff first_diff_alt
## 2022-01-01  100         NA             NA
## 2022-01-02  102          2              2
## 2022-01-03  103          1              1
## 2022-01-04  101         -2             -2
## 2022-01-05  108          7              7</code></pre>
<p>To compute differences relative to two periods prior:</p>
<div class="sourceCode" id="cb867"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb867-1"><a href="data-structures-in-r.html#cb867-1" tabindex="-1"></a><span class="co"># Derive difference considering two preceding periods</span></span>
<span id="cb867-2"><a href="data-structures-in-r.html#cb867-2" tabindex="-1"></a>first_diff_two <span class="ot">&lt;-</span> <span class="fu">diff.xts</span>(dxts, <span class="at">lag =</span> <span class="dv">2</span>)</span>
<span id="cb867-3"><a href="data-structures-in-r.html#cb867-3" tabindex="-1"></a>first_diff_two_alt <span class="ot">&lt;-</span> dxts <span class="sc">-</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">2</span>)</span>
<span id="cb867-4"><a href="data-structures-in-r.html#cb867-4" tabindex="-1"></a></span>
<span id="cb867-5"><a href="data-structures-in-r.html#cb867-5" tabindex="-1"></a><span class="co"># Comparison: original data with two-period differences</span></span>
<span id="cb867-6"><a href="data-structures-in-r.html#cb867-6" tabindex="-1"></a><span class="fu">merge</span>(dxts, first_diff_two, first_diff_two_alt)</span></code></pre></div>
<pre><code>##            dxts first_diff_two first_diff_two_alt
## 2022-01-01  100             NA                 NA
## 2022-01-02  102             NA                 NA
## 2022-01-03  103              3                  3
## 2022-01-04  101             -1                 -1
## 2022-01-05  108              5                  5</code></pre>
<p>The second difference is the difference of the first difference:</p>
<div class="sourceCode" id="cb869"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb869-1"><a href="data-structures-in-r.html#cb869-1" tabindex="-1"></a><span class="co"># Compute the second difference</span></span>
<span id="cb869-2"><a href="data-structures-in-r.html#cb869-2" tabindex="-1"></a>second_diff <span class="ot">&lt;-</span> <span class="fu">diff.xts</span>(dxts, <span class="at">differences =</span> <span class="dv">2</span>)</span>
<span id="cb869-3"><a href="data-structures-in-r.html#cb869-3" tabindex="-1"></a>second_diff_alt <span class="ot">&lt;-</span> (first_diff <span class="sc">-</span> <span class="fu">lag.xts</span>(first_diff, <span class="at">k =</span> <span class="dv">1</span>))</span>
<span id="cb869-4"><a href="data-structures-in-r.html#cb869-4" tabindex="-1"></a></span>
<span id="cb869-5"><a href="data-structures-in-r.html#cb869-5" tabindex="-1"></a><span class="co"># Comparison: original, first-differenced, and second-differenced data</span></span>
<span id="cb869-6"><a href="data-structures-in-r.html#cb869-6" tabindex="-1"></a><span class="fu">merge</span>(dxts, first_diff, second_diff, second_diff_alt)</span></code></pre></div>
<pre><code>##            dxts first_diff second_diff second_diff_alt
## 2022-01-01  100         NA          NA              NA
## 2022-01-02  102          2          NA              NA
## 2022-01-03  103          1          -1              -1
## 2022-01-04  101         -2          -3              -3
## 2022-01-05  108          7           9               9</code></pre>
<p>For those analyzing financial and economic time series, growth rates offer a lens into relative changes over time. For instance, GDP growth rates provide insights into economic progression:</p>
<div class="sourceCode" id="cb871"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb871-1"><a href="data-structures-in-r.html#cb871-1" tabindex="-1"></a><span class="co"># Calculate growth rates in percent</span></span>
<span id="cb871-2"><a href="data-structures-in-r.html#cb871-2" tabindex="-1"></a>growth_rate <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fu">diff.xts</span>(dxts) <span class="sc">/</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb871-3"><a href="data-structures-in-r.html#cb871-3" tabindex="-1"></a>growth_rate_alt <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">*</span> (dxts <span class="sc">-</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">1</span>)) <span class="sc">/</span> <span class="fu">lag.xts</span>(dxts, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb871-4"><a href="data-structures-in-r.html#cb871-4" tabindex="-1"></a></span>
<span id="cb871-5"><a href="data-structures-in-r.html#cb871-5" tabindex="-1"></a><span class="co"># Comparison: original data and computed growth rates</span></span>
<span id="cb871-6"><a href="data-structures-in-r.html#cb871-6" tabindex="-1"></a><span class="fu">merge</span>(dxts, growth_rate, growth_rate_alt)</span></code></pre></div>
<pre><code>##            dxts growth_rate growth_rate_alt
## 2022-01-01  100          NA              NA
## 2022-01-02  102   2.0000000       2.0000000
## 2022-01-03  103   0.9803922       0.9803922
## 2022-01-04  101  -1.9417476      -1.9417476
## 2022-01-05  108   6.9306931       6.9306931</code></pre>
<p>Additionally, log differences are pivotal for financial and economic series. They approximate growth rates when they hover around smaller values (e.g., within <span class="math inline">\(\pm 20\%\)</span>):</p>
<div class="sourceCode" id="cb873"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb873-1"><a href="data-structures-in-r.html#cb873-1" tabindex="-1"></a><span class="co"># Derive log differences in percent</span></span>
<span id="cb873-2"><a href="data-structures-in-r.html#cb873-2" tabindex="-1"></a>log_diff <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fu">diff.xts</span>(dxts, <span class="at">log =</span> <span class="cn">TRUE</span>)</span>
<span id="cb873-3"><a href="data-structures-in-r.html#cb873-3" tabindex="-1"></a>log_diff_alt <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">*</span> (<span class="fu">log</span>(dxts) <span class="sc">-</span> <span class="fu">lag.xts</span>(<span class="fu">log</span>(dxts), <span class="at">k =</span> <span class="dv">1</span>))</span>
<span id="cb873-4"><a href="data-structures-in-r.html#cb873-4" tabindex="-1"></a></span>
<span id="cb873-5"><a href="data-structures-in-r.html#cb873-5" tabindex="-1"></a><span class="co"># Comparison: original data, growth rates, and log differences</span></span>
<span id="cb873-6"><a href="data-structures-in-r.html#cb873-6" tabindex="-1"></a><span class="fu">merge</span>(dxts, growth_rate, log_diff, log_diff_alt)</span></code></pre></div>
<pre><code>##            dxts growth_rate   log_diff log_diff_alt
## 2022-01-01  100          NA         NA           NA
## 2022-01-02  102   2.0000000  1.9802627    1.9802627
## 2022-01-03  103   0.9803922  0.9756175    0.9756175
## 2022-01-04  101  -1.9417476 -1.9608471   -1.9608471
## 2022-01-05  108   6.9306931  6.7010710    6.7010710</code></pre>
</div>
<div id="make-time-series-regular" class="section level4 unnumbered hasAnchor">
<h4>Make Time Series Regular<a href="data-structures-in-r.html#make-time-series-regular" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In time series data, especially in financial datasets, you might find datasets with irregular intervals between observations. For example, daily yield data might exclude weekends and public holidays. Such irregularities can complicate analyses that assume regular intervals. When using functions like <code>lag.xts()</code> and <code>diff.xts()</code> that relate the current with the previous period, the span of a single “lag” can vary, sometimes representing a day or even an entire week. Consequently, interpretations of differences or growth rates can be skewed, as they might be influenced by these varying intervals.</p>
<p>Example of an irregular monthly time series:</p>
<div class="sourceCode" id="cb875"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb875-1"><a href="data-structures-in-r.html#cb875-1" tabindex="-1"></a><span class="co"># Define an irregular monthly time series</span></span>
<span id="cb875-2"><a href="data-structures-in-r.html#cb875-2" tabindex="-1"></a>xts_irregular <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">order.by =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-01-01&quot;</span>, <span class="st">&quot;2022-02-01&quot;</span>, </span>
<span id="cb875-3"><a href="data-structures-in-r.html#cb875-3" tabindex="-1"></a>                                                   <span class="st">&quot;2022-05-01&quot;</span>, <span class="st">&quot;2022-07-01&quot;</span>)))</span>
<span id="cb875-4"><a href="data-structures-in-r.html#cb875-4" tabindex="-1"></a><span class="fu">print</span>(xts_irregular)</span></code></pre></div>
<pre><code>##            [,1]
## 2022-01-01    1
## 2022-02-01    2
## 2022-05-01    3
## 2022-07-01    4</code></pre>
<p>To standardize these intervals, a common approach in the <code>xts</code> universe involves merging the irregular data with an <code>xts</code> object that has a regular frequency. Here’s how you can achieve this:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Creating a Regular Time Index</strong>: Firstly, create a sequence of dates with regular intervals, covering the entire span of your irregular dataset.</p>
<div class="sourceCode" id="cb877"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb877-1"><a href="data-structures-in-r.html#cb877-1" tabindex="-1"></a><span class="co"># Creating a daily sequence from the start to the end of your irregular data</span></span>
<span id="cb877-2"><a href="data-structures-in-r.html#cb877-2" tabindex="-1"></a>regular_time <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">start</span>(xts_irregular), </span>
<span id="cb877-3"><a href="data-structures-in-r.html#cb877-3" tabindex="-1"></a>                    <span class="at">to =</span> <span class="fu">end</span>(xts_irregular), </span>
<span id="cb877-4"><a href="data-structures-in-r.html#cb877-4" tabindex="-1"></a>                    <span class="at">by =</span> <span class="st">&quot;month&quot;</span>)</span>
<span id="cb877-5"><a href="data-structures-in-r.html#cb877-5" tabindex="-1"></a><span class="fu">print</span>(regular_time)</span></code></pre></div>
<pre><code>## [1] &quot;2022-01-01&quot; &quot;2022-02-01&quot; &quot;2022-03-01&quot; &quot;2022-04-01&quot; &quot;2022-05-01&quot;
## [6] &quot;2022-06-01&quot; &quot;2022-07-01&quot;</code></pre></li>
<li><p><strong>Construct an Empty xts Object with Regular Frequency</strong>: Using the regularly spaced time index, initialize an empty <code>xts</code> object.</p>
<div class="sourceCode" id="cb879"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb879-1"><a href="data-structures-in-r.html#cb879-1" tabindex="-1"></a>empty_xts <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">order.by =</span> regular_time)</span></code></pre></div></li>
<li><p><strong>Merge the Irregular Data with the Empty xts Object</strong>: This step fills the gaps in your irregular dataset with <code>NA</code> values, corresponding to the dates in the regular <code>xts</code> object where data isn’t available.</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="data-structures-in-r.html#cb880-1" tabindex="-1"></a>xts_regular <span class="ot">&lt;-</span> <span class="fu">merge</span>(xts_irregular, empty_xts)</span>
<span id="cb880-2"><a href="data-structures-in-r.html#cb880-2" tabindex="-1"></a><span class="fu">print</span>(xts_regular)</span></code></pre></div>
<pre><code>##            xts_irregular
## 2022-01-01             1
## 2022-02-01             2
## 2022-03-01            NA
## 2022-04-01            NA
## 2022-05-01             3
## 2022-06-01            NA
## 2022-07-01             4</code></pre></li>
<li><p><strong>Dealing with Missing Values</strong>: When needed, address <code>NA</code> values using methods like <code>na.locf()</code>, <code>na.fill()</code>, or <code>na.approx()</code>, as detailed in Chapter <a href="data-structures-in-r.html#handle-missing-values-xts">4.8.5</a>.</p>
<div class="sourceCode" id="cb882"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb882-1"><a href="data-structures-in-r.html#cb882-1" tabindex="-1"></a>xts_regular <span class="ot">&lt;-</span> <span class="fu">na.approx</span>(xts_regular)</span>
<span id="cb882-2"><a href="data-structures-in-r.html#cb882-2" tabindex="-1"></a><span class="fu">print</span>(xts_regular)</span></code></pre></div>
<pre><code>##            xts_irregular
## 2022-01-01      1.000000
## 2022-02-01      2.000000
## 2022-03-01      2.314607
## 2022-04-01      2.662921
## 2022-05-01      3.000000
## 2022-06-01      3.508197
## 2022-07-01      4.000000</code></pre></li>
</ol>
<p>By utilizing these transformations in <code>xts</code>, you can refine your time series data into a format that’s more amenable for subsequent analyses.</p>
</div>
</div>
<div id="apply-family-xts" class="section level3 hasAnchor" number="4.8.8">
<h3><span class="header-section-number">4.8.8</span> Apply Family<a href="data-structures-in-r.html#apply-family-xts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, the apply family of functions offers a mechanism to perform repeated operations across data structures without the necessity for explicit loops. This becomes especially beneficial for time series data in <code>xts</code> objects when the task is to aggregate across temporal intervals, such as converting quarterly GDP data to an annual frequency.</p>
<div id="apply-by-columns-and-rows-xts" class="section level4 unnumbered hasAnchor">
<h4>Apply by Columns and Rows<a href="data-structures-in-r.html#apply-by-columns-and-rows-xts" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Since an <code>xts</code> object is a matrix with an attached time index, the apply functions highlighted in Chapter <a href="data-structures-in-r.html#apply-family-matrix">4.3.9</a> for matrices also work with <code>xts</code> objects. Specifically, the <code>apply()</code> function allows for the application of a function across entire columns or rows of an <code>xts</code> object. Additionally, more efficient alternatives like <code>rowSums()</code>, <code>colSums()</code>, <code>colMeans()</code>, and <code>rowMeans()</code> are available, and the <code>sweep()</code> function proves useful for time series normalization to specific mean and variance values.</p>
</div>
<div id="apply-by-groups-xts" class="section level4 unnumbered hasAnchor">
<h4>Apply by Groups<a href="data-structures-in-r.html#apply-by-groups-xts" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As elaborated in Chapter @ref(apply-family-data.frame), the <strong>split-apply-combine strategy</strong> segments the rows of a data frame into distinct groups, applies functions like averages or minimum values per group, and then combines the summarized groups to a single data object. When engaging with an <code>xts</code> object, remember that every row refers to a time period. Consequently, a collection of rows denotes a <strong>time interval</strong>. Thus, using the split-apply-combine strategy on an <code>xts</code> object, for instance, to calculate the monthly mean within a year, effectively aggregates the time series data from a more granular frequency (like monthly) to a coarser one (like annually).</p>
<p>Whilte the split-apply-combine strategy for data frames revolves around the sequence: <code>split()</code> + <code>lapply()</code> + <code>do.call()</code> + <code>c()</code>, aggregating time-series data with <code>xts</code> objects extends the sequence as follows: <code>endpoints()</code> + <code>cut()</code> + <code>split()</code> + <code>lapply()</code> + <code>do.call()</code> + <code>rbind()</code>. The goal is to break the time series into relevant intervals using <code>endpoints()</code> + <code>cut()</code> + <code>split()</code>, apply a desired function to each interval using <code>lapply()</code>, and then combine the results into a single <code>xts</code> object using <code>do.call()</code> + <code>rbind()</code>. Here’s how to aggregate the provided monthly time series to a yearly frequency by computing the mean by year:</p>
<div class="sourceCode" id="cb884"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb884-1"><a href="data-structures-in-r.html#cb884-1" tabindex="-1"></a><span class="co"># Sample monthly time series</span></span>
<span id="cb884-2"><a href="data-structures-in-r.html#cb884-2" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2022-10-01&quot;</span>), <span class="at">length.out =</span> <span class="dv">8</span>, <span class="at">by =</span> <span class="st">&quot;1 month&quot;</span>)</span>
<span id="cb884-3"><a href="data-structures-in-r.html#cb884-3" tabindex="-1"></a>sample_xts <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="fu">c</span>(<span class="dv">100</span> <span class="sc">+</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>), <span class="at">order.by =</span> dates)</span>
<span id="cb884-4"><a href="data-structures-in-r.html#cb884-4" tabindex="-1"></a><span class="fu">print</span>(sample_xts)</span></code></pre></div>
<pre><code>##            [,1]
## 2022-10-01  101
## 2022-11-01  102
## 2022-12-01  103
## 2023-01-01  104
## 2023-02-01  105
## 2023-03-01  106
## 2023-04-01  107
## 2023-05-01   NA</code></pre>
<ol style="list-style-type: decimal">
<li><p><strong><code>endpoints()</code></strong>: This function within the <code>xts</code> package determines where in the data set the splits should be made.</p>
<div class="sourceCode" id="cb886"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb886-1"><a href="data-structures-in-r.html#cb886-1" tabindex="-1"></a><span class="co"># Identify endpoints for each year</span></span>
<span id="cb886-2"><a href="data-structures-in-r.html#cb886-2" tabindex="-1"></a>end_points <span class="ot">&lt;-</span> <span class="fu">endpoints</span>(<span class="at">x =</span> sample_xts, <span class="at">on =</span> <span class="st">&quot;years&quot;</span>, <span class="at">k =</span> <span class="dv">1</span>)</span>
<span id="cb886-3"><a href="data-structures-in-r.html#cb886-3" tabindex="-1"></a><span class="fu">print</span>(end_points)</span></code></pre></div>
<pre><code>## [1] 0 3 8</code></pre>
<p>Here’s a breakdown of the <code>endpoints()</code> function inputs:</p>
<ul>
<li><code>x</code>: This is the <code>xts</code> object you want to find the endpoints for. In our example, it’s the <code>sample_xts</code> dataset.</li>
<li><code>on</code>: Specifies the time unit to identify as endpoints. Options can be “seconds”, “minutes”, “hours”, “days”, “weeks”, “months”, “quarters”, or “years”. For our purpose, we’ve used “years”.</li>
<li><code>k</code>: This sets the frequency for marking endpoints. A <code>k</code> value of 1 combined with <code>on = "years"</code> will set endpoints at the conclusion of each year. However, if <code>k</code> were 2, endpoints would be identified every two years.</li>
</ul>
<p>In our sample, the endpoints 0, 3, 8 indicate that observations at positions 0, 3, 8 are the terminal points for their respective years.</p></li>
<li><p><strong><code>cut()</code></strong>: After pinpointing the endpoints, we need to segment the time index of the <code>xts</code> object based on these intervals. The <code>cut()</code> function facilitates this segmentation:</p>
<div class="sourceCode" id="cb888"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb888-1"><a href="data-structures-in-r.html#cb888-1" tabindex="-1"></a><span class="co"># Segment the time index into intervals</span></span>
<span id="cb888-2"><a href="data-structures-in-r.html#cb888-2" tabindex="-1"></a>cut_time <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="at">x =</span> <span class="fu">seq_along</span>(sample_xts), </span>
<span id="cb888-3"><a href="data-structures-in-r.html#cb888-3" tabindex="-1"></a>                <span class="at">breaks =</span> end_points,</span>
<span id="cb888-4"><a href="data-structures-in-r.html#cb888-4" tabindex="-1"></a>                <span class="at">labels =</span> <span class="fu">index</span>(sample_xts)[end_points])</span>
<span id="cb888-5"><a href="data-structures-in-r.html#cb888-5" tabindex="-1"></a><span class="fu">print</span>(cut_time)</span></code></pre></div>
<pre><code>## [1] 2022-12-01 2022-12-01 2022-12-01 2023-05-01 2023-05-01 2023-05-01 2023-05-01
## [8] 2023-05-01
## Levels: 2022-12-01 2023-05-01</code></pre>
<p>The function inputs are elaborated below:</p>
<ul>
<li><code>x</code>: This refers to the sequence of numbers representing the row positions of the <code>xts</code> object. In essence, <code>seq_along(sample_xts)</code> generates a sequence from 1 to the length of <code>sample_xts</code>, corresponding to each row of our time series data.</li>
<li><code>breaks</code>: This parameter determines where to segment the data. Here, we utilize the positions established by the <code>endpoints()</code> function to mark where each interval begins and ends.</li>
<li><code>labels</code>: This argument assigns a name or label to each interval. In our scenario, we’ve used the actual dates from our <code>xts</code> object to label the intervals, marking each segment with the corresponding endpoint date.</li>
</ul></li>
<li><p><strong><code>split()</code></strong>: With the intervals defined, the <code>xts</code> object can be segmented using <code>split()</code> function based on the categories established by <code>cut()</code>.</p>
<div class="sourceCode" id="cb890"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb890-1"><a href="data-structures-in-r.html#cb890-1" tabindex="-1"></a><span class="co"># Split data into time intervals</span></span>
<span id="cb890-2"><a href="data-structures-in-r.html#cb890-2" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> <span class="fu">split</span>(<span class="at">x =</span> sample_xts, <span class="at">f =</span> cut_time)</span>
<span id="cb890-3"><a href="data-structures-in-r.html#cb890-3" tabindex="-1"></a><span class="fu">print</span>(split_data)</span></code></pre></div>
<pre><code>## $`2022-12-01`
##               
## 2022-10-01 101
## 2022-11-01 102
## 2022-12-01 103
## 
## $`2023-05-01`
##               
## 2023-01-01 104
## 2023-02-01 105
## 2023-03-01 106
## 2023-04-01 107
## 2023-05-01  NA</code></pre></li>
<li><p><strong><code>lapply()</code></strong>: After segmentation, <code>lapply()</code> can be harnessed to apply a specific function, like calculating an average, across each segment.</p>
<div class="sourceCode" id="cb892"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb892-1"><a href="data-structures-in-r.html#cb892-1" tabindex="-1"></a><span class="co"># Apply a function to the data of each time interval</span></span>
<span id="cb892-2"><a href="data-structures-in-r.html#cb892-2" tabindex="-1"></a>monthly_means_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="at">X =</span> split_data, <span class="at">FUN =</span> mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb892-3"><a href="data-structures-in-r.html#cb892-3" tabindex="-1"></a><span class="fu">print</span>(monthly_means_list)</span></code></pre></div>
<pre><code>## $`2022-12-01`
## [1] 102
## 
## $`2023-05-01`
## [1] 105.5</code></pre>
<p>Observe that in the <code>lapply()</code> function, extra arguments are passed directly to the function specified in the <code>FUN</code> parameter. In this context, the supplementary argument <code>na.rm = TRUE</code> serves as an input to the <code>mean</code> function, equivalent to designating <code>FUN = function(x) mean(x, na.rm = TRUE)</code>.</p></li>
<li><p><strong><code>do.call()</code> + <code>rbind()</code></strong>: After processing each interval, the subsequent step is to combine the results into a unified <code>xts</code> object. The combination of <code>do.call()</code> and <code>rbind()</code> offers an efficient method for this task.</p>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="data-structures-in-r.html#cb894-1" tabindex="-1"></a><span class="co"># Merging aggregated data into a matrix</span></span>
<span id="cb894-2"><a href="data-structures-in-r.html#cb894-2" tabindex="-1"></a>combined_means_matrix <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="at">what =</span> rbind, <span class="at">args =</span> monthly_means_list)</span>
<span id="cb894-3"><a href="data-structures-in-r.html#cb894-3" tabindex="-1"></a></span>
<span id="cb894-4"><a href="data-structures-in-r.html#cb894-4" tabindex="-1"></a><span class="co"># Transitioning matrix to an xts format</span></span>
<span id="cb894-5"><a href="data-structures-in-r.html#cb894-5" tabindex="-1"></a>aggregated_xts <span class="ot">&lt;-</span> <span class="fu">as.xts</span>(combined_means_matrix)</span>
<span id="cb894-6"><a href="data-structures-in-r.html#cb894-6" tabindex="-1"></a></span>
<span id="cb894-7"><a href="data-structures-in-r.html#cb894-7" tabindex="-1"></a><span class="co"># Display the consolidated data</span></span>
<span id="cb894-8"><a href="data-structures-in-r.html#cb894-8" tabindex="-1"></a><span class="fu">print</span>(aggregated_xts)</span></code></pre></div>
<pre><code>##             [,1]
## 2022-12-01 102.0
## 2023-05-01 105.5</code></pre></li>
</ol>
<p>It’s worth noting that during our use of the <code>cut()</code> function, we labeled each segment with its respective endpoint, i.e., <code>labels = index(sample_xts)[end_points]</code>. As a consequence, the merged data is indexed by the concluding date of each year. To modify this, such as setting it to the initial day of the year, one can tweak the index as follows:</p>
<div class="sourceCode" id="cb896"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb896-1"><a href="data-structures-in-r.html#cb896-1" tabindex="-1"></a><span class="co"># Adjusting the time index to reflect the first day of each corresponding year</span></span>
<span id="cb896-2"><a href="data-structures-in-r.html#cb896-2" tabindex="-1"></a><span class="fu">index</span>(aggregated_xts) <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">format</span>(<span class="fu">index</span>(aggregated_xts), <span class="st">&quot;%Y-01-01&quot;</span>))</span>
<span id="cb896-3"><a href="data-structures-in-r.html#cb896-3" tabindex="-1"></a><span class="fu">print</span>(aggregated_xts)</span></code></pre></div>
<pre><code>##             [,1]
## 2022-01-01 102.0
## 2023-01-01 105.5</code></pre>
<p>The split-apply-combine strategy isn’t limited to producing a singular value for each group. Instead, it can also return multiple values or even a series of values. For instance, consider the goal of obtaining the cumulative product for each month:</p>
<div class="sourceCode" id="cb898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb898-1"><a href="data-structures-in-r.html#cb898-1" tabindex="-1"></a><span class="co"># Computing the cumulative product for each time interval</span></span>
<span id="cb898-2"><a href="data-structures-in-r.html#cb898-2" tabindex="-1"></a>monthly_cumprod_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="at">X =</span> split_data, <span class="at">FUN =</span> cumprod)</span>
<span id="cb898-3"><a href="data-structures-in-r.html#cb898-3" tabindex="-1"></a><span class="fu">print</span>(monthly_cumprod_list)</span></code></pre></div>
<pre><code>## $`2022-12-01`
##                   
## 2022-10-01     101
## 2022-11-01   10302
## 2022-12-01 1061106
## 
## $`2023-05-01`
##                     
## 2023-01-01       104
## 2023-02-01     10920
## 2023-03-01   1157520
## 2023-04-01 123854640
## 2023-05-01        NA</code></pre>
<div class="sourceCode" id="cb900"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb900-1"><a href="data-structures-in-r.html#cb900-1" tabindex="-1"></a><span class="co"># Consolidating the results into an xts object</span></span>
<span id="cb900-2"><a href="data-structures-in-r.html#cb900-2" tabindex="-1"></a>aggregated_xts <span class="ot">&lt;-</span> <span class="fu">as.xts</span>(<span class="fu">do.call</span>(<span class="at">what =</span> rbind, <span class="at">args =</span> monthly_cumprod_list))</span>
<span id="cb900-3"><a href="data-structures-in-r.html#cb900-3" tabindex="-1"></a></span>
<span id="cb900-4"><a href="data-structures-in-r.html#cb900-4" tabindex="-1"></a><span class="co"># Displaying the aggregated results</span></span>
<span id="cb900-5"><a href="data-structures-in-r.html#cb900-5" tabindex="-1"></a><span class="fu">print</span>(aggregated_xts)</span></code></pre></div>
<pre><code>##                 [,1]
## 2022-10-01       101
## 2022-11-01     10302
## 2022-12-01   1061106
## 2023-01-01       104
## 2023-02-01     10920
## 2023-03-01   1157520
## 2023-04-01 123854640
## 2023-05-01        NA</code></pre>
<p>Here, rather than condensing each month’s data into a single summary statistic, we’ve expanded each month’s data into a series representing the cumulative product.</p>
<p>Finally, there are several <code>xts</code> functions that simplify the split-apply-combine approach:</p>
<ol start="6" style="list-style-type: decimal">
<li><p><strong><code>period.apply()</code></strong>: This function streamlines the split-apply-combine strategy. By determining the intervals using the endpoints, you can apply a function across these specified segments.</p>
<div class="sourceCode" id="cb902"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb902-1"><a href="data-structures-in-r.html#cb902-1" tabindex="-1"></a><span class="co"># Use period.apply() for aggregation</span></span>
<span id="cb902-2"><a href="data-structures-in-r.html#cb902-2" tabindex="-1"></a><span class="fu">period.apply</span>(sample_xts, <span class="at">INDEX =</span> end_points, <span class="at">FUN =</span> mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##             [,1]
## 2022-12-01 102.0
## 2023-05-01 105.5</code></pre></li>
<li><p><strong><code>apply.*()</code></strong>: The series of functions - <code>apply.daily()</code>, <code>apply.weekly()</code>, <code>apply.monthly()</code>, <code>apply.quarterly()</code>, and <code>apply.yearly()</code> - enable aggregation or transformation of time series data grounded on precise time intervals. Essentially, they act as specialized versions of the <code>period.apply()</code> function, designed for specific time frames.</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb904-1"><a href="data-structures-in-r.html#cb904-1" tabindex="-1"></a><span class="co"># Yearly aggregation example</span></span>
<span id="cb904-2"><a href="data-structures-in-r.html#cb904-2" tabindex="-1"></a><span class="fu">apply.yearly</span>(sample_xts, <span class="at">FUN =</span> mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##             [,1]
## 2022-12-01 102.0
## 2023-05-01 105.5</code></pre>
<p>While these <code>apply.*()</code> functions simplify the split-apply-combine strategy, for unconventional aggregation frequencies, like quadrennial aggregations focusing on leap year endpoints, one would revert to the more intricate sequence: <code>endpoints()</code> + <code>cut()</code> + <code>split()</code> + <code>lapply()</code> + <code>do.call()</code> + <code>rbind()</code>.</p></li>
<li><p><strong><code>to.period()</code></strong>: Within financial time series data, the <strong>OHLC</strong> format is prevalent. It represents the Open, High, Low, and Close prices for assets within specific intervals, like daily, monthly, or yearly. The <strong>Open</strong> is the starting price, the <strong>High</strong> and <strong>Low</strong> represent the maximum and minimum prices achieved, respectively, and the <strong>Close</strong> is the ending price. This quartet offers insights into price movements and volatility within the given time span.</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb906-1"><a href="data-structures-in-r.html#cb906-1" tabindex="-1"></a><span class="co"># OHLC aggregation with to.period()</span></span>
<span id="cb906-2"><a href="data-structures-in-r.html#cb906-2" tabindex="-1"></a><span class="fu">to.period</span>(sample_xts, <span class="at">period =</span> <span class="st">&quot;years&quot;</span>)</span></code></pre></div>
<pre><code>##            sample_xts.Open sample_xts.High sample_xts.Low sample_xts.Close
## 2022-12-01             101             103            101              103
## 2023-04-01             104             107            104              107</code></pre>
<div class="sourceCode" id="cb908"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb908-1"><a href="data-structures-in-r.html#cb908-1" tabindex="-1"></a><span class="co"># OHLC aggregation without to.period()</span></span>
<span id="cb908-2"><a href="data-structures-in-r.html#cb908-2" tabindex="-1"></a>OHLC_functions <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Open =</span> <span class="cf">function</span>(x) <span class="fu">head</span>(<span class="fu">na.omit</span>(x), <span class="dv">1</span>), </span>
<span id="cb908-3"><a href="data-structures-in-r.html#cb908-3" tabindex="-1"></a>                       <span class="at">High =</span> <span class="cf">function</span>(x) <span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb908-4"><a href="data-structures-in-r.html#cb908-4" tabindex="-1"></a>                       <span class="at">Low =</span> <span class="cf">function</span>(x) <span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb908-5"><a href="data-structures-in-r.html#cb908-5" tabindex="-1"></a>                       <span class="at">Close =</span> <span class="cf">function</span>(x) <span class="fu">tail</span>(<span class="fu">na.omit</span>(x), <span class="dv">1</span>))</span>
<span id="cb908-6"><a href="data-structures-in-r.html#cb908-6" tabindex="-1"></a><span class="fu">sapply</span>(<span class="at">X =</span> OHLC_functions, <span class="at">FUN =</span> apply.yearly, <span class="at">x =</span> sample_xts)</span></code></pre></div>
<pre><code>##      Open High Low Close
## [1,]  101  103 101   103
## [2,]  104  107 104   107</code></pre></li>
</ol>
</div>
<div id="apply-by-overlapping-groups-xts" class="section level4 unnumbered hasAnchor">
<h4>Apply by Overlapping Groups<a href="data-structures-in-r.html#apply-by-overlapping-groups-xts" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In time series analysis, there are occasions when you need to apply a function to overlapping periods or windows of data rather than distinct, non-overlapping intervals. This distinction brings into focus two types of <strong>time windows</strong>, illustrated in Figure <a href="data-structures-in-r.html#fig:timewindows">4.2</a>:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:timewindows"></span>
<img src="files/timewindows.png" alt="Time Windows" width="70%" />
<p class="caption">
Figure 4.2: Time Windows
</p>
</div>
<ul>
<li><p><strong>Tumbling Window:</strong> Also known as a <strong>fixed window</strong>, this method uses a stable start or endpoint for the window and aggregates data based on that anchor. A common illustration is when transitioning from monthly data to yearly data, where each year represents a separate, non-overlapping group of 12 months.</p></li>
<li><p><strong>Sliding Window:</strong> Alternatively called a <strong>rolling window</strong>, this method allows the window to “slide” over time. Both the beginning and the end of the window shift with each step, consistently encompassing a fixed number of periods. This approach produces a continuous sequence of averages (or other aggregates) and is particularly beneficial for observing smooth temporal trends. For instance, if you apply a 12-month sliding window to monthly data, it would calculate a <strong>moving average</strong> for every subsequent 12-month segment.</p></li>
</ul>
<p>In financial time series contexts, metrics such as rolling volatility or moving averages often necessitate the examination of sliding windows instead of tumbling windows. The <code>rollapply()</code> function in the <code>xts</code> package provides an efficient solution for these scenarios.</p>
<p>Let’s dive deeper into the <code>rollapply()</code> function using an example.</p>
<p>Consider a financial market dataset <code>eq_mkt</code> that contains daily returns, and you’re interested in computing the rolling standard deviation (volatility) for a 3-day window. Instead of using non-overlapping 3-day chunks, you want every single 3-day interval. This means the first calculation would be for days 1-3, the second for days 2-4, the third for days 3-5, and so on.</p>
<div class="sourceCode" id="cb910"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb910-1"><a href="data-structures-in-r.html#cb910-1" tabindex="-1"></a><span class="co"># Sample dataset creation</span></span>
<span id="cb910-2"><a href="data-structures-in-r.html#cb910-2" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2022-01-01&quot;</span>), <span class="at">length.out =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="st">&quot;1 day&quot;</span>)</span>
<span id="cb910-3"><a href="data-structures-in-r.html#cb910-3" tabindex="-1"></a>eq_mkt <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="fl">0.02</span>), <span class="at">order.by =</span> dates)</span>
<span id="cb910-4"><a href="data-structures-in-r.html#cb910-4" tabindex="-1"></a><span class="fu">print</span>(eq_mkt)</span></code></pre></div>
<pre><code>##                    [,1]
## 2022-01-01 -0.002482031
## 2022-01-02  0.028447852
## 2022-01-03  0.002718264
## 2022-01-04 -0.014120914
## 2022-01-05 -0.030353679
## 2022-01-06 -0.010653598
## 2022-01-07  0.008525818
## 2022-01-08  0.009157934
## 2022-01-09 -0.006985625
## 2022-01-10 -0.013736686</code></pre>
<div class="sourceCode" id="cb912"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb912-1"><a href="data-structures-in-r.html#cb912-1" tabindex="-1"></a><span class="co"># Application of rollapply()</span></span>
<span id="cb912-2"><a href="data-structures-in-r.html#cb912-2" tabindex="-1"></a>rolling_volatility <span class="ot">&lt;-</span> <span class="fu">rollapply</span>(eq_mkt, <span class="at">width =</span> <span class="dv">3</span>, <span class="at">FUN =</span> sd)</span>
<span id="cb912-3"><a href="data-structures-in-r.html#cb912-3" tabindex="-1"></a><span class="fu">print</span>(rolling_volatility)</span></code></pre></div>
<pre><code>##                   [,1]
## 2022-01-01          NA
## 2022-01-02          NA
## 2022-01-03 0.016561564
## 2022-01-04 0.021438554
## 2022-01-05 0.016536898
## 2022-01-06 0.010516797
## 2022-01-07 0.019440330
## 2022-01-08 0.011260154
## 2022-01-09 0.009143476
## 2022-01-10 0.011764034</code></pre>
<p>Here’s a breakdown of the <code>rollapply()</code> function and its parameters:</p>
<ul>
<li><code>data</code>: This is the <code>xts</code> object (or any time-series object) on which you want to apply the function. In our example, it’s the <code>eq_mkt</code> dataset.</li>
<li><code>width</code>: Specifies the size of the rolling window. Here, we’ve chosen a width of 3, which means we’ll compute the standard deviation for every 3-day overlapping period.</li>
<li><code>FUN</code>: The function you want to apply to each rolling window. We’ve used <code>sd</code> to compute the standard deviation, but it could be any other function, such as <code>mean</code> for a moving average.</li>
</ul>
<p>The output is an <code>xts</code> object containing the result of the function applied to each rolling window. Note that the resulting time series will be shorter than the original by <code>width - 1</code>, since the first <code>width - 1</code> observations don’t have enough data points before them to form a complete window.</p>
<p>This approach is extremely versatile and powerful. By changing the <code>width</code> parameter and the function applied (<code>FUN</code>), you can compute a variety of rolling statistics. The concept of overlapping periods is crucial in financial analysis, particularly for calculating metrics that provide insights into short-term dynamics and potential trend changes.</p>
</div>
</div>
<div id="resources-xts" class="section level3 hasAnchor" number="4.8.9">
<h3><span class="header-section-number">4.8.9</span> Resources<a href="data-structures-in-r.html#resources-xts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To delve deeper into <code>xts</code> and <code>zoo</code> objects, consider reading its vignette, by executing <code>vignette("xts", package = "xts")</code>, as well as exploring the following <a href="https://learn.datacamp.com/" target="_blank">DataCamp</a> courses:</p>
<ul>
<li><a href="https://learn.datacamp.com/courses/manipulating-time-series-data-with-xts-and-zoo-in-r" target="_blank">Manipulating Time Series Data with xts and zoo in R</a></li>
<li><a href="https://learn.datacamp.com/courses/importing-and-managing-financial-data-in-r" target="_blank">Importing and Managing Financial Data in R</a></li>
</ul>
<p>If you’re working within the <code>tidyverse</code> environment, the R package <code>tidyquant</code> by <span class="citation">Dancho and Vaughan (<a href="#ref-R-tidyquant">2023</a>)</span> offers seamless integration with <code>xts</code> and <code>zoo</code>, see <code>vignette("TQ02-quant-integrations-in-tidyquant", package = "tidyquant")</code>. Lastly, the following handy cheat sheet provides a quick reference on <code>xts</code> and <code>zoo</code> functions: <a href="https://s3.amazonaws.com/assets.datacamp.com/blog_assets/xts_Cheat_Sheet_R.pdf" target="_blank">s3.amazonaws.com/assets.datacamp.com/blog_assets/xts_Cheat_Sheet_R.pdf</a>.</p>

</div>
</div>
</div>
<h3><em>References</em><a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-data.table" class="csl-entry">
Barrett, Tyson, Matt Dowle, Arun Srinivasan, Jan Gorecki, Michael Chirico, and Toby Hocking. 2024. <em>Data.table: Extension of ‘Data.frame‘</em>. <a href="https://r-datatable.com">https://r-datatable.com</a>. R package version 1.15.2.
</div>
<div id="ref-R-Matrix" class="csl-entry">
Bates, Douglas, Martin Maechler, and Mikael Jagan. 2024. <em>Matrix: Sparse and Dense Matrix Classes and Methods</em>. <a href="https://Matrix.R-forge.R-project.org">https://Matrix.R-forge.R-project.org</a>. R package version 1.6-5.
</div>
<div id="ref-R-tidyquant" class="csl-entry">
Dancho, Matt, and Davis Vaughan. 2023. <em>Tidyquant: Tidy Quantitative Financial Analysis</em>. <a href="https://github.com/business-science/tidyquant">https://github.com/business-science/tidyquant</a>. R package version 1.0.7.
</div>
<div id="ref-R-expm" class="csl-entry">
Maechler, Martin, Christophe Dutang, and Vincent Goulet. 2024. <em>Expm: Matrix Exponential, Log, Etc</em>. <a href="https://R-Forge.R-project.org/projects/expm/">https://R-Forge.R-project.org/projects/expm/</a>. R package version 0.999-9.
</div>
<div id="ref-R-tibble" class="csl-entry">
Müller, Kirill, and Hadley Wickham. 2023. <em>Tibble: Simple Data Frames</em>. <a href="https://tibble.tidyverse.org/">https://tibble.tidyverse.org/</a>. R package version 3.2.1.
</div>
<div id="ref-R-xts" class="csl-entry">
———. 2024b. <em>Xts: eXtensible Time Series</em>. <a href="https://joshuaulrich.github.io/xts/">https://joshuaulrich.github.io/xts/</a>. R package version 0.13.2.
</div>
<div id="ref-R-tidyverse" class="csl-entry">
———. 2023c. <em>Tidyverse: Easily Install and Load the Tidyverse</em>. <a href="https://tidyverse.tidyverse.org">https://tidyverse.tidyverse.org</a>. R package version 2.0.0.
</div>
<div id="ref-R-dplyr" class="csl-entry">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://dplyr.tidyverse.org">https://dplyr.tidyverse.org</a>. R package version 1.1.4.
</div>
<div id="ref-R-purrr" class="csl-entry">
Wickham, Hadley, and Lionel Henry. 2023. <em>Purrr: Functional Programming Tools</em>. <a href="https://purrr.tidyverse.org/">https://purrr.tidyverse.org/</a>. R package version 1.0.2.
</div>
<div id="ref-R-tidyr" class="csl-entry">
Wickham, Hadley, Davis Vaughan, and Maximilian Girlich. 2024. <em>Tidyr: Tidy Messy Data</em>. <a href="https://tidyr.tidyverse.org">https://tidyr.tidyverse.org</a>. R package version 1.3.1.
</div>
<div id="ref-R-zoo" class="csl-entry">
Zeileis, Achim, Gabor Grothendieck, and Jeffrey A. Ryan. 2023. <em>Zoo: S3 Infrastructure for Regular and Irregular Time Series (z’s Ordered Observations)</em>. <a href="https://zoo.R-Forge.R-project.org/">https://zoo.R-Forge.R-project.org/</a>. R package version 1.8-12.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="process-data-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["eda.pdf", "PDF"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
