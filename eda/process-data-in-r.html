<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Process Data in R | Economic Data Analysis</title>
  <meta name="description" content="Chapter 5 Process Data in R | Economic Data Analysis" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Process Data in R | Economic Data Analysis" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://www.julianfludwig.com/eda/files/bookcover.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Process Data in R | Economic Data Analysis" />
  
  
  <meta name="twitter:image" content="https://www.julianfludwig.com/eda/files/bookcover.png" />



<meta name="date" content="2024-07-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-structures-in-r.html"/>
<link rel="next" href="write-reports-with-r-markdown.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
<script src="libs/tabwid-1.1.3/tabwid.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">Economic Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><em>Preface</em></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#author"><i class="fa fa-check"></i>Author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-navigation"><i class="fa fa-check"></i>Book Navigation</a></li>
</ul></li>
<li class="part"><span><b>Part I</b></span></li>
<li class="chapter" data-level="" data-path="part-i.html"><a href="part-i.html"><i class="fa fa-check"></i><em>Part I: Introduction to R</em></a></li>
<li class="chapter" data-level="1" data-path="software-overview.html"><a href="software-overview.html"><i class="fa fa-check"></i><b>1</b> Software Overview</a></li>
<li class="chapter" data-level="2" data-path="software-installation.html"><a href="software-installation.html"><i class="fa fa-check"></i><b>2</b> Software Installation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="software-installation.html"><a href="software-installation.html#install-r"><i class="fa fa-check"></i><b>2.1</b> Install R</a></li>
<li class="chapter" data-level="2.2" data-path="software-installation.html"><a href="software-installation.html#install-rstudio"><i class="fa fa-check"></i><b>2.2</b> Install RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="software-installation.html"><a href="software-installation.html#install-r-markdown"><i class="fa fa-check"></i><b>2.3</b> Install R Markdown</a></li>
<li class="chapter" data-level="2.4" data-path="software-installation.html"><a href="software-installation.html#install-latex"><i class="fa fa-check"></i><b>2.4</b> Install LaTeX</a></li>
<li class="chapter" data-level="2.5" data-path="software-installation.html"><a href="software-installation.html#install-r-packages"><i class="fa fa-check"></i><b>2.5</b> Install R Packages</a></li>
<li class="chapter" data-level="2.6" data-path="software-installation.html"><a href="software-installation.html#step-test"><i class="fa fa-check"></i><b>2.6</b> 18-Step Test</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>3</b> R Basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#rstudio-interface"><i class="fa fa-check"></i><b>3.1</b> RStudio Interface</a></li>
<li class="chapter" data-level="3.2" data-path="r-basics.html"><a href="r-basics.html#basic-operations"><i class="fa fa-check"></i><b>3.2</b> Basic Operations</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="r-basics.html"><a href="r-basics.html#arithmetic-operations"><i class="fa fa-check"></i><b>3.2.1</b> Arithmetic Operations</a></li>
<li class="chapter" data-level="3.2.2" data-path="r-basics.html"><a href="r-basics.html#logical-operations"><i class="fa fa-check"></i><b>3.2.2</b> Logical Operations</a></li>
<li class="chapter" data-level="3.2.3" data-path="r-basics.html"><a href="r-basics.html#string-operations"><i class="fa fa-check"></i><b>3.2.3</b> String Operations</a></li>
<li class="chapter" data-level="3.2.4" data-path="r-basics.html"><a href="r-basics.html#variables"><i class="fa fa-check"></i><b>3.2.4</b> Variables</a></li>
<li class="chapter" data-level="3.2.5" data-path="r-basics.html"><a href="r-basics.html#data-types"><i class="fa fa-check"></i><b>3.2.5</b> Data Types</a></li>
<li class="chapter" data-level="3.2.6" data-path="r-basics.html"><a href="r-basics.html#data-structures"><i class="fa fa-check"></i><b>3.2.6</b> Data Structures</a></li>
<li class="chapter" data-level="3.2.7" data-path="r-basics.html"><a href="r-basics.html#vector-operations"><i class="fa fa-check"></i><b>3.2.7</b> Vector Operations</a></li>
<li class="chapter" data-level="3.2.8" data-path="r-basics.html"><a href="r-basics.html#missing-values"><i class="fa fa-check"></i><b>3.2.8</b> Missing Values</a></li>
<li class="chapter" data-level="3.2.9" data-path="r-basics.html"><a href="r-basics.html#attributes"><i class="fa fa-check"></i><b>3.2.9</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-basics.html"><a href="r-basics.html#dates-and-times"><i class="fa fa-check"></i><b>3.3</b> Dates and Times</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-basics.html"><a href="r-basics.html#posixct"><i class="fa fa-check"></i><b>3.3.1</b> Time Class (<code>POSIXct</code>)</a></li>
<li class="chapter" data-level="3.3.2" data-path="r-basics.html"><a href="r-basics.html#date"><i class="fa fa-check"></i><b>3.3.2</b> Date Class (<code>Date</code>)</a></li>
<li class="chapter" data-level="3.3.3" data-path="r-basics.html"><a href="r-basics.html#custom-date-and-time-formats"><i class="fa fa-check"></i><b>3.3.3</b> Custom Date and Time Formats</a></li>
<li class="chapter" data-level="3.3.4" data-path="r-basics.html"><a href="r-basics.html#operations-with-dates-and-times"><i class="fa fa-check"></i><b>3.3.4</b> Operations with Dates and Times</a></li>
<li class="chapter" data-level="3.3.5" data-path="r-basics.html"><a href="r-basics.html#current-date-and-time"><i class="fa fa-check"></i><b>3.3.5</b> Current Date and Time</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-basics.html"><a href="r-basics.html#graphs"><i class="fa fa-check"></i><b>3.4</b> Graphs</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="r-basics.html"><a href="r-basics.html#scatter-plot"><i class="fa fa-check"></i><b>3.4.1</b> Scatter Plot</a></li>
<li class="chapter" data-level="3.4.2" data-path="r-basics.html"><a href="r-basics.html#line-graph"><i class="fa fa-check"></i><b>3.4.2</b> Line Graph</a></li>
<li class="chapter" data-level="3.4.3" data-path="r-basics.html"><a href="r-basics.html#bar-chart"><i class="fa fa-check"></i><b>3.4.3</b> Bar Chart</a></li>
<li class="chapter" data-level="3.4.4" data-path="r-basics.html"><a href="r-basics.html#frequency-bar-chart"><i class="fa fa-check"></i><b>3.4.4</b> Frequency Bar Chart</a></li>
<li class="chapter" data-level="3.4.5" data-path="r-basics.html"><a href="r-basics.html#histogram"><i class="fa fa-check"></i><b>3.4.5</b> Histogram</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="r-basics.html"><a href="r-basics.html#functions"><i class="fa fa-check"></i><b>3.5</b> Functions</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="r-basics.html"><a href="r-basics.html#how-functions-operate"><i class="fa fa-check"></i><b>3.5.1</b> How Functions Operate</a></li>
<li class="chapter" data-level="3.5.2" data-path="r-basics.html"><a href="r-basics.html#infix-operators"><i class="fa fa-check"></i><b>3.5.2</b> Infix Operators</a></li>
<li class="chapter" data-level="3.5.3" data-path="r-basics.html"><a href="r-basics.html#control-flow-operators"><i class="fa fa-check"></i><b>3.5.3</b> Control-Flow Operators</a></li>
<li class="chapter" data-level="3.5.4" data-path="r-basics.html"><a href="r-basics.html#help-and-documentation"><i class="fa fa-check"></i><b>3.5.4</b> Help and Documentation</a></li>
<li class="chapter" data-level="3.5.5" data-path="r-basics.html"><a href="r-basics.html#default-inputs"><i class="fa fa-check"></i><b>3.5.5</b> Default Inputs</a></li>
<li class="chapter" data-level="3.5.6" data-path="r-basics.html"><a href="r-basics.html#custom-functions"><i class="fa fa-check"></i><b>3.5.6</b> Custom Functions</a></li>
<li class="chapter" data-level="3.5.7" data-path="r-basics.html"><a href="r-basics.html#functions-from-r-packages"><i class="fa fa-check"></i><b>3.5.7</b> Functions from R Packages</a></li>
<li class="chapter" data-level="3.5.8" data-path="r-basics.html"><a href="r-basics.html#indirect-functions"><i class="fa fa-check"></i><b>3.5.8</b> Indirect Functions</a></li>
<li class="chapter" data-level="3.5.9" data-path="r-basics.html"><a href="r-basics.html#apply-functions"><i class="fa fa-check"></i><b>3.5.9</b> Apply Functions</a></li>
<li class="chapter" data-level="3.5.10" data-path="r-basics.html"><a href="r-basics.html#advanced-higher-order-functions"><i class="fa fa-check"></i><b>3.5.10</b> Advanced Higher-Order Functions</a></li>
<li class="chapter" data-level="3.5.11" data-path="r-basics.html"><a href="r-basics.html#wrapper-functions"><i class="fa fa-check"></i><b>3.5.11</b> Wrapper Functions</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="r-basics.html"><a href="r-basics.html#r-packages"><i class="fa fa-check"></i><b>3.6</b> R Packages</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="r-basics.html"><a href="r-basics.html#cran"><i class="fa fa-check"></i><b>3.6.1</b> CRAN</a></li>
<li class="chapter" data-level="3.6.2" data-path="r-basics.html"><a href="r-basics.html#load-and-update-packages"><i class="fa fa-check"></i><b>3.6.2</b> Load and Update Packages</a></li>
<li class="chapter" data-level="3.6.3" data-path="r-basics.html"><a href="r-basics.html#noteworthy-packages"><i class="fa fa-check"></i><b>3.6.3</b> Noteworthy Packages</a></li>
<li class="chapter" data-level="3.6.4" data-path="r-basics.html"><a href="r-basics.html#package-documentation"><i class="fa fa-check"></i><b>3.6.4</b> Package Documentation</a></li>
<li class="chapter" data-level="3.6.5" data-path="r-basics.html"><a href="r-basics.html#function-name-conflicts"><i class="fa fa-check"></i><b>3.6.5</b> Function Name Conflicts</a></li>
<li class="chapter" data-level="3.6.6" data-path="r-basics.html"><a href="r-basics.html#non-exported-functions"><i class="fa fa-check"></i><b>3.6.6</b> Non-Exported Functions</a></li>
<li class="chapter" data-level="3.6.7" data-path="r-basics.html"><a href="r-basics.html#the-tidyverse"><i class="fa fa-check"></i><b>3.6.7</b> The Tidyverse</a></li>
<li class="chapter" data-level="3.6.8" data-path="r-basics.html"><a href="r-basics.html#citing-r-packages"><i class="fa fa-check"></i><b>3.6.8</b> Citing R Packages</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="r-basics.html"><a href="r-basics.html#file-management"><i class="fa fa-check"></i><b>3.7</b> File Management</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="r-basics.html"><a href="r-basics.html#find-folder-path"><i class="fa fa-check"></i><b>3.7.1</b> Find Folder Path</a></li>
<li class="chapter" data-level="3.7.2" data-path="r-basics.html"><a href="r-basics.html#set-working-directory"><i class="fa fa-check"></i><b>3.7.2</b> Set Working Directory</a></li>
<li class="chapter" data-level="3.7.3" data-path="r-basics.html"><a href="r-basics.html#download-files"><i class="fa fa-check"></i><b>3.7.3</b> Download Files</a></li>
<li class="chapter" data-level="3.7.4" data-path="r-basics.html"><a href="r-basics.html#import-files"><i class="fa fa-check"></i><b>3.7.4</b> Import Files</a></li>
<li class="chapter" data-level="3.7.5" data-path="r-basics.html"><a href="r-basics.html#export-files"><i class="fa fa-check"></i><b>3.7.5</b> Export Files</a></li>
<li class="chapter" data-level="3.7.6" data-path="r-basics.html"><a href="r-basics.html#delete-files"><i class="fa fa-check"></i><b>3.7.6</b> Delete Files</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="r-basics.html"><a href="r-basics.html#optimal-workflow"><i class="fa fa-check"></i><b>3.8</b> Optimal Workflow</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="r-basics.html"><a href="r-basics.html#execute-as-you-write"><i class="fa fa-check"></i><b>3.8.1</b> Execute as You Write</a></li>
<li class="chapter" data-level="3.8.2" data-path="r-basics.html"><a href="r-basics.html#key-shortcuts"><i class="fa fa-check"></i><b>3.8.2</b> Key Shortcuts</a></li>
<li class="chapter" data-level="3.8.3" data-path="r-basics.html"><a href="r-basics.html#separate-window-for-r-script"><i class="fa fa-check"></i><b>3.8.3</b> Separate Window for R Script</a></li>
<li class="chapter" data-level="3.8.4" data-path="r-basics.html"><a href="r-basics.html#conclusion"><i class="fa fa-check"></i><b>3.8.4</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html"><i class="fa fa-check"></i><b>4</b> Data Structures in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#scalar"><i class="fa fa-check"></i><b>4.1</b> Scalar</a></li>
<li class="chapter" data-level="4.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#vector"><i class="fa fa-check"></i><b>4.2</b> Vector</a></li>
<li class="chapter" data-level="4.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#matrix"><i class="fa fa-check"></i><b>4.3</b> Matrix (<code>matrix</code>)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-matrix"><i class="fa fa-check"></i><b>4.3.1</b> Create a Matrix</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-matrix"><i class="fa fa-check"></i><b>4.3.2</b> Inspect a Matrix</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-matrix"><i class="fa fa-check"></i><b>4.3.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.3.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-matrix"><i class="fa fa-check"></i><b>4.3.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.3.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-matrix"><i class="fa fa-check"></i><b>4.3.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.3.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#element-wise-operations"><i class="fa fa-check"></i><b>4.3.6</b> Element-Wise Operations</a></li>
<li class="chapter" data-level="4.3.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#linear-algebra-operations"><i class="fa fa-check"></i><b>4.3.7</b> Linear Algebra Operations</a></li>
<li class="chapter" data-level="4.3.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-matrices"><i class="fa fa-check"></i><b>4.3.8</b> Combine Matrices</a></li>
<li class="chapter" data-level="4.3.9" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-matrix"><i class="fa fa-check"></i><b>4.3.9</b> Apply Family</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#list"><i class="fa fa-check"></i><b>4.4</b> List (<code>list</code>)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-list"><i class="fa fa-check"></i><b>4.4.1</b> Create a List</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-list"><i class="fa fa-check"></i><b>4.4.2</b> Inspect a List</a></li>
<li class="chapter" data-level="4.4.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-list"><i class="fa fa-check"></i><b>4.4.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.4.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-list"><i class="fa fa-check"></i><b>4.4.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.4.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-lists"><i class="fa fa-check"></i><b>4.4.5</b> Combine Lists</a></li>
<li class="chapter" data-level="4.4.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-list"><i class="fa fa-check"></i><b>4.4.6</b> Apply Family</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#data.frame"><i class="fa fa-check"></i><b>4.5</b> Data Frame (<code>data.frame</code>)</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-data-frame"><i class="fa fa-check"></i><b>4.5.1</b> Create a Data Frame</a></li>
<li class="chapter" data-level="4.5.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-data-frame"><i class="fa fa-check"></i><b>4.5.2</b> Inspect a Data Frame</a></li>
<li class="chapter" data-level="4.5.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-data.frame"><i class="fa fa-check"></i><b>4.5.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.5.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-data.frame"><i class="fa fa-check"></i><b>4.5.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.5.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-data.frame"><i class="fa fa-check"></i><b>4.5.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.5.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-data-frames"><i class="fa fa-check"></i><b>4.5.6</b> Combine Data Frames</a></li>
<li class="chapter" data-level="4.5.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-data.frame"><i class="fa fa-check"></i><b>4.5.7</b> Apply Family</a></li>
<li class="chapter" data-level="4.5.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#reshape-data-frames"><i class="fa fa-check"></i><b>4.5.8</b> Reshape Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#tibble"><i class="fa fa-check"></i><b>4.6</b> Tibble (<code>tbl_df</code>)</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-a-tibble"><i class="fa fa-check"></i><b>4.6.1</b> Create a Tibble</a></li>
<li class="chapter" data-level="4.6.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-a-tibble"><i class="fa fa-check"></i><b>4.6.2</b> Inspect a Tibble</a></li>
<li class="chapter" data-level="4.6.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-tibble"><i class="fa fa-check"></i><b>4.6.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.6.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-tibble"><i class="fa fa-check"></i><b>4.6.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.6.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-tibble"><i class="fa fa-check"></i><b>4.6.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.6.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-tibbles"><i class="fa fa-check"></i><b>4.6.6</b> Combine Tibbles</a></li>
<li class="chapter" data-level="4.6.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-tibble"><i class="fa fa-check"></i><b>4.6.7</b> Apply Family</a></li>
<li class="chapter" data-level="4.6.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#reshape-tibbles"><i class="fa fa-check"></i><b>4.6.8</b> Reshape Tibbles</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#data.table"><i class="fa fa-check"></i><b>4.7</b> Data Table (<code>data.table</code>)</a></li>
<li class="chapter" data-level="4.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#xts"><i class="fa fa-check"></i><b>4.8</b> Extensible Time Series (<code>xts</code>)</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#create-an-xts-object"><i class="fa fa-check"></i><b>4.8.1</b> Create an <code>xts</code> Object</a></li>
<li class="chapter" data-level="4.8.2" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#inspect-an-xts-object"><i class="fa fa-check"></i><b>4.8.2</b> Inspect an <code>xts</code> Object</a></li>
<li class="chapter" data-level="4.8.3" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#select-and-modify-xts"><i class="fa fa-check"></i><b>4.8.3</b> Select and Modify</a></li>
<li class="chapter" data-level="4.8.4" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#add-labels-xts"><i class="fa fa-check"></i><b>4.8.4</b> Add Labels</a></li>
<li class="chapter" data-level="4.8.5" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#handle-missing-values-xts"><i class="fa fa-check"></i><b>4.8.5</b> Handle Missing Values</a></li>
<li class="chapter" data-level="4.8.6" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#combine-xts-objects"><i class="fa fa-check"></i><b>4.8.6</b> Combine xts Objects</a></li>
<li class="chapter" data-level="4.8.7" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#time-series-transformations"><i class="fa fa-check"></i><b>4.8.7</b> Time Series Transformations</a></li>
<li class="chapter" data-level="4.8.8" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#apply-family-xts"><i class="fa fa-check"></i><b>4.8.8</b> Apply Family</a></li>
<li class="chapter" data-level="4.8.9" data-path="data-structures-in-r.html"><a href="data-structures-in-r.html#resources-xts"><i class="fa fa-check"></i><b>4.8.9</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="process-data-in-r.html"><a href="process-data-in-r.html"><i class="fa fa-check"></i><b>5</b> Process Data in R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-bitcoin-price-data"><i class="fa fa-check"></i><b>5.1</b> Process Bitcoin Price Data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-dsv-file"><i class="fa fa-check"></i><b>5.1.1</b> Download DSV File</a></li>
<li class="chapter" data-level="5.1.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#import-dsv-file"><i class="fa fa-check"></i><b>5.1.2</b> Import DSV File</a></li>
<li class="chapter" data-level="5.1.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#inspect-data"><i class="fa fa-check"></i><b>5.1.3</b> Inspect Data</a></li>
<li class="chapter" data-level="5.1.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-bitcoin-price-data-clean-data"><i class="fa fa-check"></i><b>5.1.4</b> Clean Data</a></li>
<li class="chapter" data-level="5.1.5" data-path="process-data-in-r.html"><a href="process-data-in-r.html#visualize-data"><i class="fa fa-check"></i><b>5.1.5</b> Visualize Data</a></li>
<li class="chapter" data-level="5.1.6" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-bitcoin-price-data-export-data"><i class="fa fa-check"></i><b>5.1.6</b> Export Data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-stock-and-oil-prices"><i class="fa fa-check"></i><b>5.2</b> Process Stock and Oil Prices</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#web-api"><i class="fa fa-check"></i><b>5.2.1</b> Web API</a></li>
<li class="chapter" data-level="5.2.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-via-quantmod"><i class="fa fa-check"></i><b>5.2.2</b> Download via <code>quantmod</code></a></li>
<li class="chapter" data-level="5.2.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-via-quandl"><i class="fa fa-check"></i><b>5.2.3</b> Download via <code>Quandl</code></a></li>
<li class="chapter" data-level="5.2.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#clean-data"><i class="fa fa-check"></i><b>5.2.4</b> Clean Data</a></li>
<li class="chapter" data-level="5.2.5" data-path="process-data-in-r.html"><a href="process-data-in-r.html#plot-apple-stock-prices"><i class="fa fa-check"></i><b>5.2.5</b> Plot Apple Stock Prices</a></li>
<li class="chapter" data-level="5.2.6" data-path="process-data-in-r.html"><a href="process-data-in-r.html#plot-crude-oil-prices"><i class="fa fa-check"></i><b>5.2.6</b> Plot Crude Oil Prices</a></li>
<li class="chapter" data-level="5.2.7" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-stock-and-oil-prices-merge-data"><i class="fa fa-check"></i><b>5.2.7</b> Merge Data</a></li>
<li class="chapter" data-level="5.2.8" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-stock-and-oil-prices-transform-data"><i class="fa fa-check"></i><b>5.2.8</b> Transform Data</a></li>
<li class="chapter" data-level="5.2.9" data-path="process-data-in-r.html"><a href="process-data-in-r.html#tabulate-key-statistics"><i class="fa fa-check"></i><b>5.2.9</b> Tabulate Key Statistics</a></li>
<li class="chapter" data-level="5.2.10" data-path="process-data-in-r.html"><a href="process-data-in-r.html#visualize-correlations"><i class="fa fa-check"></i><b>5.2.10</b> Visualize Correlations</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data"><i class="fa fa-check"></i><b>5.3</b> Process House Price Data</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="process-data-in-r.html"><a href="process-data-in-r.html#download-excel-workbook"><i class="fa fa-check"></i><b>5.3.1</b> Download Excel Workbook</a></li>
<li class="chapter" data-level="5.3.2" data-path="process-data-in-r.html"><a href="process-data-in-r.html#import-excel-workbook"><i class="fa fa-check"></i><b>5.3.2</b> Import Excel Workbook</a></li>
<li class="chapter" data-level="5.3.3" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-inspect-and-clean-data"><i class="fa fa-check"></i><b>5.3.3</b> Inspect and Clean Data</a></li>
<li class="chapter" data-level="5.3.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-reshape-data"><i class="fa fa-check"></i><b>5.3.4</b> Reshape Data</a></li>
<li class="chapter" data-level="5.3.5" data-path="process-data-in-r.html"><a href="process-data-in-r.html#layered-line-graphs"><i class="fa fa-check"></i><b>5.3.5</b> Layered Line Graphs</a></li>
<li class="chapter" data-level="5.3.6" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-merge-data"><i class="fa fa-check"></i><b>5.3.6</b> Merge Data</a></li>
<li class="chapter" data-level="5.3.7" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-transform-data"><i class="fa fa-check"></i><b>5.3.7</b> Transform Data</a></li>
<li class="chapter" data-level="5.3.8" data-path="process-data-in-r.html"><a href="process-data-in-r.html#stationary-data"><i class="fa fa-check"></i><b>5.3.8</b> Stationary Data</a></li>
<li class="chapter" data-level="5.3.9" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-house-price-data-export-data"><i class="fa fa-check"></i><b>5.3.9</b> Export Data</a></li>
<li class="chapter" data-level="5.3.10" data-path="process-data-in-r.html"><a href="process-data-in-r.html#organize-data"><i class="fa fa-check"></i><b>5.3.10</b> Organize Data</a></li>
<li class="chapter" data-level="5.3.11" data-path="process-data-in-r.html"><a href="process-data-in-r.html#univariate-statistics"><i class="fa fa-check"></i><b>5.3.11</b> Univariate Statistics</a></li>
<li class="chapter" data-level="5.3.12" data-path="process-data-in-r.html"><a href="process-data-in-r.html#associative-statistics"><i class="fa fa-check"></i><b>5.3.12</b> Associative Statistics</a></li>
<li class="chapter" data-level="5.3.13" data-path="process-data-in-r.html"><a href="process-data-in-r.html#layered-scatter-plots"><i class="fa fa-check"></i><b>5.3.13</b> Layered Scatter Plots</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="process-data-in-r.html"><a href="process-data-in-r.html#process-data-resources"><i class="fa fa-check"></i><b>5.4</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html"><i class="fa fa-check"></i><b>6</b> Write Reports with R Markdown</a>
<ul>
<li class="chapter" data-level="6.1" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#create-an-r-markdown-document"><i class="fa fa-check"></i><b>6.1</b> Create an R Markdown Document</a></li>
<li class="chapter" data-level="6.2" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#yaml-header"><i class="fa fa-check"></i><b>6.2</b> YAML Header</a></li>
<li class="chapter" data-level="6.3" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#markdown-syntax"><i class="fa fa-check"></i><b>6.3</b> Markdown Syntax</a></li>
<li class="chapter" data-level="6.4" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#r-chunks"><i class="fa fa-check"></i><b>6.4</b> R Chunks</a></li>
<li class="chapter" data-level="6.5" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#embed-r-variables-into-text"><i class="fa fa-check"></i><b>6.5</b> Embed R Variables into Text</a></li>
<li class="chapter" data-level="6.6" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#latex-syntax-for-math"><i class="fa fa-check"></i><b>6.6</b> LaTeX Syntax for Math</a></li>
<li class="chapter" data-level="6.7" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#print-tables"><i class="fa fa-check"></i><b>6.7</b> Print Tables</a></li>
<li class="chapter" data-level="6.8" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing"><i class="fa fa-check"></i><b>6.8</b> Referencing</a>
<ul>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#setting-up-bookdown"><i class="fa fa-check"></i>Setting Up <code>bookdown</code></a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-equations"><i class="fa fa-check"></i>Referencing Equations</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-tables"><i class="fa fa-check"></i>Referencing Tables</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-figures"><i class="fa fa-check"></i>Referencing Figures</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#referencing-sections"><i class="fa fa-check"></i>Referencing Sections</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escape-characters"><i class="fa fa-check"></i><b>6.9</b> Escape Characters</a>
<ul>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escape-in-markdown-text"><i class="fa fa-check"></i>Escape in Markdown Text</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escape-in-code-chunks"><i class="fa fa-check"></i>Escape in Code Chunks</a></li>
<li class="chapter" data-level="" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#escaped-characters"><i class="fa fa-check"></i>Escaped Characters</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="write-reports-with-r-markdown.html"><a href="write-reports-with-r-markdown.html#summary-and-resources"><i class="fa fa-check"></i><b>6.10</b> Summary and Resources</a></li>
</ul></li>
<li class="part"><span><b>Part II</b></span></li>
<li class="chapter" data-level="" data-path="part-ii.html"><a href="part-ii.html"><i class="fa fa-check"></i><em>Part II: Measurement in Economics</em></a></li>
<li class="chapter" data-level="7" data-path="economic-data-sources.html"><a href="economic-data-sources.html"><i class="fa fa-check"></i><b>7</b> Economic Data Sources</a>
<ul>
<li class="chapter" data-level="7.1" data-path="economic-data-sources.html"><a href="economic-data-sources.html#types-of-indicators"><i class="fa fa-check"></i><b>7.1</b> Types of Indicators</a></li>
<li class="chapter" data-level="7.2" data-path="economic-data-sources.html"><a href="economic-data-sources.html#data-source"><i class="fa fa-check"></i><b>7.2</b> Data Source</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="economic-data-sources.html"><a href="economic-data-sources.html#data-supplier-vs.-distributor"><i class="fa fa-check"></i><b>7.2.1</b> Data Supplier vs. Distributor</a></li>
<li class="chapter" data-level="7.2.2" data-path="economic-data-sources.html"><a href="economic-data-sources.html#bureau-of-economic-analysis-bea"><i class="fa fa-check"></i><b>7.2.2</b> Bureau of Economic Analysis (BEA)</a></li>
<li class="chapter" data-level="7.2.3" data-path="economic-data-sources.html"><a href="economic-data-sources.html#u.s.-census-bureau"><i class="fa fa-check"></i><b>7.2.3</b> U.S. Census Bureau</a></li>
<li class="chapter" data-level="7.2.4" data-path="economic-data-sources.html"><a href="economic-data-sources.html#bureau-of-labor-statistics-bls"><i class="fa fa-check"></i><b>7.2.4</b> Bureau of Labor Statistics (BLS)</a></li>
<li class="chapter" data-level="7.2.5" data-path="economic-data-sources.html"><a href="economic-data-sources.html#federal-reserve-board-of-governors"><i class="fa fa-check"></i><b>7.2.5</b> Federal Reserve Board of Governors</a></li>
<li class="chapter" data-level="7.2.6" data-path="economic-data-sources.html"><a href="economic-data-sources.html#u.s.-department-of-the-treasury"><i class="fa fa-check"></i><b>7.2.6</b> U.S. Department of the Treasury</a></li>
<li class="chapter" data-level="7.2.7" data-path="economic-data-sources.html"><a href="economic-data-sources.html#financial-market-exchanges"><i class="fa fa-check"></i><b>7.2.7</b> Financial Market Exchanges</a></li>
<li class="chapter" data-level="7.2.8" data-path="economic-data-sources.html"><a href="economic-data-sources.html#federal-reserve-economic-data-fred"><i class="fa fa-check"></i><b>7.2.8</b> Federal Reserve Economic Data (FRED)</a></li>
<li class="chapter" data-level="7.2.9" data-path="economic-data-sources.html"><a href="economic-data-sources.html#u.s.-department-of-agriculture-economic-research-service-ers"><i class="fa fa-check"></i><b>7.2.9</b> U.S. Department of Agriculture Economic Research Service (ERS)</a></li>
<li class="chapter" data-level="7.2.10" data-path="economic-data-sources.html"><a href="economic-data-sources.html#bloomberg"><i class="fa fa-check"></i><b>7.2.10</b> Bloomberg</a></li>
<li class="chapter" data-level="7.2.11" data-path="economic-data-sources.html"><a href="economic-data-sources.html#yahoo-finance"><i class="fa fa-check"></i><b>7.2.11</b> Yahoo Finance</a></li>
<li class="chapter" data-level="7.2.12" data-path="economic-data-sources.html"><a href="economic-data-sources.html#conclusion-1"><i class="fa fa-check"></i><b>7.2.12</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="business-accounting.html"><a href="business-accounting.html"><i class="fa fa-check"></i><b>8</b> Business Accounting</a>
<ul>
<li class="chapter" data-level="8.1" data-path="business-accounting.html"><a href="business-accounting.html#accounting-standards"><i class="fa fa-check"></i><b>8.1</b> Accounting Standards</a></li>
<li class="chapter" data-level="8.2" data-path="business-accounting.html"><a href="business-accounting.html#accounting-equation"><i class="fa fa-check"></i><b>8.2</b> Accounting Equation</a></li>
<li class="chapter" data-level="8.3" data-path="business-accounting.html"><a href="business-accounting.html#balance-sheet"><i class="fa fa-check"></i><b>8.3</b> Balance Sheet</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="business-accounting.html"><a href="business-accounting.html#assets"><i class="fa fa-check"></i><b>8.3.1</b> Assets</a></li>
<li class="chapter" data-level="8.3.2" data-path="business-accounting.html"><a href="business-accounting.html#liabilities"><i class="fa fa-check"></i><b>8.3.2</b> Liabilities</a></li>
<li class="chapter" data-level="8.3.3" data-path="business-accounting.html"><a href="business-accounting.html#equity"><i class="fa fa-check"></i><b>8.3.3</b> Equity</a></li>
<li class="chapter" data-level="8.3.4" data-path="business-accounting.html"><a href="business-accounting.html#transactions"><i class="fa fa-check"></i><b>8.3.4</b> Transactions</a></li>
<li class="chapter" data-level="8.3.5" data-path="business-accounting.html"><a href="business-accounting.html#book-vs.-market-value"><i class="fa fa-check"></i><b>8.3.5</b> Book vs. Market Value</a></li>
<li class="chapter" data-level="8.3.6" data-path="business-accounting.html"><a href="business-accounting.html#public-company"><i class="fa fa-check"></i><b>8.3.6</b> Public Company</a></li>
<li class="chapter" data-level="8.3.7" data-path="business-accounting.html"><a href="business-accounting.html#financial-firm"><i class="fa fa-check"></i><b>8.3.7</b> Financial Firm</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="business-accounting.html"><a href="business-accounting.html#ledger"><i class="fa fa-check"></i><b>8.4</b> Ledger</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="business-accounting.html"><a href="business-accounting.html#ledger-accounts"><i class="fa fa-check"></i><b>8.4.1</b> Ledger Accounts</a></li>
<li class="chapter" data-level="8.4.2" data-path="business-accounting.html"><a href="business-accounting.html#t-accounts"><i class="fa fa-check"></i><b>8.4.2</b> T-Accounts</a></li>
<li class="chapter" data-level="8.4.3" data-path="business-accounting.html"><a href="business-accounting.html#basis-for-financial-statements"><i class="fa fa-check"></i><b>8.4.3</b> Basis for Financial Statements</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="business-accounting.html"><a href="business-accounting.html#income-statement"><i class="fa fa-check"></i><b>8.5</b> Income Statement</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="business-accounting.html"><a href="business-accounting.html#stock-vs.-flow-variables"><i class="fa fa-check"></i><b>8.5.1</b> Stock vs. Flow Variables</a></li>
<li class="chapter" data-level="8.5.2" data-path="business-accounting.html"><a href="business-accounting.html#profit-equation"><i class="fa fa-check"></i><b>8.5.2</b> Profit Equation</a></li>
<li class="chapter" data-level="8.5.3" data-path="business-accounting.html"><a href="business-accounting.html#gross-profit"><i class="fa fa-check"></i><b>8.5.3</b> Gross Profit</a></li>
<li class="chapter" data-level="8.5.4" data-path="business-accounting.html"><a href="business-accounting.html#operating-income-ebit"><i class="fa fa-check"></i><b>8.5.4</b> Operating Income (EBIT)</a></li>
<li class="chapter" data-level="8.5.5" data-path="business-accounting.html"><a href="business-accounting.html#net-income-before-taxes-ebt"><i class="fa fa-check"></i><b>8.5.5</b> Net Income Before Taxes (EBT)</a></li>
<li class="chapter" data-level="8.5.6" data-path="business-accounting.html"><a href="business-accounting.html#net-income-eat"><i class="fa fa-check"></i><b>8.5.6</b> Net Income (EAT)</a></li>
<li class="chapter" data-level="8.5.7" data-path="business-accounting.html"><a href="business-accounting.html#transactions-1"><i class="fa fa-check"></i><b>8.5.7</b> Transactions</a></li>
<li class="chapter" data-level="8.5.8" data-path="business-accounting.html"><a href="business-accounting.html#corporate-income-tax"><i class="fa fa-check"></i><b>8.5.8</b> Corporate Income Tax</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="business-accounting.html"><a href="business-accounting.html#cash-flow-statement"><i class="fa fa-check"></i><b>8.6</b> Cash Flow Statement</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="business-accounting.html"><a href="business-accounting.html#operating-activities"><i class="fa fa-check"></i><b>8.6.1</b> Operating Activities</a></li>
<li class="chapter" data-level="8.6.2" data-path="business-accounting.html"><a href="business-accounting.html#investing-activities"><i class="fa fa-check"></i><b>8.6.2</b> Investing Activities</a></li>
<li class="chapter" data-level="8.6.3" data-path="business-accounting.html"><a href="business-accounting.html#financing-activities"><i class="fa fa-check"></i><b>8.6.3</b> Financing Activities</a></li>
<li class="chapter" data-level="8.6.4" data-path="business-accounting.html"><a href="business-accounting.html#net-change-in-cash"><i class="fa fa-check"></i><b>8.6.4</b> Net Change in Cash</a></li>
<li class="chapter" data-level="8.6.5" data-path="business-accounting.html"><a href="business-accounting.html#supplemental-information"><i class="fa fa-check"></i><b>8.6.5</b> Supplemental Information</a></li>
<li class="chapter" data-level="8.6.6" data-path="business-accounting.html"><a href="business-accounting.html#free-cash-flows"><i class="fa fa-check"></i><b>8.6.6</b> Free Cash Flows</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="business-accounting.html"><a href="business-accounting.html#conclusion-2"><i class="fa fa-check"></i><b>8.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html"><i class="fa fa-check"></i><b>9</b> Financial Performance Indicators</a>
<ul>
<li class="chapter" data-level="9.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#profitability-indicators"><i class="fa fa-check"></i><b>9.1</b> Profitability Indicators</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#net-profit-margin"><i class="fa fa-check"></i><b>9.1.1</b> Net Profit Margin</a></li>
<li class="chapter" data-level="9.1.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-assets-roa"><i class="fa fa-check"></i><b>9.1.2</b> Return on Assets (ROA)</a></li>
<li class="chapter" data-level="9.1.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-investment-roi"><i class="fa fa-check"></i><b>9.1.3</b> Return on Investment (ROI)</a></li>
<li class="chapter" data-level="9.1.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-equity-roe"><i class="fa fa-check"></i><b>9.1.4</b> Return on Equity (ROE)</a></li>
<li class="chapter" data-level="9.1.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#earnings-per-share-eps"><i class="fa fa-check"></i><b>9.1.5</b> Earnings Per Share (EPS)</a></li>
<li class="chapter" data-level="9.1.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#operating-margin"><i class="fa fa-check"></i><b>9.1.6</b> Operating Margin</a></li>
<li class="chapter" data-level="9.1.7" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#dividend-yield"><i class="fa fa-check"></i><b>9.1.7</b> Dividend Yield</a></li>
<li class="chapter" data-level="9.1.8" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#gross-profit-margin"><i class="fa fa-check"></i><b>9.1.8</b> Gross Profit Margin</a></li>
<li class="chapter" data-level="9.1.9" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#return-on-capital-employed-roce"><i class="fa fa-check"></i><b>9.1.9</b> Return on Capital Employed (ROCE)</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#liquidity-indicators"><i class="fa fa-check"></i><b>9.2</b> Liquidity Indicators</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#current-ratio"><i class="fa fa-check"></i><b>9.2.1</b> Current Ratio</a></li>
<li class="chapter" data-level="9.2.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#quick-ratio"><i class="fa fa-check"></i><b>9.2.2</b> Quick Ratio</a></li>
<li class="chapter" data-level="9.2.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#cash-ratio"><i class="fa fa-check"></i><b>9.2.3</b> Cash Ratio</a></li>
<li class="chapter" data-level="9.2.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#operating-cash-flow-ratio"><i class="fa fa-check"></i><b>9.2.4</b> Operating Cash Flow Ratio</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#leverage-indicators"><i class="fa fa-check"></i><b>9.3</b> Leverage Indicators</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#debt-to-equity-de-ratio"><i class="fa fa-check"></i><b>9.3.1</b> Debt-to-Equity (D/E) Ratio</a></li>
<li class="chapter" data-level="9.3.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#interest-coverage-ratio"><i class="fa fa-check"></i><b>9.3.2</b> Interest Coverage Ratio</a></li>
<li class="chapter" data-level="9.3.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#debt-ratio"><i class="fa fa-check"></i><b>9.3.3</b> Debt Ratio</a></li>
<li class="chapter" data-level="9.3.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#debt-to-capital-ratio"><i class="fa fa-check"></i><b>9.3.4</b> Debt-to-Capital Ratio</a></li>
<li class="chapter" data-level="9.3.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#equity-multiplier"><i class="fa fa-check"></i><b>9.3.5</b> Equity Multiplier</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#efficiency-indicators"><i class="fa fa-check"></i><b>9.4</b> Efficiency Indicators</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#asset-turnover-ratio"><i class="fa fa-check"></i><b>9.4.1</b> Asset Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#inventory-turnover-ratio"><i class="fa fa-check"></i><b>9.4.2</b> Inventory Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#receivables-turnover-ratio"><i class="fa fa-check"></i><b>9.4.3</b> Receivables Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#payables-turnover-ratio"><i class="fa fa-check"></i><b>9.4.4</b> Payables Turnover Ratio</a></li>
<li class="chapter" data-level="9.4.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#days-sales-outstanding-dso"><i class="fa fa-check"></i><b>9.4.5</b> Days Sales Outstanding (DSO)</a></li>
<li class="chapter" data-level="9.4.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#fixed-asset-turnover-ratio"><i class="fa fa-check"></i><b>9.4.6</b> Fixed Asset Turnover Ratio</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#valuation-indicators"><i class="fa fa-check"></i><b>9.5</b> Valuation Indicators</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-book-pb-ratio"><i class="fa fa-check"></i><b>9.5.1</b> Price-to-Book (P/B) Ratio</a></li>
<li class="chapter" data-level="9.5.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-earnings-pe-ratio"><i class="fa fa-check"></i><b>9.5.2</b> Price-to-Earnings (P/E) Ratio</a></li>
<li class="chapter" data-level="9.5.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-sales-ps-ratio"><i class="fa fa-check"></i><b>9.5.3</b> Price-to-Sales (P/S) Ratio</a></li>
<li class="chapter" data-level="9.5.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#enterprise-value-to-ebitda-evebitda"><i class="fa fa-check"></i><b>9.5.4</b> Enterprise Value-to-EBITDA (EV/EBITDA)</a></li>
<li class="chapter" data-level="9.5.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#dividend-yield-1"><i class="fa fa-check"></i><b>9.5.5</b> Dividend Yield</a></li>
<li class="chapter" data-level="9.5.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#price-to-cash-flow-pcf-ratio"><i class="fa fa-check"></i><b>9.5.6</b> Price-to-Cash Flow (P/CF) Ratio</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#cash-flow-indicators"><i class="fa fa-check"></i><b>9.6</b> Cash Flow Indicators</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#free-cash-flow-to-equity-fcfe-1"><i class="fa fa-check"></i><b>9.6.1</b> Free Cash Flow to Equity (FCFE)</a></li>
<li class="chapter" data-level="9.6.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#free-cash-flow-to-the-firm-fcff-1"><i class="fa fa-check"></i><b>9.6.2</b> Free Cash Flow to the Firm (FCFF)</a></li>
<li class="chapter" data-level="9.6.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#operating-cash-flow-ocf"><i class="fa fa-check"></i><b>9.6.3</b> Operating Cash Flow (OCF)</a></li>
<li class="chapter" data-level="9.6.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#fcf-margin"><i class="fa fa-check"></i><b>9.6.4</b> FCF Margin</a></li>
<li class="chapter" data-level="9.6.5" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#cash-conversion-cycle-ccc"><i class="fa fa-check"></i><b>9.6.5</b> Cash Conversion Cycle (CCC)</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#temporal-dimensions"><i class="fa fa-check"></i><b>9.7</b> Temporal Dimensions</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#trailing-twelve-months-ttm"><i class="fa fa-check"></i><b>9.7.1</b> Trailing Twelve Months (TTM)</a></li>
<li class="chapter" data-level="9.7.2" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#annual-reporting"><i class="fa fa-check"></i><b>9.7.2</b> Annual Reporting</a></li>
<li class="chapter" data-level="9.7.3" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#quarterly-and-monthly-reporting"><i class="fa fa-check"></i><b>9.7.3</b> Quarterly and Monthly Reporting</a></li>
<li class="chapter" data-level="9.7.4" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#example-and-explanation"><i class="fa fa-check"></i><b>9.7.4</b> Example and Explanation</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="financial-performance-indicators.html"><a href="financial-performance-indicators.html#conclusion-3"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html"><i class="fa fa-check"></i><b>10</b> Macroeconomic Accounting</a>
<ul>
<li class="chapter" data-level="10.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#important-terms-and-definitions"><i class="fa fa-check"></i><b>10.1</b> Important Terms and Definitions</a></li>
<li class="chapter" data-level="10.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#national-accounts"><i class="fa fa-check"></i><b>10.2</b> National Accounts</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#production-approach"><i class="fa fa-check"></i><b>10.2.1</b> Production Approach</a></li>
<li class="chapter" data-level="10.2.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#expenditure-approach"><i class="fa fa-check"></i><b>10.2.2</b> Expenditure Approach</a></li>
<li class="chapter" data-level="10.2.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#income-approach"><i class="fa fa-check"></i><b>10.2.3</b> Income Approach</a></li>
<li class="chapter" data-level="10.2.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#other-flow-measures"><i class="fa fa-check"></i><b>10.2.4</b> Other Flow Measures</a></li>
<li class="chapter" data-level="10.2.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#stock-measures"><i class="fa fa-check"></i><b>10.2.5</b> Stock Measures</a></li>
<li class="chapter" data-level="10.2.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#implicit-price-deflators"><i class="fa fa-check"></i><b>10.2.6</b> Implicit Price Deflators</a></li>
<li class="chapter" data-level="10.2.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection"><i class="fa fa-check"></i><b>10.2.7</b> Data Collection</a></li>
<li class="chapter" data-level="10.2.8" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources"><i class="fa fa-check"></i><b>10.2.8</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#balance-of-payments"><i class="fa fa-check"></i><b>10.3</b> Balance of Payments</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#current-account"><i class="fa fa-check"></i><b>10.3.1</b> Current Account</a></li>
<li class="chapter" data-level="10.3.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#capital-account"><i class="fa fa-check"></i><b>10.3.2</b> Capital Account</a></li>
<li class="chapter" data-level="10.3.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#financial-account"><i class="fa fa-check"></i><b>10.3.3</b> Financial Account</a></li>
<li class="chapter" data-level="10.3.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#stock-measures-1"><i class="fa fa-check"></i><b>10.3.4</b> Stock Measures</a></li>
<li class="chapter" data-level="10.3.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-1"><i class="fa fa-check"></i><b>10.3.5</b> Data Collection</a></li>
<li class="chapter" data-level="10.3.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-1"><i class="fa fa-check"></i><b>10.3.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#labor-market-accounts"><i class="fa fa-check"></i><b>10.4</b> Labor Market Accounts</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#labor-force"><i class="fa fa-check"></i><b>10.4.1</b> Labor Force</a></li>
<li class="chapter" data-level="10.4.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#employment-unemployment-and-hours-worked"><i class="fa fa-check"></i><b>10.4.2</b> Employment, Unemployment, and Hours Worked</a></li>
<li class="chapter" data-level="10.4.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#productivity-measures"><i class="fa fa-check"></i><b>10.4.3</b> Productivity Measures</a></li>
<li class="chapter" data-level="10.4.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#wage-and-labor-earnings"><i class="fa fa-check"></i><b>10.4.4</b> Wage and Labor Earnings</a></li>
<li class="chapter" data-level="10.4.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#job-vacancy-and-turnover-rate"><i class="fa fa-check"></i><b>10.4.5</b> Job Vacancy and Turnover Rate</a></li>
<li class="chapter" data-level="10.4.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#job-creation-and-destruction"><i class="fa fa-check"></i><b>10.4.6</b> Job Creation and Destruction</a></li>
<li class="chapter" data-level="10.4.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-2"><i class="fa fa-check"></i><b>10.4.7</b> Data Collection</a></li>
<li class="chapter" data-level="10.4.8" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-2"><i class="fa fa-check"></i><b>10.4.8</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#fiscal-accounts"><i class="fa fa-check"></i><b>10.5</b> Fiscal Accounts</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#government-budget"><i class="fa fa-check"></i><b>10.5.1</b> Government Budget</a></li>
<li class="chapter" data-level="10.5.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#types-of-taxes"><i class="fa fa-check"></i><b>10.5.2</b> Types of Taxes</a></li>
<li class="chapter" data-level="10.5.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#types-of-subsidies"><i class="fa fa-check"></i><b>10.5.3</b> Types of Subsidies</a></li>
<li class="chapter" data-level="10.5.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#non-tax-revenue"><i class="fa fa-check"></i><b>10.5.4</b> Non-Tax Revenue</a></li>
<li class="chapter" data-level="10.5.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-3"><i class="fa fa-check"></i><b>10.5.5</b> Data Collection</a></li>
<li class="chapter" data-level="10.5.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-3"><i class="fa fa-check"></i><b>10.5.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#monetary-and-financial-accounts"><i class="fa fa-check"></i><b>10.6</b> Monetary and Financial Accounts</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#monetary-aggregates"><i class="fa fa-check"></i><b>10.6.1</b> Monetary Aggregates</a></li>
<li class="chapter" data-level="10.6.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#interest-rates"><i class="fa fa-check"></i><b>10.6.2</b> Interest Rates</a></li>
<li class="chapter" data-level="10.6.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#banking-reserves"><i class="fa fa-check"></i><b>10.6.3</b> Banking Reserves</a></li>
<li class="chapter" data-level="10.6.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#credit-aggregates"><i class="fa fa-check"></i><b>10.6.4</b> Credit Aggregates</a></li>
<li class="chapter" data-level="10.6.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#exchange-rates"><i class="fa fa-check"></i><b>10.6.5</b> Exchange Rates</a></li>
<li class="chapter" data-level="10.6.6" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#parity-conditions"><i class="fa fa-check"></i><b>10.6.6</b> Parity Conditions</a></li>
<li class="chapter" data-level="10.6.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#industrial-production-and-capacity-utilization"><i class="fa fa-check"></i><b>10.6.7</b> Industrial Production and Capacity Utilization</a></li>
<li class="chapter" data-level="10.6.8" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-4"><i class="fa fa-check"></i><b>10.6.8</b> Data Collection</a></li>
<li class="chapter" data-level="10.6.9" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-4"><i class="fa fa-check"></i><b>10.6.9</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#price-level-and-inflation"><i class="fa fa-check"></i><b>10.7</b> Price Level and Inflation</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#implicit-measurement"><i class="fa fa-check"></i><b>10.7.1</b> Implicit Measurement</a></li>
<li class="chapter" data-level="10.7.2" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#direct-measurement"><i class="fa fa-check"></i><b>10.7.2</b> Direct Measurement</a></li>
<li class="chapter" data-level="10.7.3" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#inflation"><i class="fa fa-check"></i><b>10.7.3</b> Inflation</a></li>
<li class="chapter" data-level="10.7.4" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#data-collection-5"><i class="fa fa-check"></i><b>10.7.4</b> Data Collection</a></li>
<li class="chapter" data-level="10.7.5" data-path="macroeconomic-accounting.html"><a href="macroeconomic-accounting.html#resources-5"><i class="fa fa-check"></i><b>10.7.5</b> Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html"><i class="fa fa-check"></i><b>11</b> Financial Market Indicators</a>
<ul>
<li class="chapter" data-level="11.1" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#interest-rates-1"><i class="fa fa-check"></i><b>11.1</b> Interest Rates</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#import-csv-file"><i class="fa fa-check"></i><b>11.1.1</b> Import CSV File</a></li>
<li class="chapter" data-level="11.1.2" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#plotting-historical-yields"><i class="fa fa-check"></i><b>11.1.2</b> Plotting Historical Yields</a></li>
<li class="chapter" data-level="11.1.3" data-path="financial-market-indicators.html"><a href="financial-market-indicators.html#plotting-yield-curve"><i class="fa fa-check"></i><b>11.1.3</b> Plotting Yield Curve</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part III</b></span></li>
<li class="chapter" data-level="" data-path="part-iii.html"><a href="part-iii.html"><i class="fa fa-check"></i><em>Part III: Economic Data Processing</em></a></li>
<li class="chapter" data-level="12" data-path="data-categorization.html"><a href="data-categorization.html"><i class="fa fa-check"></i><b>12</b> Data Categorization</a>
<ul>
<li class="chapter" data-level="12.1" data-path="data-categorization.html"><a href="data-categorization.html#qualitative-vs.-quantitative"><i class="fa fa-check"></i><b>12.1</b> Qualitative vs. Quantitative</a></li>
<li class="chapter" data-level="12.2" data-path="data-categorization.html"><a href="data-categorization.html#discrete-vs.-continuous"><i class="fa fa-check"></i><b>12.2</b> Discrete vs. Continuous</a></li>
<li class="chapter" data-level="12.3" data-path="data-categorization.html"><a href="data-categorization.html#levels-of-measurement"><i class="fa fa-check"></i><b>12.3</b> Levels of Measurement</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="data-categorization.html"><a href="data-categorization.html#nominal-scale-variables"><i class="fa fa-check"></i><b>12.3.1</b> Nominal Scale Variables</a></li>
<li class="chapter" data-level="12.3.2" data-path="data-categorization.html"><a href="data-categorization.html#ordinal-scale-variables"><i class="fa fa-check"></i><b>12.3.2</b> Ordinal Scale Variables</a></li>
<li class="chapter" data-level="12.3.3" data-path="data-categorization.html"><a href="data-categorization.html#interval-scale-variables"><i class="fa fa-check"></i><b>12.3.3</b> Interval Scale Variables</a></li>
<li class="chapter" data-level="12.3.4" data-path="data-categorization.html"><a href="data-categorization.html#ratio-scale-variables"><i class="fa fa-check"></i><b>12.3.4</b> Ratio Scale Variables</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="data-categorization.html"><a href="data-categorization.html#index-vs.-absolute-data"><i class="fa fa-check"></i><b>12.4</b> Index vs. Absolute Data</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="data-categorization.html"><a href="data-categorization.html#index-data"><i class="fa fa-check"></i><b>12.4.1</b> Index Data</a></li>
<li class="chapter" data-level="12.4.2" data-path="data-categorization.html"><a href="data-categorization.html#absolute-data"><i class="fa fa-check"></i><b>12.4.2</b> Absolute Data</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="data-categorization.html"><a href="data-categorization.html#stock-vs.-flow"><i class="fa fa-check"></i><b>12.5</b> Stock vs. Flow</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="data-categorization.html"><a href="data-categorization.html#stock-variables"><i class="fa fa-check"></i><b>12.5.1</b> Stock Variables</a></li>
<li class="chapter" data-level="12.5.2" data-path="data-categorization.html"><a href="data-categorization.html#flow-variables"><i class="fa fa-check"></i><b>12.5.2</b> Flow Variables</a></li>
<li class="chapter" data-level="12.5.3" data-path="data-categorization.html"><a href="data-categorization.html#accounting"><i class="fa fa-check"></i><b>12.5.3</b> Accounting</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="data-categorization.html"><a href="data-categorization.html#data-dimensions"><i class="fa fa-check"></i><b>12.6</b> Data Dimensions</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="data-categorization.html"><a href="data-categorization.html#cross-sectional-data"><i class="fa fa-check"></i><b>12.6.1</b> Cross-Sectional Data</a></li>
<li class="chapter" data-level="12.6.2" data-path="data-categorization.html"><a href="data-categorization.html#time-series-data"><i class="fa fa-check"></i><b>12.6.2</b> Time Series Data</a></li>
<li class="chapter" data-level="12.6.3" data-path="data-categorization.html"><a href="data-categorization.html#panel-data"><i class="fa fa-check"></i><b>12.6.3</b> Panel Data</a></li>
<li class="chapter" data-level="12.6.4" data-path="data-categorization.html"><a href="data-categorization.html#spatial-data"><i class="fa fa-check"></i><b>12.6.4</b> Spatial Data</a></li>
<li class="chapter" data-level="12.6.5" data-path="data-categorization.html"><a href="data-categorization.html#clustered-data"><i class="fa fa-check"></i><b>12.6.5</b> Clustered Data</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="data-categorization.html"><a href="data-categorization.html#conclusion-data-categorization"><i class="fa fa-check"></i><b>12.7</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>13</b> Data Transformation</a>
<ul>
<li class="chapter" data-level="13.1" data-path="data-transformation.html"><a href="data-transformation.html#example-data"><i class="fa fa-check"></i><b>13.1</b> Example Data</a></li>
<li class="chapter" data-level="13.2" data-path="data-transformation.html"><a href="data-transformation.html#growth"><i class="fa fa-check"></i><b>13.2</b> Growth</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-growth-rates"><i class="fa fa-check"></i><b>13.2.1</b> Definition</a></li>
<li class="chapter" data-level="13.2.2" data-path="data-transformation.html"><a href="data-transformation.html#log-approximation"><i class="fa fa-check"></i><b>13.2.2</b> Log Approximation</a></li>
<li class="chapter" data-level="13.2.3" data-path="data-transformation.html"><a href="data-transformation.html#relativity"><i class="fa fa-check"></i><b>13.2.3</b> Relativity</a></li>
<li class="chapter" data-level="13.2.4" data-path="data-transformation.html"><a href="data-transformation.html#return-and-inflation"><i class="fa fa-check"></i><b>13.2.4</b> Return and Inflation</a></li>
<li class="chapter" data-level="13.2.5" data-path="data-transformation.html"><a href="data-transformation.html#applicability-growth"><i class="fa fa-check"></i><b>13.2.5</b> Applicability</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="data-transformation.html"><a href="data-transformation.html#differentiation"><i class="fa fa-check"></i><b>13.3</b> Differentiation</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-differentiation"><i class="fa fa-check"></i><b>13.3.1</b> Definition</a></li>
<li class="chapter" data-level="13.3.2" data-path="data-transformation.html"><a href="data-transformation.html#pp"><i class="fa fa-check"></i><b>13.3.2</b> Percentage Points (pp)</a></li>
<li class="chapter" data-level="13.3.3" data-path="data-transformation.html"><a href="data-transformation.html#bp"><i class="fa fa-check"></i><b>13.3.3</b> Basis Points (bp)</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="data-transformation.html"><a href="data-transformation.html#log"><i class="fa fa-check"></i><b>13.4</b> Natural Logarithm</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-natural-logarithm"><i class="fa fa-check"></i><b>13.4.1</b> Definition</a></li>
<li class="chapter" data-level="13.4.2" data-path="data-transformation.html"><a href="data-transformation.html#motivation-natural-logarithm"><i class="fa fa-check"></i><b>13.4.2</b> Motivation</a></li>
<li class="chapter" data-level="13.4.3" data-path="data-transformation.html"><a href="data-transformation.html#applicability-natural-logarithm"><i class="fa fa-check"></i><b>13.4.3</b> Applicability</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="data-transformation.html"><a href="data-transformation.html#ratio"><i class="fa fa-check"></i><b>13.5</b> Ratio</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="data-transformation.html"><a href="data-transformation.html#definition-ratio"><i class="fa fa-check"></i><b>13.5.1</b> Definition</a></li>
<li class="chapter" data-level="13.5.2" data-path="data-transformation.html"><a href="data-transformation.html#per-capita"><i class="fa fa-check"></i><b>13.5.2</b> Per Capita</a></li>
<li class="chapter" data-level="13.5.3" data-path="data-transformation.html"><a href="data-transformation.html#real-vs.-nominal"><i class="fa fa-check"></i><b>13.5.3</b> Real vs. Nominal</a></li>
<li class="chapter" data-level="13.5.4" data-path="data-transformation.html"><a href="data-transformation.html#growth-of-ratios"><i class="fa fa-check"></i><b>13.5.4</b> Growth of Ratios</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="data-transformation.html"><a href="data-transformation.html#gap"><i class="fa fa-check"></i><b>13.6</b> Gap</a></li>
<li class="chapter" data-level="13.7" data-path="data-transformation.html"><a href="data-transformation.html#filtering"><i class="fa fa-check"></i><b>13.7</b> Filtering</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="data-transformation.html"><a href="data-transformation.html#frequency-filtering"><i class="fa fa-check"></i><b>13.7.1</b> Frequency Filtering</a></li>
<li class="chapter" data-level="13.7.2" data-path="data-transformation.html"><a href="data-transformation.html#detrending"><i class="fa fa-check"></i><b>13.7.2</b> Detrending</a></li>
<li class="chapter" data-level="13.7.3" data-path="data-transformation.html"><a href="data-transformation.html#seasonal-adjustment"><i class="fa fa-check"></i><b>13.7.3</b> Seasonal Adjustment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="statistical-measures.html"><a href="statistical-measures.html"><i class="fa fa-check"></i><b>14</b> Statistical Measures</a></li>
<li class="chapter" data-level="15" data-path="data-aggregation.html"><a href="data-aggregation.html"><i class="fa fa-check"></i><b>15</b> Data Aggregation</a>
<ul>
<li class="chapter" data-level="15.1" data-path="data-aggregation.html"><a href="data-aggregation.html#annualization"><i class="fa fa-check"></i><b>15.1</b> Annualization</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="data-aggregation.html"><a href="data-aggregation.html#motivation"><i class="fa fa-check"></i><b>15.1.1</b> Motivation</a></li>
<li class="chapter" data-level="15.1.2" data-path="data-aggregation.html"><a href="data-aggregation.html#annualized-flow-variables"><i class="fa fa-check"></i><b>15.1.2</b> Annualized Flow Variables</a></li>
<li class="chapter" data-level="15.1.3" data-path="data-aggregation.html"><a href="data-aggregation.html#annualized-growth-rates"><i class="fa fa-check"></i><b>15.1.3</b> Annualized Growth Rates</a></li>
<li class="chapter" data-level="15.1.4" data-path="data-aggregation.html"><a href="data-aggregation.html#annualized-log-difference"><i class="fa fa-check"></i><b>15.1.4</b> Annualized Log-Difference</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="data-aggregation.html"><a href="data-aggregation.html#yoy"><i class="fa fa-check"></i><b>15.2</b> Year over Year (YoY)</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="data-aggregation.html"><a href="data-aggregation.html#year-over-year-yoy-growth-rates"><i class="fa fa-check"></i><b>15.2.1</b> Year over Year (YoY) Growth Rates</a></li>
<li class="chapter" data-level="15.2.2" data-path="data-aggregation.html"><a href="data-aggregation.html#comparing-yoy-measures-with-moving-averages"><i class="fa fa-check"></i><b>15.2.2</b> Comparing YoY Measures with Moving Averages</a></li>
<li class="chapter" data-level="15.2.3" data-path="data-aggregation.html"><a href="data-aggregation.html#sliding-window-vs.-fixed-window-aggregation"><i class="fa fa-check"></i><b>15.2.3</b> Sliding Window vs. Fixed Window Aggregation</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part IV</b></span></li>
<li class="chapter" data-level="" data-path="part-iv.html"><a href="part-iv.html"><i class="fa fa-check"></i><em>Part IV: Patterns in Economics</em></a></li>
<li class="chapter" data-level="16" data-path="temporal-patterns.html"><a href="temporal-patterns.html"><i class="fa fa-check"></i><b>16</b> Temporal Patterns</a>
<ul>
<li class="chapter" data-level="16.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#time-series-data-1"><i class="fa fa-check"></i><b>16.1</b> Time Series Data</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#definition"><i class="fa fa-check"></i><b>16.1.1</b> Definition</a></li>
<li class="chapter" data-level="16.1.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#features"><i class="fa fa-check"></i><b>16.1.2</b> Features</a></li>
<li class="chapter" data-level="16.1.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#visualization"><i class="fa fa-check"></i><b>16.1.3</b> Visualization</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#trend"><i class="fa fa-check"></i><b>16.2</b> Trend</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#sustained-growth"><i class="fa fa-check"></i><b>16.2.1</b> Sustained Growth</a></li>
<li class="chapter" data-level="16.2.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#decrease-in-poverty"><i class="fa fa-check"></i><b>16.2.2</b> Decrease in Poverty</a></li>
<li class="chapter" data-level="16.2.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#aging-population"><i class="fa fa-check"></i><b>16.2.3</b> Aging Population</a></li>
<li class="chapter" data-level="16.2.4" data-path="temporal-patterns.html"><a href="temporal-patterns.html#productivity-labor-trade-off"><i class="fa fa-check"></i><b>16.2.4</b> Productivity-Labor Trade-Off</a></li>
<li class="chapter" data-level="16.2.5" data-path="temporal-patterns.html"><a href="temporal-patterns.html#trend-inflation"><i class="fa fa-check"></i><b>16.2.5</b> Trend Inflation</a></li>
<li class="chapter" data-level="16.2.6" data-path="temporal-patterns.html"><a href="temporal-patterns.html#decline-in-labor-share"><i class="fa fa-check"></i><b>16.2.6</b> Decline in Labor Share</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#seasonality"><i class="fa fa-check"></i><b>16.3</b> Seasonality</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#holiday-season"><i class="fa fa-check"></i><b>16.3.1</b> Holiday Season</a></li>
<li class="chapter" data-level="16.3.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#seasonal-weather"><i class="fa fa-check"></i><b>16.3.2</b> Seasonal Weather</a></li>
<li class="chapter" data-level="16.3.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#seasonal-employment"><i class="fa fa-check"></i><b>16.3.3</b> Seasonal Employment</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="temporal-patterns.html"><a href="temporal-patterns.html#business-cycle"><i class="fa fa-check"></i><b>16.4</b> Business Cycle</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="temporal-patterns.html"><a href="temporal-patterns.html#costs-of-business-cycles"><i class="fa fa-check"></i><b>16.4.1</b> Costs of Business Cycles</a></li>
<li class="chapter" data-level="16.4.2" data-path="temporal-patterns.html"><a href="temporal-patterns.html#cyclicality-and-timing"><i class="fa fa-check"></i><b>16.4.2</b> Cyclicality and Timing</a></li>
<li class="chapter" data-level="16.4.3" data-path="temporal-patterns.html"><a href="temporal-patterns.html#consumption-smoothing"><i class="fa fa-check"></i><b>16.4.3</b> Consumption Smoothing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="regional-patterns.html"><a href="regional-patterns.html"><i class="fa fa-check"></i><b>17</b> Regional Patterns</a>
<ul>
<li class="chapter" data-level="17.1" data-path="regional-patterns.html"><a href="regional-patterns.html#regional-data"><i class="fa fa-check"></i><b>17.1</b> Regional Data</a></li>
<li class="chapter" data-level="17.2" data-path="regional-patterns.html"><a href="regional-patterns.html#county-level-patterns"><i class="fa fa-check"></i><b>17.2</b> County-Level Patterns</a></li>
<li class="chapter" data-level="17.3" data-path="regional-patterns.html"><a href="regional-patterns.html#state-level-patterns"><i class="fa fa-check"></i><b>17.3</b> State-Level Patterns</a></li>
<li class="chapter" data-level="17.4" data-path="regional-patterns.html"><a href="regional-patterns.html#country-level-patterns"><i class="fa fa-check"></i><b>17.4</b> Country-Level Patterns</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html"><i class="fa fa-check"></i><b>18</b> Microeconomic Patterns</a>
<ul>
<li class="chapter" data-level="18.1" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html#microeconomic-data"><i class="fa fa-check"></i><b>18.1</b> Microeconomic Data</a></li>
<li class="chapter" data-level="18.2" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html#firm-patterns"><i class="fa fa-check"></i><b>18.2</b> Firm Patterns</a></li>
<li class="chapter" data-level="18.3" data-path="microeconomic-patterns.html"><a href="microeconomic-patterns.html#household-patterns"><i class="fa fa-check"></i><b>18.3</b> Household Patterns</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="causal-relationships.html"><a href="causal-relationships.html"><i class="fa fa-check"></i><b>19</b> Causal Relationships</a>
<ul>
<li class="chapter" data-level="19.1" data-path="causal-relationships.html"><a href="causal-relationships.html#elasticities"><i class="fa fa-check"></i><b>19.1</b> Elasticities</a></li>
<li class="chapter" data-level="19.2" data-path="causal-relationships.html"><a href="causal-relationships.html#multipliers"><i class="fa fa-check"></i><b>19.2</b> Multipliers</a></li>
<li class="chapter" data-level="19.3" data-path="causal-relationships.html"><a href="causal-relationships.html#causality"><i class="fa fa-check"></i><b>19.3</b> Causality</a></li>
</ul></li>
<li class="part"><span><b>Part V</b></span></li>
<li class="chapter" data-level="" data-path="part-v.html"><a href="part-v.html"><i class="fa fa-check"></i><em>Part V: Insights From Real-Time Data and Surveys</em></a></li>
<li class="chapter" data-level="20" data-path="why-subjective-information-matters.html"><a href="why-subjective-information-matters.html"><i class="fa fa-check"></i><b>20</b> Why Subjective Information Matters</a></li>
<li class="chapter" data-level="21" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html"><i class="fa fa-check"></i><b>21</b> Insights From Consumer Surveys</a>
<ul>
<li class="chapter" data-level="21.1" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#introduction-1"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#conducting-the-survey"><i class="fa fa-check"></i><b>21.2</b> Conducting the Survey</a></li>
<li class="chapter" data-level="21.3" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#michigan-consumer-indices"><i class="fa fa-check"></i><b>21.3</b> Michigan Consumer Indices</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#index-of-consumer-sentiment-ics"><i class="fa fa-check"></i><b>21.3.1</b> Index of Consumer Sentiment (ICS)</a></li>
<li class="chapter" data-level="21.3.2" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#index-of-current-economic-conditions-icc"><i class="fa fa-check"></i><b>21.3.2</b> Index of Current Economic Conditions (ICC)</a></li>
<li class="chapter" data-level="21.3.3" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#index-of-consumer-expectations-ice"><i class="fa fa-check"></i><b>21.3.3</b> Index of Consumer Expectations (ICE)</a></li>
<li class="chapter" data-level="21.3.4" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#importing-in-r"><i class="fa fa-check"></i><b>21.3.4</b> Importing in R</a></li>
<li class="chapter" data-level="21.3.5" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#import-tsv-file"><i class="fa fa-check"></i><b>21.3.5</b> Import TSV File</a></li>
<li class="chapter" data-level="21.3.6" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#plotting-consumer-indices"><i class="fa fa-check"></i><b>21.3.6</b> Plotting Consumer Indices</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#creating-custom-consumer-indices"><i class="fa fa-check"></i><b>21.4</b> Creating Custom Consumer Indices</a></li>
<li class="chapter" data-level="21.5" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#importing-and-cleaning-individual-level-surveys"><i class="fa fa-check"></i><b>21.5</b> Importing and Cleaning Individual-Level Surveys</a>
<ul>
<li class="chapter" data-level="21.5.1" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#data-source-1"><i class="fa fa-check"></i><b>21.5.1</b> Data Source</a></li>
<li class="chapter" data-level="21.5.2" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#data-labels"><i class="fa fa-check"></i><b>21.5.2</b> Data Labels</a></li>
<li class="chapter" data-level="21.5.3" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#importing-the-data-set"><i class="fa fa-check"></i><b>21.5.3</b> Importing the Data Set</a></li>
<li class="chapter" data-level="21.5.4" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#long-format"><i class="fa fa-check"></i><b>21.5.4</b> Long Format</a></li>
<li class="chapter" data-level="21.5.5" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#saving-the-data"><i class="fa fa-check"></i><b>21.5.5</b> Saving the Data</a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#exploring-individual-level-data"><i class="fa fa-check"></i><b>21.6</b> Exploring Individual-Level Data</a></li>
<li class="chapter" data-level="21.7" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#replicate-ics"><i class="fa fa-check"></i><b>21.7</b> Replicate ICS</a></li>
<li class="chapter" data-level="21.8" data-path="insights-from-consumer-surveys.html"><a href="insights-from-consumer-surveys.html#conclusion-4"><i class="fa fa-check"></i><b>21.8</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="insights-from-real-time-data.html"><a href="insights-from-real-time-data.html"><i class="fa fa-check"></i><b>22</b> Insights From Real-Time Data</a></li>
<li class="chapter" data-level="23" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html"><i class="fa fa-check"></i><b>23</b> Insights From Forecaster Data</a>
<ul>
<li class="chapter" data-level="23.1" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#tealbook"><i class="fa fa-check"></i><b>23.1</b> Tealbook</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#import-excel-workbook-1"><i class="fa fa-check"></i><b>23.1.1</b> Import Excel Workbook</a></li>
<li class="chapter" data-level="23.1.2" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#nowcast-and-backcast"><i class="fa fa-check"></i><b>23.1.2</b> Nowcast and Backcast</a></li>
<li class="chapter" data-level="23.1.3" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#information-date-and-realization-date"><i class="fa fa-check"></i><b>23.1.3</b> Information Date and Realization Date</a></li>
<li class="chapter" data-level="23.1.4" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#plotting-forecasts"><i class="fa fa-check"></i><b>23.1.4</b> Plotting Forecasts</a></li>
<li class="chapter" data-level="23.1.5" data-path="insights-from-forecaster-data.html"><a href="insights-from-forecaster-data.html#plotting-forecast-errors"><i class="fa fa-check"></i><b>23.1.5</b> Plotting Forecast Errors</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part VI</b></span></li>
<li class="chapter" data-level="" data-path="part-vi.html"><a href="part-vi.html"><i class="fa fa-check"></i><em>Part VI: Insights From Textual Data</em></a></li>
<li class="chapter" data-level="24" data-path="text-analysis-and-mining.html"><a href="text-analysis-and-mining.html"><i class="fa fa-check"></i><b>24</b> Text Analysis and Mining</a></li>
<li class="chapter" data-level="25" data-path="insights-from-google-trends.html"><a href="insights-from-google-trends.html"><i class="fa fa-check"></i><b>25</b> Insights From Google Trends</a></li>
<li class="chapter" data-level="26" data-path="insights-from-newspapers.html"><a href="insights-from-newspapers.html"><i class="fa fa-check"></i><b>26</b> Insights From Newspapers</a></li>
<li class="chapter" data-level="27" data-path="insights-from-social-media.html"><a href="insights-from-social-media.html"><i class="fa fa-check"></i><b>27</b> Insights From Social Media</a></li>
<li class="appendix"><span><b>Modules</b></span></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i>Modules Overview</a></li>
<li class="chapter" data-level="" data-path="textbook.html"><a href="textbook.html"><i class="fa fa-check"></i>Textbook Engagement</a></li>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html"><i class="fa fa-check"></i>Learn R with DataCamp</a>
<ul>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html#prepare-for-the-course"><i class="fa fa-check"></i>Prepare for the Course</a></li>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html#xp-system-and-course-completion"><i class="fa fa-check"></i>XP System and Course Completion</a></li>
<li class="chapter" data-level="" data-path="datacamp.html"><a href="datacamp.html#develop-your-skills"><i class="fa fa-check"></i>Develop Your Skills</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html"><i class="fa fa-check"></i>Data Report Instructions</a>
<ul>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-versions"><i class="fa fa-check"></i>Versions of the Data Report</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-standards"><i class="fa fa-check"></i>Standards for the Two PDFs</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-collaboration"><i class="fa fa-check"></i>Collaboration Guidelines</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-example"><i class="fa fa-check"></i>Example of a Data Report</a></li>
<li class="chapter" data-level="" data-path="datareport.html"><a href="datareport.html#datareport-final-remarks"><i class="fa fa-check"></i>Final Remarks</a></li>
</ul></li>
<li class="chapter" data-level="A" data-path="module-a.html"><a href="module-a.html"><i class="fa fa-check"></i><b>A</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="A.1" data-path="module-a.html"><a href="module-a.html#overview-a"><i class="fa fa-check"></i><b>A.1</b> Overview</a></li>
<li class="chapter" data-level="A.2" data-path="module-a.html"><a href="module-a.html#objectives-a"><i class="fa fa-check"></i><b>A.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="A.3" data-path="module-a.html"><a href="module-a.html#activities-a"><i class="fa fa-check"></i><b>A.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="A.4" data-path="module-a.html"><a href="module-a.html#report-a"><i class="fa fa-check"></i><b>A.4</b> Data Report on Stock Returns</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="module-b.html"><a href="module-b.html"><i class="fa fa-check"></i><b>B</b> Financial Performance Indicators</a>
<ul>
<li class="chapter" data-level="B.1" data-path="module-b.html"><a href="module-b.html#overview-b"><i class="fa fa-check"></i><b>B.1</b> Overview</a></li>
<li class="chapter" data-level="B.2" data-path="module-b.html"><a href="module-b.html#objectives-b"><i class="fa fa-check"></i><b>B.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="B.3" data-path="module-b.html"><a href="module-b.html#activities-b"><i class="fa fa-check"></i><b>B.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="B.4" data-path="module-b.html"><a href="module-b.html#report-b"><i class="fa fa-check"></i><b>B.4</b> Data Report on Financial Performance Indicators</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="module-c.html"><a href="module-c.html"><i class="fa fa-check"></i><b>C</b> Macroeconomic Accounting</a>
<ul>
<li class="chapter" data-level="C.1" data-path="module-c.html"><a href="module-c.html#overview-c"><i class="fa fa-check"></i><b>C.1</b> Overview</a></li>
<li class="chapter" data-level="C.2" data-path="module-c.html"><a href="module-c.html#objectives-c"><i class="fa fa-check"></i><b>C.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="C.3" data-path="module-c.html"><a href="module-c.html#activities-c"><i class="fa fa-check"></i><b>C.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="C.4" data-path="module-c.html"><a href="module-c.html#report-c"><i class="fa fa-check"></i><b>C.4</b> Data Report on Macroeconomic Indicators</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="module-d.html"><a href="module-d.html"><i class="fa fa-check"></i><b>D</b> Financial Market Indicators</a>
<ul>
<li class="chapter" data-level="D.1" data-path="module-d.html"><a href="module-d.html#overview-d"><i class="fa fa-check"></i><b>D.1</b> Overview</a></li>
<li class="chapter" data-level="D.2" data-path="module-d.html"><a href="module-d.html#objectives-d"><i class="fa fa-check"></i><b>D.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="D.3" data-path="module-d.html"><a href="module-d.html#activities-d"><i class="fa fa-check"></i><b>D.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="D.4" data-path="module-d.html"><a href="module-d.html#report-d"><i class="fa fa-check"></i><b>D.4</b> Data Report on Yield Curves</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="module-e.html"><a href="module-e.html"><i class="fa fa-check"></i><b>E</b> Economic Data Processing</a>
<ul>
<li class="chapter" data-level="E.1" data-path="module-e.html"><a href="module-e.html#overview-e"><i class="fa fa-check"></i><b>E.1</b> Overview</a></li>
<li class="chapter" data-level="E.2" data-path="module-e.html"><a href="module-e.html#objectives-e"><i class="fa fa-check"></i><b>E.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="E.3" data-path="module-e.html"><a href="module-e.html#activities-e"><i class="fa fa-check"></i><b>E.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="E.4" data-path="module-e.html"><a href="module-e.html#report-e"><i class="fa fa-check"></i><b>E.4</b> Data Report on Economic Growth</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="module-f.html"><a href="module-f.html"><i class="fa fa-check"></i><b>F</b> Temporal Patterns in Economics</a>
<ul>
<li class="chapter" data-level="F.1" data-path="module-f.html"><a href="module-f.html#overview-f"><i class="fa fa-check"></i><b>F.1</b> Overview</a></li>
<li class="chapter" data-level="F.2" data-path="module-f.html"><a href="module-f.html#objectives-f"><i class="fa fa-check"></i><b>F.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="F.3" data-path="module-f.html"><a href="module-f.html#activities-f"><i class="fa fa-check"></i><b>F.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="F.4" data-path="module-f.html"><a href="module-f.html#report-f"><i class="fa fa-check"></i><b>F.4</b> Data Report on Temporal Patterns</a></li>
</ul></li>
<li class="chapter" data-level="G" data-path="module-g.html"><a href="module-g.html"><i class="fa fa-check"></i><b>G</b> Regional Patterns in Economics</a>
<ul>
<li class="chapter" data-level="G.1" data-path="module-g.html"><a href="module-g.html#overview-g"><i class="fa fa-check"></i><b>G.1</b> Overview</a></li>
<li class="chapter" data-level="G.2" data-path="module-g.html"><a href="module-g.html#objectives-g"><i class="fa fa-check"></i><b>G.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="G.3" data-path="module-g.html"><a href="module-g.html#activities-g"><i class="fa fa-check"></i><b>G.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="G.4" data-path="module-g.html"><a href="module-g.html#report-g"><i class="fa fa-check"></i><b>G.4</b> Data Report on Regional Patterns</a></li>
</ul></li>
<li class="chapter" data-level="H" data-path="module-h.html"><a href="module-h.html"><i class="fa fa-check"></i><b>H</b> Insights From Consumer Surveys</a>
<ul>
<li class="chapter" data-level="H.1" data-path="module-h.html"><a href="module-h.html#overview-h"><i class="fa fa-check"></i><b>H.1</b> Overview</a></li>
<li class="chapter" data-level="H.2" data-path="module-h.html"><a href="module-h.html#objectives-h"><i class="fa fa-check"></i><b>H.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="H.3" data-path="module-h.html"><a href="module-h.html#activities-h"><i class="fa fa-check"></i><b>H.3</b> Learning Activities &amp; Assessments</a></li>
<li class="chapter" data-level="H.4" data-path="module-h.html"><a href="module-h.html#report-h"><i class="fa fa-check"></i><b>H.4</b> Data Report on Consumer Indices</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><em>References</em></a></li>
<li class="divider"></li>
<li><a href="https://www.julianfludwig.com/" target="blank">Julian F. Ludwig</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Economic Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="process-data-in-r" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Process Data in R<a href="process-data-in-r.html#process-data-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>R specializes in <strong>data processing</strong>, encompassing a wide range of operations such as downloading, importing, cleaning, merging, transforming, summarizing, analyzing, and visualizing data. Previous chapters have introduced the core functions for performing these tasks (refer to Chapter <a href="r-basics.html#r-basics">3</a> and <a href="data-structures-in-r.html#data-structures-in-r">4</a>). This chapter takes a practical approach by applying these concepts to real financial datasets in three illustrative examples. The key tools introduced in each example are summarized in Table <a href="process-data-in-r.html#tab:process-data-examples">5.1</a>.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:process-data-examples">Table 5.1: </span>Data Processing Examples
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Data
</th>
<th style="text-align:center;">
Import Format
</th>
<th style="text-align:left;">
Tasks
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<ol style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Bitcoin prices
</td>
<td style="text-align:center;">
DSV file</li>
</ol>
<p><span class="math inline">\(\downarrow\)</span></p>
<code>data.frame</code>
</td>
<td style="text-align:left;">
<ul>
<li>
Import CSV file as a data frame
</li>
<li>
Inspect and clean data
</li>
<li>
Visualize data with a line graph
</li>
<li>
Export data as RDS and DSV files
</li>
</ul>
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="2" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Stock and oil prices
</td>
<td style="text-align:center;">
Web API data</li>
</ol>
<p><span class="math inline">\(\downarrow\)</span></p>
<code>xts</code>
</td>
<td style="text-align:left;">
<ul>
<li>
Import via Web API as an <code>xts</code> object
</li>
<li>
Use <code>quantmod</code> and <code>Quandl</code> for API import
</li>
<li>
Manipulate data with <code>xts</code> functions
</li>
<li>
Visualize two variables in a single line graph
</li>
<li>
Tabulate key statistics
</li>
<li>
Visualize correlations with scatter plots
</li>
</ul>
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="3" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
House prices
</td>
<td style="text-align:center;">
Excel workbook</li>
</ol>
<p><span class="math inline">\(\downarrow\)</span></p>
<code>tibble</code>
</td>
<td style="text-align:left;">
<ul>
<li>
Import Excel workbook as a <code>tibble</code>
</li>
<li>
Manipulate data with <code>tidyverse</code> functions
</li>
<li>
Reshape data from wide to long format
</li>
<li>
Visualize data with layered line graphs
</li>
<li>
Introduce the <code>ggplot2</code> package for plotting
</li>
<li>
Merge house prices with policy rates
</li>
<li>
Compute and visualize key statistics
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>As shown in Table <a href="process-data-in-r.html#tab:process-data-examples">5.1</a>, each example leverages different file types, data structures, and tools. <a href="process-data-in-r.html#process-bitcoin-price-data">Example 1</a> manipulates data frames using base R, as introduced in Chapter @ref(data.frame). <a href="process-data-in-r.html#process-stock-and-oil-prices">Example 2</a> employs <code>xts</code> objects, detailed in Chapter <a href="data-structures-in-r.html#xts">4.8</a>. <a href="process-data-in-r.html#process-house-price-data">Example 3</a> utilizes Tidyverse functions on tibbles, as discussed in Chapter <a href="data-structures-in-r.html#tibble">4.6</a>.</p>
<p>New in this chapter is the focus on data import methods. <a href="process-data-in-r.html#process-bitcoin-price-data">Example 1</a> deals with DSV files, including CSV and TSV. <a href="process-data-in-r.html#process-stock-and-oil-prices">Example 2</a> retrieves data via Web API. <a href="process-data-in-r.html#process-house-price-data">Example 3</a> deals with Excel workbooks. For importing data formats not covered here, search “import data in R” along with the format name in Google. You’ll likely find a dedicated package for the task. For instance, the <code>DBI</code> and <code>RSQLite</code> packages facilitate SQL database imports, while <code>haven</code> enables importing SPSS, SAS, and Stata files.</p>
<p>Additionally, this chapter expands on visualization methods beyond those covered in Chapter <a href="r-basics.html#graphs">3.4</a>. For instance, <a href="process-data-in-r.html#process-stock-and-oil-prices">Example 2</a> introduces <code>plot.zoo()</code> for graphing <code>xts</code> objects, and <a href="process-data-in-r.html#process-house-price-data">Example 3</a> incorporates advanced plotting via the <code>ggplot2</code> package.</p>
<div id="process-bitcoin-price-data" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Process Bitcoin Price Data<a href="process-data-in-r.html#process-bitcoin-price-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section demonstrates how to process Bitcoin prices from the Bitstamp exchange, obtained from CryptoDataDownload <span class="citation">(<a href="#ref-data-bitstamp-btcusd">Bitstamp 2024</a>)</span>. Once the data is downloaded as a CSV file, it is imported into R. The date column undergoes conversion to a <code>POSIXct</code> data type. Subsequently, the data is visualized and exported in both RDS and CSV formats.</p>
<div id="download-dsv-file" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Download DSV File<a href="process-data-in-r.html#download-dsv-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The procedure to obtain this dataset is detailed in Chapter <a href="r-basics.html#download-files">3.7.3</a>. Briefly:</p>
<ol style="list-style-type: decimal">
<li>Visit <a href="https://www.cryptodatadownload.com">www.cryptodatadownload.com</a>.</li>
<li>Navigate to “Historical Data” &gt; “US &amp; UK Exchanges”.</li>
<li>Click on “Bitstamp”, then find the “Bitstamp minute data broken down by year” section.</li>
<li>Choose “BTC/USD 2023 minute” and click “Download CSV”.</li>
</ol>
<p>After downloading, ensure you place the file in your R <strong>working directory</strong>, specifically inside a folder named “files”, and rename the file to <code>BTCUSD_minute.csv</code>. For information on how to identify and set your working directory, refer to Chapters <a href="r-basics.html#find-folder-path">3.7.1</a> and <a href="r-basics.html#set-working-directory">3.7.2</a>.</p>
</div>
<div id="import-dsv-file" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Import DSV File<a href="process-data-in-r.html#import-dsv-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, datasets are primarily stored and manipulated using two-dimensional structures such as matrices and data frames, complemented by extensions such as tibbles, data tables, and <code>xts</code> objects. Various functions exist for importing external datasets into R. The choice of function depends both on the external dataset’s format, whether CSV, Excel, or XML, and the intended data structure in R, whether a data frame, matrix, tibble, or <code>xts</code> object.</p>
<p><strong>DSV</strong> (<strong>delimiter-separated values</strong>) is a common file format used to store tabular data. As the name suggests, the values in each row of a DSV file are separated by a <strong>delimiter</strong>. This delimiter is a sequence of one or more characters used to specify the boundary between separate, independent regions in a data table. Depending on the character used as a delimiter, different notations emerge, such as <strong>CSV</strong> (comma-separated values) and <strong>TSV</strong> (tab-separated values). Sometimes semicolons, spaces, or other characters are used as delimiters in similar formats.</p>
<p>Here’s an example of how data is stored in a CSV file:</p>
<pre><code>Gender, Age, Score, Rank
Male, 25, 100, 3
Female, 22, 90, 4</code></pre>
<p>And for a TSV file, the data would look like this:</p>
<pre><code>Gender    Age    Score    Rank
Male    25    100    3
Female    22    90    4</code></pre>
<p>Note the use of tabs in the TSV example to separate the data fields, in contrast to the commas used in the CSV example.</p>
<p>To read DSV files into R and convert them to data frames, the <code>read.table()</code> function comes in handy. The function has several arguments that allow customization based on the structure and specifics of your DSV file. Before importing, it’s advisable to preview your DSV file in a spreadsheet program like Microsoft Excel to understand its layout and structure.</p>
<p>Here’s an illustration of how to employ the function using the downloaded <code>BTCUSD_minute.csv</code> file:</p>
<div class="sourceCode" id="cb916"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb916-1"><a href="process-data-in-r.html#cb916-1" tabindex="-1"></a><span class="co"># Load DSV file containing Bitcoin prices</span></span>
<span id="cb916-2"><a href="process-data-in-r.html#cb916-2" tabindex="-1"></a>btcusd <span class="ot">&lt;-</span> <span class="fu">read.table</span>(</span>
<span id="cb916-3"><a href="process-data-in-r.html#cb916-3" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">&quot;files/BTCUSD_minute.csv&quot;</span>,</span>
<span id="cb916-4"><a href="process-data-in-r.html#cb916-4" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>,         <span class="co"># Delimiter is a comma (CSV)</span></span>
<span id="cb916-5"><a href="process-data-in-r.html#cb916-5" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,     <span class="co"># The file has a header row with column names</span></span>
<span id="cb916-6"><a href="process-data-in-r.html#cb916-6" tabindex="-1"></a>    <span class="at">dec =</span> <span class="st">&quot;.&quot;</span>,         <span class="co"># Decimal point character is a period</span></span>
<span id="cb916-7"><a href="process-data-in-r.html#cb916-7" tabindex="-1"></a>    <span class="at">na.strings =</span> <span class="st">&quot;NA&quot;</span>, <span class="co"># Character string representing NA values</span></span>
<span id="cb916-8"><a href="process-data-in-r.html#cb916-8" tabindex="-1"></a>    <span class="at">skip =</span> <span class="dv">1</span>,          <span class="co"># Skips the introductory row (website&#39;s name)</span></span>
<span id="cb916-9"><a href="process-data-in-r.html#cb916-9" tabindex="-1"></a>    <span class="at">nrows =</span> <span class="dv">5000</span>       <span class="co"># Limits reading to the initial 5000 rows</span></span>
<span id="cb916-10"><a href="process-data-in-r.html#cb916-10" tabindex="-1"></a>)</span>
<span id="cb916-11"><a href="process-data-in-r.html#cb916-11" tabindex="-1"></a></span>
<span id="cb916-12"><a href="process-data-in-r.html#cb916-12" tabindex="-1"></a><span class="co"># Display the first 4 rows of columns 1 to 7 for an overview</span></span>
<span id="cb916-13"><a href="process-data-in-r.html#cb916-13" tabindex="-1"></a>btcusd[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span></code></pre></div>
<pre><code>##         unix                date  symbol  open  high   low close
## 1 1697413380 2023-10-15 23:43:00 BTC/USD 27114 27119 27107 27119
## 2 1697413320 2023-10-15 23:42:00 BTC/USD 27114 27120 27114 27120
## 3 1697413260 2023-10-15 23:41:00 BTC/USD 27115 27119 27115 27119</code></pre>
<p>In this illustration:</p>
<ul>
<li><code>file</code>: Denotes the DSV file’s path and name.</li>
<li><code>sep</code>: The delimiter is a comma for this CSV file, i.e. <code>sep = ","</code>. For a TSV file, you would use <code>sep = "\t"</code>. If <code>sep = ","</code>, the <code>read.csv()</code> function could be used similarly without the need for the <code>sep</code> argument.</li>
<li><code>header</code>: Indicates the presence of a header in the file. When TRUE, the row following the skipped rows (if any) is considered as the column names.</li>
<li><code>dec</code>: Specifies the character for decimal points. In the U.S., this is typically <code>2.84</code> with <code>dec = "."</code>, while in parts of Europe it’s <code>2,84</code> with <code>dec = ","</code>.</li>
<li><code>na.strings</code>: Sets the string that corresponds to <code>NA</code> values. Some datasets may use “N/A” or might leave the entry blank, leading to configurations like <code>na.strings = "N/A"</code> or <code>na.strings = ""</code>, respectively.</li>
<li><code>skip</code>: States the initial lines to omit from the file.</li>
<li><code>nrows</code>: Caps the rows read from the file.</li>
</ul>
<p>By tweaking these parameters, you can handle a wide range of DSV file structures and peculiarities.</p>
<p>It’s important to note that the <code>read.table()</code> function by default imports the DSV file as a <a href="data-structures-in-r.html#data.frame">data frame</a>:</p>
<div class="sourceCode" id="cb918"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb918-1"><a href="process-data-in-r.html#cb918-1" tabindex="-1"></a><span class="co"># Determine the class of the imported data</span></span>
<span id="cb918-2"><a href="process-data-in-r.html#cb918-2" tabindex="-1"></a><span class="fu">class</span>(btcusd)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Once the data is imported, you can transform the data frame into various data structures:</p>
<ul>
<li>Convert to a <a href="data-structures-in-r.html#tibble">tibble</a> using the <code>as_tibble()</code> function from the <code>tibble</code> package.</li>
<li>Transform into a <a href="data-structures-in-r.html#data.table">data table</a> via the <code>as.data.table()</code> function from the <code>data.table</code> package.</li>
<li>Create an <a href="data-structures-in-r.html#xts"><code>xts</code> object</a> using the <code>xts()</code> function from the <code>xts</code> package.</li>
</ul>
<p>For more direct approaches:</p>
<ul>
<li>The <code>read_delim()</code> function from the <code>readr</code> package by <span class="citation">Wickham, Hester, and Bryan (<a href="#ref-R-readr">2024</a>)</span>, part of the <a href="r-basics.html#the-tidyverse">Tidyverse</a>, directly imports DSV files as a <a href="data-structures-in-r.html#tibble">tibble</a>.</li>
<li>The <code>fread()</code> function, found in the <code>data.table</code> package, imports DSV files as a <a href="data-structures-in-r.html#data.table">data table</a>.</li>
<li>To directly read DSV files as <code>zoo</code> objects, one can use the <code>read.zoo()</code> function from the <code>zoo</code> package. Subsequently, to transform the <code>zoo</code> object into an <a href="data-structures-in-r.html#xts"><code>xts</code> object</a>, apply the <code>as.xts()</code> function from the <code>xts</code> package.</li>
</ul>
<p>While these functions share certain traits with <code>read.table()</code>, they also come with their own unique features. To fully understand their capabilities and differences, consider consulting their respective documentation using <code>?read_delim</code>, <code>?fread</code>, and <code>?read.zoo</code> after loading the <code>readr</code>, <code>data.table</code>, and <code>zoo</code> packages.</p>
</div>
<div id="inspect-data" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Inspect Data<a href="process-data-in-r.html#inspect-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once data is imported, a preliminary examination ensures its accuracy. This can be done by simply entering the data name <code>btcusd</code> into the console. However, since R prints the entire data frame, the columns will not be visible if the data contains more rows than the size of the screen. To accommodate this, you can use the <code>head()</code> function to print the column names and the first six observations, or the <code>tail()</code> function to print the column names and the last six observations, where the additional input <code>n = 10</code> increases it to ten observations:</p>
<div class="sourceCode" id="cb920"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb920-1"><a href="process-data-in-r.html#cb920-1" tabindex="-1"></a><span class="co"># Show the concluding 10 rows of the first 7 columns</span></span>
<span id="cb920-2"><a href="process-data-in-r.html#cb920-2" tabindex="-1"></a><span class="fu">tail</span>(btcusd[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>], <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##            unix                date  symbol  open  high   low close
## 4991 1697099580 2023-10-12 08:33:00 BTC/USD 26799 26799 26799 26799
## 4992 1697099520 2023-10-12 08:32:00 BTC/USD 26805 26805 26805 26805
## 4993 1697099460 2023-10-12 08:31:00 BTC/USD 26796 26807 26796 26807
## 4994 1697099400 2023-10-12 08:30:00 BTC/USD 26789 26800 26789 26800
## 4995 1697099340 2023-10-12 08:29:00 BTC/USD 26794 26794 26794 26794
## 4996 1697099280 2023-10-12 08:28:00 BTC/USD 26798 26798 26796 26796
## 4997 1697099220 2023-10-12 08:27:00 BTC/USD 26786 26790 26784 26790
## 4998 1697099160 2023-10-12 08:26:00 BTC/USD 26790 26790 26790 26790
## 4999 1697099100 2023-10-12 08:25:00 BTC/USD 26790 26792 26787 26790
## 5000 1697099040 2023-10-12 08:24:00 BTC/USD 26778 26778 26777 26778</code></pre>
<p>In cases where numerous columns still prove problematic even with <code>head()</code> or <code>tail()</code>, RStudio provides a spreadsheet-like viewer for data frames via the <code>View()</code> function (exclusive to RStudio and not included in R):</p>
<div class="sourceCode" id="cb922"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb922-1"><a href="process-data-in-r.html#cb922-1" tabindex="-1"></a><span class="co"># Open data in a spreadsheet-style viewer</span></span>
<span id="cb922-2"><a href="process-data-in-r.html#cb922-2" tabindex="-1"></a><span class="fu">View</span>(btcusd)</span></code></pre></div>
<p>For an exploration of the data’s structure and summary, execute <code>str(btcusd)</code> and <code>summary(btcusd)</code>.</p>
</div>
<div id="process-bitcoin-price-data-clean-data" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Clean Data<a href="process-data-in-r.html#process-bitcoin-price-data-clean-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It’s important to check the data type of each column, as the import process may have <strong>misassigned data types</strong>. Utilize <code>sapply()</code> together with <code>class()</code> for this task:</p>
<div class="sourceCode" id="cb923"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb923-1"><a href="process-data-in-r.html#cb923-1" tabindex="-1"></a><span class="co"># Examine the data structure of the dataset</span></span>
<span id="cb923-2"><a href="process-data-in-r.html#cb923-2" tabindex="-1"></a><span class="fu">class</span>(btcusd)</span>
<span id="cb923-3"><a href="process-data-in-r.html#cb923-3" tabindex="-1"></a></span>
<span id="cb923-4"><a href="process-data-in-r.html#cb923-4" tabindex="-1"></a><span class="co"># Identify the data type for every column</span></span>
<span id="cb923-5"><a href="process-data-in-r.html#cb923-5" tabindex="-1"></a><span class="fu">sapply</span>(btcusd, class)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;
##        unix        date      symbol        open        high         low 
##   &quot;integer&quot; &quot;character&quot; &quot;character&quot;   &quot;integer&quot;   &quot;integer&quot;   &quot;integer&quot; 
##       close  Volume.BTC  Volume.USD 
##   &quot;integer&quot;   &quot;numeric&quot;   &quot;numeric&quot;</code></pre>
<p>In this scenario, R has accurately discerned Bitcoin prices and trading volumes as numerical values. The columns <code>open</code>, <code>high</code>, <code>low</code>, and <code>close</code> denote the opening, peak, trough, and closing prices within a minute interval, respectively. <code>Volume.BTC</code> and <code>Volume.USD</code> quantify transaction volumes in bitcoins and USD.</p>
<p>However, the <code>date</code> column wasn’t identified as a specific date format, such as <code>POSIXct</code>. This requires manual conversion (refer to Chapter <a href="r-basics.html#dates-and-times">3.3</a> for understanding date objects like <code>POSIXct</code>).</p>
<div class="sourceCode" id="cb925"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb925-1"><a href="process-data-in-r.html#cb925-1" tabindex="-1"></a><span class="co"># Modify date strings to the POSIXct data type</span></span>
<span id="cb925-2"><a href="process-data-in-r.html#cb925-2" tabindex="-1"></a>btcusd<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(btcusd<span class="sc">$</span>date)</span>
<span id="cb925-3"><a href="process-data-in-r.html#cb925-3" tabindex="-1"></a></span>
<span id="cb925-4"><a href="process-data-in-r.html#cb925-4" tabindex="-1"></a><span class="co"># Recheck the data type of the date column</span></span>
<span id="cb925-5"><a href="process-data-in-r.html#cb925-5" tabindex="-1"></a><span class="fu">class</span>(btcusd<span class="sc">$</span>date)</span></code></pre></div>
<pre><code>## [1] &quot;POSIXct&quot; &quot;POSIXt&quot;</code></pre>
<p>Such type adjustments are common when importing data in R. When employing <code>read.table()</code> in R, the function inspects the first 1,000 rows to deduce each column’s type. If these rows aren’t indicative of the complete dataset, misinterpretations can arise. An example: if the initial 1,000 rows of a column seem numeric but later on contain a character, R might incorrectly perceive it as numeric, where the characters are converted to numeric <code>NA</code> values. Another scenario is R reading a column as character values when the first 1,000 rows of a column are absent, instead of numeric values. Also, R might read “N/A” as a character string instead of a missing value, causing the column to become character type instead of numeric. The last issue can be addressed by defining <code>na.strings = "N/A"</code> within <code>read.table()</code>, or by replacing “N/A” post-import with <code>NA</code> and then using <code>as.numeric()</code> to convert to numeric.</p>
<p>To improve data clarity, consider adding <strong>contextual attributes</strong> like the data source and the count of imported rows. These attributes can be easily appended using R’s <code>attr()</code> function. For a cleaner data structure, it’s also beneficial to eliminate the <code>row.names</code> attribute for our <code>btcusd</code> object, as it merely consists of sequential numbers. In R, setting an attribute to <code>NULL</code> effectively removes it.</p>
<div class="sourceCode" id="cb927"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb927-1"><a href="process-data-in-r.html#cb927-1" tabindex="-1"></a><span class="co"># Attach source and row count as attributes to the btcusd object</span></span>
<span id="cb927-2"><a href="process-data-in-r.html#cb927-2" tabindex="-1"></a><span class="fu">attr</span>(btcusd, <span class="st">&quot;source&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;www.cryptodatadownload.com/cdd&quot;</span></span>
<span id="cb927-3"><a href="process-data-in-r.html#cb927-3" tabindex="-1"></a><span class="fu">attr</span>(btcusd, <span class="st">&quot;n_rows_imported&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">nrow</span>(btcusd)</span>
<span id="cb927-4"><a href="process-data-in-r.html#cb927-4" tabindex="-1"></a></span>
<span id="cb927-5"><a href="process-data-in-r.html#cb927-5" tabindex="-1"></a><span class="co"># Erase the row.names attribute</span></span>
<span id="cb927-6"><a href="process-data-in-r.html#cb927-6" tabindex="-1"></a><span class="fu">attr</span>(btcusd, <span class="st">&quot;row.names&quot;</span>) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb927-7"><a href="process-data-in-r.html#cb927-7" tabindex="-1"></a></span>
<span id="cb927-8"><a href="process-data-in-r.html#cb927-8" tabindex="-1"></a><span class="co"># Examine attributes to confirm changes</span></span>
<span id="cb927-9"><a href="process-data-in-r.html#cb927-9" tabindex="-1"></a><span class="fu">attributes</span>(btcusd)</span></code></pre></div>
<pre><code>## $names
## [1] &quot;unix&quot;       &quot;date&quot;       &quot;symbol&quot;     &quot;open&quot;       &quot;high&quot;      
## [6] &quot;low&quot;        &quot;close&quot;      &quot;Volume.BTC&quot; &quot;Volume.USD&quot;
## 
## $class
## [1] &quot;data.frame&quot;
## 
## $source
## [1] &quot;www.cryptodatadownload.com/cdd&quot;
## 
## $n_rows_imported
## [1] 5000</code></pre>
<p>By doing so, anyone reviewing this data object can immediately understand its origin and size without having to consult external documentation. This additional layer of metadata can be especially beneficial when sharing data objects across different phases of a project or with other collaborators.</p>
</div>
<div id="visualize-data" class="section level3 hasAnchor" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> Visualize Data<a href="process-data-in-r.html#visualize-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A <strong>graph</strong> is a visual representation that displays data points on a coordinate system, typically showing the relationship between two or more variables. Each variable is assigned to an axis, and the data points are plotted accordingly. In R, the <code>plot()</code> function is one of the primary tools for creating graphs.</p>
<p>Consider the Bitcoin prices dataset, <code>btcusd</code>, from our previous section. We’ll map the date (<code>btcusd$date</code>) onto the x-axis and the closing price at each trading minute (<code>btcusd$close</code>) to the y-axis:</p>
<div class="sourceCode" id="cb929"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb929-1"><a href="process-data-in-r.html#cb929-1" tabindex="-1"></a><span class="co"># Plot data</span></span>
<span id="cb929-2"><a href="process-data-in-r.html#cb929-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> btcusd<span class="sc">$</span>date, </span>
<span id="cb929-3"><a href="process-data-in-r.html#cb929-3" tabindex="-1"></a>     <span class="at">y =</span> btcusd<span class="sc">$</span>close, </span>
<span id="cb929-4"><a href="process-data-in-r.html#cb929-4" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, </span>
<span id="cb929-5"><a href="process-data-in-r.html#cb929-5" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Bitcoin Prices During 5,000 Trading Minutes&quot;</span>, </span>
<span id="cb929-6"><a href="process-data-in-r.html#cb929-6" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;USD&quot;</span>, </span>
<span id="cb929-7"><a href="process-data-in-r.html#cb929-7" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="st">&quot;Time in&quot;</span>, <span class="fu">format</span>(<span class="fu">tail</span>(btcusd<span class="sc">$</span>date, <span class="dv">1</span>), <span class="st">&quot;%Y&quot;</span>)))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:btcusd-5000"></span>
<img src="_main_files/figure-html/btcusd-5000-1.png" alt="Bitcoin Prices During 5,000 Trading Minutes" width="80%" />
<p class="caption">
Figure 5.1: Bitcoin Prices During 5,000 Trading Minutes
</p>
</div>
<p>Here’s a detailed breakdown of the <code>plot()</code> function arguments used in the example:</p>
<ul>
<li><strong><code>x</code> and <code>y</code></strong>: These are the primary arguments that specify the data for the x-axis and y-axis, respectively. In the given example, <code>btcusd$date</code> represents the time variable on the x-axis, while <code>btcusd$close</code> signifies the Bitcoin closing prices on the y-axis.</li>
<li><strong><code>type</code></strong>: This argument determines how the data points should be represented. The value <code>"l"</code> indicates that the data points should be connected with lines, producing a line graph. Other common values include <code>"p"</code> for points (producing a scatter plot), <code>"b"</code> for both points and lines, and <code>"h"</code> for vertical lines (like high-density plots).</li>
<li><strong><code>main</code></strong>: This argument defines the main title of the graph. Here, “Bitcoin Prices During 5,000 Trading Minutes” serves as the title, succinctly conveying the subject of the visualization.</li>
<li><strong><code>xlab</code> and <code>ylab</code></strong>: These arguments specify the labels for the x-axis and y-axis, respectively. Properly labeling axes is vital as it provides context and clarifies the variables being visualized. In our example, “Time in 2023” denotes the time intervals on the x-axis, and “USD” indicates that the y-axis represents Bitcoin prices in US dollars.</li>
</ul>
<p>Figure <a href="process-data-in-r.html#fig:btcusd-5000">5.1</a> showcases the closing prices of Bitcoin over a span of 5,000 trading minutes. By visually inspecting the graph, one can gauge the volatility, identify any potential data inconsistencies, and generally understand the behavior of Bitcoin prices over the observed interval.</p>
</div>
<div id="process-bitcoin-price-data-export-data" class="section level3 hasAnchor" number="5.1.6">
<h3><span class="header-section-number">5.1.6</span> Export Data<a href="process-data-in-r.html#process-bitcoin-price-data-export-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section shows how to export data in two commonly used formats: RDS and DSV.</p>
<div id="rds" class="section level4 unnumbered hasAnchor">
<h4>RDS<a href="process-data-in-r.html#rds" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R provides a unique storage format known as <strong>RDS</strong> (<strong>R Data Structure</strong>). It’s a <strong>binary format</strong>, which means it represents data in a way that’s directly readable by computers but not easily readable by humans. The primary advantage of binary formats, like RDS, is they often allow faster read and write operations and can maintain all the intricacies of data structures. This ensures that when an R object is saved in RDS format and then reloaded, its structure and metadata remain unaltered.</p>
<p>To save an R object as an RDS file, use the <code>saveRDS()</code> function.</p>
<div class="sourceCode" id="cb930"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb930-1"><a href="process-data-in-r.html#cb930-1" tabindex="-1"></a><span class="co"># Create folder for exported files</span></span>
<span id="cb930-2"><a href="process-data-in-r.html#cb930-2" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="at">path =</span> <span class="st">&quot;exported-files&quot;</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb930-3"><a href="process-data-in-r.html#cb930-3" tabindex="-1"></a></span>
<span id="cb930-4"><a href="process-data-in-r.html#cb930-4" tabindex="-1"></a><span class="co"># Save btcusd data as RDS file</span></span>
<span id="cb930-5"><a href="process-data-in-r.html#cb930-5" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span> btcusd, <span class="at">file =</span> <span class="st">&quot;exported-files/btcusd.rds&quot;</span>)</span></code></pre></div>
<p>In this example:</p>
<ul>
<li><code>object</code> represents the R object to be saved.</li>
<li><code>file</code> indicates the path and filename where the data will be stored or overwritten.</li>
</ul>
<p>To retrieve the object from the RDS file into R, use the <code>readRDS()</code> function.</p>
<div class="sourceCode" id="cb931"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb931-1"><a href="process-data-in-r.html#cb931-1" tabindex="-1"></a><span class="co"># Load btcusd data from an RDS file</span></span>
<span id="cb931-2"><a href="process-data-in-r.html#cb931-2" tabindex="-1"></a>btcusd_loaded <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">&quot;exported-files/btcusd.rds&quot;</span>)</span>
<span id="cb931-3"><a href="process-data-in-r.html#cb931-3" tabindex="-1"></a><span class="fu">identical</span>(btcusd, btcusd_loaded)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Key Points:</p>
<ul>
<li>Always check your working directory using <code>getwd()</code> to ensure files are saved where intended. Adjust it with <code>setwd()</code> if necessary.</li>
<li>Remember, RDS files are designed for R. While efficient for R-to-R data transfers, they might not be compatible with other software.</li>
<li>Ensure your storage can accommodate the file size, especially for large datasets. Though RDS files are compressed, large datasets can still occupy significant space.</li>
<li>Always exercise caution when loading RDS files from unknown sources, as they could contain harmful code.</li>
</ul>
<p>Overall, RDS is a reliable choice for preserving R objects between sessions and projects.</p>
</div>
<div id="dsv" class="section level4 unnumbered hasAnchor">
<h4>DSV<a href="process-data-in-r.html#dsv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For compatibility across various software applications, it’s often useful to save data as DSV files, instead of R-specific formats. The <code>write.table()</code> function facilitates the export of data frames to DSV formats, including CSV and TSV.</p>
<div class="sourceCode" id="cb933"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb933-1"><a href="process-data-in-r.html#cb933-1" tabindex="-1"></a><span class="co"># Create folder for exported files</span></span>
<span id="cb933-2"><a href="process-data-in-r.html#cb933-2" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="at">path =</span> <span class="st">&quot;exported-files&quot;</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb933-3"><a href="process-data-in-r.html#cb933-3" tabindex="-1"></a></span>
<span id="cb933-4"><a href="process-data-in-r.html#cb933-4" tabindex="-1"></a><span class="co"># Export Bitcoin price data as TSV file</span></span>
<span id="cb933-5"><a href="process-data-in-r.html#cb933-5" tabindex="-1"></a><span class="fu">write.table</span>(<span class="at">x =</span> btcusd, </span>
<span id="cb933-6"><a href="process-data-in-r.html#cb933-6" tabindex="-1"></a>            <span class="at">file =</span> <span class="st">&quot;exported-files/btcusd.tsv&quot;</span>, </span>
<span id="cb933-7"><a href="process-data-in-r.html#cb933-7" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, </span>
<span id="cb933-8"><a href="process-data-in-r.html#cb933-8" tabindex="-1"></a>            <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Here:</p>
<ul>
<li><code>x</code> represents the data frame to export.</li>
<li><code>file</code> denotes the desired path and filename for the DSV file.</li>
<li><code>sep</code> specifies the delimiter between fields. In this case, we’re using a tab (<code>\t</code>) for a TSV file. Notably, using <code>write.csv()</code> is akin to <code>write.table()</code> with <code>sep = ","</code>.</li>
<li>With <code>row.names = FALSE</code>, the exported file won’t include row names, which are typically just sequential numbers.</li>
</ul>
<p>By tailoring the parameters of <code>write.table()</code>, you can effectively store your data in the preferred format.</p>
<p>Points to remember:</p>
<ul>
<li>Always verify the working directory with <code>getwd()</code> to ensure the file is saved where intended. If necessary, adjust it using <code>setwd()</code>.</li>
<li>After exporting, open the file in a text editor or spreadsheet application to ensure its contents are as expected.</li>
<li>Be patient with large datasets. Exporting might take time, so allow R to finish the process before exiting.</li>
</ul>
<p>Here are alternative methods for exporting DSV files in R:</p>
<ul>
<li>The <code>write_delim()</code> function from the <code>readr</code> package, part of the Tidyverse, exports data frames to DSV format. This function is especially useful when working with tibbles.</li>
<li>The <code>fwrite()</code> function from the <code>data.table</code> package is another option for exporting data frames to DSV files. This function is optimized for speed and efficiency.</li>
<li>For time series data, the <code>write.zoo()</code> function from the <code>zoo</code> package allows you to export <code>zoo</code> or <code>xts</code> objects directly as DSV files.</li>
</ul>
<p>To fully understand the capabilities and unique features of these functions, it’s recommended to consult their respective documentation using <code>?write_delim</code>, <code>?fwrite</code>, and <code>?write.zoo</code> after loading the <code>readr</code>, <code>data.table</code>, and <code>zoo</code> packages.</p>
<p>Note that DSV export doesn’t retain attributes and may misclassify data types on import:</p>
<div class="sourceCode" id="cb934"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb934-1"><a href="process-data-in-r.html#cb934-1" tabindex="-1"></a><span class="co"># Import the exported TSV file</span></span>
<span id="cb934-2"><a href="process-data-in-r.html#cb934-2" tabindex="-1"></a>btcusd_loaded <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">&quot;exported-files/btcusd.tsv&quot;</span>, </span>
<span id="cb934-3"><a href="process-data-in-r.html#cb934-3" tabindex="-1"></a>                            <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, </span>
<span id="cb934-4"><a href="process-data-in-r.html#cb934-4" tabindex="-1"></a>                            <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb934-5"><a href="process-data-in-r.html#cb934-5" tabindex="-1"></a></span>
<span id="cb934-6"><a href="process-data-in-r.html#cb934-6" tabindex="-1"></a><span class="co"># Verify if the original and imported TSV files match</span></span>
<span id="cb934-7"><a href="process-data-in-r.html#cb934-7" tabindex="-1"></a><span class="fu">identical</span>(btcusd, btcusd_loaded)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Therefore, while DSV files offer better software compatibility than RDS, they fall short in preserving all attributes and data types of the original object.</p>
</div>
</div>
</div>
<div id="process-stock-and-oil-prices" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Process Stock and Oil Prices<a href="process-data-in-r.html#process-stock-and-oil-prices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section offers a roadmap for acquiring, manipulating, visualizing, and analyzing financial data using R using stock and oil price data as example. This section begins by discussing Web APIs as a method for directly fetching data, circumventing manual downloads and uploads. The <code>quantmod</code> and <code>Quandl</code> packages are used to fetch data from various APIs.</p>
<p>Following data acquisition, the section guides the reader through merging disparate data streams—such as stock and commodity prices—into a unified dataset. With the data merged, it presents methods to visualize the time-series data using plotting functionalities tailored for <code>xts</code> objects. The focus then shifts to transforming this raw data into a more analytically amenable form, dealing specifically with the issues of irregular frequency and missing values to create a regular time series at a monthly frequency.</p>
<p>Finally, the section concludes by demonstrating how to tabulate key statistics like mean, volatility, and correlation. These statistics offer a quantitative lens through which to understand the dataset’s central tendencies, dispersion, and relational aspects. Altogether, the section provides a comprehensive workflow for handling financial data, from acquisition to data analysis.</p>
<div id="web-api" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Web API<a href="process-data-in-r.html#web-api" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If your computer is connected to the internet, you can directly fetch data within R, bypassing the need to download data files manually and then import them into R. This section explains how to download financial and economic data in R using a Web API.</p>
<p>An <strong>Application Programming Interface</strong> (<strong>API</strong>), specifically a <strong>Web API</strong>, is more than just a data file saved on a website. It is a set of rules, protocols, and tools that enable two software entities to communicate with each other. In the context of data retrieval, a Web API serves as an interface between web servers and clients, offering a systematic way to access data. When you query a Web API, the server typically generates a response dynamically based on the request parameters it receives. This data can come in various formats such as JSON, XML, HTML, or plain text.</p>
<p>In R, direct interaction with Web APIs is often unnecessary, thanks to specialized R packages that handle this task. These packages translate fetched data into familiar R formats like data frames or <code>xts</code> objects. For instance, the <code>imfr</code> package fetches data from the IMF API, while the <code>OECD</code> and <code>Quandl</code> packages fetch data from the OECD and Nasdaq APIs, respectively. General-purpose packages like <code>quantmod</code> can interact with multiple APIs. To find an API for a specific database, a simple Google search such as “<em>r web api database_name</em>” should suffice.</p>
<p>In this chapter, we utilize the <code>getSymbols()</code> function from the <code>quantmod</code> package and the <code>Quandl()</code> function from the <code>Quandl</code> package to fetch data directly into R.</p>
</div>
<div id="download-via-quantmod" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Download via <code>quantmod</code><a href="process-data-in-r.html#download-via-quantmod" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>quantmod</code> package by <span class="citation">Ryan and Ulrich (<a href="#ref-R-quantmod">2024a</a>)</span> serves as a comprehensive toolkit for quantitative finance, primarily focused on data acquisition, manipulation, and visualization. It is designed to assist in the workflow of both financial traders and researchers. One of the package’s key functions is <code>getSymbols()</code>, which allows for easy access to financial data from multiple sources like <a href="https://finance.yahoo.com" target="_blank">Yahoo Finance</a>, <a href="https://www.google.com/finance/" target="_blank">Google Finance</a>, and <a href="https://fred.stlouisfed.org/" target="_blank">Federal Reserve Economic Data (FRED)</a>.</p>
<p>Using <code>getSymbols()</code>, you can fetch various types of financial data such as stock prices, trading volumes, and other market indicators. The function downloads the data and converts it into an <code>xts</code> object, a data structure introduced in Chapter <a href="data-structures-in-r.html#xts">4.8</a> that is designed to hold time-ordered data.</p>
<p>Here’s a basic example of using <code>getSymbols()</code> to fetch stock data for Apple Inc:</p>
<div class="sourceCode" id="cb936"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb936-1"><a href="process-data-in-r.html#cb936-1" tabindex="-1"></a><span class="co"># Load the quantmod package</span></span>
<span id="cb936-2"><a href="process-data-in-r.html#cb936-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;quantmod&quot;</span>)</span>
<span id="cb936-3"><a href="process-data-in-r.html#cb936-3" tabindex="-1"></a></span>
<span id="cb936-4"><a href="process-data-in-r.html#cb936-4" tabindex="-1"></a><span class="co"># Download Apple stock prices from Yahoo Finance</span></span>
<span id="cb936-5"><a href="process-data-in-r.html#cb936-5" tabindex="-1"></a>AAPL_stock_price <span class="ot">&lt;-</span> <span class="fu">getSymbols</span>(</span>
<span id="cb936-6"><a href="process-data-in-r.html#cb936-6" tabindex="-1"></a>  <span class="at">Symbols =</span> <span class="st">&quot;AAPL&quot;</span>,</span>
<span id="cb936-7"><a href="process-data-in-r.html#cb936-7" tabindex="-1"></a>  <span class="at">src =</span> <span class="st">&quot;yahoo&quot;</span>,</span>
<span id="cb936-8"><a href="process-data-in-r.html#cb936-8" tabindex="-1"></a>  <span class="at">auto.assign =</span> <span class="cn">FALSE</span>,</span>
<span id="cb936-9"><a href="process-data-in-r.html#cb936-9" tabindex="-1"></a>  <span class="at">return.class =</span> <span class="st">&quot;xts&quot;</span>)</span>
<span id="cb936-10"><a href="process-data-in-r.html#cb936-10" tabindex="-1"></a></span>
<span id="cb936-11"><a href="process-data-in-r.html#cb936-11" tabindex="-1"></a><span class="co"># Display the most recent downloaded stock prices</span></span>
<span id="cb936-12"><a href="process-data-in-r.html#cb936-12" tabindex="-1"></a><span class="fu">tail</span>(AAPL_stock_price)</span></code></pre></div>
<pre><code>##            AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted
## 2024-06-25    209.15    211.38   208.61     209.07    56713900        209.07
## 2024-06-26    211.50    214.86   210.64     213.25    66213200        213.25
## 2024-06-27    214.69    215.74   212.35     214.10    49772700        214.10
## 2024-06-28    215.77    216.07   210.30     210.62    82542700        210.62
## 2024-07-01    212.09    217.51   211.92     216.75    60402900        216.75
## 2024-07-02    216.15    220.38   215.10     220.27    57960500        220.27</code></pre>
<p>After running these commands, you’ll have the Apple stock data stored in an <code>xts</code> object, ready for your analysis and visualization tasks.</p>
<p>The arguments in this context are:</p>
<ul>
<li><code>Symbols</code>: Specifies the instrument to import. This could be a stock ticker symbol, exchange rate, economic data series, or any other identifier.</li>
<li><code>auto.assign</code>: When set to FALSE, data must be assigned to an object (here, <code>AAPL_stock_price</code>). If not set to FALSE, the data is automatically assigned to the <code>Symbols</code> input (in this case, <code>AAPL</code>).</li>
<li><code>return.class</code>: Determines the type of data object returned, e.g., <code>ts</code>, <code>zoo</code>, <code>xts</code>, or <code>timeSeries</code>.</li>
<li><code>src</code>: Denotes the data source from which the symbol originates. Some examples include “yahoo” for Yahoo Finance, “google” for Google Finance, “FRED” for Federal Reserve Economic Data, and “oanda” for Oanda foreign exchange rates.</li>
</ul>
<p>To find the correct symbol for financial data from <strong>Yahoo Finance</strong>, visit <a href="https://finance.yahoo.com" target="_blank">finance.yahoo.com</a> and search for the company of interest, e.g., Apple. The symbol is the series of letters inside parentheses. For example, for <code>Apple Inc. (AAPL)</code>, use <code>Symbols = "AAPL"</code> (and <code>src = "yahoo"</code>).</p>
<p>To download economic data from <strong>FRED</strong>, visit <a href="https://fred.stlouisfed.org" target="_blank">fred.stlouisfed.org</a>, and search for the data series of interest, e.g., unemployment rate. Click on one of the suggested data series. The symbol is the series of letters inside parentheses. For example, for <code>Unemployment Rate (UNRATE)</code>, use <code>Symbols = "UNRATE"</code> (and <code>src = "FRED"</code>).</p>
<p>Note that Yahoo Finance provides data in <strong>OHLC</strong> format, consisting of six columns: <code>AAPL.Open</code>, <code>AAPL.High</code>, <code>AAPL.Low</code>, <code>AAPL.Close</code>, <code>AAPL.Volume</code>, and <code>AAPL.Adjusted</code>. These values represent the opening, highest, lowest, and closing prices for a given market day, the trade volume for that day, and the adjusted closing price, which accounts for stock splits. These columns can be accessed using <code>quantmod</code>’s <code>Op()</code>, <code>Hi()</code>, <code>Lo()</code>, <code>Cl()</code>, <code>Vo()</code>, and <code>Ad()</code> functions. Typically, the <code>AAPL.Adjusted</code> column is of most interest.</p>
<div class="sourceCode" id="cb938"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb938-1"><a href="process-data-in-r.html#cb938-1" tabindex="-1"></a><span class="co"># Extract adjusted Apple share price</span></span>
<span id="cb938-2"><a href="process-data-in-r.html#cb938-2" tabindex="-1"></a>AAPL_stock_price_adj <span class="ot">&lt;-</span> <span class="fu">Ad</span>(AAPL_stock_price)</span>
<span id="cb938-3"><a href="process-data-in-r.html#cb938-3" tabindex="-1"></a></span>
<span id="cb938-4"><a href="process-data-in-r.html#cb938-4" tabindex="-1"></a><span class="co"># Display the most recent adjusted stock prices</span></span>
<span id="cb938-5"><a href="process-data-in-r.html#cb938-5" tabindex="-1"></a><span class="fu">tail</span>(AAPL_stock_price_adj)</span></code></pre></div>
<pre><code>##            AAPL.Adjusted
## 2024-06-25        209.07
## 2024-06-26        213.25
## 2024-06-27        214.10
## 2024-06-28        210.62
## 2024-07-01        216.75
## 2024-07-02        220.27</code></pre>
</div>
<div id="download-via-quandl" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Download via <code>Quandl</code><a href="process-data-in-r.html#download-via-quandl" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://data.nasdaq.com" target="_blank">Quandl</a> is a data service that provides access to many financial and economic data sets from various providers. It has been acquired by <a href="https://data.nasdaq.com" target="_blank">Nasdaq Data Link</a> and is now operating through the Nasdaq data website: <a href="https://data.nasdaq.com" target="_blank">data.nasdaq.com</a>. Some data sets require a paid subscription, while others can be accessed for free. Quandl provides an API that allows you to import data from a wide variety of languages, including Excel, Python, and R. To fetch data into R, the <code>Quandl()</code> function from the <code>Quandl</code> package is employed.</p>
<p>To use Quandl, first get a free Nasdaq Data Link API key at <a href="https://data.nasdaq.com/sign-up" target="_blank">data.nasdaq.com/sign-up</a>. After that, install and load the <code>Quandl</code> package and provide the API key with the function <code>Quandl.api_key()</code>:</p>
<div class="sourceCode" id="cb940"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb940-1"><a href="process-data-in-r.html#cb940-1" tabindex="-1"></a><span class="co"># Load Quandl package</span></span>
<span id="cb940-2"><a href="process-data-in-r.html#cb940-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;Quandl&quot;</span>)</span>
<span id="cb940-3"><a href="process-data-in-r.html#cb940-3" tabindex="-1"></a></span>
<span id="cb940-4"><a href="process-data-in-r.html#cb940-4" tabindex="-1"></a><span class="co"># Provide API key</span></span>
<span id="cb940-5"><a href="process-data-in-r.html#cb940-5" tabindex="-1"></a>api_quandl <span class="ot">&lt;-</span> <span class="st">&quot;CbtuSe8kyR_8qPgehZw3&quot;</span>  <span class="co"># Replace this with your API key</span></span>
<span id="cb940-6"><a href="process-data-in-r.html#cb940-6" tabindex="-1"></a><span class="fu">Quandl.api_key</span>(api_quandl)</span></code></pre></div>
<p>Then, you can download data using <code>Quandl()</code>, such as fetching oil price data:</p>
<div class="sourceCode" id="cb941"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb941-1"><a href="process-data-in-r.html#cb941-1" tabindex="-1"></a><span class="co"># Download monthly crude oil prices from Nasdaq Data Link</span></span>
<span id="cb941-2"><a href="process-data-in-r.html#cb941-2" tabindex="-1"></a><span class="co"># ODA_oil_price &lt;- Quandl(code = &quot;ODA/POILAPSP_USD&quot;, type = &quot;xts&quot;)</span></span>
<span id="cb941-3"><a href="process-data-in-r.html#cb941-3" tabindex="-1"></a>ODA_oil_price <span class="ot">&lt;-</span> <span class="fu">Quandl</span>(<span class="at">code =</span> <span class="st">&quot;BSE/SI1400&quot;</span>, <span class="at">type =</span> <span class="st">&quot;xts&quot;</span>)<span class="sc">$</span>Close</span>
<span id="cb941-4"><a href="process-data-in-r.html#cb941-4" tabindex="-1"></a></span>
<span id="cb941-5"><a href="process-data-in-r.html#cb941-5" tabindex="-1"></a><span class="co"># Display the downloaded crude oil prices</span></span>
<span id="cb941-6"><a href="process-data-in-r.html#cb941-6" tabindex="-1"></a><span class="fu">tail</span>(ODA_oil_price)</span></code></pre></div>
<pre><code>##               Close
## 2023-07-14 19064.63
## 2023-07-17 19137.22
## 2023-07-18 19159.95
## 2023-07-19 19268.31
## 2023-07-20 19370.52
## 2023-07-21 19373.83</code></pre>
<p>Here, the <code>code</code> argument refers to both the data source and the symbol in the format “<code>source/symbol</code>”. The <code>type</code> argument specifies the type of data object: <code>data.frame</code>, <code>xts</code>, <code>zoo</code>, <code>ts</code>, or <code>timeSeries</code>.</p>
<p>To find the correct code for the Quandl function, visit <a href="https://data.nasdaq.com" target="_blank">data.nasdaq.com</a>, and search for the data series of interest (e.g., oil price). The code is the series of letters listed in the left column, structured like this: <code>.../...</code>, where <code>...</code> are letters. For example, for the crude oil price provided by IMF’s Open Data for Africa (ODA), use <code>code = "ODA/POILAPSP_USD"</code>.</p>
<p>ODA’s crude oil price data is monthly and does not include the most recent values. For more frequent and up-to-date data, go to the search results for “oil price” and look for the dataset from the Organization of the Petroleum Exporting Countries (OPEC). Its identifier, <code>QDL/OPEC</code>, isn’t immediately visible in the search listings. To locate it, click on the OPEC dataset link and find the code beneath the data table. To retrieve this data, use <code>Quandl.datatable()</code> instead of <code>Quandl()</code> since it’s structured as a data table, not a typical time series.</p>
<div class="sourceCode" id="cb943"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb943-1"><a href="process-data-in-r.html#cb943-1" tabindex="-1"></a><span class="co"># Download daily crude oil prices from Nasdaq Data Link</span></span>
<span id="cb943-2"><a href="process-data-in-r.html#cb943-2" tabindex="-1"></a>OPEC_oil_price <span class="ot">=</span> <span class="fu">Quandl.datatable</span>(<span class="st">&quot;QDL/OPEC&quot;</span>)</span>
<span id="cb943-3"><a href="process-data-in-r.html#cb943-3" tabindex="-1"></a></span>
<span id="cb943-4"><a href="process-data-in-r.html#cb943-4" tabindex="-1"></a><span class="co"># Convert data frame to xts object</span></span>
<span id="cb943-5"><a href="process-data-in-r.html#cb943-5" tabindex="-1"></a>OPEC_oil_price <span class="ot">=</span> <span class="fu">xts</span>(<span class="at">x =</span> OPEC_oil_price<span class="sc">$</span>value, <span class="at">order.by =</span> OPEC_oil_price<span class="sc">$</span>date)</span>
<span id="cb943-6"><a href="process-data-in-r.html#cb943-6" tabindex="-1"></a></span>
<span id="cb943-7"><a href="process-data-in-r.html#cb943-7" tabindex="-1"></a><span class="co"># Display the downloaded crude oil prices</span></span>
<span id="cb943-8"><a href="process-data-in-r.html#cb943-8" tabindex="-1"></a><span class="fu">tail</span>(OPEC_oil_price)</span></code></pre></div>
<pre><code>##             [,1]
## 2024-01-18 79.39
## 2024-01-19 80.27
## 2024-01-22 79.70
## 2024-01-23 81.30
## 2024-01-24 81.05
## 2024-01-25 81.98</code></pre>
</div>
<div id="clean-data" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Clean Data<a href="process-data-in-r.html#clean-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When data is retrieved using R packages that interact with Web APIs, the likelihood of encountering <strong>misassigned data types</strong> is minimal. This is in contrast to the often encountered type issues when importing from DSV or Excel files. Nonetheless, the retrieved data object may still need conversion to a more suitable data structure. For example, we converted the <code>OPEC_oil_price</code> object from a data frame to an <code>xts</code> object.</p>
<p>Storing meta-information, such as the data source and time of import, as <strong>contextual attributes</strong> can be particularly useful. Since the data is directly imported via R code, it’s possible to preserve the import command itself as an attribute for future reference or replication:</p>
<div class="sourceCode" id="cb945"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb945-1"><a href="process-data-in-r.html#cb945-1" tabindex="-1"></a><span class="co"># Record the time of data import</span></span>
<span id="cb945-2"><a href="process-data-in-r.html#cb945-2" tabindex="-1"></a><span class="fu">attr</span>(AAPL_stock_price, <span class="st">&quot;time_of_import&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb945-3"><a href="process-data-in-r.html#cb945-3" tabindex="-1"></a><span class="fu">attr</span>(AAPL_stock_price, <span class="st">&quot;time_of_import&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2024-07-03 08:48:21 CDT&quot;</code></pre>
<div class="sourceCode" id="cb947"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb947-1"><a href="process-data-in-r.html#cb947-1" tabindex="-1"></a><span class="co"># Define the function used to import AAPL stock data</span></span>
<span id="cb947-2"><a href="process-data-in-r.html#cb947-2" tabindex="-1"></a>import_AAPL_data <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb947-3"><a href="process-data-in-r.html#cb947-3" tabindex="-1"></a>    quantmod<span class="sc">::</span><span class="fu">getSymbols</span>(</span>
<span id="cb947-4"><a href="process-data-in-r.html#cb947-4" tabindex="-1"></a>        <span class="at">Symbols =</span> <span class="st">&quot;AAPL&quot;</span>,</span>
<span id="cb947-5"><a href="process-data-in-r.html#cb947-5" tabindex="-1"></a>        <span class="at">src =</span> <span class="st">&quot;yahoo&quot;</span>,</span>
<span id="cb947-6"><a href="process-data-in-r.html#cb947-6" tabindex="-1"></a>        <span class="at">auto.assign =</span> <span class="cn">FALSE</span>,</span>
<span id="cb947-7"><a href="process-data-in-r.html#cb947-7" tabindex="-1"></a>        <span class="at">return.class =</span> <span class="st">&quot;xts&quot;</span>)</span>
<span id="cb947-8"><a href="process-data-in-r.html#cb947-8" tabindex="-1"></a>}</span>
<span id="cb947-9"><a href="process-data-in-r.html#cb947-9" tabindex="-1"></a></span>
<span id="cb947-10"><a href="process-data-in-r.html#cb947-10" tabindex="-1"></a><span class="co"># Attach the import function as an attribute to the data object</span></span>
<span id="cb947-11"><a href="process-data-in-r.html#cb947-11" tabindex="-1"></a><span class="fu">attr</span>(AAPL_stock_price, <span class="st">&quot;import_command&quot;</span>) <span class="ot">&lt;-</span> import_AAPL_data</span>
<span id="cb947-12"><a href="process-data-in-r.html#cb947-12" tabindex="-1"></a></span>
<span id="cb947-13"><a href="process-data-in-r.html#cb947-13" tabindex="-1"></a><span class="co"># Demonstrate re-import of the data using the saved attribute</span></span>
<span id="cb947-14"><a href="process-data-in-r.html#cb947-14" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">attr</span>(AAPL_stock_price, <span class="st">&quot;import_command&quot;</span>)())</span></code></pre></div>
<pre><code>##            AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted
## 2024-06-25    209.15    211.38   208.61     209.07    56713900        209.07
## 2024-06-26    211.50    214.86   210.64     213.25    66213200        213.25
## 2024-06-27    214.69    215.74   212.35     214.10    49772700        214.10
## 2024-06-28    215.77    216.07   210.30     210.62    82542700        210.62
## 2024-07-01    212.09    217.51   211.92     216.75    60402900        216.75
## 2024-07-02    216.15    220.38   215.10     220.27    57960500        220.27</code></pre>
<p>By doing so, the data object becomes self-descriptive, facilitating easier data sharing and replication across different project stages or among collaborators.</p>
<p>Note that data is only available for roughly 252 days per year, as indicated by the table generated below:</p>
<div class="sourceCode" id="cb949"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb949-1"><a href="process-data-in-r.html#cb949-1" tabindex="-1"></a><span class="co"># Count available data points by year</span></span>
<span id="cb949-2"><a href="process-data-in-r.html#cb949-2" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">format</span>(<span class="fu">index</span>(AAPL_stock_price), <span class="st">&quot;%Y&quot;</span>))</span></code></pre></div>
<pre><code>## 
## 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 
##  251  253  252  252  252  250  252  252  252  252  251  251  252  253  252  251 
## 2023 2024 
##  250  126</code></pre>
<p>That’s because stock market data is only available on trading days, excluding weekends and holidays. The result is an <strong>irregular time series</strong> with gaps varying from one day to over a week. To achieve a regular time series, consider interpolation or aggregating to a lower frequency like monthly data. This process is detailed in a subsequent chapter (see Chapter <a href="process-data-in-r.html#process-stock-and-oil-prices-transform-data">5.2.8</a>) and is also discussed in Chapters <a href="data-structures-in-r.html#xts">4.8</a>.</p>
</div>
<div id="plot-apple-stock-prices" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Plot Apple Stock Prices<a href="process-data-in-r.html#plot-apple-stock-prices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s visualize the Apple stock prices using the <code>plot()</code> function:</p>
<div class="sourceCode" id="cb951"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb951-1"><a href="process-data-in-r.html#cb951-1" tabindex="-1"></a><span class="co"># Plot adjusted Apple share price</span></span>
<span id="cb951-2"><a href="process-data-in-r.html#cb951-2" tabindex="-1"></a><span class="fu">plot</span>(AAPL_stock_price_adj, <span class="at">main =</span> <span class="st">&quot;Apple Share Price&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:apple-stock-price"></span>
<img src="_main_files/figure-html/apple-stock-price-1.png" alt="Apple Share Price" width="80%" />
<p class="caption">
Figure 5.2: Apple Share Price
</p>
</div>
<p>Observe that this plot differs from those created in previous chapters where data was stored as vectors - specifically, columns from data frames or tibbles. This variation occurs because <code>plot()</code> is a wrapper function, adapting its behavior to the object type supplied (see Chapter <a href="r-basics.html#wrapper-functions">3.5.11</a> for more on wrapper functions). When given an <code>xts</code> object, <code>plot()</code> defaults to using the <code>plot.xts()</code> method, optimized for visualizing time series data. Therefore, it’s no longer necessary to specify it as a line plot (<code>type = "l"</code>), as most time series are visualized with lines. To explicitly use the <code>xts</code> type <code>plot()</code> function, you can use the <code>plot.xts()</code> function, which behaves identically as long as the input object is an <code>xts</code> object. If not, the function will attempt to convert the object first.</p>
<p>As we’ve explored in Chapter <a href="data-structures-in-r.html#xts">4.8</a>, an <code>xts</code> object is an enhancement of the <code>zoo</code> object, offering more features. My personal preference leans towards the <code>zoo</code> variant of <code>plot()</code>, <code>plot.zoo()</code>, over <code>plot.xts()</code> because it operates more similarly to how <code>plot()</code> does when applied to data frames. To utilize <code>plot.zoo()</code>, apply it to the <code>xts</code> object like so:</p>
<div class="sourceCode" id="cb952"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb952-1"><a href="process-data-in-r.html#cb952-1" tabindex="-1"></a><span class="co"># Plot adjusted Apple share price using plot.zoo()</span></span>
<span id="cb952-2"><a href="process-data-in-r.html#cb952-2" tabindex="-1"></a><span class="fu">plot.zoo</span>(AAPL_stock_price_adj, </span>
<span id="cb952-3"><a href="process-data-in-r.html#cb952-3" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">&quot;Apple Share Price&quot;</span>,</span>
<span id="cb952-4"><a href="process-data-in-r.html#cb952-4" tabindex="-1"></a>         <span class="at">xlab =</span> <span class="st">&quot;Date&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;USD&quot;</span>)</span></code></pre></div>
<p>In this context, the inputs are as follows:</p>
<ul>
<li><code>AAPL_stock_price_adj</code> is the <code>xts</code> object containing Apple Inc.’s adjusted stock prices, compatible with <code>plot.zoo()</code> thanks to <code>xts</code>’s extension of <code>zoo</code>.</li>
<li><code>main</code> sets the plot’s title, in this case, “Apple Share Price”.</li>
<li><code>xlab</code> and <code>ylab</code> respectively label the x-axis as “Date” and the y-axis as “USD”, denoting stock prices in U.S. dollars.</li>
</ul>
<p>The usage of <code>plot.zoo()</code> provides a more intuitive plotting method for some users, replicating <code>plot()</code>’s behavior with data frames more closely compared to <code>plot.xts()</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:apple-stock-price-zoo"></span>
<img src="_main_files/figure-html/apple-stock-price-zoo-1.png" alt="Apple Share Price Visualized with plot.zoo()" width="80%" />
<p class="caption">
Figure 5.3: Apple Share Price Visualized with plot.zoo()
</p>
</div>
<p>The resulting plot, shown in Figure <a href="process-data-in-r.html#fig:apple-stock-price-zoo">5.3</a>, visualizes the Apple share prices over the last two decades. Stock prices often exhibit exponential growth over time, meaning the value increases at a rate proportional to its current value. As such, even large percentage changes early in a stock’s history may appear minor due to a lower initial price. Conversely, smaller percentage changes at later stages can seem more significant due to a higher price level. This perspective can distort the perception of a stock’s historical volatility, making past changes appear smaller than they were. To more accurately represent these proportionate changes, many analysts prefer using logarithmic scales when visualizing stock price data:</p>
<div class="sourceCode" id="cb953"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb953-1"><a href="process-data-in-r.html#cb953-1" tabindex="-1"></a><span class="co"># Compute the natural logarithm (log) of Apple share price</span></span>
<span id="cb953-2"><a href="process-data-in-r.html#cb953-2" tabindex="-1"></a>log_AAPL_stock_price_adj <span class="ot">&lt;-</span> <span class="fu">log</span>(AAPL_stock_price_adj)</span>
<span id="cb953-3"><a href="process-data-in-r.html#cb953-3" tabindex="-1"></a></span>
<span id="cb953-4"><a href="process-data-in-r.html#cb953-4" tabindex="-1"></a><span class="co"># Plot log share price</span></span>
<span id="cb953-5"><a href="process-data-in-r.html#cb953-5" tabindex="-1"></a><span class="fu">plot.zoo</span>(log_AAPL_stock_price_adj, </span>
<span id="cb953-6"><a href="process-data-in-r.html#cb953-6" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">&quot;Logarithm of Apple Share Price&quot;</span>,</span>
<span id="cb953-7"><a href="process-data-in-r.html#cb953-7" tabindex="-1"></a>         <span class="at">xlab =</span> <span class="st">&quot;Date&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Log of USD Price&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:log-apple-stock-price"></span>
<img src="_main_files/figure-html/log-apple-stock-price-1.png" alt="Logarithm of Apple Share Price" width="80%" />
<p class="caption">
Figure 5.4: Logarithm of Apple Share Price
</p>
</div>
<p>Figure <a href="process-data-in-r.html#fig:log-apple-stock-price">5.4</a> displays the natural logarithm of the Apple share prices. This transformation is beneficial because it linearizes the exponential growth in the stock prices, with the slope of the line corresponding to the rate of growth. More importantly, changes in the logarithm of the price correspond directly to percentage changes in the price itself. For example, if the log price increases by 0.01, this equates to a 1% increase in the original price. This property allows for a direct comparison of price changes over time, making it easier to interpret and understand the magnitude of these changes in terms of relative growth or decline.</p>
</div>
<div id="plot-crude-oil-prices" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Plot Crude Oil Prices<a href="process-data-in-r.html#plot-crude-oil-prices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now, we’ll use the <code>plot.zoo()</code> function to graph the crude oil price:</p>
<div class="sourceCode" id="cb954"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb954-1"><a href="process-data-in-r.html#cb954-1" tabindex="-1"></a><span class="co"># Plot crude oil prices</span></span>
<span id="cb954-2"><a href="process-data-in-r.html#cb954-2" tabindex="-1"></a><span class="fu">plot.zoo</span>(OPEC_oil_price,</span>
<span id="cb954-3"><a href="process-data-in-r.html#cb954-3" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">&quot;OPEC Crude Oil Price&quot;</span>, </span>
<span id="cb954-4"><a href="process-data-in-r.html#cb954-4" tabindex="-1"></a>         <span class="at">xlab =</span> <span class="st">&quot;Date&quot;</span>, </span>
<span id="cb954-5"><a href="process-data-in-r.html#cb954-5" tabindex="-1"></a>         <span class="at">ylab =</span> <span class="st">&quot;USD per Barrel (159 Litres)&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:oil-price"></span>
<img src="_main_files/figure-html/oil-price-1.png" alt="OPEC Crude Oil Price" width="80%" />
<p class="caption">
Figure 5.5: OPEC Crude Oil Price
</p>
</div>
<p>Figure <a href="process-data-in-r.html#fig:oil-price">5.5</a> displays the OPEC crude oil prices over the last two decades. While stock prices often exhibit long-term exponential growth due to company expansions and increasing profits, oil prices don’t inherently follow the same pattern. The primary drivers of oil prices are supply and demand dynamics, shaped by a myriad of factors such as geopolitical events, production changes, advancements in technology, environmental policies, and shifts in global economic conditions. Oil prices, as a result, can undergo substantial fluctuations, exhibiting high volatility with periods of significant booms and busts, rather than consistent exponential growth.</p>
<p>Visualizing oil prices over time can benefit from the use of a logarithmic scale:</p>
<div class="sourceCode" id="cb955"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb955-1"><a href="process-data-in-r.html#cb955-1" tabindex="-1"></a><span class="co"># Compute the natural logarithm (log) of crude oil prices</span></span>
<span id="cb955-2"><a href="process-data-in-r.html#cb955-2" tabindex="-1"></a>log_OPEC_oil_price <span class="ot">&lt;-</span> <span class="fu">log</span>(OPEC_oil_price)</span>
<span id="cb955-3"><a href="process-data-in-r.html#cb955-3" tabindex="-1"></a></span>
<span id="cb955-4"><a href="process-data-in-r.html#cb955-4" tabindex="-1"></a><span class="co"># Plot log crude oil prices</span></span>
<span id="cb955-5"><a href="process-data-in-r.html#cb955-5" tabindex="-1"></a><span class="fu">plot.zoo</span>(log_OPEC_oil_price, </span>
<span id="cb955-6"><a href="process-data-in-r.html#cb955-6" tabindex="-1"></a>         <span class="at">main =</span> <span class="st">&quot;Logarithm of OPEC Crude Oil Price&quot;</span>,</span>
<span id="cb955-7"><a href="process-data-in-r.html#cb955-7" tabindex="-1"></a>         <span class="at">xlab =</span> <span class="st">&quot;Date&quot;</span>, </span>
<span id="cb955-8"><a href="process-data-in-r.html#cb955-8" tabindex="-1"></a>         <span class="at">ylab =</span> <span class="st">&quot;Log of USD per Barrel (159 Litres)&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:log-oil-price"></span>
<img src="_main_files/figure-html/log-oil-price-1.png" alt="Logarithm of OPEC Crude Oil Price" width="80%" />
<p class="caption">
Figure 5.6: Logarithm of OPEC Crude Oil Price
</p>
</div>
<p>The natural logarithm of crude oil price, depicted in Figure <a href="process-data-in-r.html#fig:log-oil-price">5.6</a>, offers a clearer view of relative changes over time. It does this by rescaling the data such that equivalent percentage changes align to the same distance on the scale, regardless of the actual price level at which they occur. This transformation means a change in the log value can be read directly as a percentage change in price. So, a decrease of 0.01 in the log price corresponds to a 1% decrease in the actual price, whether the initial price was $10, $100, or any other value. This makes the data more intuitive and straightforward to interpret, particularly when tracking price trends and volatility across various periods.</p>
</div>
<div id="process-stock-and-oil-prices-merge-data" class="section level3 hasAnchor" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> Merge Data<a href="process-data-in-r.html#process-stock-and-oil-prices-merge-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we focus on merging and cleaning two time-series datasets: Apple’s adjusted stock price (<code>AAPL_stock_price_adj</code>) and OPEC’s oil price (<code>OPEC_oil_price</code>). We’ll use R’s <code>merge()</code> function to combine these series into a single data object for comparative analysis.</p>
<div class="sourceCode" id="cb956"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb956-1"><a href="process-data-in-r.html#cb956-1" tabindex="-1"></a><span class="co"># Merge</span></span>
<span id="cb956-2"><a href="process-data-in-r.html#cb956-2" tabindex="-1"></a>Prices <span class="ot">&lt;-</span> <span class="fu">merge</span>(AAPL_stock_price_adj, OPEC_oil_price)</span>
<span id="cb956-3"><a href="process-data-in-r.html#cb956-3" tabindex="-1"></a><span class="fu">head</span>(Prices, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##            AAPL.Adjusted OPEC_oil_price
## 2003-01-02            NA          30.05
## 2003-01-03            NA          30.83
## 2003-01-06            NA          30.71</code></pre>
<p>Note that merging <code>AAPL_stock_price_adj</code> and <code>OPEC_oil_price</code> does not require a <code>by</code> argument because both datasets are <code>xts</code> objects. In the case of <code>xts</code>, merging is done automatically by date index via the <code>merge.xts()</code> method.</p>
<p>After merging, it’s sometimes useful to trim rows with <code>NA</code> values at either end, as they could affect subsequent analysis. The function <code>na.trim()</code> serves this purpose.</p>
<div class="sourceCode" id="cb958"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb958-1"><a href="process-data-in-r.html#cb958-1" tabindex="-1"></a><span class="co"># Trim data</span></span>
<span id="cb958-2"><a href="process-data-in-r.html#cb958-2" tabindex="-1"></a>Prices <span class="ot">&lt;-</span> <span class="fu">na.trim</span>(Prices)</span>
<span id="cb958-3"><a href="process-data-in-r.html#cb958-3" tabindex="-1"></a><span class="fu">head</span>(Prices, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##            AAPL.Adjusted OPEC_oil_price
## 2007-01-03      2.530319          55.42
## 2007-01-04      2.586482          53.26
## 2007-01-05      2.568063          51.30</code></pre>
<p>It’s also informative to examine specific periods where data is missing for either series. For instance, we can focus on the year 2022 to identify such instances.</p>
<div class="sourceCode" id="cb960"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb960-1"><a href="process-data-in-r.html#cb960-1" tabindex="-1"></a><span class="co"># Missing oil price data in 2022</span></span>
<span id="cb960-2"><a href="process-data-in-r.html#cb960-2" tabindex="-1"></a>Prices[<span class="fu">is.na</span>(Prices<span class="sc">$</span>OPEC_oil_price)][<span class="st">&quot;2022&quot;</span>]</span></code></pre></div>
<pre><code>##      AAPL.Adjusted OPEC_oil_price</code></pre>
<div class="sourceCode" id="cb962"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb962-1"><a href="process-data-in-r.html#cb962-1" tabindex="-1"></a><span class="co"># Missing stock price data in 2022</span></span>
<span id="cb962-2"><a href="process-data-in-r.html#cb962-2" tabindex="-1"></a>Prices[<span class="fu">is.na</span>(Prices<span class="sc">$</span>AAPL.Adjusted)][<span class="st">&quot;2022&quot;</span>]</span></code></pre></div>
<pre><code>##            AAPL.Adjusted OPEC_oil_price
## 2022-01-17            NA          86.38
## 2022-02-21            NA          94.04
## 2022-05-30            NA         120.01
## 2022-06-20            NA         113.39
## 2022-07-04            NA         115.25
## 2022-09-05            NA          99.76
## 2022-11-24            NA          81.52</code></pre>
<p>While OPEC oil prices are globally traded and thus consistently available, AAPL stock prices have gaps due to U.S. market holidays, which are listed in Table <a href="process-data-in-r.html#tab:american-holidays">5.2</a> below.</p>
<div class="tabwid"><style>.cl-eac3fe9a{}.cl-eabd296c{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-eabd2976{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-eabfcf6e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-eabfe6e8{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe6f2{width:2.06in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe6f3{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe6fc{width:2.06in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe6fd{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe6fe{width:2.06in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe706{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe707{width:2.06in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe710{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe711{width:2.06in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe712{width:1.067in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eabfe71a{width:2.06in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-eac3fe9a'>

<caption style="display:table-caption;margin:0pt;text-align:center;border-bottom: 0.00pt solid transparent;border-top: 0.00pt solid transparent;border-left: 0.00pt solid transparent;border-right: 0.00pt solid transparent;padding-top:3pt;padding-bottom:3pt;padding-left:3pt;padding-right:3pt;line-height: 1;background-color:transparent;">
<span id="tab:american-holidays">Table 5.2: </span><span>Data Gaps in 2022 due to U.S.-Specific Holidays</span>
</caption>

<thead><tr style="overflow-wrap:break-word;"><th class="cl-eabfe6e8"><p class="cl-eabfcf6e"><span class="cl-eabd296c">Date</span></p></th><th class="cl-eabfe6f2"><p class="cl-eabfcf6e"><span class="cl-eabd296c">U.S.-Specific Holiday</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-eabfe6f3"><p class="cl-eabfcf6e"><span class="cl-eabd2976">2022-01-17</span></p></td><td class="cl-eabfe6fc"><p class="cl-eabfcf6e"><span class="cl-eabd2976">Martin Luther King Jr. Day</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-eabfe6fd"><p class="cl-eabfcf6e"><span class="cl-eabd2976">2022-02-21</span></p></td><td class="cl-eabfe6fe"><p class="cl-eabfcf6e"><span class="cl-eabd2976">Presidents' Day</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-eabfe706"><p class="cl-eabfcf6e"><span class="cl-eabd2976">2022-05-30</span></p></td><td class="cl-eabfe707"><p class="cl-eabfcf6e"><span class="cl-eabd2976">Memorial Day</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-eabfe710"><p class="cl-eabfcf6e"><span class="cl-eabd2976">2022-06-20</span></p></td><td class="cl-eabfe711"><p class="cl-eabfcf6e"><span class="cl-eabd2976">Juneteenth</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-eabfe6fd"><p class="cl-eabfcf6e"><span class="cl-eabd2976">2022-07-04</span></p></td><td class="cl-eabfe6fe"><p class="cl-eabfcf6e"><span class="cl-eabd2976">Independence Day</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-eabfe6fd"><p class="cl-eabfcf6e"><span class="cl-eabd2976">2022-09-05</span></p></td><td class="cl-eabfe6fe"><p class="cl-eabfcf6e"><span class="cl-eabd2976">Labor Day</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-eabfe712"><p class="cl-eabfcf6e"><span class="cl-eabd2976">2022-11-24</span></p></td><td class="cl-eabfe71a"><p class="cl-eabfcf6e"><span class="cl-eabd2976">Thanksgiving</span></p></td></tr></tbody></table></div>
<p>Recognizing these details is important for time-series analysis.</p>
</div>
<div id="process-stock-and-oil-prices-transform-data" class="section level3 hasAnchor" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> Transform Data<a href="process-data-in-r.html#process-stock-and-oil-prices-transform-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we undertake a series of data transformations to prepare for further analysis. These transformations include the removal of missing values, aggregation to a monthly frequency, and computation of stock returns.</p>
<div id="return-formula" class="section level4 unnumbered hasAnchor">
<h4>Return Formula<a href="process-data-in-r.html#return-formula" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Returns on stocks or commodities are defined as the percentage change in price, given by:
<span class="math display">\[
r_t = 100 \left( \frac{P_t - P_{t-1}}{P_{t-1}} \right) \% \approx 100 \left( \ln P_t - \ln P_{t-1} \right)\%
\]</span>
Here, <span class="math inline">\(\ln P_t\)</span> is the natural logarithm of <span class="math inline">\(P_t\)</span>. The log difference, <span class="math inline">\(\ln P_t - \ln P_{t-1}\)</span>, approximates the arithmetic return, <span class="math inline">\(\frac{P_t - P_{t-1}}{P_{t-1}}\)</span>, particularly for small returns (less than <span class="math inline">\(\pm 20\%\)</span>).</p>
<p>Log returns are better for understanding how money grows over time. Imagine you invest $100 in a stock. On the first day, the stock gains 50%, so your investment is now worth $150. The next day, the stock loses 33.33%, bringing your investment down to $100 again.</p>
<p>Using arithmetic returns:</p>
<ol style="list-style-type: decimal">
<li>First day: (150 - 100) / 100 = 0.5 or 50%</li>
<li>Second day: (100 - 150) / 150 = -0.3333 or -33.33%</li>
<li>Total return = 50% - 33.33% = 16.67%</li>
</ol>
<p>If you simply sum the arithmetic returns, you’d think you have a positive total return of 16.67%. But you’re right back where you started, with $100.</p>
<p>Using log returns:</p>
<ol style="list-style-type: decimal">
<li>First day: <span class="math inline">\(\ln\)</span>(150/100) = 0.4055 or 40.55%</li>
<li>Second day: <span class="math inline">\(\ln\)</span>(100/150) = -0.4055 or -40.55%</li>
<li>Total log return = 40.55% - 40.55% = 0.00%</li>
</ol>
<p>The total log return correctly shows that, over the two days, you haven’t gained or lost any money.</p>
<p>This example illustrates why log returns can be less misleading when you are making multiple trades or assessing performance over time. They better capture the compounding effect and provide a more accurate representation of your returns.</p>
</div>
<div id="aggregate-to-regular-frequency" class="section level4 unnumbered hasAnchor">
<h4>Aggregate to Regular Frequency<a href="process-data-in-r.html#aggregate-to-regular-frequency" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We previously noted that stock and commodity prices have irregular frequencies, with approximately 252 trading days per year. Consequently, the notion of “return” can vary in duration, from one day to an entire week, which can introduce inconsistencies in the analysis.</p>
<p>To address this, one approach is to interpolate the data to a daily frequency for 365 days a year. Another approach is to aggregate the data to a less frequent, but more consistent, time frame like monthly, quarterly, or yearly periods. We opt for monthly aggregation. While a month is not a regular time unit—varying from 28 to 31 days - the variation in time intervals is considerably less problematic than in the original dataset.</p>
<p>It’s also important to note that U.S. stock market data are unavailable on U.S.-specific holidays, whereas commodity price data might still be accessible. To facilitate an apples-to-apples comparison between the two series, it’s crucial to eliminate the commodity prices for these particular days, as well. This can be accomplished using the <code>na.omit()</code> function on the merged dataset, which removes any rows where at least one column has missing data.</p>
<div class="sourceCode" id="cb964"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb964-1"><a href="process-data-in-r.html#cb964-1" tabindex="-1"></a><span class="co"># Remove missing values</span></span>
<span id="cb964-2"><a href="process-data-in-r.html#cb964-2" tabindex="-1"></a>Prices <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(Prices)</span></code></pre></div>
<p>The <code>apply.monthly()</code> function from the <code>xts</code> package is used to convert the data from a daily to a monthly frequency. Specifically, the last available price within each month is used for the monthly aggregation. This method is consistent with how the adjusted stock prices were aggregated to a daily frequency using each day’s closing price.</p>
<div class="sourceCode" id="cb965"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb965-1"><a href="process-data-in-r.html#cb965-1" tabindex="-1"></a><span class="co"># Aggregate to monthly frequency</span></span>
<span id="cb965-2"><a href="process-data-in-r.html#cb965-2" tabindex="-1"></a>Prices_monthly <span class="ot">&lt;-</span> <span class="fu">apply.monthly</span>(Prices, <span class="at">FUN =</span> last)</span></code></pre></div>
<p>This results in a time series with a consistent monthly frequency.</p>
</div>
<div id="compute-returns" class="section level4 unnumbered hasAnchor">
<h4>Compute Returns<a href="process-data-in-r.html#compute-returns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Next, we calculate monthly returns using the log formula:</p>
<div class="sourceCode" id="cb966"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb966-1"><a href="process-data-in-r.html#cb966-1" tabindex="-1"></a><span class="co"># Compute returns</span></span>
<span id="cb966-2"><a href="process-data-in-r.html#cb966-2" tabindex="-1"></a>Returns <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fu">diff.xts</span>(Prices_monthly, <span class="at">log =</span> <span class="cn">TRUE</span>, <span class="at">na.pad =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>To visualize the returns of both assets on a single graph, use the <code>plot.type = "single"</code> argument within the <code>plot.zoo()</code> function.</p>
<div class="sourceCode" id="cb967"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb967-1"><a href="process-data-in-r.html#cb967-1" tabindex="-1"></a><span class="co"># Plot returns</span></span>
<span id="cb967-2"><a href="process-data-in-r.html#cb967-2" tabindex="-1"></a><span class="fu">plot.zoo</span>(Returns, <span class="at">plot.type =</span> <span class="st">&quot;single&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Stock vs. Commodity Returns&quot;</span>,</span>
<span id="cb967-3"><a href="process-data-in-r.html#cb967-3" tabindex="-1"></a>         <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb967-4"><a href="process-data-in-r.html#cb967-4" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;bottomleft&quot;</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;Apple Stock Return&quot;</span>, <span class="st">&quot;Crude Oil Return&quot;</span>), </span>
<span id="cb967-5"><a href="process-data-in-r.html#cb967-5" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="at">lwd =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:apple-oil-return"></span>
<img src="_main_files/figure-html/apple-oil-return-1.png" alt="Stock vs. Commodity Returns" width="80%" />
<p class="caption">
Figure 5.7: Stock vs. Commodity Returns
</p>
</div>
<p>The plot, seen in Figure <a href="process-data-in-r.html#fig:apple-oil-return">5.7</a>, reveals substantial volatility in both investment avenues. Apple’s stock appears less volatile than oil, which is counterintuitive given that Apple is subject to company-specific risks, whereas oil is a globally traded commodity.</p>
<p>While Apple’s stock is susceptible to company-specific risks such as earnings reports, innovation cycles, and market competition, its diversification in various products and global markets may cushion it against extreme volatility.</p>
<p>Oil, on the other hand, faces a unique blend of risks that contribute to its high volatility. These include geopolitical tensions, supply-demand imbalances, and external shocks such as natural disasters affecting production. Oil prices are also influenced by decisions made by major producers like OPEC, and global events that affect oil consumption. These multiple and often unpredictable factors can lead to large price swings in a short period, making oil a more volatile investment compared to a single company’s stock like Apple.</p>
</div>
</div>
<div id="tabulate-key-statistics" class="section level3 hasAnchor" number="5.2.9">
<h3><span class="header-section-number">5.2.9</span> Tabulate Key Statistics<a href="process-data-in-r.html#tabulate-key-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While visualizations offer a broad overview of trends and patterns, precise statistics are crucial for in-depth data analysis.</p>
<p>We will calculate key statistics such as the mean, volatility, minimum, and maximum returns. These measures provide insights into the central tendency and dispersion of the data. Additionally, we’ll compute correlation to examine how the two series move together and autocorrelation to understand the persistence of each series.</p>
<div class="sourceCode" id="cb968"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb968-1"><a href="process-data-in-r.html#cb968-1" tabindex="-1"></a><span class="co"># Assemble key statistics in a data frame</span></span>
<span id="cb968-2"><a href="process-data-in-r.html#cb968-2" tabindex="-1"></a>stats_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb968-3"><a href="process-data-in-r.html#cb968-3" tabindex="-1"></a>    <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">apply</span>(Returns, <span class="dv">2</span>, mean),</span>
<span id="cb968-4"><a href="process-data-in-r.html#cb968-4" tabindex="-1"></a>    <span class="st">&quot;Volatility (Standard Deviation)&quot;</span> <span class="ot">=</span> <span class="fu">apply</span>(Returns, <span class="dv">2</span>, sd),</span>
<span id="cb968-5"><a href="process-data-in-r.html#cb968-5" tabindex="-1"></a>    <span class="st">&quot;Minimum Return&quot;</span> <span class="ot">=</span> <span class="fu">apply</span>(Returns, <span class="dv">2</span>, min),</span>
<span id="cb968-6"><a href="process-data-in-r.html#cb968-6" tabindex="-1"></a>    <span class="st">&quot;Maximum Return&quot;</span> <span class="ot">=</span> <span class="fu">apply</span>(Returns, <span class="dv">2</span>, max),</span>
<span id="cb968-7"><a href="process-data-in-r.html#cb968-7" tabindex="-1"></a>    <span class="st">&quot;Autocorrelation&quot;</span> <span class="ot">=</span> <span class="fu">apply</span>(Returns, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">cor</span>(x, <span class="fu">lag.xts</span>(x, <span class="dv">1</span>), </span>
<span id="cb968-8"><a href="process-data-in-r.html#cb968-8" tabindex="-1"></a>                                                          <span class="at">use =</span> <span class="st">&quot;complete.obs&quot;</span>)),</span>
<span id="cb968-9"><a href="process-data-in-r.html#cb968-9" tabindex="-1"></a>    <span class="st">&quot;Correlation to Crude Oil Return&quot;</span> <span class="ot">=</span> <span class="fu">cor</span>(Returns)[<span class="dv">2</span>, ])</span>
<span id="cb968-10"><a href="process-data-in-r.html#cb968-10" tabindex="-1"></a><span class="fu">colnames</span>(stats_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Apple Stock Return&quot;</span>, <span class="st">&quot;Crude Oil Return&quot;</span>)</span>
<span id="cb968-11"><a href="process-data-in-r.html#cb968-11" tabindex="-1"></a><span class="fu">print</span>(stats_df)</span></code></pre></div>
<pre><code>##                                 Apple Stock Return Crude Oil Return
## Mean                                     2.1151903        0.2173427
## Volatility (Standard Deviation)          9.0237222       11.9508115
## Minimum Return                         -39.9818045      -79.7423517
## Maximum Return                          21.3255863       47.4494913
## Autocorrelation                          0.1069703        0.3068170
## Correlation to Crude Oil Return          0.3273161        1.0000000</code></pre>
<p>The table title should specify the unit of return (in percent), the data frequency (monthly), and the time range for which the statistics are calculated.</p>
<div class="sourceCode" id="cb970"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb970-1"><a href="process-data-in-r.html#cb970-1" tabindex="-1"></a><span class="co"># Define the time range for the statistics</span></span>
<span id="cb970-2"><a href="process-data-in-r.html#cb970-2" tabindex="-1"></a>time_interval <span class="ot">&lt;-</span> <span class="fu">format</span>(<span class="at">x =</span> <span class="fu">range</span>(<span class="fu">index</span>(Returns)), <span class="at">format =</span> <span class="st">&quot;%b %Y&quot;</span>)</span>
<span id="cb970-3"><a href="process-data-in-r.html#cb970-3" tabindex="-1"></a><span class="fu">print</span>(time_interval)</span></code></pre></div>
<pre><code>## [1] &quot;Feb 2007&quot; &quot;Jan 2024&quot;</code></pre>
<div class="sourceCode" id="cb972"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb972-1"><a href="process-data-in-r.html#cb972-1" tabindex="-1"></a><span class="co"># Create table title</span></span>
<span id="cb972-2"><a href="process-data-in-r.html#cb972-2" tabindex="-1"></a>stats_title <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Monthly $</span><span class="sc">\\</span><span class="st">%$-Return Statistics:&quot;</span>, </span>
<span id="cb972-3"><a href="process-data-in-r.html#cb972-3" tabindex="-1"></a>                     <span class="fu">paste</span>(time_interval, <span class="at">collapse =</span> <span class="st">&quot; to &quot;</span>))</span>
<span id="cb972-4"><a href="process-data-in-r.html#cb972-4" tabindex="-1"></a><span class="fu">print</span>(stats_title)</span></code></pre></div>
<pre><code>## [1] &quot;Monthly $\\%$-Return Statistics: Feb 2007 to Jan 2024&quot;</code></pre>
<p>The table output from <code>print(stats_df)</code> is unsuitable for professional documents. For Microsoft Word or PowerPoint, export the table to a CSV file using <code>write.table()</code> and then insert it into the document. For LaTeX or HTML formats, employ the <code>kable()</code> function from the <code>knitr</code> package for a more refined table presentation.</p>
<div class="sourceCode" id="cb974"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb974-1"><a href="process-data-in-r.html#cb974-1" tabindex="-1"></a><span class="co"># Load knitr for table rendering</span></span>
<span id="cb974-2"><a href="process-data-in-r.html#cb974-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;knitr&quot;</span>)</span>
<span id="cb974-3"><a href="process-data-in-r.html#cb974-3" tabindex="-1"></a></span>
<span id="cb974-4"><a href="process-data-in-r.html#cb974-4" tabindex="-1"></a><span class="co"># Format table with rounded statistics</span></span>
<span id="cb974-5"><a href="process-data-in-r.html#cb974-5" tabindex="-1"></a><span class="fu">kable</span>(<span class="at">x =</span> <span class="fu">round</span>(stats_df, <span class="dv">2</span>), </span>
<span id="cb974-6"><a href="process-data-in-r.html#cb974-6" tabindex="-1"></a>      <span class="at">caption =</span> stats_title,</span>
<span id="cb974-7"><a href="process-data-in-r.html#cb974-7" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">&quot;simple&quot;</span>)</span></code></pre></div>
<pre><code>
Table: (\#tab:return-stats) Monthly $\%$-Return Statistics: Feb 2007 to Jan 2024

                                   Apple Stock Return   Crude Oil Return
--------------------------------  -------------------  -----------------
Mean                                             2.12               0.22
Volatility (Standard Deviation)                  9.02              11.95
Minimum Return                                 -39.98             -79.74
Maximum Return                                  21.33              47.45
Autocorrelation                                  0.11               0.31
Correlation to Crude Oil Return                  0.33               1.00</code></pre>
<p>In HTML or LaTeX documents, <code>kable()</code> produces neatly formatted tables, as seen in Table <a href="process-data-in-r.html#tab:apple-oil-return-statistics">5.3</a>, by setting the <code>format</code> parameter to either <code>format = "html"</code> or <code>format = "latex"</code>. For further customization options of the <code>kable()</code> function, refer to Chapter <a href="write-reports-with-r-markdown.html#print-tables">6.7</a>.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:apple-oil-return-statistics">Table 5.3: </span>Monthly <span class="math inline">\(\%\)</span>-Return Statistics: Feb 2007 to Jan 2024
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Apple Stock Return
</th>
<th style="text-align:right;">
Crude Oil Return
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mean
</td>
<td style="text-align:right;">
2.12
</td>
<td style="text-align:right;">
0.22
</td>
</tr>
<tr>
<td style="text-align:left;">
Volatility (Standard Deviation)
</td>
<td style="text-align:right;">
9.02
</td>
<td style="text-align:right;">
11.95
</td>
</tr>
<tr>
<td style="text-align:left;">
Minimum Return
</td>
<td style="text-align:right;">
-39.98
</td>
<td style="text-align:right;">
-79.74
</td>
</tr>
<tr>
<td style="text-align:left;">
Maximum Return
</td>
<td style="text-align:right;">
21.33
</td>
<td style="text-align:right;">
47.45
</td>
</tr>
<tr>
<td style="text-align:left;">
Autocorrelation
</td>
<td style="text-align:right;">
0.11
</td>
<td style="text-align:right;">
0.31
</td>
</tr>
<tr>
<td style="text-align:left;">
Correlation to Crude Oil Return
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
</tbody>
</table>
<p>Table <a href="process-data-in-r.html#tab:apple-oil-return-statistics">5.3</a> presents key statistical metrics for two investment avenues - Apple stock and crude oil - over a specific time period. Apple stock shows a mean return of approximately 2.12%, which is higher than crude oil’s mean return of 0.22%, suggesting better average performance. Moreover, crude oil exhibits greater volatility, with a standard deviation of about 11.95% compared to Apple’s 9.02%, indicating higher risk. Both investment avenues have experienced substantial downside risks, as evidenced by their minimum monthly returns of approximately -39.98% and -79.74% for Apple and crude oil, respectively. Crude oil has seen peaks of considerably higher returns than Apple, with a maximum of about 47.45%, compared to Apple’s 21.33%. The autocorrelation values of 0.11 for Apple and 0.31 for crude oil suggest that past returns have some, albeit limited, influence on future returns, more so for crude oil. Lastly, a correlation of 0.33 between Apple and crude oil returns indicates a mild positive relationship, implying that diversifying across these two asset classes may offer limited but non-negligible benefits.</p>
</div>
<div id="visualize-correlations" class="section level3 hasAnchor" number="5.2.10">
<h3><span class="header-section-number">5.2.10</span> Visualize Correlations<a href="process-data-in-r.html#visualize-correlations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The correlations outlined in Table <a href="process-data-in-r.html#tab:apple-oil-return-statistics">5.3</a> merit further inspection through <strong>scatter plots</strong>. These visualizations allow for an assessment of whether the observed correlations hold broadly or are mainly driven by outliers.</p>
<div class="sourceCode" id="cb976"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb976-1"><a href="process-data-in-r.html#cb976-1" tabindex="-1"></a><span class="co"># Put three plots on one figure</span></span>
<span id="cb976-2"><a href="process-data-in-r.html#cb976-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span>
<span id="cb976-3"><a href="process-data-in-r.html#cb976-3" tabindex="-1"></a></span>
<span id="cb976-4"><a href="process-data-in-r.html#cb976-4" tabindex="-1"></a><span class="co"># Autocorrelation of Apple returns and their lags</span></span>
<span id="cb976-5"><a href="process-data-in-r.html#cb976-5" tabindex="-1"></a>x_var <span class="ot">&lt;-</span> <span class="fu">lag.xts</span>(Returns<span class="sc">$</span>AAPL.Adjusted, <span class="dv">1</span>)</span>
<span id="cb976-6"><a href="process-data-in-r.html#cb976-6" tabindex="-1"></a>y_var <span class="ot">&lt;-</span> Returns<span class="sc">$</span>AAPL.Adjusted</span>
<span id="cb976-7"><a href="process-data-in-r.html#cb976-7" tabindex="-1"></a><span class="fu">plot.default</span>(<span class="at">x =</span> x_var, <span class="at">y =</span> y_var, </span>
<span id="cb976-8"><a href="process-data-in-r.html#cb976-8" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">&quot;Lagged Apple Stock Returns&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Apple Stock Returns&quot;</span>)</span>
<span id="cb976-9"><a href="process-data-in-r.html#cb976-9" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">a =</span> <span class="fu">lm</span>(y_var <span class="sc">~</span> x_var), <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb976-10"><a href="process-data-in-r.html#cb976-10" tabindex="-1"></a>corr_text <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="at">x =</span> <span class="fu">cor</span>(<span class="at">x =</span> x_var, <span class="at">y =</span> y_var, <span class="at">use=</span><span class="st">&quot;complete.obs&quot;</span>), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb976-11"><a href="process-data-in-r.html#cb976-11" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(x_var)), <span class="at">y =</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(y_var)) <span class="sc">+</span> <span class="dv">10</span>, </span>
<span id="cb976-12"><a href="process-data-in-r.html#cb976-12" tabindex="-1"></a>     <span class="at">labels =</span> <span class="fu">paste</span>(<span class="st">&quot;Autocorrelation:&quot;</span>, corr_text), <span class="at">pos =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb976-13"><a href="process-data-in-r.html#cb976-13" tabindex="-1"></a></span>
<span id="cb976-14"><a href="process-data-in-r.html#cb976-14" tabindex="-1"></a><span class="co"># Autocorrelation of oil returns and their lags</span></span>
<span id="cb976-15"><a href="process-data-in-r.html#cb976-15" tabindex="-1"></a>x_var <span class="ot">&lt;-</span> <span class="fu">lag.xts</span>(Returns<span class="sc">$</span>OPEC_oil_price, <span class="dv">1</span>)</span>
<span id="cb976-16"><a href="process-data-in-r.html#cb976-16" tabindex="-1"></a>y_var <span class="ot">&lt;-</span> Returns<span class="sc">$</span>OPEC_oil_price</span>
<span id="cb976-17"><a href="process-data-in-r.html#cb976-17" tabindex="-1"></a><span class="fu">plot.default</span>(<span class="at">x =</span> x_var, <span class="at">y =</span> y_var, </span>
<span id="cb976-18"><a href="process-data-in-r.html#cb976-18" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">&quot;Lagged Oil Returns&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Oil Returns&quot;</span>)</span>
<span id="cb976-19"><a href="process-data-in-r.html#cb976-19" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">a =</span> <span class="fu">lm</span>(y_var <span class="sc">~</span> x_var), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb976-20"><a href="process-data-in-r.html#cb976-20" tabindex="-1"></a>corr_text <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="at">x =</span> <span class="fu">cor</span>(<span class="at">x =</span> x_var, <span class="at">y =</span> y_var, <span class="at">use=</span><span class="st">&quot;complete.obs&quot;</span>), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb976-21"><a href="process-data-in-r.html#cb976-21" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(x_var)), <span class="at">y =</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(y_var)) <span class="sc">+</span> <span class="dv">10</span>, </span>
<span id="cb976-22"><a href="process-data-in-r.html#cb976-22" tabindex="-1"></a>     <span class="at">labels =</span> <span class="fu">paste</span>(<span class="st">&quot;Autocorrelation:&quot;</span>, corr_text), <span class="at">pos =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb976-23"><a href="process-data-in-r.html#cb976-23" tabindex="-1"></a></span>
<span id="cb976-24"><a href="process-data-in-r.html#cb976-24" tabindex="-1"></a><span class="co"># Correlation of Apple and oil returns</span></span>
<span id="cb976-25"><a href="process-data-in-r.html#cb976-25" tabindex="-1"></a>x_var <span class="ot">&lt;-</span> Returns<span class="sc">$</span>OPEC_oil_price</span>
<span id="cb976-26"><a href="process-data-in-r.html#cb976-26" tabindex="-1"></a>y_var <span class="ot">&lt;-</span> Returns<span class="sc">$</span>AAPL.Adjusted</span>
<span id="cb976-27"><a href="process-data-in-r.html#cb976-27" tabindex="-1"></a><span class="fu">plot.default</span>(<span class="at">x =</span> x_var, <span class="at">y =</span> y_var, </span>
<span id="cb976-28"><a href="process-data-in-r.html#cb976-28" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">&quot;Oil Returns&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Apple Stock Returns&quot;</span>)</span>
<span id="cb976-29"><a href="process-data-in-r.html#cb976-29" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">a =</span> <span class="fu">lm</span>(y_var <span class="sc">~</span> x_var), <span class="at">col =</span> <span class="st">&quot;purple&quot;</span>)</span>
<span id="cb976-30"><a href="process-data-in-r.html#cb976-30" tabindex="-1"></a>corr_text <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="at">x =</span> <span class="fu">cor</span>(<span class="at">x =</span> x_var, <span class="at">y =</span> y_var, <span class="at">use=</span><span class="st">&quot;complete.obs&quot;</span>), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb976-31"><a href="process-data-in-r.html#cb976-31" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(x_var)), <span class="at">y =</span> <span class="fu">min</span>(<span class="fu">na.omit</span>(y_var)) <span class="sc">+</span> <span class="dv">10</span>, </span>
<span id="cb976-32"><a href="process-data-in-r.html#cb976-32" tabindex="-1"></a>     <span class="at">labels =</span> <span class="fu">paste</span>(<span class="st">&quot;Correlation:&quot;</span>, corr_text), <span class="at">pos =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">&quot;purple&quot;</span>)</span>
<span id="cb976-33"><a href="process-data-in-r.html#cb976-33" tabindex="-1"></a></span>
<span id="cb976-34"><a href="process-data-in-r.html#cb976-34" tabindex="-1"></a><span class="co"># Add a title above all three plots</span></span>
<span id="cb976-35"><a href="process-data-in-r.html#cb976-35" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))  <span class="co"># Reset to a single plot layout</span></span>
<span id="cb976-36"><a href="process-data-in-r.html#cb976-36" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Cross- and Autocorrelations of Financial Returns&quot;</span>, <span class="at">outer =</span> <span class="cn">TRUE</span>, <span class="at">line =</span> <span class="sc">-</span><span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:apple-oil-correlations"></span>
<img src="_main_files/figure-html/apple-oil-correlations-1.png" alt="Cross- and Autocorrelations of Financial Returns" width="80%" />
<p class="caption">
Figure 5.8: Cross- and Autocorrelations of Financial Returns
</p>
</div>
<p>In this R code:</p>
<ul>
<li><code>par(mfrow = c(1, 3))</code>: Configures the plotting space to display three plots in one row. The parameter <code>mfrow</code> sets this layout, where the first number <code>1</code> specifies the number of rows and the second <code>3</code> specifies the number of columns.</li>
<li><code>plot.default(...)</code>: Creates the scatter plots to compare returns. The <code>plot.default()</code> function is invoked explicitly to bypass the default time-series plotting behavior of <code>xts</code> objects that would be triggered by the generic <code>plot()</code> function. For a discussion on wrapper functions like <code>plot()</code> and their associated methods, refer to Chapter <a href="r-basics.html#wrapper-functions">3.5.11</a>.</li>
<li><code>abline(lm(...), ...)</code>: Adds a line to the plot, showing the best-fit straight line through the data points. This line helps to visualize the relationship between the variables.</li>
<li><code>corr_text &lt;- round(cor(x, y, use = "complete.obs), 2)</code>: Calculates the rounded correlation between the two sets of returns, omitting pairs with <code>NA</code> values via <code>use = "complete.obs"</code>.</li>
<li><code>text(x = min(na.omit(x_var)), min(y = na.omit(y_var)) + 10, ...)</code>: Places a label on each plot, showing the rounded correlation coefficient. The text appears close to the minimum values of the x and y axes to avoid overlap.</li>
<li><code>par(mfrow = c(1, 1))</code>: Reverts the plotting area to a single-frame layout, necessary for adding an overarching title.</li>
<li><code>title("Cross- and Autocorrelations of Financial Returns", outer = TRUE, line = -2)</code>: Positions an overarching title above all subplots. The <code>outer = TRUE</code> parameter ensures the title appears outside the individual plot areas, and <code>line = -2</code> adjusts its vertical positioning.</li>
</ul>
<p>Figure <a href="process-data-in-r.html#fig:apple-oil-correlations">5.8</a> examines the relationships among Apple stock returns, oil price returns, and their respective lagged values. The first two panels show that data points significantly diverge from the fitted lines, suggesting that the autocorrelation values 0.11 and 0.31 are likely influenced by outliers rather than representing a consistent trend. The third panel, however, shows a more stable relationship between Apple and oil returns, which correlation value is 0.33. This suggests that low (or high) returns in one asset generally coincide with low (or high) returns in the other. This matches what we see in Figure <a href="process-data-in-r.html#fig:apple-oil-return">5.7</a>, where if one asset goes up or down, the other usually does the same.</p>
</div>
</div>
<div id="process-house-price-data" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Process House Price Data<a href="process-data-in-r.html#process-house-price-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter focuses on the processing of residential property price (RPP) data from the Bank for International Settlements <span class="citation">(BIS, <a href="#ref-data-bis-pp">2023b</a>)</span>. The aim is to prepare the data for further analyses, especially its comparison with policy rates, also obtained from BIS <span class="citation">(<a href="#ref-data-bis-policy-rate">2023a</a>)</span>. The chapter employs functions from the Tidyverse ecosystem in R, specifically using <code>dplyr</code> and <code>tidyr</code> for data manipulation as previously introduced in Chapter <a href="data-structures-in-r.html#tibble">4.6</a>. Given the dataset’s multidimensional nature - spanning various indicators, regions, and time periods - the chapter introduces advanced plotting techniques via the <code>ggplot2</code> package. It also addresses the complexities of computing associative statistics in such a multidimensional setting. Upon completing this chapter, readers will gain a holistic understanding of how to manage and analyze multidimensional data using these R tools.</p>
<div id="download-excel-workbook" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Download Excel Workbook<a href="process-data-in-r.html#download-excel-workbook" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To get RPP data from the BIS <span class="citation">(<a href="#ref-data-bis-pp">2023b</a>)</span>, follow these steps:</p>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://www.bis.org/">www.bis.org</a>.</li>
<li>Go to “Statistics” &gt; “Property Prices” &gt; “Selected Residential”.</li>
<li>Click the “XLSX” button next to the data description: “Nominal and real residential property prices…”.</li>
<li>Once downloaded, place the file in your R working directory, specifically in a folder named “files,” and name it <code>pp_selected.xlsx</code>.</li>
</ol>
<p>House prices will also be compared to policy rates from the BIS <span class="citation">(<a href="#ref-data-bis-policy-rate">2023a</a>)</span>, obtained as follows:</p>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://www.bis.org/">www.bis.org</a>.</li>
<li>Go to “Statistics” &gt; “Other Indicators” &gt; “Policy Rates”.</li>
<li>Click the “XLSX” button next to the data description: “Monthly data”.</li>
<li>Once downloaded, place the file in your R working directory, specifically in a folder named “files,” and name it <code>cbpol.xlsx</code>.</li>
</ol>
<p>For guidance on finding and setting your <strong>working directory</strong>, see Chapters <a href="r-basics.html#find-folder-path">3.7.1</a> and <a href="r-basics.html#set-working-directory">3.7.2</a>. To learn how to create a folder and download files directly from a website within R, check Chapter <a href="r-basics.html#download-files">3.7.3</a>.</p>
</div>
<div id="import-excel-workbook" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Import Excel Workbook<a href="process-data-in-r.html#import-excel-workbook" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An Excel workbook (<code>xlsx</code>) is a file that contains one or more spreadsheets (worksheets), which are the separate “pages” or “tabs” within the file. An Excel worksheet, or simply a sheet, is a single spreadsheet within an Excel workbook. It consists of a grid of cells formed by intersecting rows (labeled by numbers) and columns (labeled by letters), which can hold data such as text, numbers, and formulas.</p>
<p>The <code>readxl</code> package by <span class="citation">Wickham and Bryan (<a href="#ref-R-readxl">2023</a>)</span> provides functions that allow for importing Excel files into R as a tibble structure, which is the tidyverse-version of a data frame (see Chapter <a href="data-structures-in-r.html#tibble">4.6</a> for an overview on tibbles, and Chapter <a href="r-basics.html#the-tidyverse">3.6.7</a> for the tidyverse). Hence, to import the residential property price (RPP) database, which is an Excel workbook, install and load the <code>readxl</code> package by running <code>install.packages("readxl")</code> in the console and include the package at the beginning of your R script. You can then use the <code>excel_sheets()</code> function to print the names of all Excel worksheets in the workbook, and the <code>read_excel()</code> function to import a particular worksheet.</p>
<p>Here’s an illustration of how to employ the <code>excel_sheets()</code> function using the <code>pp_selected.xlsx</code> file downloaded from the Bank for International Settlements.</p>
<div class="sourceCode" id="cb977"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb977-1"><a href="process-data-in-r.html#cb977-1" tabindex="-1"></a><span class="co"># Load the packages</span></span>
<span id="cb977-2"><a href="process-data-in-r.html#cb977-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb977-3"><a href="process-data-in-r.html#cb977-3" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tibble&quot;</span>)</span>
<span id="cb977-4"><a href="process-data-in-r.html#cb977-4" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb977-5"><a href="process-data-in-r.html#cb977-5" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb977-6"><a href="process-data-in-r.html#cb977-6" tabindex="-1"></a></span>
<span id="cb977-7"><a href="process-data-in-r.html#cb977-7" tabindex="-1"></a><span class="co"># Get names of all Excel worksheets</span></span>
<span id="cb977-8"><a href="process-data-in-r.html#cb977-8" tabindex="-1"></a>sheet_names <span class="ot">&lt;-</span> <span class="fu">excel_sheets</span>(<span class="at">path =</span> <span class="st">&quot;files/pp_selected.xlsx&quot;</span>)</span>
<span id="cb977-9"><a href="process-data-in-r.html#cb977-9" tabindex="-1"></a>sheet_names</span></code></pre></div>
<pre><code>## [1] &quot;Content&quot;               &quot;Summary Documentation&quot; &quot;Quarterly Series&quot;</code></pre>
<p>This reveals that there are three Excel sheets: “Content”, “Summary Documentation”, and “Quarterly Series”. The “Content” sheet provides information about how the Excel workbook is structured, as well as how to cite the data when using it, and links to documentation files. The “Summary Documentation” sheet provides information about the house price variables, such as the variable’s code, reference area, unit of measurement, and whether it’s price adjusted. Finally, the “Quarterly Series” sheet stores the house prices, where each row is a different quarter, and each column is a different variable. There are four header rows, where the first three include information about the variable that is also available in the “Summary Documentation” sheet, and the last row references the variable’s code. Hence, it is sufficient to import “Summary Documentation” for variable information and “Quarterly Series” without the first three rows for the data.</p>
<div class="sourceCode" id="cb979"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb979-1"><a href="process-data-in-r.html#cb979-1" tabindex="-1"></a><span class="co"># Import Excel worksheet: &quot;Summary Documentation&quot; </span></span>
<span id="cb979-2"><a href="process-data-in-r.html#cb979-2" tabindex="-1"></a>RPP_labels <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb979-3"><a href="process-data-in-r.html#cb979-3" tabindex="-1"></a>    <span class="at">path =</span> <span class="st">&quot;files/pp_selected.xlsx&quot;</span>, </span>
<span id="cb979-4"><a href="process-data-in-r.html#cb979-4" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">&quot;Summary Documentation&quot;</span>,</span>
<span id="cb979-5"><a href="process-data-in-r.html#cb979-5" tabindex="-1"></a>    <span class="at">col_names =</span> <span class="cn">TRUE</span>,                <span class="co"># The file has a header row with names</span></span>
<span id="cb979-6"><a href="process-data-in-r.html#cb979-6" tabindex="-1"></a>    <span class="at">na =</span> <span class="st">&quot;-&quot;</span>                         <span class="co"># Character string representing NA values</span></span>
<span id="cb979-7"><a href="process-data-in-r.html#cb979-7" tabindex="-1"></a>)</span>
<span id="cb979-8"><a href="process-data-in-r.html#cb979-8" tabindex="-1"></a></span>
<span id="cb979-9"><a href="process-data-in-r.html#cb979-9" tabindex="-1"></a><span class="co"># Import Excel worksheet: &quot;Quarterly Series&quot; </span></span>
<span id="cb979-10"><a href="process-data-in-r.html#cb979-10" tabindex="-1"></a>RPP_wide <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb979-11"><a href="process-data-in-r.html#cb979-11" tabindex="-1"></a>    <span class="at">path =</span> <span class="st">&quot;files/pp_selected.xlsx&quot;</span>,</span>
<span id="cb979-12"><a href="process-data-in-r.html#cb979-12" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">&quot;Quarterly Series&quot;</span>,</span>
<span id="cb979-13"><a href="process-data-in-r.html#cb979-13" tabindex="-1"></a>    <span class="at">col_names =</span> <span class="cn">TRUE</span>,                <span class="co"># The file has a header row with names</span></span>
<span id="cb979-14"><a href="process-data-in-r.html#cb979-14" tabindex="-1"></a>    <span class="at">na =</span> <span class="st">&quot;&quot;</span>,                         <span class="co"># Character string representing NA values</span></span>
<span id="cb979-15"><a href="process-data-in-r.html#cb979-15" tabindex="-1"></a>    <span class="at">skip =</span> <span class="dv">3</span>                         <span class="co"># Skips the first three rows</span></span>
<span id="cb979-16"><a href="process-data-in-r.html#cb979-16" tabindex="-1"></a>)</span></code></pre></div>
<p>As a side note, when the Excel workbook consists of a large number of sheets, e.g. each representing different variables, then it makes sense to use <code>lapply()</code> to import all sheets at once:</p>
<div class="sourceCode" id="cb980"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb980-1"><a href="process-data-in-r.html#cb980-1" tabindex="-1"></a><span class="co"># Import all worksheets of an Excel workbook without customization</span></span>
<span id="cb980-2"><a href="process-data-in-r.html#cb980-2" tabindex="-1"></a>import_all <span class="ot">&lt;-</span> <span class="fu">lapply</span>(sheet_names, <span class="cf">function</span>(x) </span>
<span id="cb980-3"><a href="process-data-in-r.html#cb980-3" tabindex="-1"></a>    <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">&quot;files/pp_selected.xlsx&quot;</span>, <span class="at">sheet =</span> x))</span>
<span id="cb980-4"><a href="process-data-in-r.html#cb980-4" tabindex="-1"></a></span>
<span id="cb980-5"><a href="process-data-in-r.html#cb980-5" tabindex="-1"></a><span class="co"># Name the list elements, each representing a different worksheet</span></span>
<span id="cb980-6"><a href="process-data-in-r.html#cb980-6" tabindex="-1"></a><span class="fu">names</span>(import_all) <span class="ot">&lt;-</span> sheet_names</span></code></pre></div>
<p>In the provided code snippet, the <code>lapply()</code> function is used to apply the <code>read_excel()</code> function to each element in the <code>sheet_names</code> list, returning a list that is the same length as the input. Consequently, the <code>import_all</code> object becomes a list in which each element is a tibble corresponding to an individual Excel worksheet, which is named accordingly. For instance, to access the worksheet “Summary Documentation”, you would select <code>import_all[["Summary Documentation"]]</code>. This approach is useful if each sheet refers to a different variable, but in this case, since we only have three sheets, importing each sheet separately with sheet-specific customizations makes more sense.</p>
</div>
<div id="process-house-price-data-inspect-and-clean-data" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Inspect and Clean Data<a href="process-data-in-r.html#process-house-price-data-inspect-and-clean-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once data is imported, a preliminary examination ensures its accuracy. Note that because <code>read_excel()</code> imports data as a tibble and not a data frame, R doesn’t print the entire data frame; hence, simply entering the data names <code>RPP_labels</code> and <code>RPP</code> into the console already provides a good overview. For more details, use RStudio’s spreadsheet-like viewer via <code>View(RPP_labels)</code> and <code>View(RPP)</code> (exclusive to RStudio and not included in R).</p>
<p>For a more detailed exploration of the data’s structure, execute <code>str()</code> or <code>glimpse()</code> from the <code>tibble</code> package, and execute <code>summary()</code> for a summary of the data.</p>
<div class="sourceCode" id="cb981"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb981-1"><a href="process-data-in-r.html#cb981-1" tabindex="-1"></a><span class="co"># Overview of variable labels</span></span>
<span id="cb981-2"><a href="process-data-in-r.html#cb981-2" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(RPP_labels)</span></code></pre></div>
<pre><code>## Rows: 248
## Columns: 9
## $ `Data set`       &lt;chr&gt; &quot;BIS_SPP&quot;, &quot;BIS_SPP&quot;, &quot;BIS_SPP&quot;, &quot;BIS_SPP&quot;, &quot;BIS_SPP&quot;…
## $ Code             &lt;chr&gt; &quot;Q:4T:N:628&quot;, &quot;Q:4T:N:771&quot;, &quot;Q:4T:R:628&quot;, &quot;Q:4T:R:771…
## $ Frequency        &lt;chr&gt; &quot;Quarterly&quot;, &quot;Quarterly&quot;, &quot;Quarterly&quot;, &quot;Quarterly&quot;, &quot;…
## $ `Reference area` &lt;chr&gt; &quot;Emerging market economies (aggregate)&quot;, &quot;Emerging ma…
## $ Value            &lt;chr&gt; &quot;Nominal&quot;, &quot;Nominal&quot;, &quot;Real&quot;, &quot;Real&quot;, &quot;Nominal&quot;, &quot;Nom…
## $ Unit             &lt;chr&gt; &quot;Index, 2010 = 100&quot;, &quot;Year-on-year changes, in per ce…
## $ Coverage         &lt;chr&gt; &quot;Emerging markets covered in the BIS residential prop…
## $ `Series title`   &lt;chr&gt; &quot;Residential property prices selected - Nominal - Ind…
## $ Breaks           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</code></pre>
<p>Here, all variables of the <code>RPP_labels</code> tibble are of data type character <code>&lt;chr&gt;</code>, which makes sense, as they consist of verbal descriptions of the data.</p>
<p>Examining the <strong>data types</strong> of each column is crucial as they may be incorrectly assigned during import. Use <code>sapply()</code> in conjunction with <code>class()</code> to identify the types:</p>
<div class="sourceCode" id="cb983"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb983-1"><a href="process-data-in-r.html#cb983-1" tabindex="-1"></a><span class="co"># Inspect the overall structure of the dataset</span></span>
<span id="cb983-2"><a href="process-data-in-r.html#cb983-2" tabindex="-1"></a><span class="fu">class</span>(RPP_wide)</span>
<span id="cb983-3"><a href="process-data-in-r.html#cb983-3" tabindex="-1"></a></span>
<span id="cb983-4"><a href="process-data-in-r.html#cb983-4" tabindex="-1"></a><span class="co"># Determine the class of each column</span></span>
<span id="cb983-5"><a href="process-data-in-r.html#cb983-5" tabindex="-1"></a>RPP_data_types <span class="ot">&lt;-</span> <span class="fu">sapply</span>(RPP_wide, class)</span>
<span id="cb983-6"><a href="process-data-in-r.html#cb983-6" tabindex="-1"></a></span>
<span id="cb983-7"><a href="process-data-in-r.html#cb983-7" tabindex="-1"></a><span class="co"># Validate if the first column &#39;Period&#39; is of Date or POSIXct type</span></span>
<span id="cb983-8"><a href="process-data-in-r.html#cb983-8" tabindex="-1"></a>RPP_data_types[<span class="dv">1</span>]</span>
<span id="cb983-9"><a href="process-data-in-r.html#cb983-9" tabindex="-1"></a></span>
<span id="cb983-10"><a href="process-data-in-r.html#cb983-10" tabindex="-1"></a><span class="co"># Confirm whether all remaining columns are numeric</span></span>
<span id="cb983-11"><a href="process-data-in-r.html#cb983-11" tabindex="-1"></a><span class="fu">all</span>(RPP_data_types[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;
## $Period
## [1] &quot;POSIXct&quot; &quot;POSIXt&quot; 
## 
## [1] TRUE</code></pre>
<p>In this case, R correctly identifies the ‘Period’ as <code>POSIXct</code> and all house prices as numeric. No type conversions are needed.</p>
<p>To improve data clarity, consider adding <strong>contextual attributes</strong> like the data source and the count of imported rows, as we did with the imported Bitcoin price data in Chapter <a href="process-data-in-r.html#process-bitcoin-price-data-clean-data">5.1.4</a>.</p>
<p>Lastly, pay attention to <strong>variable labels</strong>. The column <code>Value</code> in BIS’s RPP data indicates whether the residential property price (RPP) is <code>"Real"</code> or <code>"Nominal"</code>. To avoid confusion with data values, the column name is changed to <code>Measure</code>. Additionally, the column <code>Reference area</code> is simplified to <code>Region</code>, and the <code>Unit</code> descriptions are abbreviated for ease. Converting these attributes into factors enhances computational efficiency.</p>
<div class="sourceCode" id="cb985"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb985-1"><a href="process-data-in-r.html#cb985-1" tabindex="-1"></a><span class="co"># Rename variables</span></span>
<span id="cb985-2"><a href="process-data-in-r.html#cb985-2" tabindex="-1"></a>RPP_labels <span class="ot">&lt;-</span> RPP_labels <span class="sc">%&gt;%</span> </span>
<span id="cb985-3"><a href="process-data-in-r.html#cb985-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Code =</span> <span class="fu">factor</span>(Code),</span>
<span id="cb985-4"><a href="process-data-in-r.html#cb985-4" tabindex="-1"></a>           <span class="at">Region =</span> <span class="fu">factor</span>(<span class="st">`</span><span class="at">Reference area</span><span class="st">`</span>), </span>
<span id="cb985-5"><a href="process-data-in-r.html#cb985-5" tabindex="-1"></a>           <span class="at">Unit =</span> <span class="fu">factor</span>(Unit), </span>
<span id="cb985-6"><a href="process-data-in-r.html#cb985-6" tabindex="-1"></a>           <span class="at">Measure =</span> <span class="fu">factor</span>(Value))</span>
<span id="cb985-7"><a href="process-data-in-r.html#cb985-7" tabindex="-1"></a></span>
<span id="cb985-8"><a href="process-data-in-r.html#cb985-8" tabindex="-1"></a><span class="co"># Abbreviate unit labels</span></span>
<span id="cb985-9"><a href="process-data-in-r.html#cb985-9" tabindex="-1"></a>renaming_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Year-on-year changes, in per cent&quot;</span> <span class="ot">=</span> <span class="st">&quot;YoY-Growth&quot;</span>,</span>
<span id="cb985-10"><a href="process-data-in-r.html#cb985-10" tabindex="-1"></a>                     <span class="st">&quot;Index, 2010 = 100&quot;</span> <span class="ot">=</span> <span class="st">&quot;Index&quot;</span>)</span>
<span id="cb985-11"><a href="process-data-in-r.html#cb985-11" tabindex="-1"></a><span class="fu">levels</span>(RPP_labels<span class="sc">$</span>Unit) <span class="ot">&lt;-</span> renaming_vector[<span class="fu">levels</span>(RPP_labels<span class="sc">$</span>Unit)]</span></code></pre></div>
<p>This R code performs two main tasks: renaming variables and modifying their labels.</p>
<ol style="list-style-type: decimal">
<li>Rename Variables:
<ul>
<li><code>mutate(Code = factor(Code), Region = factor('Reference area'), Unit = factor(Unit), Measure = factor(Value))</code>: The <code>mutate</code> function from <code>dplyr</code> is used to change the column names. Here, <code>Reference area</code> is renamed to <code>Region</code> and <code>Value</code> to <code>Measure</code>. All these variables are also converted to factors which are more efficient for computation and analysis in R.</li>
</ul></li>
<li>Abbreviate Labels:
<ul>
<li><code>renaming_vector &lt;- c("Year-on-year changes, in per cent" = "YoY-Growth", "Index, 2010 = 100" = "Index")</code>: A vector called <code>renaming_vector</code> is created to store the new abbreviated labels.</li>
<li><code>levels(RPP_labels$Unit) &lt;- renaming_vector[levels(RPP_labels$Unit)]</code>: This line replaces the old labels in the <code>Unit</code> column with the new abbreviated labels from <code>renaming_vector</code>.</li>
</ul></li>
</ol>
<p>The renaming is better done after converting to factors because R will then only change the factor levels instead of having to traverse through each string to replace it, thus enhancing computational efficiency.</p>
</div>
<div id="process-house-price-data-reshape-data" class="section level3 hasAnchor" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Reshape Data<a href="process-data-in-r.html#process-house-price-data-reshape-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The process of reshaping data from wide to long format and vice versa is often critical for effective data analysis. For data frames, the <code>reshape()</code> function is commonly used, as explored in Chapter <a href="data-structures-in-r.html#reshape-data-frames">4.5.8</a>. For tibbles, we generally use <code>pivot_longer()</code> and <code>pivot_wider()</code> functions from the <code>tidyr</code> package. These are discussed in detail in Chapter <a href="data-structures-in-r.html#reshape-tibbles">4.6.8</a>.</p>
<div id="from-wide-to-long-format" class="section level4 unnumbered hasAnchor">
<h4>From Wide to Long Format<a href="process-data-in-r.html#from-wide-to-long-format" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s take a look at the initial structure of our data. Tables <a href="process-data-in-r.html#tab:rpp-data-wide">5.4</a> and <a href="process-data-in-r.html#tab:rpp-label-wide">5.5</a> display our RPP data and its corresponding labels.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:rpp-data-wide">Table 5.4: </span>RPP Data in Wide Format
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period
</th>
<th style="text-align:right;">
Q:US:R:628
</th>
<th style="text-align:right;">
Q:US:R:771
</th>
<th style="text-align:right;">
Q:XM:R:628
</th>
<th style="text-align:right;">
Q:XM:R:771
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:right;">
158.1889
</td>
<td style="text-align:right;">
2.7320
</td>
<td style="text-align:right;">
115.2157
</td>
<td style="text-align:right;">
-2.4634
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:right;">
157.5075
</td>
<td style="text-align:right;">
-0.1327
</td>
<td style="text-align:right;">
110.6743
</td>
<td style="text-align:right;">
-6.4343
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:right;">
157.7020
</td>
<td style="text-align:right;">
-2.4097
</td>
<td style="text-align:right;">
109.2423
</td>
<td style="text-align:right;">
-7.1131
</td>
</tr>
</tbody>
</table>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:rpp-label-wide">Table 5.5: </span>RPP Labels in Long Format
</caption>
<thead>
<tr>
<th style="text-align:left;">
Code
</th>
<th style="text-align:left;">
Region
</th>
<th style="text-align:left;">
Measure
</th>
<th style="text-align:left;">
Unit
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Q:US:R:628
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:left;">
Index
</td>
</tr>
<tr>
<td style="text-align:left;">
Q:US:R:771
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:left;">
YoY-Growth
</td>
</tr>
<tr>
<td style="text-align:left;">
Q:XM:R:628
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:left;">
Index
</td>
</tr>
<tr>
<td style="text-align:left;">
Q:XM:R:771
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:left;">
YoY-Growth
</td>
</tr>
</tbody>
</table>
<p>In Table <a href="process-data-in-r.html#tab:rpp-data-wide">5.4</a>, the data is organized in a wide format, where each variable forms a column. Conversely, Table <a href="process-data-in-r.html#tab:rpp-label-wide">5.5</a> displays the labels in a long format, where each variable corresponds to a row. To align these two different structures, we employ the <code>pivot_longer()</code> function from the <code>tidyr</code> package.</p>
<div class="sourceCode" id="cb986"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb986-1"><a href="process-data-in-r.html#cb986-1" tabindex="-1"></a><span class="co"># Load the necessary package</span></span>
<span id="cb986-2"><a href="process-data-in-r.html#cb986-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb986-3"><a href="process-data-in-r.html#cb986-3" tabindex="-1"></a></span>
<span id="cb986-4"><a href="process-data-in-r.html#cb986-4" tabindex="-1"></a><span class="co"># Reshape the data from a wide to a long format.</span></span>
<span id="cb986-5"><a href="process-data-in-r.html#cb986-5" tabindex="-1"></a>RPP <span class="ot">&lt;-</span> RPP_wide <span class="sc">%&gt;%</span> </span>
<span id="cb986-6"><a href="process-data-in-r.html#cb986-6" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Period, </span>
<span id="cb986-7"><a href="process-data-in-r.html#cb986-7" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Code&quot;</span>, </span>
<span id="cb986-8"><a href="process-data-in-r.html#cb986-8" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Value&quot;</span>,</span>
<span id="cb986-9"><a href="process-data-in-r.html#cb986-9" tabindex="-1"></a>                 <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>The <code>pivot_longer()</code> function in the code reshapes the data from wide to long format. Here’s the breakdown of its arguments:</p>
<ul>
<li><code>cols = -Period</code>: Specifies that all columns except “Period” will be converted to a long format.</li>
<li><code>names_to = "Code"</code>: The names of the reshaped columns will be stored in a new column named “Code”.</li>
<li><code>values_to = "Value"</code>: The values from the reshaped columns will go into a new column named “Value”.</li>
<li><code>values_drop_na = TRUE</code>: Any rows that would contain <code>NA</code> values in the new “Value” column are removed.</li>
</ul>
<p>So, the function takes multiple columns and condenses them into two: one for the <code>Code</code> (original column names) and one for the <code>Value</code> (original data values), as is evident in Table <a href="process-data-in-r.html#tab:rpp-data-long">5.6</a>.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:rpp-data-long">Table 5.6: </span>RPP Data in Long Format
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period
</th>
<th style="text-align:left;">
Code
</th>
<th style="text-align:right;">
Value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:US:R:628
</td>
<td style="text-align:right;">
158.1889
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:US:R:771
</td>
<td style="text-align:right;">
2.7320
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:XM:R:628
</td>
<td style="text-align:right;">
115.2157
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:XM:R:771
</td>
<td style="text-align:right;">
-2.4634
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:US:R:628
</td>
<td style="text-align:right;">
157.5075
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:US:R:771
</td>
<td style="text-align:right;">
-0.1327
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:XM:R:628
</td>
<td style="text-align:right;">
110.6743
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:XM:R:771
</td>
<td style="text-align:right;">
-6.4343
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:US:R:628
</td>
<td style="text-align:right;">
157.7020
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:US:R:771
</td>
<td style="text-align:right;">
-2.4097
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:XM:R:628
</td>
<td style="text-align:right;">
109.2423
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:XM:R:771
</td>
<td style="text-align:right;">
-7.1131
</td>
</tr>
</tbody>
</table>
<p>With the data now in long format, it becomes feasible to merge it with the labels. For this, we use the <code>left_join()</code> function from the <code>dplyr</code> package. This type of join is explained in Chapter <a href="data-structures-in-r.html#combine-tibbles">4.6.6</a>. The advantage of a “left” join is that it ensures no data is omitted; if any labels are missing, the associated data remains intact, with the label fields populated as <code>NA</code>.</p>
<div class="sourceCode" id="cb987"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb987-1"><a href="process-data-in-r.html#cb987-1" tabindex="-1"></a><span class="co"># Perform the merging operation</span></span>
<span id="cb987-2"><a href="process-data-in-r.html#cb987-2" tabindex="-1"></a>RPP <span class="ot">&lt;-</span> RPP <span class="sc">%&gt;%</span> </span>
<span id="cb987-3"><a href="process-data-in-r.html#cb987-3" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="at">y =</span> RPP_labels <span class="sc">%&gt;%</span> </span>
<span id="cb987-4"><a href="process-data-in-r.html#cb987-4" tabindex="-1"></a>                  <span class="fu">select</span>(Code, Region, Unit, Measure), </span>
<span id="cb987-5"><a href="process-data-in-r.html#cb987-5" tabindex="-1"></a>              <span class="at">by =</span> <span class="st">&quot;Code&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb987-6"><a href="process-data-in-r.html#cb987-6" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Value, <span class="fu">everything</span>(), Value)</span></code></pre></div>
<p>The <code>left_join()</code> function is used to merge two datasets based on a common column, in this case, “Code”.</p>
<ul>
<li><code>y = RPP_labels %&gt;% select(Code, Region, Unit, Measure)</code>: Specifies that the second dataset in the join is a subset of <code>RPP_labels</code>, containing only the columns “Code”, “Region”, “Unit”, and “Measure,” omitting redundant or overly detailed columns like “Frequency” and “Coverage.”</li>
<li><code>by = "Code"</code>: Specifies that the datasets will be merged based on the “Code” column.</li>
<li><code>select(-Value, everything(), Value)</code>: Rearranges the columns, moving the “Value” column to the end.</li>
</ul>
<p>The <code>left_join()</code> operation will keep all rows from <code>RPP</code> (the left dataset), and add corresponding data from <code>RPP_labels</code> where the “Code” matches. If there’s a “Code” in <code>RPP</code> that is not found in <code>RPP_labels</code>, that row will still be in the output, but the new columns (“Region”, “Unit”, “Measure”) will have <code>NA</code> values.</p>
<p>After merging, the data and labels appear fully integrated in a long format, as can be seen in Table <a href="process-data-in-r.html#tab:rpp-data-with-labels-long">5.7</a>.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:rpp-data-with-labels-long">Table 5.7: </span>RPP Data with Labels in Long Format
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period
</th>
<th style="text-align:left;">
Code
</th>
<th style="text-align:left;">
Region
</th>
<th style="text-align:left;">
Unit
</th>
<th style="text-align:left;">
Measure
</th>
<th style="text-align:right;">
Value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:US:R:628
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Index
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
158.1889
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:US:R:771
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
YoY-Growth
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
2.7320
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:XM:R:628
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
Index
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
115.2157
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:left;">
Q:XM:R:771
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
YoY-Growth
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
-2.4634
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:US:R:628
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Index
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
157.5075
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:US:R:771
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
YoY-Growth
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
-0.1327
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:XM:R:628
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
Index
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
110.6743
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:left;">
Q:XM:R:771
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
YoY-Growth
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
-6.4343
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:US:R:628
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Index
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
157.7020
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:US:R:771
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
YoY-Growth
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
-2.4097
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:XM:R:628
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
Index
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
109.2423
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:left;">
Q:XM:R:771
</td>
<td style="text-align:left;">
Euro area
</td>
<td style="text-align:left;">
YoY-Growth
</td>
<td style="text-align:left;">
Real
</td>
<td style="text-align:right;">
-7.1131
</td>
</tr>
</tbody>
</table>
<p>The data in long format, showcased in Table <a href="process-data-in-r.html#tab:rpp-data-with-labels-long">5.7</a>, is often referred to as “tidy” data. This format makes it easier to work with the data in future analysis steps.</p>
</div>
<div id="from-long-to-wide-format" class="section level4 unnumbered hasAnchor">
<h4>From Long to Wide Format<a href="process-data-in-r.html#from-long-to-wide-format" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Some data manipulation tasks and R packages need data in a specific format. For example, the <code>xts</code> package for time series, as mentioned in Chapter <a href="data-structures-in-r.html#xts">4.8</a>, requires data in wide format. In this format, each row corresponds to a time period, and each column represents a variable.</p>
<p>The challenge in switching from long to wide format is that the long format has multiple descriptor columns, like <code>Region</code>, <code>Unit</code>, and <code>Measure</code>. In wide format, this results in complex column names, like <code>Region.Unit.Measure</code>, as displayed in the following Table <a href="#tab:rpp-with-labels-wide"><strong>??</strong></a>.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:rpp-data-with-labels-wide">Table 5.8: </span>RPP Data with Labels in Wide Format
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period
</th>
<th style="text-align:right;">
Italy.Nominal.Index
</th>
<th style="text-align:right;">
Italy.Nominal.YoY-Growth
</th>
<th style="text-align:right;">
Italy.Real.Index
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:right;">
90.4318
</td>
<td style="text-align:right;">
2.6923
</td>
<td style="text-align:right;">
70.9075
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:right;">
90.4318
</td>
<td style="text-align:right;">
1.0407
</td>
<td style="text-align:right;">
70.6296
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-06-30
</td>
<td style="text-align:right;">
92.2100
</td>
<td style="text-align:right;">
0.7401
</td>
<td style="text-align:right;">
71.7172
</td>
</tr>
</tbody>
</table>
<p>The conversion from long to wide format, i.e. from Table <a href="process-data-in-r.html#tab:rpp-data-with-labels-long">5.7</a> to <a href="process-data-in-r.html#tab:rpp-data-with-labels-wide">5.8</a>, is achieved using the <code>pivot_wider()</code> function from the <code>tidyr</code> package.</p>
<div class="sourceCode" id="cb988"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb988-1"><a href="process-data-in-r.html#cb988-1" tabindex="-1"></a><span class="co"># Reshape from long to wide</span></span>
<span id="cb988-2"><a href="process-data-in-r.html#cb988-2" tabindex="-1"></a>RPP_with_labels_wide <span class="ot">&lt;-</span> RPP <span class="sc">%&gt;%</span> </span>
<span id="cb988-3"><a href="process-data-in-r.html#cb988-3" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="st">&quot;Period&quot;</span>, </span>
<span id="cb988-4"><a href="process-data-in-r.html#cb988-4" tabindex="-1"></a>                <span class="at">names_from =</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>, <span class="st">&quot;Measure&quot;</span>, <span class="st">&quot;Unit&quot;</span>),</span>
<span id="cb988-5"><a href="process-data-in-r.html#cb988-5" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="st">&quot;Value&quot;</span>,</span>
<span id="cb988-6"><a href="process-data-in-r.html#cb988-6" tabindex="-1"></a>                <span class="at">names_sep =</span> <span class="st">&quot;.&quot;</span>)</span></code></pre></div>
<p>In this R code snippet, the function <code>pivot_wider()</code> from the <code>tidyr</code> package is used to transform a long-format dataset (<code>RPP</code>) into a wide-format one (<code>RPP_with_labels_wide</code>). Here’s a breakdown of the function’s arguments:</p>
<ul>
<li><code>id_cols = "Period"</code>: This sets the “Period” column as the identifier column, around which the reshaping will happen.</li>
<li><code>names_from = c("Region", "Measure", "Unit")</code>: The unique combinations of values in these columns (“Region,” “Measure,” “Unit”) will become new column names in the wide-format dataset.</li>
<li><code>values_from = "Value"</code>: Specifies that the numerical “Value” column from the long-format dataset will be used to populate the cells in the new wide-format columns.</li>
<li><code>names_sep = "."</code>: The new column names generated from “Region,” “Measure,” and “Unit” will be separated by a period (.)</li>
</ul>
<p>So the resulting <code>RPP_with_labels_wide</code> dataset, visualized in Table <a href="process-data-in-r.html#tab:rpp-data-with-labels-wide">5.8</a>, will have a column for each unique combination of “Region,” “Measure,” and “Unit,” and these will be populated with the corresponding “Value” from the original <code>RPP</code> dataset. The “Period” column remains as the identifier.</p>
<p>The resulting wide-format data can be hard to read because of the complex column names. One solution is to filter and focus on specific subsets before converting to wide format. For instance, to focus on the real RPP index, we first filter the data:</p>
<div class="sourceCode" id="cb989"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb989-1"><a href="process-data-in-r.html#cb989-1" tabindex="-1"></a><span class="co"># Select real RPP index</span></span>
<span id="cb989-2"><a href="process-data-in-r.html#cb989-2" tabindex="-1"></a>RPP_real_index <span class="ot">&lt;-</span> RPP <span class="sc">%&gt;%</span> </span>
<span id="cb989-3"><a href="process-data-in-r.html#cb989-3" tabindex="-1"></a>    <span class="fu">filter</span>(Measure <span class="sc">==</span> <span class="st">&quot;Real&quot;</span>, Unit <span class="sc">==</span> <span class="st">&quot;Index&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb989-4"><a href="process-data-in-r.html#cb989-4" tabindex="-1"></a>    <span class="fu">select</span>(Period, Region, <span class="st">`</span><span class="at">Real RPP</span><span class="st">`</span> <span class="ot">=</span> Value)</span></code></pre></div>
<p>Then, we can convert this filtered data to wide format:</p>
<div class="sourceCode" id="cb990"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb990-1"><a href="process-data-in-r.html#cb990-1" tabindex="-1"></a><span class="co"># Reshape from wide to long</span></span>
<span id="cb990-2"><a href="process-data-in-r.html#cb990-2" tabindex="-1"></a>RPP_real_index_wide <span class="ot">&lt;-</span> RPP_real_index <span class="sc">%&gt;%</span> </span>
<span id="cb990-3"><a href="process-data-in-r.html#cb990-3" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="st">&quot;Period&quot;</span>, </span>
<span id="cb990-4"><a href="process-data-in-r.html#cb990-4" tabindex="-1"></a>                <span class="at">names_from =</span> <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>),</span>
<span id="cb990-5"><a href="process-data-in-r.html#cb990-5" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="st">&quot;Real RPP&quot;</span>)</span></code></pre></div>
<p>Here, the column names become simpler, just representing different regions, as shown in Table <a href="process-data-in-r.html#tab:rpp-real-index-wide">5.9</a>. It makes the wide-format data easier to work with.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:rpp-real-index-wide">Table 5.9: </span>Real RPP Index by Region in Wide Format
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period
</th>
<th style="text-align:right;">
Australia
</th>
<th style="text-align:right;">
Colombia
</th>
<th style="text-align:right;">
Japan
</th>
<th style="text-align:right;">
Germany
</th>
<th style="text-align:right;">
South Africa
</th>
<th style="text-align:right;">
United States
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2022-09-30
</td>
<td style="text-align:right;">
133.8846
</td>
<td style="text-align:right;">
142.4936
</td>
<td style="text-align:right;">
122.0932
</td>
<td style="text-align:right;">
153.4093
</td>
<td style="text-align:right;">
93.1363
</td>
<td style="text-align:right;">
158.1889
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-12-31
</td>
<td style="text-align:right;">
126.6149
</td>
<td style="text-align:right;">
138.2781
</td>
<td style="text-align:right;">
119.8312
</td>
<td style="text-align:right;">
142.6217
</td>
<td style="text-align:right;">
93.1787
</td>
<td style="text-align:right;">
157.5075
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-03-31
</td>
<td style="text-align:right;">
122.4054
</td>
<td style="text-align:right;">
138.2344
</td>
<td style="text-align:right;">
123.0206
</td>
<td style="text-align:right;">
136.4207
</td>
<td style="text-align:right;">
92.2980
</td>
<td style="text-align:right;">
157.7020
</td>
</tr>
</tbody>
</table>
<p>By focusing on a subset, we simplify the wide-format data, making it more manageable for analysis.</p>
</div>
</div>
<div id="layered-line-graphs" class="section level3 hasAnchor" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Layered Line Graphs<a href="process-data-in-r.html#layered-line-graphs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Line graphs serve to illustrate temporal trends and patterns. In R, there are two main approaches for creating such graphs: the base R plotting system, featuring functions like <code>plot()</code> and <code>matplot()</code>, and the <code>ggplot2</code> package by <span class="citation">Wickham et al. (<a href="#ref-R-ggplot2">2024</a>)</span>, which employs the <code>ggplot()</code> function. Although both visualize data, there are stark differences in their approaches, particularly in their data format requirements, layering philosophies, and extensibility.</p>
<div id="basic-line-graphs-using-matplot" class="section level4 unnumbered hasAnchor">
<h4>Basic Line Graphs Using <code>matplot()</code><a href="process-data-in-r.html#basic-line-graphs-using-matplot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Base R functions like <code>plot()</code> and <code>matplot()</code> operate under a procedural paradigm. Essentially, what you see is what you get. Each function call adds or modifies specific attributes of the graph, and there’s limited scope for dynamically layering or extending the plot.</p>
<p>In the basic <code>plot(x, y)</code> function, a vector <code>y</code> is plotted relative to another vector <code>x</code>. When <code>y</code> is a matrix, <code>matplot(x, y)</code> serves as the alternative. Generally, <code>matplot()</code> anticipates data in wide format, where each time-series or category is allocated its own column. While this approach is convenient for simple visualizations, it may become cumbersome for more complex, multi-layered visualizations.</p>
<p>Here’s how to use <code>matplot()</code> to plot residential property prices for all regions, assuming the data is in wide format:</p>
<div class="sourceCode" id="cb991"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb991-1"><a href="process-data-in-r.html#cb991-1" tabindex="-1"></a><span class="co"># Produce line plots</span></span>
<span id="cb991-2"><a href="process-data-in-r.html#cb991-2" tabindex="-1"></a><span class="fu">matplot</span>(<span class="at">x =</span> RPP_real_index_wide<span class="sc">$</span>Period, </span>
<span id="cb991-3"><a href="process-data-in-r.html#cb991-3" tabindex="-1"></a>        <span class="at">y =</span> RPP_real_index_wide[, <span class="sc">-</span><span class="dv">1</span>], </span>
<span id="cb991-4"><a href="process-data-in-r.html#cb991-4" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, </span>
<span id="cb991-5"><a href="process-data-in-r.html#cb991-5" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Residential Property Prices - All Regions&quot;</span>, </span>
<span id="cb991-6"><a href="process-data-in-r.html#cb991-6" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Period&quot;</span>, </span>
<span id="cb991-7"><a href="process-data-in-r.html#cb991-7" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Index, 2010 = 100&quot;</span>,</span>
<span id="cb991-8"><a href="process-data-in-r.html#cb991-8" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">250</span>))</span></code></pre></div>
<p>This R code chunk creates a line plot of residential property prices for all regions using the <code>matplot()</code> function. Here’s a breakdown of the code:</p>
<ul>
<li><code>matplot(x = RPP_real_index_wide$Period, y = RPP_real_index_wide[, -1], type = "l")</code>: The function <code>matplot()</code> is used to plot multiple lines. The <code>x</code> argument specifies the time period to be plotted on the x-axis. The <code>y</code> argument specifies the data for the y-axis, omitting the first column which contains the time period. The <code>type = "l"</code> argument indicates that lines should be used for the plot.</li>
<li><code>main = "Residential Property Prices - All Regions"</code>: Sets the title of the graph.</li>
<li><code>xlab = "Period"</code>: Labels the x-axis as “Period”.</li>
<li><code>ylab = "Index, 2010 = 100"</code>: Labels the y-axis as “Index, 2010 = 100”.</li>
<li><code>ylim = c(0, 250)</code>: Sets the limits for the y-axis to range from 0 to 250.</li>
</ul>
<p>In summary, this code chunk generates Figure <a href="process-data-in-r.html#fig:rpp-all-matplot">5.9</a>, a line plot that displays the trend of residential property prices across all regions over a specified period. Note that the regions are not labeled to avoid crowding the plot.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rpp-all-matplot"></span>
<img src="_main_files/figure-html/rpp-all-matplot-1.png" alt="Basic Plot of Residential Property Prices - All Regions" width="80%" />
<p class="caption">
Figure 5.9: Basic Plot of Residential Property Prices - All Regions
</p>
</div>
<p>To add labels in a less cluttered plot, you can manually select a subset of regions as shown in the following example:</p>
<div class="sourceCode" id="cb992"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb992-1"><a href="process-data-in-r.html#cb992-1" tabindex="-1"></a><span class="co"># Select variables to plot</span></span>
<span id="cb992-2"><a href="process-data-in-r.html#cb992-2" tabindex="-1"></a>selected_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb992-3"><a href="process-data-in-r.html#cb992-3" tabindex="-1"></a>    <span class="st">&quot;Australia&quot;</span>,     <span class="co"># Oceania</span></span>
<span id="cb992-4"><a href="process-data-in-r.html#cb992-4" tabindex="-1"></a>    <span class="st">&quot;Colombia&quot;</span>,      <span class="co"># South America</span></span>
<span id="cb992-5"><a href="process-data-in-r.html#cb992-5" tabindex="-1"></a>    <span class="st">&quot;Japan&quot;</span>,         <span class="co"># Asia</span></span>
<span id="cb992-6"><a href="process-data-in-r.html#cb992-6" tabindex="-1"></a>    <span class="st">&quot;Germany&quot;</span>,       <span class="co"># Europe</span></span>
<span id="cb992-7"><a href="process-data-in-r.html#cb992-7" tabindex="-1"></a>    <span class="st">&quot;South Africa&quot;</span>,  <span class="co"># Africa</span></span>
<span id="cb992-8"><a href="process-data-in-r.html#cb992-8" tabindex="-1"></a>    <span class="st">&quot;United States&quot;</span>  <span class="co"># North America</span></span>
<span id="cb992-9"><a href="process-data-in-r.html#cb992-9" tabindex="-1"></a>)</span>
<span id="cb992-10"><a href="process-data-in-r.html#cb992-10" tabindex="-1"></a></span>
<span id="cb992-11"><a href="process-data-in-r.html#cb992-11" tabindex="-1"></a><span class="co"># Multiple line plots</span></span>
<span id="cb992-12"><a href="process-data-in-r.html#cb992-12" tabindex="-1"></a><span class="fu">matplot</span>(<span class="at">x =</span> RPP_real_index_wide<span class="sc">$</span>Period, </span>
<span id="cb992-13"><a href="process-data-in-r.html#cb992-13" tabindex="-1"></a>        <span class="at">y =</span> RPP_real_index_wide[, selected_countries], </span>
<span id="cb992-14"><a href="process-data-in-r.html#cb992-14" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, </span>
<span id="cb992-15"><a href="process-data-in-r.html#cb992-15" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Residential Property Prices - Selected Countries&quot;</span>, </span>
<span id="cb992-16"><a href="process-data-in-r.html#cb992-16" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Period&quot;</span>, </span>
<span id="cb992-17"><a href="process-data-in-r.html#cb992-17" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Index, 2010 = 100&quot;</span>,</span>
<span id="cb992-18"><a href="process-data-in-r.html#cb992-18" tabindex="-1"></a>        <span class="at">lty =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">lwd =</span> <span class="dv">1</span> <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">5</span> <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb992-19"><a href="process-data-in-r.html#cb992-19" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;topleft&quot;</span>, <span class="at">legend =</span> selected_countries, </span>
<span id="cb992-20"><a href="process-data-in-r.html#cb992-20" tabindex="-1"></a>       <span class="at">lty =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">lwd =</span> <span class="dv">1</span> <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">5</span> <span class="sc">/</span> <span class="dv">3</span>, </span>
<span id="cb992-21"><a href="process-data-in-r.html#cb992-21" tabindex="-1"></a>       <span class="at">seg.len =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>This R code chunk creates a line plot for residential property prices for a selected group of countries. Here’s what each part of the code does:</p>
<ul>
<li><code>selected_countries &lt;- c(...)</code> : This line defines a vector named <code>selected_countries</code> that contains the names of countries you want to plot. They are categorized by continent for clarity.</li>
<li><code>matplot(x = RPP_real_index_wide$Period, y = RPP_real_index_wide[, selected_countries], type = "l")</code>: The <code>matplot()</code> function plots multiple lines. The <code>x</code> argument specifies what should be on the x-axis (time period). The <code>y</code> argument specifies which columns (countries) from the data frame should be plotted on the y-axis. The <code>type = "l"</code> specifies that lines should be used for plotting.</li>
<li><code>main = "Residential Property Prices - Selected Countries"</code>: Sets the title of the graph.</li>
<li><code>xlab = "Period", ylab = "Index, 2010 = 100"</code>: These arguments label the x-axis and y-axis, respectively.</li>
<li><code>lty = 1:6, col = 1:6, lwd = 1 + 0:5 / 3</code>: These arguments set the line types (<code>lty</code>), colors (<code>col</code>), and line widths (<code>lwd</code>) for the lines in the plot.</li>
<li><code>legend(x = "topleft", legend = selected_countries, ...)</code> : Adds a legend at the top left of the plot. The legend shows which line corresponds to which country. The line types, colors, and widths are set similar to those in the plot.</li>
</ul>
<p>Overall, this code chunk generates Figure <a href="process-data-in-r.html#fig:rpp-selected-matplot">5.10</a>, a line plot featuring residential property prices for the selected countries over time. The plot is customized with titles, labels, and a legend for better readability and interpretation.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rpp-selected-matplot"></span>
<img src="_main_files/figure-html/rpp-selected-matplot-1.png" alt="Basic Plot of Residential Property Prices - Selected Countries" width="80%" />
<p class="caption">
Figure 5.10: Basic Plot of Residential Property Prices - Selected Countries
</p>
</div>
</div>
<div id="layered-line-graph-using-ggplot" class="section level4 unnumbered hasAnchor">
<h4>Layered Line Graph Using <code>ggplot()</code><a href="process-data-in-r.html#layered-line-graph-using-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In contrast to base R plotting functions, <code>ggplot2</code> adopts an approach known as the <strong>Grammar of Graphics</strong>. This paradigm treats a plot as a layered composition, where each layer serves a specific role. For example, you may start with a layer that defines the data and the axes, then add layers for graphical elements like lines, points, or bars. Further layers could include labels, annotations, or even statistical transformations.</p>
<p>In essence, the Grammar of Graphics allows you to break down complex visualizations into understandable parts and then reassemble them. This layered structure offers two main advantages:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Flexibility</strong>: You can add, remove, or modify individual layers without affecting the rest of the plot. This enables a high level of customization.</p></li>
<li><p><strong>Extensibility</strong>: Because each layer serves a defined purpose, it is easier to extend the functionality of a plot by adding new types of layers or modifying existing ones. This makes it well-suited for creating complex, multi-faceted visualizations.</p></li>
</ol>
<p>This layered approach aligns well with long-format data, where different description columns (e.g., <code>Region</code>, <code>Measure</code>, <code>Unit</code>) can be mapped to different layers or facets, enabling more intricate graphical storytelling.</p>
<p><code>ggplot2</code> requires data in long format. In long format, each row is a single observation, making it easier to map different <strong>aesthetic attributes</strong> (like color, shape, size) to variables in the data.</p>
<p>First, let’s select and filter the data:</p>
<div class="sourceCode" id="cb993"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb993-1"><a href="process-data-in-r.html#cb993-1" tabindex="-1"></a><span class="co"># Choose countries to plot</span></span>
<span id="cb993-2"><a href="process-data-in-r.html#cb993-2" tabindex="-1"></a>selected_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb993-3"><a href="process-data-in-r.html#cb993-3" tabindex="-1"></a>    <span class="st">&quot;Australia&quot;</span>,     <span class="co"># Oceania</span></span>
<span id="cb993-4"><a href="process-data-in-r.html#cb993-4" tabindex="-1"></a>    <span class="st">&quot;Colombia&quot;</span>,      <span class="co"># South America</span></span>
<span id="cb993-5"><a href="process-data-in-r.html#cb993-5" tabindex="-1"></a>    <span class="st">&quot;Japan&quot;</span>,         <span class="co"># Asia</span></span>
<span id="cb993-6"><a href="process-data-in-r.html#cb993-6" tabindex="-1"></a>    <span class="st">&quot;Germany&quot;</span>,       <span class="co"># Europe</span></span>
<span id="cb993-7"><a href="process-data-in-r.html#cb993-7" tabindex="-1"></a>    <span class="st">&quot;South Africa&quot;</span>,  <span class="co"># Africa</span></span>
<span id="cb993-8"><a href="process-data-in-r.html#cb993-8" tabindex="-1"></a>    <span class="st">&quot;United States&quot;</span>  <span class="co"># North America</span></span>
<span id="cb993-9"><a href="process-data-in-r.html#cb993-9" tabindex="-1"></a>)</span>
<span id="cb993-10"><a href="process-data-in-r.html#cb993-10" tabindex="-1"></a></span>
<span id="cb993-11"><a href="process-data-in-r.html#cb993-11" tabindex="-1"></a><span class="co"># Select variables to plot and remove missing values</span></span>
<span id="cb993-12"><a href="process-data-in-r.html#cb993-12" tabindex="-1"></a>RPP_graph <span class="ot">&lt;-</span> RPP <span class="sc">%&gt;%</span> </span>
<span id="cb993-13"><a href="process-data-in-r.html#cb993-13" tabindex="-1"></a>    <span class="fu">filter</span>(Region <span class="sc">%in%</span> selected_countries <span class="sc">&amp;</span></span>
<span id="cb993-14"><a href="process-data-in-r.html#cb993-14" tabindex="-1"></a>               Unit <span class="sc">==</span> <span class="st">&quot;Index&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb993-15"><a href="process-data-in-r.html#cb993-15" tabindex="-1"></a>               Measure <span class="sc">==</span> <span class="st">&quot;Real&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb993-16"><a href="process-data-in-r.html#cb993-16" tabindex="-1"></a>    <span class="fu">na.omit</span>()</span></code></pre></div>
<p>Creating a simple line graph:</p>
<div class="sourceCode" id="cb994"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb994-1"><a href="process-data-in-r.html#cb994-1" tabindex="-1"></a><span class="co"># Load package</span></span>
<span id="cb994-2"><a href="process-data-in-r.html#cb994-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb994-3"><a href="process-data-in-r.html#cb994-3" tabindex="-1"></a></span>
<span id="cb994-4"><a href="process-data-in-r.html#cb994-4" tabindex="-1"></a><span class="co"># Make line plot</span></span>
<span id="cb994-5"><a href="process-data-in-r.html#cb994-5" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> RPP_graph, </span>
<span id="cb994-6"><a href="process-data-in-r.html#cb994-6" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Period, <span class="at">y =</span> Value, <span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb994-7"><a href="process-data-in-r.html#cb994-7" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span></code></pre></div>
<p>This R code chunk creates a line plot using the <code>ggplot()</code> function from the <code>ggplot2</code> package. Here’s what each part of the code does:</p>
<ul>
<li><code>ggplot(data = RPP_graph, mapping = aes(x = Period, y = Value, color = Region))</code>: This initializes the plot using the <code>ggplot()</code> function.
<ul>
<li><code>data = RPP_graph</code>: Specifies the data frame that contains the data to be plotted.</li>
<li><code>mapping = aes(x = Period, y = Value, color = Region)</code>: The <code>aes()</code> function defines the aesthetic mapping, specifying which variables in the data frame are to be used for the x-axis (<code>Period</code>), y-axis (<code>Value</code>), and color (<code>Region</code>).</li>
</ul></li>
<li><code>geom_line()</code>: This is a layer that adds the line geometry to the plot. It creates lines connecting the points as defined by the <code>aes()</code> mappings.</li>
</ul>
<p>The <code>+</code> operator is used to add the line layer (<code>geom_line()</code>) to the initial <code>ggplot()</code> object.</p>
<p>In summary, this code chunk generates a line plot, displayed in Figure <a href="process-data-in-r.html#fig:rpp-selected-real-index-ggplot">5.11</a>, where the x-axis represents the <code>Period</code>, the y-axis represents the <code>Value</code>, and lines of different colors represent different <code>Regions</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rpp-selected-real-index-ggplot"></span>
<img src="_main_files/figure-html/rpp-selected-real-index-ggplot-1.png" alt="Residential Property Prices - Selected Countries" width="80%" />
<p class="caption">
Figure 5.11: Residential Property Prices - Selected Countries
</p>
</div>
<p>Adding layers for a more complex graph:</p>
<div class="sourceCode" id="cb995"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb995-1"><a href="process-data-in-r.html#cb995-1" tabindex="-1"></a><span class="co"># Make line plot</span></span>
<span id="cb995-2"><a href="process-data-in-r.html#cb995-2" tabindex="-1"></a>RPP <span class="sc">%&gt;%</span> </span>
<span id="cb995-3"><a href="process-data-in-r.html#cb995-3" tabindex="-1"></a>    <span class="fu">filter</span>(Region <span class="sc">%in%</span> selected_countries) <span class="sc">%&gt;%</span> </span>
<span id="cb995-4"><a href="process-data-in-r.html#cb995-4" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Period, <span class="at">y =</span> Value, <span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb995-5"><a href="process-data-in-r.html#cb995-5" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb995-6"><a href="process-data-in-r.html#cb995-6" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(Unit), <span class="at">cols =</span> <span class="fu">vars</span>(Measure), <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p>This R code chunk uses a sequence of operations to create a more complex line plot using the <code>ggplot2</code> package. Here’s a breakdown:</p>
<ul>
<li><code>RPP %&gt;% filter(Region %in% selected_countries) %&gt;%</code>: This part filters the <code>RPP</code> data frame to include only the regions specified in <code>selected_countries</code>. The <code>%&gt;%</code> operator pipes the filtered data frame into the following <code>ggplot()</code> function.</li>
<li><code>ggplot(aes(x = Period, y = Value, color = Region))</code>: Initializes the <code>ggplot</code> with aesthetic mappings.
<ul>
<li><code>x = Period</code>: Maps the <code>Period</code> variable to the x-axis.</li>
<li><code>y = Value</code>: Maps the <code>Value</code> variable to the y-axis.</li>
<li><code>color = Region</code>: Differentiates lines by the <code>Region</code> variable, assigning different colors to each region.</li>
</ul></li>
<li><code>geom_line()</code>: Adds the line geometry to the plot, connecting points as defined by the <code>aes()</code> mappings.</li>
<li><code>facet_grid(rows = vars(Unit), cols = vars(Measure), scales = "free_y")</code>: Adds facets (sub-plots) to the plot.
<ul>
<li><code>rows = vars(Unit)</code>: Creates separate rows for each unique value of the <code>Unit</code> variable.</li>
<li><code>cols = vars(Measure)</code>: Creates separate columns for each unique value of the <code>Measure</code> variable.</li>
<li><code>scales = "free_y"</code>: Allows the y-axis scale to vary between different facets, adapting to the data within each sub-plot.</li>
</ul></li>
</ul>
<p>The <code>+</code> operator is used to combine all these components into a single plot object.</p>
<p>In summary, this code chunk creates a faceted line plot, shown in Figure <a href="process-data-in-r.html#fig:rpp-selected-ggplot">5.12</a>, based on the <code>Period</code>, <code>Value</code>, and <code>Region</code> variables. The facets are arranged by unique values of <code>Unit</code> and <code>Measure</code></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rpp-selected-ggplot"></span>
<img src="_main_files/figure-html/rpp-selected-ggplot-1.png" alt="Residential Property Prices - Selected Countries" width="80%" />
<p class="caption">
Figure 5.12: Residential Property Prices - Selected Countries
</p>
</div>
<p>Hence, while <code>matplot()</code> is more straightforward and procedural, it’s less flexible when it comes to layering and typically requires wide-format data. On the other hand, <code>ggplot()</code> offers a more abstract, layered approach to plotting, thrives on long-format data, and allows for more complex and customizable visualizations. The choice between the two often depends on the complexity of the visualization task at hand and the format in which your data exists.</p>
</div>
</div>
<div id="process-house-price-data-merge-data" class="section level3 hasAnchor" number="5.3.6">
<h3><span class="header-section-number">5.3.6</span> Merge Data<a href="process-data-in-r.html#process-house-price-data-merge-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To examine the relationship between residential property prices (RPPs) and policy rates, this section outlines how to import policy rate statistics from <span class="citation">Bank for International Settlements (<a href="#ref-data-bis-policy-rate">2023a</a>)</span> and merge them with the previously acquired RPP data. Given that policy rates are available on a monthly basis and residential property prices are reported quarterly, data aggregation is a necessary step prior to merging.</p>
<div id="import-policy-rates" class="section level4 unnumbered hasAnchor">
<h4>Import Policy Rates<a href="process-data-in-r.html#import-policy-rates" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Just as with Residential Property Prices (RPP), policy rates are stored in an Excel workbook. The <code>readxl</code> package is used to import the data.</p>
<div class="sourceCode" id="cb996"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb996-1"><a href="process-data-in-r.html#cb996-1" tabindex="-1"></a><span class="co"># Import Excel worksheet: &quot;Summary Documentation&quot; </span></span>
<span id="cb996-2"><a href="process-data-in-r.html#cb996-2" tabindex="-1"></a>PR_labels <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb996-3"><a href="process-data-in-r.html#cb996-3" tabindex="-1"></a>    <span class="at">path =</span> <span class="st">&quot;files/cbpol.xlsx&quot;</span>, </span>
<span id="cb996-4"><a href="process-data-in-r.html#cb996-4" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">&quot;Summary Documentation&quot;</span>,</span>
<span id="cb996-5"><a href="process-data-in-r.html#cb996-5" tabindex="-1"></a>    <span class="at">col_names =</span> <span class="cn">TRUE</span>,                <span class="co"># The file has a header row with names</span></span>
<span id="cb996-6"><a href="process-data-in-r.html#cb996-6" tabindex="-1"></a>    <span class="at">na =</span> <span class="st">&quot;-&quot;</span>                         <span class="co"># Character string representing NA values</span></span>
<span id="cb996-7"><a href="process-data-in-r.html#cb996-7" tabindex="-1"></a>)</span>
<span id="cb996-8"><a href="process-data-in-r.html#cb996-8" tabindex="-1"></a></span>
<span id="cb996-9"><a href="process-data-in-r.html#cb996-9" tabindex="-1"></a><span class="co"># Convert all character vectors to factors</span></span>
<span id="cb996-10"><a href="process-data-in-r.html#cb996-10" tabindex="-1"></a>PR_labels <span class="ot">&lt;-</span> PR_labels <span class="sc">%&gt;%</span> </span>
<span id="cb996-11"><a href="process-data-in-r.html#cb996-11" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), as.factor)) <span class="sc">%&gt;%</span> </span>
<span id="cb996-12"><a href="process-data-in-r.html#cb996-12" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Region =</span> Country) <span class="sc">%&gt;%</span> </span>
<span id="cb996-13"><a href="process-data-in-r.html#cb996-13" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Measure =</span> <span class="fu">factor</span>(<span class="st">&quot;Nominal&quot;</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Real&quot;</span>, <span class="st">&quot;Nominal&quot;</span>)))</span>
<span id="cb996-14"><a href="process-data-in-r.html#cb996-14" tabindex="-1"></a></span>
<span id="cb996-15"><a href="process-data-in-r.html#cb996-15" tabindex="-1"></a><span class="co"># Import Excel worksheet: &quot;Monthly Series&quot; </span></span>
<span id="cb996-16"><a href="process-data-in-r.html#cb996-16" tabindex="-1"></a>PR_wide <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb996-17"><a href="process-data-in-r.html#cb996-17" tabindex="-1"></a>    <span class="at">path =</span> <span class="st">&quot;files/cbpol.xlsx&quot;</span>, </span>
<span id="cb996-18"><a href="process-data-in-r.html#cb996-18" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">&quot;Monthly Series&quot;</span>,</span>
<span id="cb996-19"><a href="process-data-in-r.html#cb996-19" tabindex="-1"></a>    <span class="at">col_names =</span> <span class="cn">TRUE</span>,                <span class="co"># The file has a header row with names</span></span>
<span id="cb996-20"><a href="process-data-in-r.html#cb996-20" tabindex="-1"></a>    <span class="at">na =</span> <span class="st">&quot;&quot;</span>,                         <span class="co"># Character string representing NA values</span></span>
<span id="cb996-21"><a href="process-data-in-r.html#cb996-21" tabindex="-1"></a>    <span class="at">skip =</span> <span class="dv">3</span>                         <span class="co"># Skips the first three rows</span></span>
<span id="cb996-22"><a href="process-data-in-r.html#cb996-22" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="reshape-policy-rates" class="section level4 unnumbered hasAnchor">
<h4>Reshape Policy Rates<a href="process-data-in-r.html#reshape-policy-rates" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Post-import, the policy rates data is reshaped from wide to long format for easier manipulation and to match the format of the RPP data.</p>
<div class="sourceCode" id="cb997"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb997-1"><a href="process-data-in-r.html#cb997-1" tabindex="-1"></a><span class="co"># Reshape from wide to long</span></span>
<span id="cb997-2"><a href="process-data-in-r.html#cb997-2" tabindex="-1"></a>PR <span class="ot">&lt;-</span> PR_wide  <span class="sc">%&gt;%</span> </span>
<span id="cb997-3"><a href="process-data-in-r.html#cb997-3" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Period, </span>
<span id="cb997-4"><a href="process-data-in-r.html#cb997-4" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Code&quot;</span>, </span>
<span id="cb997-5"><a href="process-data-in-r.html#cb997-5" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Value&quot;</span>,</span>
<span id="cb997-6"><a href="process-data-in-r.html#cb997-6" tabindex="-1"></a>                 <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>,</span>
<span id="cb997-7"><a href="process-data-in-r.html#cb997-7" tabindex="-1"></a>                 <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">Code =</span> factor))</span>
<span id="cb997-8"><a href="process-data-in-r.html#cb997-8" tabindex="-1"></a></span>
<span id="cb997-9"><a href="process-data-in-r.html#cb997-9" tabindex="-1"></a><span class="co"># Merge with labels</span></span>
<span id="cb997-10"><a href="process-data-in-r.html#cb997-10" tabindex="-1"></a>PR <span class="ot">&lt;-</span> PR <span class="sc">%&gt;%</span> </span>
<span id="cb997-11"><a href="process-data-in-r.html#cb997-11" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="at">y =</span> PR_labels <span class="sc">%&gt;%</span> </span>
<span id="cb997-12"><a href="process-data-in-r.html#cb997-12" tabindex="-1"></a>                  <span class="fu">select</span>(Code, Region, Measure, Unit), </span>
<span id="cb997-13"><a href="process-data-in-r.html#cb997-13" tabindex="-1"></a>              <span class="at">by =</span> <span class="st">&quot;Code&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb997-14"><a href="process-data-in-r.html#cb997-14" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Value, <span class="fu">everything</span>(), Value)</span></code></pre></div>
</div>
<div id="aggregate-policy-rates" class="section level4 unnumbered hasAnchor">
<h4>Aggregate Policy Rates<a href="process-data-in-r.html#aggregate-policy-rates" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The next challenge is to reconcile the different data frequencies. The <code>zoo</code> package by <span class="citation">Zeileis, Grothendieck, and Ryan (<a href="#ref-R-zoo">2023</a>)</span> is used to create a quarterly date variable, which serves as the basis for aggregating monthly policy rates to a quarterly level.</p>
<div class="sourceCode" id="cb998"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb998-1"><a href="process-data-in-r.html#cb998-1" tabindex="-1"></a><span class="co"># Load R package</span></span>
<span id="cb998-2"><a href="process-data-in-r.html#cb998-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;zoo&quot;</span>)</span>
<span id="cb998-3"><a href="process-data-in-r.html#cb998-3" tabindex="-1"></a></span>
<span id="cb998-4"><a href="process-data-in-r.html#cb998-4" tabindex="-1"></a><span class="co"># Create quarterly period</span></span>
<span id="cb998-5"><a href="process-data-in-r.html#cb998-5" tabindex="-1"></a>PR<span class="sc">$</span>Quarter <span class="ot">&lt;-</span> <span class="fu">as.yearqtr</span>(PR<span class="sc">$</span>Period)</span>
<span id="cb998-6"><a href="process-data-in-r.html#cb998-6" tabindex="-1"></a>RPP<span class="sc">$</span>Period <span class="ot">&lt;-</span> <span class="fu">as.yearqtr</span>(RPP<span class="sc">$</span>Period)</span></code></pre></div>
<p>Then aggregate the policy rates based on this quarterly date variable:</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb999-1"><a href="process-data-in-r.html#cb999-1" tabindex="-1"></a><span class="co"># Aggregate to quarterly frequency</span></span>
<span id="cb999-2"><a href="process-data-in-r.html#cb999-2" tabindex="-1"></a>PR_q <span class="ot">&lt;-</span> PR <span class="sc">%&gt;%</span> </span>
<span id="cb999-3"><a href="process-data-in-r.html#cb999-3" tabindex="-1"></a>    <span class="fu">group_by</span>(Quarter, Code, Region, Measure, Unit) <span class="sc">%&gt;%</span> </span>
<span id="cb999-4"><a href="process-data-in-r.html#cb999-4" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">Value =</span> <span class="fu">mean</span>(Value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb999-5"><a href="process-data-in-r.html#cb999-5" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb999-6"><a href="process-data-in-r.html#cb999-6" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Period =</span> Quarter)</span></code></pre></div>
</div>
<div id="merge-policy-rates-with-house-prices" class="section level4 unnumbered hasAnchor">
<h4>Merge Policy Rates with House Prices<a href="process-data-in-r.html#merge-policy-rates-with-house-prices" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After harmonizing the frequencies, we can now merge the datasets based on their respective time periods.</p>
<div class="sourceCode" id="cb1000"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1000-1"><a href="process-data-in-r.html#cb1000-1" tabindex="-1"></a><span class="co"># Merge RPP and policy rate data</span></span>
<span id="cb1000-2"><a href="process-data-in-r.html#cb1000-2" tabindex="-1"></a>BIS <span class="ot">&lt;-</span> RPP <span class="sc">%&gt;%</span> </span>
<span id="cb1000-3"><a href="process-data-in-r.html#cb1000-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Indicator =</span> <span class="st">&quot;Residential Property Prices&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1000-4"><a href="process-data-in-r.html#cb1000-4" tabindex="-1"></a>    <span class="fu">bind_rows</span>(PR_q <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Indicator =</span> <span class="st">&quot;Policy Rate&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1000-5"><a href="process-data-in-r.html#cb1000-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Code =</span> <span class="fu">factor</span>(Code), <span class="at">Indicator =</span> <span class="fu">factor</span>(Indicator)) <span class="sc">%&gt;%</span> </span>
<span id="cb1000-6"><a href="process-data-in-r.html#cb1000-6" tabindex="-1"></a>    <span class="fu">select</span>(Period, Code, Indicator, <span class="sc">-</span>Value, <span class="fu">everything</span>(), Value)</span></code></pre></div>
<p>Here, we also introduce a new column, “Indicator”, to distinguish between Residential Property Prices and Policy Rates, making it easier to visualize them together later.</p>
<p>By completing these steps, the datasets are now merged and ready for deeper analysis, allowing for a comprehensive examination of the relationship between residential property prices and policy rates.</p>
</div>
<div id="plot-policy-rates-and-house-prices" class="section level4 unnumbered hasAnchor">
<h4>Plot Policy Rates and House Prices<a href="process-data-in-r.html#plot-policy-rates-and-house-prices" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Finally, we visualize the relationship between policy rates and residential property prices for a selection of countries. The <code>ggplot2</code> package is employed for this visualization.</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1001-1"><a href="process-data-in-r.html#cb1001-1" tabindex="-1"></a><span class="co"># Load package</span></span>
<span id="cb1001-2"><a href="process-data-in-r.html#cb1001-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb1001-3"><a href="process-data-in-r.html#cb1001-3" tabindex="-1"></a></span>
<span id="cb1001-4"><a href="process-data-in-r.html#cb1001-4" tabindex="-1"></a><span class="co"># Choose countries to plot</span></span>
<span id="cb1001-5"><a href="process-data-in-r.html#cb1001-5" tabindex="-1"></a>selected_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1001-6"><a href="process-data-in-r.html#cb1001-6" tabindex="-1"></a>    <span class="st">&quot;Australia&quot;</span>,     <span class="co"># Oceania</span></span>
<span id="cb1001-7"><a href="process-data-in-r.html#cb1001-7" tabindex="-1"></a>    <span class="st">&quot;Colombia&quot;</span>,      <span class="co"># South America</span></span>
<span id="cb1001-8"><a href="process-data-in-r.html#cb1001-8" tabindex="-1"></a>    <span class="st">&quot;Japan&quot;</span>,         <span class="co"># Asia</span></span>
<span id="cb1001-9"><a href="process-data-in-r.html#cb1001-9" tabindex="-1"></a>    <span class="st">&quot;Germany&quot;</span>,       <span class="co"># Europe</span></span>
<span id="cb1001-10"><a href="process-data-in-r.html#cb1001-10" tabindex="-1"></a>    <span class="st">&quot;South Africa&quot;</span>,  <span class="co"># Africa</span></span>
<span id="cb1001-11"><a href="process-data-in-r.html#cb1001-11" tabindex="-1"></a>    <span class="st">&quot;United States&quot;</span>  <span class="co"># North America</span></span>
<span id="cb1001-12"><a href="process-data-in-r.html#cb1001-12" tabindex="-1"></a>)</span>
<span id="cb1001-13"><a href="process-data-in-r.html#cb1001-13" tabindex="-1"></a></span>
<span id="cb1001-14"><a href="process-data-in-r.html#cb1001-14" tabindex="-1"></a><span class="co"># Make line plot</span></span>
<span id="cb1001-15"><a href="process-data-in-r.html#cb1001-15" tabindex="-1"></a>BIS <span class="sc">%&gt;%</span> </span>
<span id="cb1001-16"><a href="process-data-in-r.html#cb1001-16" tabindex="-1"></a>    <span class="fu">filter</span>(Region <span class="sc">%in%</span> selected_countries) <span class="sc">%&gt;%</span> </span>
<span id="cb1001-17"><a href="process-data-in-r.html#cb1001-17" tabindex="-1"></a>    <span class="fu">filter</span>(Indicator <span class="sc">==</span> <span class="st">&quot;Policy Rate&quot;</span> <span class="sc">|</span> </span>
<span id="cb1001-18"><a href="process-data-in-r.html#cb1001-18" tabindex="-1"></a>               (Indicator <span class="sc">==</span> <span class="st">&quot;Residential Property Prices&quot;</span> <span class="sc">&amp;</span> </span>
<span id="cb1001-19"><a href="process-data-in-r.html#cb1001-19" tabindex="-1"></a>                    Unit <span class="sc">==</span> <span class="st">&quot;Index&quot;</span> <span class="sc">&amp;</span> Measure <span class="sc">==</span> <span class="st">&quot;Real&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1001-20"><a href="process-data-in-r.html#cb1001-20" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Period, <span class="at">y =</span> Value, <span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb1001-21"><a href="process-data-in-r.html#cb1001-21" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb1001-22"><a href="process-data-in-r.html#cb1001-22" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(Indicator), <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb1001-23"><a href="process-data-in-r.html#cb1001-23" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb1001-24"><a href="process-data-in-r.html#cb1001-24" tabindex="-1"></a>          <span class="at">legend.justification =</span> <span class="st">&quot;left&quot;</span>) <span class="sc">+</span></span>
<span id="cb1001-25"><a href="process-data-in-r.html#cb1001-25" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb1001-26"><a href="process-data-in-r.html#cb1001-26" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="fu">as.numeric</span>(<span class="fu">as.yearqtr</span>(<span class="st">&quot;1970-01-01&quot;</span>)), <span class="fu">as.numeric</span>(<span class="fu">max</span>(BIS<span class="sc">$</span>Period)))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rpp-policyrates-ggplot"></span>
<img src="_main_files/figure-html/rpp-policyrates-ggplot-1.png" alt="RPP and Policy Rates" width="80%" />
<p class="caption">
Figure 5.13: RPP and Policy Rates
</p>
</div>
<p>The resulting plot, shown in Figure <a href="process-data-in-r.html#fig:rpp-policyrates-ggplot">5.13</a>, enables us to compare the trends in residential property prices and policy rates across different countries, providing valuable insights for both policymakers and researchers.</p>
</div>
</div>
<div id="process-house-price-data-transform-data" class="section level3 hasAnchor" number="5.3.7">
<h3><span class="header-section-number">5.3.7</span> Transform Data<a href="process-data-in-r.html#process-house-price-data-transform-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To analyze the dynamics of residential property prices and policy rates, various data transformations are necessary. These transformations are designed to create meaningful metrics for comparative analyses. This section outlines the steps involved in the data transformation process.</p>
<div id="compute-price-level" class="section level4 unnumbered hasAnchor">
<h4>Compute Price Level<a href="process-data-in-r.html#compute-price-level" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Real Residential Property Prices (Real RPP) represent the value of residential property after adjusting for general changes in the price level, commonly measured by the Consumer Price Index (CPI). In other words, Real RPP accounts for the effects of inflation, providing a more accurate measure of the change in property value over time.</p>
<p>Mathematically, Real RPP can be expressed as:</p>
<p><span class="math display">\[
R_t = 100 \left(\frac{N_t}{CPI_t} \right)
\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(R_t\)</span>: Real RPP at time <span class="math inline">\(t\)</span></li>
<li><span class="math inline">\(N_t\)</span>: Nominal RPP at time <span class="math inline">\(t\)</span></li>
<li><span class="math inline">\(CPI_t\)</span>: Consumer Price Index at time <span class="math inline">\(t\)</span>, normalized to 100 at a specific base year.</li>
</ul>
<p>Given the definition of Real RPP, we can rearrange the formula to solve for the Consumer Price Index:</p>
<p><span class="math display">\[
CPI_t = 100 \left( \frac{N_t}{R_t} \right)
\]</span></p>
<p>Thus, if we have both Real and Nominal RPP, we can easily compute the Consumer Price Index. The code snippet below computes the CPI and adds the new data to the existing data frame <code>BIS</code>.</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1002-1"><a href="process-data-in-r.html#cb1002-1" tabindex="-1"></a><span class="co"># Compute CPI</span></span>
<span id="cb1002-2"><a href="process-data-in-r.html#cb1002-2" tabindex="-1"></a>BIS <span class="ot">&lt;-</span> BIS <span class="sc">%&gt;%</span> </span>
<span id="cb1002-3"><a href="process-data-in-r.html#cb1002-3" tabindex="-1"></a>    <span class="fu">filter</span>(Indicator <span class="sc">==</span> <span class="st">&quot;Residential Property Prices&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1002-4"><a href="process-data-in-r.html#cb1002-4" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">&quot;Period&quot;</span>, <span class="st">&quot;Region&quot;</span>, <span class="st">&quot;Unit&quot;</span>),</span>
<span id="cb1002-5"><a href="process-data-in-r.html#cb1002-5" tabindex="-1"></a>                <span class="at">names_from =</span> <span class="st">&quot;Measure&quot;</span>,</span>
<span id="cb1002-6"><a href="process-data-in-r.html#cb1002-6" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">&quot;Value&quot;</span>, <span class="st">&quot;Code&quot;</span>),</span>
<span id="cb1002-7"><a href="process-data-in-r.html#cb1002-7" tabindex="-1"></a>                <span class="at">names_sep =</span> <span class="st">&quot;__&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1002-8"><a href="process-data-in-r.html#cb1002-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Indicator =</span> <span class="st">&quot;Consumer Price Index&quot;</span>,</span>
<span id="cb1002-9"><a href="process-data-in-r.html#cb1002-9" tabindex="-1"></a>           <span class="at">Measure =</span> <span class="st">&quot;Nominal&quot;</span>,</span>
<span id="cb1002-10"><a href="process-data-in-r.html#cb1002-10" tabindex="-1"></a>           <span class="at">Value =</span> <span class="fu">case_when</span>(</span>
<span id="cb1002-11"><a href="process-data-in-r.html#cb1002-11" tabindex="-1"></a>               Unit <span class="sc">==</span> <span class="st">&quot;YoY-Growth&quot;</span> <span class="sc">~</span> Value__Nominal <span class="sc">-</span> Value__Real,</span>
<span id="cb1002-12"><a href="process-data-in-r.html#cb1002-12" tabindex="-1"></a>               Unit <span class="sc">==</span> <span class="st">&quot;Index&quot;</span> <span class="sc">~</span> <span class="dv">100</span> <span class="sc">*</span> Value__Nominal <span class="sc">/</span> Value__Real,</span>
<span id="cb1002-13"><a href="process-data-in-r.html#cb1002-13" tabindex="-1"></a>               <span class="at">.default =</span> <span class="cn">NA</span>),</span>
<span id="cb1002-14"><a href="process-data-in-r.html#cb1002-14" tabindex="-1"></a>           <span class="at">Code =</span> <span class="fu">case_when</span>(</span>
<span id="cb1002-15"><a href="process-data-in-r.html#cb1002-15" tabindex="-1"></a>               <span class="sc">!</span><span class="fu">is.na</span>(Code__Nominal) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Code__Real) <span class="sc">~</span> </span>
<span id="cb1002-16"><a href="process-data-in-r.html#cb1002-16" tabindex="-1"></a>                   <span class="fu">paste</span>(Code__Nominal, Code__Real, <span class="at">sep =</span> <span class="st">&quot; &amp; &quot;</span>),</span>
<span id="cb1002-17"><a href="process-data-in-r.html#cb1002-17" tabindex="-1"></a>               <span class="at">.default =</span> <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1002-18"><a href="process-data-in-r.html#cb1002-18" tabindex="-1"></a>    <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1002-19"><a href="process-data-in-r.html#cb1002-19" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;__&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1002-20"><a href="process-data-in-r.html#cb1002-20" tabindex="-1"></a>    <span class="fu">bind_rows</span>(BIS) <span class="sc">%&gt;%</span> </span>
<span id="cb1002-21"><a href="process-data-in-r.html#cb1002-21" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Value, <span class="fu">everything</span>(), Value)</span></code></pre></div>
<p>The code performs several steps to compute the Consumer Price Index (CPI) based on the existing <code>BIS</code> data frame, which contains Residential Property Prices (RPP) data. Below are the operations explained step by step:</p>
<ul>
<li><code>filter(Indicator == "Residential Property Prices")</code>: Filters rows where the <code>Indicator</code> column contains “Residential Property Prices.”</li>
<li><code>pivot_wider(...)</code>: Converts the data from long format to wide format. It keeps “Period,” “Region,” and “Unit” as identifier columns and transforms the “Measure” column into new columns, specifically generating <code>Value__Nominal</code> and <code>Value__Real</code>. These new columns are used in subsequent calculations to compute the Consumer Price Index (CPI).</li>
<li><code>mutate(Indicator = "Consumer Price Index", ...)</code>: Adds a new <code>Indicator</code> column set to “Consumer Price Index” and conditionally calculates a new <code>Value</code> column based on the <code>Unit</code> column using the <code>case_when()</code> function:
<ul>
<li>For <code>Unit == "YoY-Growth"</code>: <code>Value</code> = <span class="math inline">\(\pi_t = n_t - r_t\)</span></li>
<li>For <code>Unit == "Index"</code>: <code>Value</code> = <span class="math inline">\(P_t = 100 \left(\frac{N_t}{R_t}\right)\)</span></li>
</ul></li>
<li><code>na.omit()</code>: Removes rows with any <code>NA</code> values.</li>
<li><code>select(-contains("__"))</code>: Removes columns with names containing double underscores, effectively removing <code>Value__Nominal</code> and <code>Value__Real</code> from the data frame.</li>
<li><code>bind_rows(BIS)</code>: Appends the newly computed CPI data to the original <code>BIS</code> data frame.</li>
<li><code>select(-Value, everything(), Value)</code>: Rearranges the columns, moving the newly computed <code>Value</code> column to the end for better readability.</li>
</ul>
<p>Each of these steps contributes to the computation of the Consumer Price Index (CPI) based on existing Residential Property Prices (RPP) and then adds this computed data back into the original <code>BIS</code> data frame.</p>
</div>
<div id="compute-inflation" class="section level4 unnumbered hasAnchor">
<h4>Compute Inflation<a href="process-data-in-r.html#compute-inflation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this section, we delve into the calculation of inflation, which is the growth rate of prices. The formula for calculating inflation is as follows:</p>
<p><span class="math display" id="eq:inflation">\[
\% \Delta P_t \equiv 100 \left(\frac{P_t - P_{t-1}}{P_{t-1}}\right) \% \approx 100 \left( \ln P_t - \ln P_{t-1} \right) \% \tag{5.1}
\]</span></p>
<p>To implement this calculation, the code snippet utilizes several functions from the <code>dplyr</code> package. One critical function is <code>group_by()</code>. This function is used to split the data into subsets based on the specified columns (<code>Code</code>, <code>Indicator</code>, <code>Measure</code>, and <code>Region</code> in this case). Subsequent operations are then applied within these subsets.</p>
<div class="sourceCode" id="cb1003"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1003-1"><a href="process-data-in-r.html#cb1003-1" tabindex="-1"></a><span class="co"># Compute growth rates</span></span>
<span id="cb1003-2"><a href="process-data-in-r.html#cb1003-2" tabindex="-1"></a>BIS_transformed <span class="ot">&lt;-</span> BIS <span class="sc">%&gt;%</span></span>
<span id="cb1003-3"><a href="process-data-in-r.html#cb1003-3" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">is.na</span>(Unit) <span class="sc">|</span> Unit <span class="sc">!=</span> <span class="st">&quot;YoY-Growth&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-4"><a href="process-data-in-r.html#cb1003-4" tabindex="-1"></a>    <span class="fu">group_by</span>(Code, Indicator, Measure, Region) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-5"><a href="process-data-in-r.html#cb1003-5" tabindex="-1"></a>    <span class="fu">arrange</span>(Period) <span class="sc">%&gt;%</span></span>
<span id="cb1003-6"><a href="process-data-in-r.html#cb1003-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Level =</span> Value,</span>
<span id="cb1003-7"><a href="process-data-in-r.html#cb1003-7" tabindex="-1"></a>           <span class="at">Growth =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> Unit <span class="sc">==</span> <span class="st">&quot;Index&quot;</span>,</span>
<span id="cb1003-8"><a href="process-data-in-r.html#cb1003-8" tabindex="-1"></a>                           <span class="at">yes =</span> <span class="dv">400</span> <span class="sc">*</span> (<span class="fu">log</span>(Value) <span class="sc">-</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(<span class="fu">log</span>(Value))),</span>
<span id="cb1003-9"><a href="process-data-in-r.html#cb1003-9" tabindex="-1"></a>                           <span class="at">no =</span> <span class="cn">NA</span>),</span>
<span id="cb1003-10"><a href="process-data-in-r.html#cb1003-10" tabindex="-1"></a>           <span class="at">Value =</span> <span class="cn">NULL</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-11"><a href="process-data-in-r.html#cb1003-11" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span></code></pre></div>
<p>Here’s a detailed breakdown of the code:</p>
<ul>
<li><code>filter(is.na(Unit) | Unit != "YoY-Growth")</code>: This line ensures that only the relevant data is considered by excluding rows where the <code>Unit</code> column is “YoY-Growth” and keeping rows where <code>Unit</code> is <code>NA</code>.</li>
<li><code>group_by(Code, Indicator, Measure, Region)</code>: The data is grouped by four variables. This is pivotal for the subsequent operations, which will be performed within these grouped subsets.</li>
<li><code>arrange(Period)</code>: This function sorts the data within each group by the time period, ensuring a chronological order.</li>
<li><code>mutate(Level = Value, ...)</code>: A new column named “Level” is created, which is a duplicate of the <code>Value</code> column.</li>
<li><code>Growth = ifelse(...)</code>: The “Growth” column is calculated based on the logarithmic differences between the current and previous periods. The calculation is done only when the <code>Unit</code> column equals “Index”.</li>
<li><code>Value = NULL</code>: The original <code>Value</code> column is removed after the new columns “Level” and “Growth” are generated.</li>
<li><code>ungroup()</code>: This last step removes the grouping structure, returning the data frame to its original, ungrouped state.</li>
</ul>
<p>The use of <code>group_by()</code> ensures that each subset of data, defined by the combination of <code>Code</code>, <code>Indicator</code>, <code>Measure</code>, and <code>Region</code>, is treated as a separate entity. This is important when using functions like <code>lag()</code>, as the calculation would be restricted to within each group, ensuring no values are carried over from one group to another.</p>
<p>In summary, <code>group_by()</code> allows for segmented and independent calculations within a dataset, making it a powerful tool for data manipulation and analysis.</p>
</div>
<div id="reshape-transformed-data" class="section level4 unnumbered hasAnchor">
<h4>Reshape Transformed Data<a href="process-data-in-r.html#reshape-transformed-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Data is then reshaped to make it more convenient for further analysis. The <code>pivot_longer()</code> function from the <code>tidyr</code> package is used to convert the data from wide to long format.</p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="process-data-in-r.html#cb1004-1" tabindex="-1"></a><span class="co"># Reshape from wide to long</span></span>
<span id="cb1004-2"><a href="process-data-in-r.html#cb1004-2" tabindex="-1"></a>BIS_t <span class="ot">&lt;-</span> BIS_transformed  <span class="sc">%&gt;%</span> </span>
<span id="cb1004-3"><a href="process-data-in-r.html#cb1004-3" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;Level&quot;</span>, <span class="st">&quot;Growth&quot;</span>), </span>
<span id="cb1004-4"><a href="process-data-in-r.html#cb1004-4" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Transformation&quot;</span>, </span>
<span id="cb1004-5"><a href="process-data-in-r.html#cb1004-5" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Value&quot;</span>,</span>
<span id="cb1004-6"><a href="process-data-in-r.html#cb1004-6" tabindex="-1"></a>                 <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1004-7"><a href="process-data-in-r.html#cb1004-7" tabindex="-1"></a>                 <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">Transformation =</span> <span class="cf">function</span>(x) <span class="fu">factor</span>(</span>
<span id="cb1004-8"><a href="process-data-in-r.html#cb1004-8" tabindex="-1"></a>                     x, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Level&quot;</span>, <span class="st">&quot;Growth&quot;</span>))))</span></code></pre></div>
<p>Here’s the breakdown of the code snippet:</p>
<ul>
<li><code>pivot_longer(cols = c("Level", "Growth"), ...)</code>: Specifies the columns “Level” and “Growth” to be converted from wide to long format.</li>
<li><code>names_to = "Transformation"</code>: The names of the original columns (“Level” and “Growth”) are stored in a new column named “Transformation.”</li>
<li><code>values_to = "Value"</code>: The values of the original columns are stored in a new column called “Value.”</li>
<li><code>values_drop_na = TRUE</code>: Any <code>NA</code> values in the “Level” and “Growth” columns will be dropped.</li>
<li><code>names_transform = list(...)</code>: This part reorders the levels of the “Transformation” factor column to have “Level” come before “Growth.”</li>
</ul>
<p>In summary, the <code>pivot_longer()</code> function is used to streamline the data’s structure. The “Level” and “Growth” columns are folded into a single “Value” column, and a new column “Transformation” is added to specify the original column from which each value originates. This results in a long-format data frame that can be more convenient for downstream data analysis tasks.</p>
</div>
<div id="compute-real-interest-rate" class="section level4 unnumbered hasAnchor">
<h4>Compute Real Interest Rate<a href="process-data-in-r.html#compute-real-interest-rate" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The real policy rate is essentially the nominal interest rate adjusted for inflation. It can be mathematically represented as:</p>
<p><span class="math display">\[
\text{Real Policy Rate}_t = \text{Policy Rate}_t - \text{CPI Inflation}_t
\]</span></p>
<p>The real interest rate is a key economic indicator that offers a more accurate measure of the return on investments. It represents the true cost of borrowing, as it accounts for the eroding effects of inflation on the purchasing power of money, making it a critical factor in financial decision-making.</p>
<p>In the following R code, the real interest rate is computed by subtracting the growth of the Consumer Price Index (CPI) from the Policy Rate, providing an interest rate that accounts for inflationary changes.</p>
<div class="sourceCode" id="cb1005"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1005-1"><a href="process-data-in-r.html#cb1005-1" tabindex="-1"></a><span class="co"># Compute real interest rate</span></span>
<span id="cb1005-2"><a href="process-data-in-r.html#cb1005-2" tabindex="-1"></a>BIS_t <span class="ot">&lt;-</span> BIS_t <span class="sc">%&gt;%</span> </span>
<span id="cb1005-3"><a href="process-data-in-r.html#cb1005-3" tabindex="-1"></a>    <span class="fu">filter</span>(Indicator <span class="sc">%in%</span> <span class="st">&quot;Policy Rate&quot;</span> <span class="sc">|</span></span>
<span id="cb1005-4"><a href="process-data-in-r.html#cb1005-4" tabindex="-1"></a>               (Indicator <span class="sc">%in%</span> <span class="st">&quot;Consumer Price Index&quot;</span> <span class="sc">&amp;</span> </span>
<span id="cb1005-5"><a href="process-data-in-r.html#cb1005-5" tabindex="-1"></a>                    Transformation <span class="sc">==</span> <span class="st">&quot;Growth&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1005-6"><a href="process-data-in-r.html#cb1005-6" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">&quot;Period&quot;</span>, <span class="st">&quot;Region&quot;</span>),</span>
<span id="cb1005-7"><a href="process-data-in-r.html#cb1005-7" tabindex="-1"></a>                <span class="at">names_from =</span> <span class="st">&quot;Indicator&quot;</span>,</span>
<span id="cb1005-8"><a href="process-data-in-r.html#cb1005-8" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">&quot;Value&quot;</span>, <span class="st">&quot;Code&quot;</span>),</span>
<span id="cb1005-9"><a href="process-data-in-r.html#cb1005-9" tabindex="-1"></a>                <span class="at">names_sep =</span> <span class="st">&quot;__&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1005-10"><a href="process-data-in-r.html#cb1005-10" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Indicator =</span> <span class="st">&quot;Policy Rate&quot;</span>,</span>
<span id="cb1005-11"><a href="process-data-in-r.html#cb1005-11" tabindex="-1"></a>           <span class="at">Measure =</span> <span class="st">&quot;Real&quot;</span>,</span>
<span id="cb1005-12"><a href="process-data-in-r.html#cb1005-12" tabindex="-1"></a>           <span class="at">Transformation =</span> <span class="fu">factor</span>(<span class="st">&quot;Level&quot;</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Level&quot;</span>, <span class="st">&quot;Growth&quot;</span>)),</span>
<span id="cb1005-13"><a href="process-data-in-r.html#cb1005-13" tabindex="-1"></a>           <span class="at">Value =</span> <span class="st">`</span><span class="at">Value__Policy Rate</span><span class="st">`</span> <span class="sc">-</span> <span class="st">`</span><span class="at">Value__Consumer Price Index</span><span class="st">`</span>,</span>
<span id="cb1005-14"><a href="process-data-in-r.html#cb1005-14" tabindex="-1"></a>           <span class="at">Code =</span> <span class="fu">paste</span>(<span class="st">`</span><span class="at">Code__Policy Rate</span><span class="st">`</span>, <span class="st">`</span><span class="at">Code__Consumer Price Index</span><span class="st">`</span>, </span>
<span id="cb1005-15"><a href="process-data-in-r.html#cb1005-15" tabindex="-1"></a>                        <span class="at">sep =</span> <span class="st">&quot; &amp; &quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1005-16"><a href="process-data-in-r.html#cb1005-16" tabindex="-1"></a>    <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1005-17"><a href="process-data-in-r.html#cb1005-17" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;__&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1005-18"><a href="process-data-in-r.html#cb1005-18" tabindex="-1"></a>    <span class="fu">bind_rows</span>(BIS_t) <span class="sc">%&gt;%</span> </span>
<span id="cb1005-19"><a href="process-data-in-r.html#cb1005-19" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Value, <span class="fu">everything</span>(), Value)</span></code></pre></div>
<p>The code snippet computes the real interest rate by performing several transformations on the dataset:</p>
<ul>
<li><code>filter(Indicator %in% "Policy Rate" | ...)</code>: Filters rows where the <code>Indicator</code> is either “Policy Rate” or the growth rate of the “Consumer Price Index.”</li>
<li><code>pivot_wider(id_cols = c("Period", "Region"), ...)</code>: Converts the data from long format to wide format, using “Period” and “Region” as identifier columns.</li>
<li><code>mutate(Indicator = "Policy Rate", ...)</code>: Adds a new column named “Indicator” with the value “Policy Rate” and computes a new column <code>Value</code> as the difference between the Policy Rate and the Consumer Price Index (CPI) growth.</li>
<li><code>Code = paste(..., sep = " &amp; ")</code>: Combines the codes for the Policy Rate and CPI into a single code, separated by ” &amp; “.</li>
<li><code>na.omit()</code>: Removes rows with any <code>NA</code> values.</li>
<li><code>select(-contains("__"))</code>: Removes any columns with names that contain double underscores, which in this case are the temporary columns <code>Value__Policy Rate</code> and <code>Value__Consumer Price Index</code>.</li>
<li><code>bind_rows(BIS_t)</code>: Appends the new data back to the original <code>BIS_t</code> data frame.</li>
<li><code>select(-Value, everything(), Value)</code>: Rearranges the columns so that the new <code>Value</code> column is at the end.</li>
</ul>
<p>By executing these steps, the real interest rate is calculated and added to the dataset, making it available for further analysis.</p>
</div>
</div>
<div id="stationary-data" class="section level3 hasAnchor" number="5.3.8">
<h3><span class="header-section-number">5.3.8</span> Stationary Data<a href="process-data-in-r.html#stationary-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Statistical measures like mean, standard deviation, and correlation are meaningful only for stationary time series. A <strong>stationary time series</strong> maintains constant statistical properties over time, such as a constant mean and variance. Non-stationary time series, where the mean or variance drifts over time, are not suitable for such analysis, as current and past values are not indicative of future behavior.</p>
<p>To illustrate, consider the U.S. house price index and its growth rate, the latter being a stationary series. The following figure contrasts the statistical properties of these two series:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rpp-us-stationary-vs-nonstationary"></span>
<img src="_main_files/figure-html/rpp-us-stationary-vs-nonstationary-1.png" alt="U.S. Residential Property Price Index: Non-Stationary Levels and Stationary Growth Rates" width="80%" />
<p class="caption">
Figure 5.14: U.S. Residential Property Price Index: Non-Stationary Levels and Stationary Growth Rates
</p>
</div>
<p>Figure <a href="process-data-in-r.html#fig:rpp-us-stationary-vs-nonstationary">5.14</a> shows that the mean and volatility for the house price index are not stable, rendering them useless for making predictions or understanding typical behavior. In contrast, the mean and volatility of the growth rate are stable and thus provide insights.</p>
<p>The R code for generating Figure <a href="process-data-in-r.html#fig:rpp-us-stationary-vs-nonstationary">5.14</a> is detailed below.</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="process-data-in-r.html#cb1006-1" tabindex="-1"></a><span class="co"># Load package</span></span>
<span id="cb1006-2"><a href="process-data-in-r.html#cb1006-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb1006-3"><a href="process-data-in-r.html#cb1006-3" tabindex="-1"></a></span>
<span id="cb1006-4"><a href="process-data-in-r.html#cb1006-4" tabindex="-1"></a>BIS_t <span class="sc">%&gt;%</span></span>
<span id="cb1006-5"><a href="process-data-in-r.html#cb1006-5" tabindex="-1"></a>    <span class="fu">group_by</span>(Region, Indicator, Measure, Transformation) <span class="sc">%&gt;%</span> </span>
<span id="cb1006-6"><a href="process-data-in-r.html#cb1006-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">SD =</span> <span class="fu">sd</span>(Value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1006-7"><a href="process-data-in-r.html#cb1006-7" tabindex="-1"></a>    <span class="fu">filter</span>(Region <span class="sc">==</span> <span class="st">&quot;United States&quot;</span>, </span>
<span id="cb1006-8"><a href="process-data-in-r.html#cb1006-8" tabindex="-1"></a>           Indicator <span class="sc">==</span> <span class="st">&quot;Residential Property Prices&quot;</span>,</span>
<span id="cb1006-9"><a href="process-data-in-r.html#cb1006-9" tabindex="-1"></a>           Measure <span class="sc">==</span> <span class="st">&quot;Real&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1006-10"><a href="process-data-in-r.html#cb1006-10" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Period, <span class="at">y =</span> Value)) <span class="sc">+</span></span>
<span id="cb1006-11"><a href="process-data-in-r.html#cb1006-11" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb1006-12"><a href="process-data-in-r.html#cb1006-12" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> Mean), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb1006-13"><a href="process-data-in-r.html#cb1006-13" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> Mean <span class="sc">+</span> SD), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb1006-14"><a href="process-data-in-r.html#cb1006-14" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> Mean <span class="sc">-</span> SD), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb1006-15"><a href="process-data-in-r.html#cb1006-15" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Mean:&quot;</span>, <span class="fu">round</span>(Mean, <span class="dv">2</span>)), </span>
<span id="cb1006-16"><a href="process-data-in-r.html#cb1006-16" tabindex="-1"></a>                  <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> <span class="fu">min</span>(Value)), </span>
<span id="cb1006-17"><a href="process-data-in-r.html#cb1006-17" tabindex="-1"></a>              <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">1.5</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb1006-18"><a href="process-data-in-r.html#cb1006-18" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Volatility (Standard Deviation):&quot;</span>, <span class="fu">round</span>(SD, <span class="dv">2</span>)), </span>
<span id="cb1006-19"><a href="process-data-in-r.html#cb1006-19" tabindex="-1"></a>                  <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> <span class="fu">min</span>(Value)), </span>
<span id="cb1006-20"><a href="process-data-in-r.html#cb1006-20" tabindex="-1"></a>              <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb1006-21"><a href="process-data-in-r.html#cb1006-21" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(Transformation), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb1006-22"><a href="process-data-in-r.html#cb1006-22" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;U.S. Residential Property Prices&quot;</span>)</span></code></pre></div>
<p>Here is the explanation of the code step-by-step:</p>
<ol style="list-style-type: decimal">
<li><strong>Load package</strong>
<ul>
<li><code>library("ggplot2")</code>: Loads the ggplot2 package for data visualization.</li>
</ul></li>
<li><strong>Data Preparation</strong>
<ul>
<li><code>group_by(Region, Indicator, Measure, Transformation)</code>: Groups the data by several variables: “Region,” “Indicator,” “Measure,” and “Transformation.”</li>
<li><code>mutate(Mean = mean(Value, na.rm = TRUE), SD = sd(Value, na.rm = TRUE))</code>: Calculates the mean and standard deviation of ‘Value’ for each group.</li>
<li><code>filter(Region == "United States", Indicator == "Residential Property Prices", Measure == "Real")</code>: Filters the data to include only observations related to real residential property prices in the United States.</li>
</ul></li>
<li><strong>Plotting</strong>
<ul>
<li><code>ggplot(aes(x = Period, y = Value))</code>: Initializes ggplot and sets ‘Period’ as the x-axis and ‘Value’ as the y-axis.</li>
<li><code>geom_line()</code>: Adds a line to the plot to represent the time series data.</li>
<li><code>geom_hline(...)</code>: Adds horizontal lines to indicate the mean and standard deviation.</li>
<li><code>geom_text(...)</code>: Adds text to the plot for the mean and standard deviation.</li>
<li><code>facet_wrap(facets = vars(Transformation), scales = "free")</code>: Separates the plot into subplots based on the “Transformation” variable (Level or Growth), allowing for different y-axis scales.</li>
<li><code>ggtitle("U.S. Residential Property Prices")</code>: Adds a title to the plot.</li>
</ul></li>
</ol>
<p>The resulting plot will show the time series data along with red lines indicating the mean and blue dashed lines showing one standard deviation above and below the mean. The purpose is to illustrate that while the growth rate series might be stationary (constant mean and variance over time), the house price index itself is not. Therefore, the latter is not suitable for predictions based on historical mean and volatility.</p>
<p>Because of these considerations, we’ll focus on stationary variables. The <code>BIS_stationary</code> dataset is created to include only these variables. We filter out only the growth transformations for “Residential Property Prices” and “Consumer Price Index,” as well as the level for “Policy Rate.”</p>
<div class="sourceCode" id="cb1007"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1007-1"><a href="process-data-in-r.html#cb1007-1" tabindex="-1"></a><span class="co"># Select stationary variables</span></span>
<span id="cb1007-2"><a href="process-data-in-r.html#cb1007-2" tabindex="-1"></a>BIS_stationary <span class="ot">&lt;-</span> BIS_t <span class="sc">%&gt;%</span> </span>
<span id="cb1007-3"><a href="process-data-in-r.html#cb1007-3" tabindex="-1"></a>    <span class="fu">filter</span>((Indicator <span class="sc">==</span> <span class="st">&quot;Residential Property Prices&quot;</span> <span class="sc">&amp;</span> Transformation <span class="sc">==</span> <span class="st">&quot;Growth&quot;</span>)<span class="sc">|</span></span>
<span id="cb1007-4"><a href="process-data-in-r.html#cb1007-4" tabindex="-1"></a>               (Indicator <span class="sc">==</span> <span class="st">&quot;Consumer Price Index&quot;</span> <span class="sc">&amp;</span> Transformation <span class="sc">==</span> <span class="st">&quot;Growth&quot;</span>)<span class="sc">|</span></span>
<span id="cb1007-5"><a href="process-data-in-r.html#cb1007-5" tabindex="-1"></a>               (Indicator <span class="sc">==</span> <span class="st">&quot;Policy Rate&quot;</span> <span class="sc">&amp;</span> Transformation <span class="sc">==</span> <span class="st">&quot;Level&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1007-6"><a href="process-data-in-r.html#cb1007-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Transformation =</span> <span class="cn">NULL</span>,</span>
<span id="cb1007-7"><a href="process-data-in-r.html#cb1007-7" tabindex="-1"></a>           <span class="at">Indicator =</span> <span class="fu">case_when</span>(</span>
<span id="cb1007-8"><a href="process-data-in-r.html#cb1007-8" tabindex="-1"></a>               Indicator <span class="sc">==</span> <span class="st">&quot;Residential Property Prices&quot;</span> <span class="sc">~</span> <span class="st">&quot;RPP Inflation&quot;</span>,</span>
<span id="cb1007-9"><a href="process-data-in-r.html#cb1007-9" tabindex="-1"></a>               Indicator <span class="sc">==</span> <span class="st">&quot;Consumer Price Index&quot;</span> <span class="sc">~</span> <span class="st">&quot;CPI Inflation&quot;</span>,</span>
<span id="cb1007-10"><a href="process-data-in-r.html#cb1007-10" tabindex="-1"></a>               <span class="at">.default =</span> Indicator))</span></code></pre></div>
<p>To simplify the dataset, we incorporate the information from the <code>Measure</code> column into the variable names and remove the <code>Measure</code> column. This leads to clearer variable names like “Real RPP Inflation” instead of just “RPP Inflation.”</p>
<div class="sourceCode" id="cb1008"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1008-1"><a href="process-data-in-r.html#cb1008-1" tabindex="-1"></a><span class="co"># Create the BIS_core dataset</span></span>
<span id="cb1008-2"><a href="process-data-in-r.html#cb1008-2" tabindex="-1"></a>BIS_stationary <span class="ot">&lt;-</span> BIS_stationary <span class="sc">%&gt;%</span> </span>
<span id="cb1008-3"><a href="process-data-in-r.html#cb1008-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Indicator =</span> <span class="fu">ifelse</span>(<span class="at">test =</span> Indicator <span class="sc">==</span> <span class="st">&quot;CPI Inflation&quot;</span>, </span>
<span id="cb1008-4"><a href="process-data-in-r.html#cb1008-4" tabindex="-1"></a>                              <span class="at">yes =</span> Indicator, </span>
<span id="cb1008-5"><a href="process-data-in-r.html#cb1008-5" tabindex="-1"></a>                              <span class="at">no =</span> <span class="fu">paste</span>(Measure, Indicator))) <span class="sc">%&gt;%</span> </span>
<span id="cb1008-6"><a href="process-data-in-r.html#cb1008-6" tabindex="-1"></a>    <span class="fu">select</span>(Period, Indicator, Region, Value)</span></code></pre></div>
<p>This approach ensures that our subsequent analyses are based on stationary time series, making the statistical measures meaningful for inference and prediction.</p>
</div>
<div id="process-house-price-data-export-data" class="section level3 hasAnchor" number="5.3.9">
<h3><span class="header-section-number">5.3.9</span> Export Data<a href="process-data-in-r.html#process-house-price-data-export-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section outlines the methods to export the processed residential property price (RPP) and policy rate data for further analysis or sharing. Three formats are covered: RDS, DSV, and Excel workbooks. Each format has its pros and cons. As discussed previously in Chapter <a href="process-data-in-r.html#process-bitcoin-price-data-export-data">5.1.6</a>, DSV files are more compatible than RDS files but lack the ability to preserve all data types and attributes, while RDS files do. The advantage of Excel workbooks over DSV files is that they can contain multiple datasets in one file, but they are less efficient and use more storage.</p>
<p>First, we capture the source information for the datasets, using the <code>tribble()</code> function to create a tibble.</p>
<div class="sourceCode" id="cb1009"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1009-1"><a href="process-data-in-r.html#cb1009-1" tabindex="-1"></a><span class="co"># Source of data</span></span>
<span id="cb1009-2"><a href="process-data-in-r.html#cb1009-2" tabindex="-1"></a>BIS_source <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb1009-3"><a href="process-data-in-r.html#cb1009-3" tabindex="-1"></a>    <span class="sc">~</span>Data, <span class="sc">~</span>Source, <span class="sc">~</span>Documentation,</span>
<span id="cb1009-4"><a href="process-data-in-r.html#cb1009-4" tabindex="-1"></a>    <span class="st">&quot;Residential Property Prices (RPP) by the Bank for International Settlements&quot;</span>, </span>
<span id="cb1009-5"><a href="process-data-in-r.html#cb1009-5" tabindex="-1"></a>    <span class="st">&quot;https://www.bis.org/statistics/pp.htm&quot;</span>,</span>
<span id="cb1009-6"><a href="process-data-in-r.html#cb1009-6" tabindex="-1"></a>    <span class="st">&quot;http://www.bis.org/statistics/pp_selected_documentation.pdf&quot;</span>,</span>
<span id="cb1009-7"><a href="process-data-in-r.html#cb1009-7" tabindex="-1"></a>    <span class="st">&quot;Policy Rates (PR) by the Bank for International Settlements (BIS)&quot;</span>, </span>
<span id="cb1009-8"><a href="process-data-in-r.html#cb1009-8" tabindex="-1"></a>    <span class="st">&quot;https://www.bis.org/statistics/cbpol.htm&quot;</span>,</span>
<span id="cb1009-9"><a href="process-data-in-r.html#cb1009-9" tabindex="-1"></a>    <span class="st">&quot;http://www.bis.org/statistics/cbpol/cbpol_doc.pdf&quot;</span>)</span></code></pre></div>
<div id="rds-1" class="section level4 unnumbered hasAnchor">
<h4>RDS<a href="process-data-in-r.html#rds-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To preserve all attributes and data types of an R object, the <code>saveRDS()</code> function is used. Below, we add the source data as an attribute and then save the object.</p>
<div class="sourceCode" id="cb1010"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1010-1"><a href="process-data-in-r.html#cb1010-1" tabindex="-1"></a><span class="co"># Attach source of data as attributes to the &quot;BIS_stationary&quot; object</span></span>
<span id="cb1010-2"><a href="process-data-in-r.html#cb1010-2" tabindex="-1"></a><span class="fu">attr</span>(BIS_stationary, <span class="st">&quot;source&quot;</span>) <span class="ot">&lt;-</span> BIS_source</span>
<span id="cb1010-3"><a href="process-data-in-r.html#cb1010-3" tabindex="-1"></a></span>
<span id="cb1010-4"><a href="process-data-in-r.html#cb1010-4" tabindex="-1"></a><span class="co"># Create a folder to store exported files</span></span>
<span id="cb1010-5"><a href="process-data-in-r.html#cb1010-5" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="at">path =</span> <span class="st">&quot;exported-files&quot;</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1010-6"><a href="process-data-in-r.html#cb1010-6" tabindex="-1"></a></span>
<span id="cb1010-7"><a href="process-data-in-r.html#cb1010-7" tabindex="-1"></a><span class="co"># Save as RDS file</span></span>
<span id="cb1010-8"><a href="process-data-in-r.html#cb1010-8" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object =</span> BIS_stationary, <span class="at">file =</span> <span class="st">&quot;exported-files/BIS_stationary.rds&quot;</span>)</span></code></pre></div>
<p>To validate the saved RDS, we read it back and check for identity with the original object.</p>
<div class="sourceCode" id="cb1011"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1011-1"><a href="process-data-in-r.html#cb1011-1" tabindex="-1"></a><span class="co"># Read saved RDS file</span></span>
<span id="cb1011-2"><a href="process-data-in-r.html#cb1011-2" tabindex="-1"></a>BIS_stationary_loaded <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">&quot;exported-files/BIS_stationary.rds&quot;</span>)</span>
<span id="cb1011-3"><a href="process-data-in-r.html#cb1011-3" tabindex="-1"></a><span class="fu">identical</span>(BIS_stationary, BIS_stationary_loaded)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb1013"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1013-1"><a href="process-data-in-r.html#cb1013-1" tabindex="-1"></a><span class="co"># Clean up</span></span>
<span id="cb1013-2"><a href="process-data-in-r.html#cb1013-2" tabindex="-1"></a><span class="fu">rm</span>(BIS_stationary_loaded)</span></code></pre></div>
</div>
<div id="dsv-1" class="section level4 unnumbered hasAnchor">
<h4>DSV<a href="process-data-in-r.html#dsv-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For broader software compatibility, DSV formats like CSV or TSV are advantageous. The <code>write.table()</code> or <code>write_delim()</code> functions can be used.</p>
<div class="sourceCode" id="cb1014"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1014-1"><a href="process-data-in-r.html#cb1014-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1014-2"><a href="process-data-in-r.html#cb1014-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;readr&quot;</span>)</span>
<span id="cb1014-3"><a href="process-data-in-r.html#cb1014-3" tabindex="-1"></a></span>
<span id="cb1014-4"><a href="process-data-in-r.html#cb1014-4" tabindex="-1"></a><span class="co"># Create folder for exported files</span></span>
<span id="cb1014-5"><a href="process-data-in-r.html#cb1014-5" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="at">path =</span> <span class="st">&quot;exported-files&quot;</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1014-6"><a href="process-data-in-r.html#cb1014-6" tabindex="-1"></a></span>
<span id="cb1014-7"><a href="process-data-in-r.html#cb1014-7" tabindex="-1"></a><span class="co"># Export BIS data as CSV file</span></span>
<span id="cb1014-8"><a href="process-data-in-r.html#cb1014-8" tabindex="-1"></a><span class="fu">write_delim</span>(<span class="at">x =</span> BIS_stationary, </span>
<span id="cb1014-9"><a href="process-data-in-r.html#cb1014-9" tabindex="-1"></a>            <span class="at">file =</span> <span class="st">&quot;exported-files/BIS_stationary.csv&quot;</span>, </span>
<span id="cb1014-10"><a href="process-data-in-r.html#cb1014-10" tabindex="-1"></a>            <span class="at">delim =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<p>The source information can also be saved as a separate CSV file.</p>
<div class="sourceCode" id="cb1015"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1015-1"><a href="process-data-in-r.html#cb1015-1" tabindex="-1"></a><span class="co"># Export source of BIS data as CSV file</span></span>
<span id="cb1015-2"><a href="process-data-in-r.html#cb1015-2" tabindex="-1"></a><span class="fu">write_delim</span>(<span class="at">x =</span> BIS_source, </span>
<span id="cb1015-3"><a href="process-data-in-r.html#cb1015-3" tabindex="-1"></a>            <span class="at">file =</span> <span class="st">&quot;exported-files/BIS_stationary_source.csv&quot;</span>, </span>
<span id="cb1015-4"><a href="process-data-in-r.html#cb1015-4" tabindex="-1"></a>            <span class="at">delim =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
</div>
<div id="excel-workbook" class="section level4 unnumbered hasAnchor">
<h4>Excel Workbook<a href="process-data-in-r.html#excel-workbook" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Excel workbooks offer the benefit of consolidating multiple datasets into one file. While the <code>readxl</code> package is often used for reading Excel files, it doesn’t support writing. Packages like <code>writexl</code> or <code>openxlsx</code> can be used to write Excel files.</p>
<p>The <code>write_xlsx()</code> function from the <code>writexl</code> package is used to export multiple data frames to an Excel workbook. Each data frame will be saved as a separate sheet in the workbook.</p>
<div class="sourceCode" id="cb1016"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1016-1"><a href="process-data-in-r.html#cb1016-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1016-2"><a href="process-data-in-r.html#cb1016-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;writexl&quot;</span>)</span>
<span id="cb1016-3"><a href="process-data-in-r.html#cb1016-3" tabindex="-1"></a></span>
<span id="cb1016-4"><a href="process-data-in-r.html#cb1016-4" tabindex="-1"></a><span class="co"># Create object with information about Excel sheets</span></span>
<span id="cb1016-5"><a href="process-data-in-r.html#cb1016-5" tabindex="-1"></a>BIS_sheet_content <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb1016-6"><a href="process-data-in-r.html#cb1016-6" tabindex="-1"></a>    <span class="sc">~</span><span class="st">`</span><span class="at">Excel Sheet</span><span class="st">`</span>, <span class="sc">~</span>Content,</span>
<span id="cb1016-7"><a href="process-data-in-r.html#cb1016-7" tabindex="-1"></a>    <span class="st">&quot;Content&quot;</span>, <span class="st">&quot;Information about Excel sheets&quot;</span>,</span>
<span id="cb1016-8"><a href="process-data-in-r.html#cb1016-8" tabindex="-1"></a>    <span class="st">&quot;Source&quot;</span>, <span class="st">&quot;Information about data source&quot;</span>, </span>
<span id="cb1016-9"><a href="process-data-in-r.html#cb1016-9" tabindex="-1"></a>    <span class="st">&quot;Raw&quot;</span>, <span class="st">&quot;Raw RPP and PR data stored in long format&quot;</span>, </span>
<span id="cb1016-10"><a href="process-data-in-r.html#cb1016-10" tabindex="-1"></a>    <span class="st">&quot;Transformed&quot;</span>, <span class="st">&quot;Transformed data&quot;</span>, </span>
<span id="cb1016-11"><a href="process-data-in-r.html#cb1016-11" tabindex="-1"></a>    <span class="st">&quot;Stationary&quot;</span>, <span class="st">&quot;Stationary data&quot;</span>)</span>
<span id="cb1016-12"><a href="process-data-in-r.html#cb1016-12" tabindex="-1"></a></span>
<span id="cb1016-13"><a href="process-data-in-r.html#cb1016-13" tabindex="-1"></a><span class="co"># Create folder for exported files</span></span>
<span id="cb1016-14"><a href="process-data-in-r.html#cb1016-14" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="at">path =</span> <span class="st">&quot;exported-files&quot;</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1016-15"><a href="process-data-in-r.html#cb1016-15" tabindex="-1"></a></span>
<span id="cb1016-16"><a href="process-data-in-r.html#cb1016-16" tabindex="-1"></a><span class="co"># Export data</span></span>
<span id="cb1016-17"><a href="process-data-in-r.html#cb1016-17" tabindex="-1"></a><span class="fu">write_xlsx</span>(<span class="at">x =</span> <span class="fu">list</span>(<span class="st">&quot;Content&quot;</span> <span class="ot">=</span> BIS_sheet_content,</span>
<span id="cb1016-18"><a href="process-data-in-r.html#cb1016-18" tabindex="-1"></a>                    <span class="st">&quot;Source&quot;</span> <span class="ot">=</span> BIS_source,</span>
<span id="cb1016-19"><a href="process-data-in-r.html#cb1016-19" tabindex="-1"></a>                    <span class="st">&quot;Raw&quot;</span> <span class="ot">=</span> BIS, </span>
<span id="cb1016-20"><a href="process-data-in-r.html#cb1016-20" tabindex="-1"></a>                    <span class="st">&quot;Transformed&quot;</span> <span class="ot">=</span> BIS_t, </span>
<span id="cb1016-21"><a href="process-data-in-r.html#cb1016-21" tabindex="-1"></a>                    <span class="st">&quot;Stationary&quot;</span> <span class="ot">=</span> BIS_stationary), </span>
<span id="cb1016-22"><a href="process-data-in-r.html#cb1016-22" tabindex="-1"></a>           <span class="at">path =</span> <span class="st">&quot;exported-files/BIS_stationary.xlsx&quot;</span>)</span></code></pre></div>
<p>Here’s what each parameter is doing:</p>
<ul>
<li><code>x = list(...)</code>: This list contains the data frames to be exported, each with a name that will become the Excel sheet name.
<ul>
<li><code>"Content" = BIS_sheet_content</code>: Exports the data frame <code>BIS_sheet_content</code> to a sheet named “Content”.</li>
<li><code>"Source" = BIS_source</code>: Exports the data frame <code>BIS_source</code> to a sheet named “Source”.</li>
<li><code>"Raw" = BIS</code>: Exports the data frame <code>BIS</code> to a sheet named “Raw”.</li>
<li><code>"Transformed" = BIS_t</code>: Exports the data frame <code>BIS_t</code> to a sheet named “Transformed”.</li>
<li><code>"Stationary" = BIS_stationary</code>: Exports the data frame <code>BIS_stationary</code> to a sheet named “Stationary”.</li>
</ul></li>
<li><code>path = "exported-files/BIS_stationary.xlsx"</code>: Specifies the directory and the name of the Excel workbook file to be created.</li>
</ul>
<p>So, the code will create an Excel workbook named <code>BIS_stationary.xlsx</code> in the <code>exported-files</code> directory. The workbook will contain five sheets: “Content”, “Source”, “Raw”, “Transformed”, and “Stationary”, each populated with the corresponding data frame.</p>
<p>Both <code>writexl</code> and <code>openxlsx</code> have merits. While <code>writexl</code> is simpler and more straightforward, <code>openxlsx</code> offers more features, such as advanced formatting and the inclusion of charts or images. Your choice between the two should depend on your specific needs.</p>
<p>Thus, you have multiple options for exporting your data, each with its own set of advantages and limitations. Choose the one that best suits your project requirements.</p>
</div>
</div>
<div id="organize-data" class="section level3 hasAnchor" number="5.3.10">
<h3><span class="header-section-number">5.3.10</span> Organize Data<a href="process-data-in-r.html#organize-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For focused analysis, we concentrate on three essential variables: Real RPP Inflation, CPI Inflation, and Real Policy Rate. We also narrow down the geographical scope to four key economic regions: the United States, the Euro Area, China, and Emerging Markets. This subset of the data will be stored in a new tibble, <code>BIS_core</code>.</p>
<p>It’s important to properly order and name categorical variables at this stage. Default sorting in tables or graphs is often alphabetical, which may not be ideal for our analytical purposes. To ensure meaningful representation in subsequent analyses, we convert the ‘Region’ and ‘Indicator’ columns into ordered factors.</p>
<p>Here’s how this is implemented:</p>
<div class="sourceCode" id="cb1017"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1017-1"><a href="process-data-in-r.html#cb1017-1" tabindex="-1"></a><span class="co"># Define regions of interest and their desired names</span></span>
<span id="cb1017-2"><a href="process-data-in-r.html#cb1017-2" tabindex="-1"></a>selected_regions <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb1017-3"><a href="process-data-in-r.html#cb1017-3" tabindex="-1"></a>    <span class="st">&quot;United States&quot;</span> <span class="ot">=</span> <span class="st">&quot;United States&quot;</span>,</span>
<span id="cb1017-4"><a href="process-data-in-r.html#cb1017-4" tabindex="-1"></a>    <span class="st">&quot;Euro area&quot;</span> <span class="ot">=</span> <span class="st">&quot;Euro Area&quot;</span>,</span>
<span id="cb1017-5"><a href="process-data-in-r.html#cb1017-5" tabindex="-1"></a>    <span class="st">&quot;China&quot;</span> <span class="ot">=</span> <span class="st">&quot;China&quot;</span>,</span>
<span id="cb1017-6"><a href="process-data-in-r.html#cb1017-6" tabindex="-1"></a>    <span class="st">&quot;Emerging market economies (aggregate)&quot;</span> <span class="ot">=</span> <span class="st">&quot;Emerging Markets&quot;</span></span>
<span id="cb1017-7"><a href="process-data-in-r.html#cb1017-7" tabindex="-1"></a>)</span>
<span id="cb1017-8"><a href="process-data-in-r.html#cb1017-8" tabindex="-1"></a></span>
<span id="cb1017-9"><a href="process-data-in-r.html#cb1017-9" tabindex="-1"></a><span class="co"># Define variables of interest and their desired names</span></span>
<span id="cb1017-10"><a href="process-data-in-r.html#cb1017-10" tabindex="-1"></a>selected_variables <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Real RPP Inflation&quot;</span> <span class="ot">=</span> <span class="st">&quot;Real RPP Inflation&quot;</span>, </span>
<span id="cb1017-11"><a href="process-data-in-r.html#cb1017-11" tabindex="-1"></a>                       <span class="st">&quot;CPI Inflation&quot;</span> <span class="ot">=</span> <span class="st">&quot;CPI Inflation&quot;</span>, </span>
<span id="cb1017-12"><a href="process-data-in-r.html#cb1017-12" tabindex="-1"></a>                       <span class="st">&quot;Real Policy Rate&quot;</span> <span class="ot">=</span> <span class="st">&quot;Real Policy Rate&quot;</span>)</span>
<span id="cb1017-13"><a href="process-data-in-r.html#cb1017-13" tabindex="-1"></a></span>
<span id="cb1017-14"><a href="process-data-in-r.html#cb1017-14" tabindex="-1"></a><span class="co"># Create the BIS_core dataset</span></span>
<span id="cb1017-15"><a href="process-data-in-r.html#cb1017-15" tabindex="-1"></a>BIS_core <span class="ot">&lt;-</span> BIS_stationary <span class="sc">%&gt;%</span> </span>
<span id="cb1017-16"><a href="process-data-in-r.html#cb1017-16" tabindex="-1"></a>    <span class="fu">filter</span>(Region <span class="sc">%in%</span> <span class="fu">names</span>(selected_regions),</span>
<span id="cb1017-17"><a href="process-data-in-r.html#cb1017-17" tabindex="-1"></a>           Indicator <span class="sc">%in%</span> <span class="fu">names</span>(selected_variables)) <span class="sc">%&gt;%</span> </span>
<span id="cb1017-18"><a href="process-data-in-r.html#cb1017-18" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Region =</span> <span class="fu">factor</span>(<span class="at">x =</span> Region,</span>
<span id="cb1017-19"><a href="process-data-in-r.html#cb1017-19" tabindex="-1"></a>                           <span class="at">levels =</span> <span class="fu">names</span>(selected_regions), </span>
<span id="cb1017-20"><a href="process-data-in-r.html#cb1017-20" tabindex="-1"></a>                           <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1017-21"><a href="process-data-in-r.html#cb1017-21" tabindex="-1"></a>           <span class="at">Indicator =</span> <span class="fu">factor</span>(<span class="at">x =</span> Indicator, </span>
<span id="cb1017-22"><a href="process-data-in-r.html#cb1017-22" tabindex="-1"></a>                              <span class="at">levels =</span> <span class="fu">names</span>(selected_variables), </span>
<span id="cb1017-23"><a href="process-data-in-r.html#cb1017-23" tabindex="-1"></a>                              <span class="at">ordered =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1017-24"><a href="process-data-in-r.html#cb1017-24" tabindex="-1"></a>    <span class="fu">arrange</span>(Indicator, Region)</span>
<span id="cb1017-25"><a href="process-data-in-r.html#cb1017-25" tabindex="-1"></a></span>
<span id="cb1017-26"><a href="process-data-in-r.html#cb1017-26" tabindex="-1"></a><span class="co"># Rename factor levels</span></span>
<span id="cb1017-27"><a href="process-data-in-r.html#cb1017-27" tabindex="-1"></a><span class="fu">levels</span>(BIS_core<span class="sc">$</span>Region) <span class="ot">&lt;-</span> selected_regions[<span class="fu">levels</span>(BIS_core<span class="sc">$</span>Region)]</span>
<span id="cb1017-28"><a href="process-data-in-r.html#cb1017-28" tabindex="-1"></a><span class="fu">levels</span>(BIS_core<span class="sc">$</span>Indicator) <span class="ot">&lt;-</span> selected_variables[<span class="fu">levels</span>(BIS_core<span class="sc">$</span>Indicator)]</span></code></pre></div>
<p>In summary, the <code>BIS_core</code> tibble now comprises only the variables and regions that are pertinent for subsequent analysis, and these are appropriately ordered and efficiently renamed for effective data presentation and interpretation.</p>
</div>
<div id="univariate-statistics" class="section level3 hasAnchor" number="5.3.11">
<h3><span class="header-section-number">5.3.11</span> Univariate Statistics<a href="process-data-in-r.html#univariate-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we present <strong>univariate statistics</strong> across different regions for CPI inflation, real home price inflation, and real policy rates. In the context of statistics, the term “univariate” refers to the analysis of a single variable without consideration of any other variables. Metrics like mean, standard deviation, minimum, and maximum are univariate statistics because they describe features of one variable in isolation. They summarize the central tendency, variability, and range of possible values for that single variable.</p>
<p>In contrast, <strong>associative statistics</strong> examine relationships between two or more variables, which will be discussed in the next section. Correlation coefficients, covariances, and regression coefficients are examples of associative statistics. These metrics help us understand how variables interact with each other or how one variable might predict another.</p>
<p>For the univariate statistics, we group the data by region, variable, and measure, then calculate summary statistics for each group, consisting of the time span, mean, and volatility.</p>
<div class="sourceCode" id="cb1018"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1018-1"><a href="process-data-in-r.html#cb1018-1" tabindex="-1"></a><span class="co"># Compute univariate statistics</span></span>
<span id="cb1018-2"><a href="process-data-in-r.html#cb1018-2" tabindex="-1"></a>BIS_univariate_stats <span class="ot">&lt;-</span> BIS_core <span class="sc">%&gt;%</span> </span>
<span id="cb1018-3"><a href="process-data-in-r.html#cb1018-3" tabindex="-1"></a>    <span class="fu">group_by</span>(Indicator, Region) <span class="sc">%&gt;%</span> </span>
<span id="cb1018-4"><a href="process-data-in-r.html#cb1018-4" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb1018-5"><a href="process-data-in-r.html#cb1018-5" tabindex="-1"></a>        <span class="st">`</span><span class="at">Time Span</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">range</span>(Period), <span class="at">collapse =</span> <span class="st">&quot; - &quot;</span>),</span>
<span id="cb1018-6"><a href="process-data-in-r.html#cb1018-6" tabindex="-1"></a>        <span class="at">Mean =</span> <span class="fu">mean</span>(Value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1018-7"><a href="process-data-in-r.html#cb1018-7" tabindex="-1"></a>        <span class="at">Volatility =</span> <span class="fu">sd</span>(Value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1018-8"><a href="process-data-in-r.html#cb1018-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb1018-9"><a href="process-data-in-r.html#cb1018-9" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span></code></pre></div>
<p>In this R code block, the goal is to calculate univariate statistics for the dataset <code>BIS_core</code>:</p>
<ul>
<li><code>group_by(Indicator, Region)</code>: This function groups the data by the <code>Indicator</code> and <code>Region</code> variables. This ensures that the following calculations are done separately for each combination of <code>Indicator</code> and <code>Region</code>.</li>
<li><code>summarize()</code>: This function is used to compute summary statistics for each group. Three statistics are calculated:
<ul>
<li><code>Time Span</code>: It calculates the range of the <code>Period</code> for which data exists. The <code>paste()</code> and <code>collapse</code> functions are used to concatenate the minimum and maximum period into a string.</li>
<li><code>Mean</code>: The mean of the <code>Value</code> column is calculated with <code>na.rm = TRUE</code>, which means that missing values are ignored.</li>
<li><code>Volatility</code>: The standard deviation (a measure of volatility) of the <code>Value</code> column is also calculated, ignoring missing values (<code>na.rm = TRUE</code>).</li>
</ul></li>
<li><code>ungroup()</code>: Finally, the <code>ungroup()</code> function removes the grouping, resulting in a new tibble <code>BIS_univariate_stats</code> that contains the computed univariate statistics for each <code>Indicator</code> and <code>Region</code> combination.</li>
</ul>
<p>By the end of this operation, the <code>BIS_univariate_stats</code> tibble will have a comprehensive view of univariate statistics across the selected indicators and regions, facilitating a straightforward interpretation of each variable’s central tendency and variability within specific economic contexts.</p>
<p>We use the <code>kable()</code> and <code>kableExtra()</code> functions from the <code>knitr</code> <span class="citation">(<a href="#ref-R-knitr">Xie 2023</a>)</span> and <code>kableExtra</code> <span class="citation">(<a href="#ref-R-kableExtra">Zhu 2024</a>)</span> packages to display the univariate statistics in a table. The metrics are rounded to two decimal places for better readability.</p>
<div class="sourceCode" id="cb1019"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1019-1"><a href="process-data-in-r.html#cb1019-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1019-2"><a href="process-data-in-r.html#cb1019-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;knitr&quot;</span>)</span>
<span id="cb1019-3"><a href="process-data-in-r.html#cb1019-3" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;kableExtra&quot;</span>)</span>
<span id="cb1019-4"><a href="process-data-in-r.html#cb1019-4" tabindex="-1"></a></span>
<span id="cb1019-5"><a href="process-data-in-r.html#cb1019-5" tabindex="-1"></a><span class="co"># Render table using kable and kableExtra</span></span>
<span id="cb1019-6"><a href="process-data-in-r.html#cb1019-6" tabindex="-1"></a>BIS_univariate_stats <span class="sc">%&gt;%</span> </span>
<span id="cb1019-7"><a href="process-data-in-r.html#cb1019-7" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Mean =</span> <span class="fu">round</span>(Mean, <span class="dv">2</span>), </span>
<span id="cb1019-8"><a href="process-data-in-r.html#cb1019-8" tabindex="-1"></a>           <span class="at">Volatility =</span> <span class="fu">round</span>(Volatility, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1019-9"><a href="process-data-in-r.html#cb1019-9" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">`</span><span class="at">Indicator$^*$</span><span class="st">`</span> <span class="ot">=</span> Indicator) <span class="sc">%&gt;%</span> </span>
<span id="cb1019-10"><a href="process-data-in-r.html#cb1019-10" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">&quot;Univariate Statistics&quot;</span>,</span>
<span id="cb1019-11"><a href="process-data-in-r.html#cb1019-11" tabindex="-1"></a>          <span class="at">booktabs =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1019-12"><a href="process-data-in-r.html#cb1019-12" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1019-13"><a href="process-data-in-r.html#cb1019-13" tabindex="-1"></a>                  <span class="at">latex_options =</span> <span class="fu">c</span>(<span class="st">&quot;hold_position&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1019-14"><a href="process-data-in-r.html#cb1019-14" tabindex="-1"></a>    <span class="fu">add_footnote</span>(<span class="at">label =</span> <span class="st">&quot;$^*$Annualized Quarterly Rates in Percent&quot;</span>, </span>
<span id="cb1019-15"><a href="process-data-in-r.html#cb1019-15" tabindex="-1"></a>                 <span class="at">notation =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p>Here’s a breakdown of the code:</p>
<ul>
<li><code>library("knitr")</code> and <code>library("kableExtra")</code> load the necessary packages for table rendering and customization.</li>
<li><code>mutate(Mean = round(Mean, 2), Volatility = round(Volatility, 2))</code>: Rounds the <code>Mean</code> and <code>Volatility</code> to two decimal places for better readability.</li>
<li><code>rename('Indicator$^*$' = Indicator)</code>: Renames the <code>Indicator</code> column for special footnote notation.</li>
<li><code>kable(caption = "Univariate Statistics", booktabs = TRUE)</code>: Uses the <code>kable()</code> function to create the initial table. The <code>caption</code> parameter adds a title to the table and <code>booktabs = TRUE</code> improves the table’s aesthetics.</li>
<li><code>kable_styling(full_width = FALSE, latex_options = c("hold_position"))</code>: Adjusts the table’s layout and positioning for PDF output.</li>
<li><code>add_footnote(label = "$^*$Annualized Quarterly Rates in Percent", notation = "none")</code>: Adds a footnote to clarify that the rates are annualized and expressed in percentages.</li>
</ul>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:bis-univariate-statistics">Table 5.10: </span>Univariate Statistics
</caption>
<thead>
<tr>
<th style="text-align:left;">
Indicator<span class="math inline">\(^*\)</span>
</th>
<th style="text-align:left;">
Region
</th>
<th style="text-align:left;">
Time Span
</th>
<th style="text-align:right;">
Mean
</th>
<th style="text-align:right;">
Volatility
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
1970 Q2 - 2023 Q2
</td>
<td style="text-align:right;">
1.79
</td>
<td style="text-align:right;">
6.48
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
1975 Q2 - 2023 Q1
</td>
<td style="text-align:right;">
1.26
</td>
<td style="text-align:right;">
4.68
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
5.84
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
1.27
</td>
<td style="text-align:right;">
2.86
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
1970 Q2 - 2023 Q2
</td>
<td style="text-align:right;">
3.91
</td>
<td style="text-align:right;">
3.40
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
1975 Q2 - 2023 Q1
</td>
<td style="text-align:right;">
3.77
</td>
<td style="text-align:right;">
3.74
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
2.44
</td>
<td style="text-align:right;">
3.74
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
4.27
</td>
<td style="text-align:right;">
2.39
</td>
</tr>
<tr>
<td style="text-align:left;">
Real Policy Rate
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
1970 Q2 - 2023 Q2
</td>
<td style="text-align:right;">
1.02
</td>
<td style="text-align:right;">
3.49
</td>
</tr>
<tr>
<td style="text-align:left;">
Real Policy Rate
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
1999 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
-0.50
</td>
<td style="text-align:right;">
3.24
</td>
</tr>
<tr>
<td style="text-align:left;">
Real Policy Rate
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
2.77
</td>
<td style="text-align:right;">
3.65
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup></sup> <span class="math inline">\(^*\)</span>Annualized Quarterly Rates in Percent
</td>
</tr>
</tfoot>
</table>
<p>The resulting Table <a href="process-data-in-r.html#tab:bis-univariate-statistics">5.10</a> summarizes the annualized quarterly percentage rates for key economic variables in selected regions. These univariate statistics offer a fundamental understanding of individual variable behavior across different regions, setting the stage for more nuanced analyses. The subsequent analysis will involve comparing these variables using associative statistics.</p>
</div>
<div id="associative-statistics" class="section level3 hasAnchor" number="5.3.12">
<h3><span class="header-section-number">5.3.12</span> Associative Statistics<a href="process-data-in-r.html#associative-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section outlines methods for exploring associative statistics within economic data, focusing on relationships across the dimensions of “Period,” “Indicator,” and “Region.”</p>
<div id="types-of-relationships" class="section level4 unnumbered hasAnchor">
<h4>Types of Relationships<a href="process-data-in-r.html#types-of-relationships" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The data is categorized into three primary dimensions: “Period”, “Indicator”, and “Region.” These categories allow us to examine relationships in different ways:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Relationships Between <span style="color: red;">Regions</span> by <span style="color: green;">Indicator</span> Across <span style="color: blue;">Time Periods</span></strong>: This type of relationship examines how a single economic indicator, such as inflation, varies between different regions over multiple time periods. For instance, one might explore how inflation rates in the United States relate to those in the Euro area over a span of several years.</p></li>
<li><p><strong>Relationships Between <span style="color: red;">Indicators</span> by <span style="color: green;">Region</span> Across <span style="color: blue;">Time Periods</span></strong>: This focuses on a specific region and analyzes how different indicators are interrelated within it. Time-series data is again used to estimate these relationships. As an example, within the United States, one could investigate the relationship between inflation and interest rates over time.</p></li>
<li><p><strong>Relationships Between <span style="color: red;">Indicators</span> by <span style="color: green;">Time Period</span> Across <span style="color: blue;">Regions</span></strong>: This approach focuses on a single time period and assesses how different indicators correlate across multiple regions. Unlike the previous types, this uses cross-sectional data from different regions for a specific period. For example, in Q1 of 2023, you could analyze how inflation rates correlate with unemployment rates across different regions.</p></li>
</ol>
<p>Additional types of relationships are possible; any combination of “Period,” “Indicator,” and “Region” can be explored. The first type will be the focus of this section.</p>
</div>
<div id="cross-join-data" class="section level4 unnumbered hasAnchor">
<h4>Cross-join Data<a href="process-data-in-r.html#cross-join-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To carry out the analysis, a <strong>cross-join</strong> is needed to restructure the data. This operation pairs every data point in one region with every data point in another region for each time period and indicator.</p>
<p>Table <a href="process-data-in-r.html#tab:bis-original-by-period-indicator">5.11</a> shows the data in its original long format, while Table <a href="process-data-in-r.html#tab:bis-scatter-by-period-indicator">5.12</a> illustrates the cross-joined data, which allows us to compute associative statistics between regions.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:bis-original-by-period-indicator">Table 5.11: </span>Snapshot of Original Data
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period
</th>
<th style="text-align:left;">
Indicator
</th>
<th style="text-align:left;">
Region
</th>
<th style="text-align:right;">
Value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:right;">
-5.21
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
-2.71
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:right;">
-1.85
</td>
</tr>
</tbody>
</table>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:bis-scatter-by-period-indicator">Table 5.12: </span>Snapshot of Cross-Joined Data
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period
</th>
<th style="text-align:left;">
Indicator
</th>
<th style="text-align:left;">
Region X
</th>
<th style="text-align:left;">
Region Y
</th>
<th style="text-align:right;">
Value X
</th>
<th style="text-align:right;">
Value Y
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:right;">
0.49
</td>
<td style="text-align:right;">
-5.21
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
0.49
</td>
<td style="text-align:right;">
-2.71
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:right;">
0.49
</td>
<td style="text-align:right;">
-1.85
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
-5.21
</td>
<td style="text-align:right;">
-2.71
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:right;">
-5.21
</td>
<td style="text-align:right;">
-1.85
</td>
</tr>
<tr>
<td style="text-align:left;">
2023 Q1
</td>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:right;">
-2.71
</td>
<td style="text-align:right;">
-1.85
</td>
</tr>
</tbody>
</table>
<p>A cross-join in database terminology is an operation that combines each row of the first table with every row of the second table. In the context of our analysis, a cross-join pairs every data point for a given economic indicator in one region with every data point for the same indicator in another region for each time period, as displayed in Table <a href="process-data-in-r.html#tab:bis-scatter-by-period-indicator">5.12</a>.</p>
<p>To execute a cross-join, first determine the shared columns between the tables to be joined. In this case, “Period” and “Indicator” serve as the common columns. After identifying these columns, use a merge function, such as <code>inner_join()</code> from the <code>dplyr</code> package, to merge a copy of the dataset with itself based on these columns.</p>
<p>For instance, to produce Table <a href="process-data-in-r.html#tab:bis-scatter-by-period-indicator">5.12</a> from Table <a href="process-data-in-r.html#tab:bis-original-by-period-indicator">5.11</a>, use the following code:</p>
<div class="sourceCode" id="cb1020"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1020-1"><a href="process-data-in-r.html#cb1020-1" tabindex="-1"></a><span class="co"># Cross-join regions by period &amp; indicator</span></span>
<span id="cb1020-2"><a href="process-data-in-r.html#cb1020-2" tabindex="-1"></a>BIS_scatter_by_period_indicator <span class="ot">&lt;-</span> BIS_core <span class="sc">%&gt;%</span> </span>
<span id="cb1020-3"><a href="process-data-in-r.html#cb1020-3" tabindex="-1"></a>    <span class="fu">inner_join</span>(BIS_core, </span>
<span id="cb1020-4"><a href="process-data-in-r.html#cb1020-4" tabindex="-1"></a>               <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;Period&quot;</span>, <span class="st">&quot;Indicator&quot;</span>),</span>
<span id="cb1020-5"><a href="process-data-in-r.html#cb1020-5" tabindex="-1"></a>               <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot; X&quot;</span>, <span class="st">&quot; Y&quot;</span>),</span>
<span id="cb1020-6"><a href="process-data-in-r.html#cb1020-6" tabindex="-1"></a>               <span class="at">relationship =</span> <span class="st">&quot;many-to-many&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1020-7"><a href="process-data-in-r.html#cb1020-7" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Value X</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Value Y</span><span class="st">`</span>, <span class="fu">everything</span>())</span></code></pre></div>
<p>Here’s a breakdown of what the code is doing:</p>
<ul>
<li><code>BIS_core %&gt;%</code>: This part takes the original <code>BIS_core</code> data table and pipes (<code>%&gt;%</code>) it into the following operations.</li>
<li><code>inner_join(BIS_core, by = c("Period", "Indicator"), suffix = c(" X", " Y"), relationship = "many-to-many")</code>: This line executes the cross-join. The first argument specifies that the table should join with itself. The <code>by</code> argument specifies that “Period” and “Indicator” are the common columns. The <code>suffix</code> argument adds a suffix (” X” or ” Y”) to the columns from each table to differentiate them. The <code>relationship = "many-to-many"</code> clarifies that multiple rows from the second table can be joined to a single row from the first table and vice versa.</li>
<li><code>select(-`Value X`, -`Value Y`, everything())</code>: This line rearranges the columns after the join, positioning <code>Value X</code> and <code>Value Y</code> at the end.</li>
</ul>
<p>The end result is stored in a new variable called <code>BIS_scatter_by_period_indicator</code>, which will contain the cross-joined data. This new table can then be used for subsequent analyses, such as computing correlations between different regions based on various economic indicators.</p>
<p>Since the goal here is to compute correlations, the order in which the regions appear doesn’t matter. In other words, a correlation between Region X as the U.S. and Region Y as China would yield the same result as one between Region X as China and Region Y as the U.S. Moreover, the correlation of a region with itself is always one and can be skipped. Therefore, subsequent data filtering is needed to eliminate such redundant pairings.</p>
<div class="sourceCode" id="cb1021"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1021-1"><a href="process-data-in-r.html#cb1021-1" tabindex="-1"></a><span class="co"># Remove duplicate combinations</span></span>
<span id="cb1021-2"><a href="process-data-in-r.html#cb1021-2" tabindex="-1"></a>BIS_scatter_by_period_indicator <span class="ot">&lt;-</span> BIS_scatter_by_period_indicator <span class="sc">%&gt;%</span> </span>
<span id="cb1021-3"><a href="process-data-in-r.html#cb1021-3" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="st">`</span><span class="at">Region Y</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="st">`</span><span class="at">Region X</span><span class="st">`</span>)</span></code></pre></div>
<p>The R code filters the <code>BIS_scatter_by_period_indicator</code> table to retain rows where the categorical value in <code>Region Y</code> is greater than that in <code>Region X</code>, as these are ordered factors. This step removes duplicate pairs, ensuring only one combination of any two regions remains, thus reducing redundancy.</p>
</div>
<div id="compute-correlations" class="section level4 unnumbered hasAnchor">
<h4>Compute Correlations<a href="process-data-in-r.html#compute-correlations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After restructuring the data, we can proceed to compute the correlation statistics.</p>
<div class="sourceCode" id="cb1022"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1022-1"><a href="process-data-in-r.html#cb1022-1" tabindex="-1"></a><span class="co"># Compute associative statistics across regions</span></span>
<span id="cb1022-2"><a href="process-data-in-r.html#cb1022-2" tabindex="-1"></a>BIS_scatter_by_period_indicator <span class="ot">&lt;-</span> BIS_scatter_by_period_indicator <span class="sc">%&gt;%</span> </span>
<span id="cb1022-3"><a href="process-data-in-r.html#cb1022-3" tabindex="-1"></a>    <span class="fu">group_by</span>(Indicator, <span class="st">`</span><span class="at">Region X</span><span class="st">`</span>, <span class="st">`</span><span class="at">Region Y</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1022-4"><a href="process-data-in-r.html#cb1022-4" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Time Span</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">paste</span>(<span class="fu">range</span>(Period), <span class="at">collapse =</span> <span class="st">&quot; - &quot;</span>),</span>
<span id="cb1022-5"><a href="process-data-in-r.html#cb1022-5" tabindex="-1"></a>           <span class="at">Correlation =</span> <span class="fu">cor</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Value X</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Value Y</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1022-6"><a href="process-data-in-r.html#cb1022-6" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span></code></pre></div>
<p>The R code calculates associative statistics for each combination of “Indicator,” “Region X,” and “Region Y” in the <code>BIS_scatter_by_period_indicator</code> table.</p>
<ul>
<li><code>group_by(Indicator, `Region X`, `Region Y`)</code>: Groups the data by the “Indicator,” “Region X,” and “Region Y” columns. This ensures that subsequent operations are performed within these groups.</li>
<li><code>mutate(...)</code>: Within each group, two new columns are created:
<ul>
<li><code>`Time Span` = paste(range(Period), collapse = " - ")</code>: Combines the minimum and maximum values of the <code>Period</code> column into a single string, separated by a dash.</li>
<li><code>Correlation = cor(x = `Value X`, y = `Value Y`))</code>: Computes the correlation between <code>Value X</code> and <code>Value Y</code>.</li>
</ul></li>
<li><code>ungroup()</code>: Removes the groupings, returning the data to its original structure but with the newly calculated columns added.</li>
</ul>
<p>The modified dataset, <code>BIS_scatter_by_period_indicator</code>, now includes columns for time spans and correlation coefficients.</p>
<p>To present these statistics in a table, the following R code is used:</p>
<div class="sourceCode" id="cb1023"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1023-1"><a href="process-data-in-r.html#cb1023-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1023-2"><a href="process-data-in-r.html#cb1023-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;knitr&quot;</span>)</span>
<span id="cb1023-3"><a href="process-data-in-r.html#cb1023-3" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;kableExtra&quot;</span>)</span>
<span id="cb1023-4"><a href="process-data-in-r.html#cb1023-4" tabindex="-1"></a></span>
<span id="cb1023-5"><a href="process-data-in-r.html#cb1023-5" tabindex="-1"></a><span class="co"># Render table using kable and kableExtra</span></span>
<span id="cb1023-6"><a href="process-data-in-r.html#cb1023-6" tabindex="-1"></a>BIS_scatter_by_period_indicator <span class="sc">%&gt;%</span> </span>
<span id="cb1023-7"><a href="process-data-in-r.html#cb1023-7" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Period, <span class="sc">-</span><span class="st">`</span><span class="at">Value X</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Value Y</span><span class="st">`</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb1023-8"><a href="process-data-in-r.html#cb1023-8" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Indicator</span><span class="st">`</span>, <span class="st">`</span><span class="at">Region X</span><span class="st">`</span>, <span class="st">`</span><span class="at">Region Y</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1023-9"><a href="process-data-in-r.html#cb1023-9" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1023-10"><a href="process-data-in-r.html#cb1023-10" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Correlation =</span> <span class="fu">round</span>(Correlation, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1023-11"><a href="process-data-in-r.html#cb1023-11" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">`</span><span class="at">Indicator$^*$</span><span class="st">`</span> <span class="ot">=</span> Indicator) <span class="sc">%&gt;%</span> </span>
<span id="cb1023-12"><a href="process-data-in-r.html#cb1023-12" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">&quot;Correlations Between Regions by Indicator Across Time Periods&quot;</span>,</span>
<span id="cb1023-13"><a href="process-data-in-r.html#cb1023-13" tabindex="-1"></a>          <span class="at">booktabs =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1023-14"><a href="process-data-in-r.html#cb1023-14" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1023-15"><a href="process-data-in-r.html#cb1023-15" tabindex="-1"></a>                  <span class="at">latex_options =</span> <span class="fu">c</span>(<span class="st">&quot;hold_position&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1023-16"><a href="process-data-in-r.html#cb1023-16" tabindex="-1"></a>    <span class="fu">add_footnote</span>(<span class="at">label =</span> <span class="st">&quot;$^*$Annualized Quarterly Rates in Percent&quot;</span>, </span>
<span id="cb1023-17"><a href="process-data-in-r.html#cb1023-17" tabindex="-1"></a>                 <span class="at">notation =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p>The R code carries out the following operations:</p>
<ul>
<li><code>select(-Period, -`Value X`, -`Value Y`)</code> omits the columns <code>Period</code>, <code>Value X</code>, and <code>Value Y</code>, focusing solely on <code>Correlation</code> and <code>Time Span</code>.</li>
<li><code>group_by(Indicator, `Region X`, `Region Y`)</code> sorts the data by <code>Indicator</code>, <code>Region X</code>, and <code>Region Y</code>.</li>
<li><code>slice(1)</code> selects the first row within each group, as <code>Correlation</code> and <code>Time Span</code> values are constant across the group.</li>
<li><code>mutate(Correlation = round(Correlation, 2))</code> rounds <code>Correlation</code> to two decimal places.</li>
<li><code>rename(Indicator$^*$ = Indicator)</code> renames <code>Indicator</code> to include a star for footnote annotation.</li>
<li><code>kable() and kable_styling()</code> employ the <code>kable</code> and <code>kableExtra</code> packages to format the table, including its caption and style.</li>
<li><code>add_footnote()</code> adds a footnote to the table.</li>
</ul>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:bis-associative-stats-by-period-indicator">Table 5.13: </span>Correlations Between Regions by Indicator Across Time Periods
</caption>
<thead>
<tr>
<th style="text-align:left;">
Indicator<span class="math inline">\(^*\)</span>
</th>
<th style="text-align:left;">
Region X
</th>
<th style="text-align:left;">
Region Y
</th>
<th style="text-align:left;">
Time Span
</th>
<th style="text-align:right;">
Correlation
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
1975 Q2 - 2023 Q1
</td>
<td style="text-align:right;">
0.31
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
-0.02
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
0.21
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
0.15
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
Real RPP Inflation
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
0.73
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
1975 Q2 - 2023 Q1
</td>
<td style="text-align:right;">
0.70
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
0.52
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
-0.29
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
0.27
</td>
</tr>
<tr>
<td style="text-align:left;">
CPI Inflation
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
Emerging Markets
</td>
<td style="text-align:left;">
2008 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
0.67
</td>
</tr>
<tr>
<td style="text-align:left;">
Real Policy Rate
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
1999 Q1 - 2023 Q1
</td>
<td style="text-align:right;">
0.63
</td>
</tr>
<tr>
<td style="text-align:left;">
Real Policy Rate
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
-0.01
</td>
</tr>
<tr>
<td style="text-align:left;">
Real Policy Rate
</td>
<td style="text-align:left;">
Euro Area
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2005 Q3 - 2023 Q1
</td>
<td style="text-align:right;">
-0.24
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup></sup> <span class="math inline">\(^*\)</span>Annualized Quarterly Rates in Percent
</td>
</tr>
</tfoot>
</table>
<p>The generated table, referred to as Table <a href="process-data-in-r.html#tab:bis-associative-stats-by-period-indicator">5.13</a>, displays the computed correlations between regions for different indicators over time.</p>
<p>By computing these statistics, we can identify how different economic indicators relate to each other across various dimensions: time periods, regions, and indicators themselves. This process forms the basis for more complex econometric analyses.</p>
</div>
</div>
<div id="layered-scatter-plots" class="section level3 hasAnchor" number="5.3.13">
<h3><span class="header-section-number">5.3.13</span> Layered Scatter Plots<a href="process-data-in-r.html#layered-scatter-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The correlations presented in Table <a href="process-data-in-r.html#tab:bis-associative-stats-by-period-indicator">5.13</a> warrant further investigation. To gain deeper insights and evaluate the influence of outliers, we employ scatter plots generated using the <code>ggplot2</code> package in R.</p>
<div class="sourceCode" id="cb1024"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1024-1"><a href="process-data-in-r.html#cb1024-1" tabindex="-1"></a><span class="co"># Load package</span></span>
<span id="cb1024-2"><a href="process-data-in-r.html#cb1024-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb1024-3"><a href="process-data-in-r.html#cb1024-3" tabindex="-1"></a></span>
<span id="cb1024-4"><a href="process-data-in-r.html#cb1024-4" tabindex="-1"></a><span class="co"># Global minimum and maximum value</span></span>
<span id="cb1024-5"><a href="process-data-in-r.html#cb1024-5" tabindex="-1"></a>global_min_max <span class="ot">&lt;-</span> <span class="fu">range</span>(BIS_scatter_by_period_indicator<span class="sc">$</span><span class="st">`</span><span class="at">Value X</span><span class="st">`</span>)</span>
<span id="cb1024-6"><a href="process-data-in-r.html#cb1024-6" tabindex="-1"></a></span>
<span id="cb1024-7"><a href="process-data-in-r.html#cb1024-7" tabindex="-1"></a><span class="co"># Make scatter plots between regions by indicator</span></span>
<span id="cb1024-8"><a href="process-data-in-r.html#cb1024-8" tabindex="-1"></a>BIS_scatter_by_period_indicator <span class="sc">%&gt;%</span></span>
<span id="cb1024-9"><a href="process-data-in-r.html#cb1024-9" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Decade =</span> <span class="fu">factor</span>(<span class="dv">10</span> <span class="sc">*</span> <span class="fu">floor</span>(<span class="fu">as.numeric</span>(<span class="fu">format</span>(Period, <span class="st">&quot;%Y&quot;</span>)) <span class="sc">/</span> <span class="dv">10</span>),</span>
<span id="cb1024-10"><a href="process-data-in-r.html#cb1024-10" tabindex="-1"></a>                           <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1024-11"><a href="process-data-in-r.html#cb1024-11" tabindex="-1"></a>           <span class="at">Decade =</span> <span class="fu">factor</span>(Decade, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">levels</span>(Decade)))) <span class="sc">%&gt;%</span> </span>
<span id="cb1024-12"><a href="process-data-in-r.html#cb1024-12" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="st">`</span><span class="at">Region X</span><span class="st">`</span> <span class="sc">==</span> <span class="st">&quot;United States&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1024-13"><a href="process-data-in-r.html#cb1024-13" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Value X</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Value Y</span><span class="st">`</span>, <span class="at">color =</span> Decade)) <span class="sc">+</span></span>
<span id="cb1024-14"><a href="process-data-in-r.html#cb1024-14" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb1024-15"><a href="process-data-in-r.html#cb1024-15" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1024-16"><a href="process-data-in-r.html#cb1024-16" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(<span class="st">`</span><span class="at">Region Y</span><span class="st">`</span>), </span>
<span id="cb1024-17"><a href="process-data-in-r.html#cb1024-17" tabindex="-1"></a>               <span class="at">cols =</span> <span class="fu">vars</span>(<span class="st">`</span><span class="at">Indicator</span><span class="st">`</span>, <span class="st">`</span><span class="at">Region X</span><span class="st">`</span>),</span>
<span id="cb1024-18"><a href="process-data-in-r.html#cb1024-18" tabindex="-1"></a>               <span class="at">scales =</span> <span class="st">&quot;fixed&quot;</span>) <span class="sc">+</span></span>
<span id="cb1024-19"><a href="process-data-in-r.html#cb1024-19" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;right&quot;</span>,</span>
<span id="cb1024-20"><a href="process-data-in-r.html#cb1024-20" tabindex="-1"></a>          <span class="at">legend.justification =</span> <span class="st">&quot;left&quot;</span>) <span class="sc">+</span></span>
<span id="cb1024-21"><a href="process-data-in-r.html#cb1024-21" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="at">ncol =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb1024-22"><a href="process-data-in-r.html#cb1024-22" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Region Y</span><span class="st">`</span>, <span class="st">`</span><span class="at">Region X</span><span class="st">`</span>, <span class="st">`</span><span class="at">Indicator</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>),</span>
<span id="cb1024-23"><a href="process-data-in-r.html#cb1024-23" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Correlation: &quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, Correlation)), </span>
<span id="cb1024-24"><a href="process-data-in-r.html#cb1024-24" tabindex="-1"></a>                  <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> <span class="sc">-</span><span class="cn">Inf</span>),</span>
<span id="cb1024-25"><a href="process-data-in-r.html#cb1024-25" tabindex="-1"></a>              <span class="at">hjust =</span> <span class="fl">1.1</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb1024-26"><a href="process-data-in-r.html#cb1024-26" tabindex="-1"></a>    <span class="fu">xlim</span>(global_min_max[<span class="dv">1</span>], global_min_max[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb1024-27"><a href="process-data-in-r.html#cb1024-27" tabindex="-1"></a>    <span class="fu">ylim</span>(global_min_max[<span class="dv">1</span>], global_min_max[<span class="dv">2</span>])</span></code></pre></div>
<p>Here’s what each part of the code does:</p>
<ul>
<li><code>library("ggplot2")</code>: Loads the <code>ggplot2</code> package for data visualization.</li>
<li><code>global_min_max &lt;- range(BIS_scatter_by_period_indicator$</code>Value X<code>)</code>: Determines the global minimum and maximum for <code>Value X</code> to set plot limits.</li>
<li><code>mutate(Decade = factor(...))</code>: Creates a new column <code>Decade</code>, categorizing each period into its respective decade.</li>
<li><code>filter(`Region X` == "United States")</code>: Filters the data to only include rows where <code>Region X</code> is the United States.</li>
<li><code>ggplot(aes(...))</code>: Initiates the ggplot object, setting the aesthetics for plotting <code>Value X</code> and <code>Value Y</code>, colored by <code>Decade</code>.</li>
<li><code>geom_smooth(...)</code>: Adds a linear model (lm) smooth line to the scatter plot.</li>
<li><code>geom_point(...)</code>: Adds points to the scatter plot.</li>
<li><code>facet_grid(...)</code>: Facets the plot by <code>Region Y</code> and <code>Indicator</code>, keeping <code>Region X</code> as a constant (United States in this case).</li>
<li><code>theme(...)</code> and <code>guides(...)</code> : Adjusts the legend and its position.</li>
<li><code>geom_text(...)</code>: Adds text labels displaying the correlation coefficient for each plot.</li>
<li><code>xlim(...)</code> and <code>ylim(...)</code> : Sets the x and y limits of the plots based on the global min-max values.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:bis-scatter-plot-by-period-indicator"></span>
<img src="_main_files/figure-html/bis-scatter-plot-by-period-indicator-1.png" alt="Correlations Between Regions by Indicator Across Time Periods" width="100%" />
<p class="caption">
Figure 5.15: Correlations Between Regions by Indicator Across Time Periods
</p>
</div>
<p>The result, shown in Figure <a href="process-data-in-r.html#fig:bis-scatter-plot-by-period-indicator">5.15</a>, is a multi-faceted scatter plot organized by regions and indicators, providing a more comprehensive view of how economic variables correlate with each other over time. Each scatter plot has a text label indicating its correlation value, and the color scheme represents different decades, offering additional layers of analysis.</p>
</div>
</div>
<div id="process-data-resources" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Resources<a href="process-data-in-r.html#process-data-resources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter has provided insights into multiple ways of importing, saving, and downloading data using various APIs. To further enhance your knowledge and skills in importing data in R, consider the following <a href="https://learn.datacamp.com/" target="_blank">DataCamp</a> courses:</p>
<ul>
<li><a href="https://learn.datacamp.com/courses/importing-and-managing-financial-data-in-r" target="_blank">Importing and Managing Financial Data in R</a>: Gain a solid understanding of how to import and manage financial data in R.</li>
<li><a href="https://learn.datacamp.com/courses/intermediate-importing-data-in-r" target="_blank">Intermediate Importing Data in R</a>: Build upon your data importing skills and learn how to handle larger and more complex datasets.</li>
<li><a href="https://learn.datacamp.com/courses/working-with-web-data-in-r" target="_blank">Working with Web Data in R</a>: Learn to process and analyze data from the web using R.</li>
<li><a href="https://app.datacamp.com/learn/courses/importing-and-managing-financial-data-in-r" target="_blank">Importing and Managing Financial Data in R</a>: Learn to download financial or economic time series data using Web APIs.</li>
</ul>

</div>
</div>
<h3><em>References</em><a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-data-bis-policy-rate" class="csl-entry">
Bank for International Settlements. 2023a. <span>“Policy Rate Statistics.”</span> <a href="https://www.bis.org/statistics/cbpol.htm">https://www.bis.org/statistics/cbpol.htm</a> (October 20, 2023). Compiled from central banks.
</div>
<div id="ref-data-bis-pp" class="csl-entry">
———. 2023b. <span>“Residential Property Price Database.”</span> <a href="https://www.bis.org/statistics/pp.htm">https://www.bis.org/statistics/pp.htm</a> (October 20, 2023). Compiled from national sources.
</div>
<div id="ref-data-bitstamp-btcusd" class="csl-entry">
Bitstamp. 2024. <span>“BTC/USD 2023 Minute Data.”</span> <a href="https://www.cryptodatadownload.com/cdd/Bitstamp_BTCUSD_2023_minute.csv">https://www.cryptodatadownload.com/cdd/Bitstamp_BTCUSD_2023_minute.csv</a> (July 3, 2024). Retrieved from CryptoDataDownload.
</div>
<div id="ref-R-quantmod" class="csl-entry">
Ryan, Jeffrey A., and Joshua M. Ulrich. 2024a. <em>Quantmod: Quantitative Financial Modelling Framework</em>. <a href="https://www.quantmod.com/">https://www.quantmod.com/</a>. R package version 0.4.26.
</div>
<div id="ref-R-readxl" class="csl-entry">
Wickham, Hadley, and Jennifer Bryan. 2023. <em>Readxl: Read Excel Files</em>. <a href="https://readxl.tidyverse.org">https://readxl.tidyverse.org</a>. R package version 1.4.3.
</div>
<div id="ref-R-ggplot2" class="csl-entry">
Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, Dewey Dunnington, and Teun van den Brand. 2024. <em>Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics</em>. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>. R package version 3.5.1.
</div>
<div id="ref-R-readr" class="csl-entry">
Wickham, Hadley, Jim Hester, and Jennifer Bryan. 2024. <em>Readr: Read Rectangular Text Data</em>. <a href="https://readr.tidyverse.org">https://readr.tidyverse.org</a>. R package version 2.1.5.
</div>
<div id="ref-R-knitr" class="csl-entry">
Xie, Yihui. 2023. <em>Knitr: A General-Purpose Package for Dynamic Report Generation in r</em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>. R package version 1.45.
</div>
<div id="ref-R-zoo" class="csl-entry">
Zeileis, Achim, Gabor Grothendieck, and Jeffrey A. Ryan. 2023. <em>Zoo: S3 Infrastructure for Regular and Irregular Time Series (z’s Ordered Observations)</em>. <a href="https://zoo.R-Forge.R-project.org/">https://zoo.R-Forge.R-project.org/</a>. R package version 1.8-12.
</div>
<div id="ref-R-kableExtra" class="csl-entry">
Zhu, Hao. 2024. <em>kableExtra: Construct Complex Table with Kable and Pipe Syntax</em>. <a href="http://haozhu233.github.io/kableExtra/">http://haozhu233.github.io/kableExtra/</a>. R package version 1.4.0.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-structures-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="write-reports-with-r-markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["eda.pdf", "PDF"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
